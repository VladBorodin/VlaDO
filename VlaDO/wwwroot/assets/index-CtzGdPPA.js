var LS=Object.defineProperty;var eb=s=>{throw TypeError(s)};var DS=(s,t,e)=>t in s?LS(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Jt=(s,t,e)=>DS(s,typeof t!="symbol"?t+"":t,e),Lg=(s,t,e)=>t.has(s)||eb("Cannot "+e);var y=(s,t,e)=>(Lg(s,t,"read from private field"),e?e.call(s):t.get(s)),q=(s,t,e)=>t.has(s)?eb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),H=(s,t,e,n)=>(Lg(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),$=(s,t,e)=>(Lg(s,t,"access private method"),e);var gn=(s,t,e,n)=>({set _(i){H(s,t,i,e)},get _(){return y(s,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:s,type:n,key:c,ref:i!==void 0?i:null,props:o}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=e,reactJsxRuntime_production.jsxs=e,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,R={};function P(B,z,K){this.props=B,this.context=z,this.refs=R,this.updater=K||A}P.prototype.isReactComponent={},P.prototype.setState=function(B,z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,z,"setState")},P.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function E(){}E.prototype=P.prototype;function T(B,z,K){this.props=B,this.context=z,this.refs=R,this.updater=K||A}var C=T.prototype=new E;C.constructor=T,_(C,P.prototype),C.isPureReactComponent=!0;var M=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function O(B,z,K,st,ht,xt){return K=xt.ref,{$$typeof:s,type:B,key:z,ref:K!==void 0?K:null,props:xt}}function V(B,z){return O(B.type,z,void 0,void 0,void 0,B.props)}function X(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function tt(B){var z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(K){return z[K]})}var Y=/\/+/g;function Q(B,z){return typeof B=="object"&&B!==null&&B.key!=null?tt(""+B.key):z.toString(36)}function ct(){}function nt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ct,ct):(B.status="pending",B.then(function(z){B.status==="pending"&&(B.status="fulfilled",B.value=z)},function(z){B.status==="pending"&&(B.status="rejected",B.reason=z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function J(B,z,K,st,ht){var xt=typeof B;(xt==="undefined"||xt==="boolean")&&(B=null);var mt=!1;if(B===null)mt=!0;else switch(xt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(B.$$typeof){case s:case t:mt=!0;break;case g:return mt=B._init,J(mt(B._payload),z,K,st,ht)}}if(mt)return ht=ht(B),mt=st===""?"."+Q(B,0):st,M(ht)?(K="",mt!=null&&(K=mt.replace(Y,"$&/")+"/"),J(ht,z,K,"",function(le){return le})):ht!=null&&(X(ht)&&(ht=V(ht,K+(ht.key==null||B&&B.key===ht.key?"":(""+ht.key).replace(Y,"$&/")+"/")+mt)),z.push(ht)),1;mt=0;var Rt=st===""?".":st+":";if(M(B))for(var It=0;It<B.length;It++)st=B[It],xt=Rt+Q(st,It),mt+=J(st,z,K,xt,ht);else if(It=x(B),typeof It=="function")for(B=It.call(B),It=0;!(st=B.next()).done;)st=st.value,xt=Rt+Q(st,It++),mt+=J(st,z,K,xt,ht);else if(xt==="object"){if(typeof B.then=="function")return J(nt(B),z,K,st,ht);throw z=String(B),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return mt}function D(B,z,K){if(B==null)return B;var st=[],ht=0;return J(B,st,"","",function(xt){return z.call(K,xt,ht++)}),st}function U(B){if(B._status===-1){var z=B._result;z=z(),z.then(function(K){(B._status===0||B._status===-1)&&(B._status=1,B._result=K)},function(K){(B._status===0||B._status===-1)&&(B._status=2,B._result=K)}),B._status===-1&&(B._status=0,B._result=z)}if(B._status===1)return B._result.default;throw B._result}var N=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function I(){}return react_production.Children={map:D,forEach:function(B,z,K){D(B,function(){z.apply(this,arguments)},K)},count:function(B){var z=0;return D(B,function(){z++}),z},toArray:function(B){return D(B,function(z){return z})||[]},only:function(B){if(!X(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},react_production.Component=P,react_production.Fragment=e,react_production.Profiler=i,react_production.PureComponent=T,react_production.StrictMode=n,react_production.Suspense=f,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(B){return j.H.useMemoCache(B)}},react_production.cache=function(B){return function(){return B.apply(null,arguments)}},react_production.cloneElement=function(B,z,K){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var st=_({},B.props),ht=B.key,xt=void 0;if(z!=null)for(mt in z.ref!==void 0&&(xt=void 0),z.key!==void 0&&(ht=""+z.key),z)!L.call(z,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&z.ref===void 0||(st[mt]=z[mt]);var mt=arguments.length-2;if(mt===1)st.children=K;else if(1<mt){for(var Rt=Array(mt),It=0;It<mt;It++)Rt[It]=arguments[It+2];st.children=Rt}return O(B.type,ht,void 0,void 0,xt,st)},react_production.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},react_production.createElement=function(B,z,K){var st,ht={},xt=null;if(z!=null)for(st in z.key!==void 0&&(xt=""+z.key),z)L.call(z,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ht[st]=z[st]);var mt=arguments.length-2;if(mt===1)ht.children=K;else if(1<mt){for(var Rt=Array(mt),It=0;It<mt;It++)Rt[It]=arguments[It+2];ht.children=Rt}if(B&&B.defaultProps)for(st in mt=B.defaultProps,mt)ht[st]===void 0&&(ht[st]=mt[st]);return O(B,xt,void 0,void 0,null,ht)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(B){return{$$typeof:d,render:B}},react_production.isValidElement=X,react_production.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:U}},react_production.memo=function(B,z){return{$$typeof:p,type:B,compare:z===void 0?null:z}},react_production.startTransition=function(B){var z=j.T,K={};j.T=K;try{var st=B(),ht=j.S;ht!==null&&ht(K,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(I,N)}catch(xt){N(xt)}finally{j.T=z}},react_production.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},react_production.use=function(B){return j.H.use(B)},react_production.useActionState=function(B,z,K){return j.H.useActionState(B,z,K)},react_production.useCallback=function(B,z){return j.H.useCallback(B,z)},react_production.useContext=function(B){return j.H.useContext(B)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(B,z){return j.H.useDeferredValue(B,z)},react_production.useEffect=function(B,z,K){var st=j.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(B,z)},react_production.useId=function(){return j.H.useId()},react_production.useImperativeHandle=function(B,z,K){return j.H.useImperativeHandle(B,z,K)},react_production.useInsertionEffect=function(B,z){return j.H.useInsertionEffect(B,z)},react_production.useLayoutEffect=function(B,z){return j.H.useLayoutEffect(B,z)},react_production.useMemo=function(B,z){return j.H.useMemo(B,z)},react_production.useOptimistic=function(B,z){return j.H.useOptimistic(B,z)},react_production.useReducer=function(B,z,K){return j.H.useReducer(B,z,K)},react_production.useRef=function(B){return j.H.useRef(B)},react_production.useState=function(B){return j.H.useState(B)},react_production.useSyncExternalStore=function(B,z,K){return j.H.useSyncExternalStore(B,z,K)},react_production.useTransition=function(){return j.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(s){function t(D,U){var N=D.length;D.push(U);t:for(;0<N;){var I=N-1>>>1,B=D[I];if(0<i(B,U))D[I]=U,D[N]=B,N=I;else break t}}function e(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var U=D[0],N=D.pop();if(N!==U){D[0]=N;t:for(var I=0,B=D.length,z=B>>>1;I<z;){var K=2*(I+1)-1,st=D[K],ht=K+1,xt=D[ht];if(0>i(st,N))ht<B&&0>i(xt,st)?(D[I]=xt,D[ht]=N,I=ht):(D[I]=st,D[K]=N,I=K);else if(ht<B&&0>i(xt,N))D[I]=xt,D[ht]=N,I=ht;else break t}}return U}function i(D,U){var N=D.sortIndex-U.sortIndex;return N!==0?N:D.id-U.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var f=[],p=[],g=1,b=null,x=3,A=!1,_=!1,R=!1,P=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function M(D){for(var U=e(p);U!==null;){if(U.callback===null)n(p);else if(U.startTime<=D)n(p),U.sortIndex=U.expirationTime,t(f,U);else break;U=e(p)}}function j(D){if(R=!1,M(D),!_)if(e(f)!==null)_=!0,L||(L=!0,Q());else{var U=e(p);U!==null&&J(j,U.startTime-D)}}var L=!1,O=-1,V=5,X=-1;function tt(){return P?!0:!(s.unstable_now()-X<V)}function Y(){if(P=!1,L){var D=s.unstable_now();X=D;var U=!0;try{t:{_=!1,R&&(R=!1,T(O),O=-1),A=!0;var N=x;try{e:{for(M(D),b=e(f);b!==null&&!(b.expirationTime>D&&tt());){var I=b.callback;if(typeof I=="function"){b.callback=null,x=b.priorityLevel;var B=I(b.expirationTime<=D);if(D=s.unstable_now(),typeof B=="function"){b.callback=B,M(D),U=!0;break e}b===e(f)&&n(f),M(D)}else n(f);b=e(f)}if(b!==null)U=!0;else{var z=e(p);z!==null&&J(j,z.startTime-D),U=!1}}break t}finally{b=null,x=N,A=!1}U=void 0}}finally{U?Q():L=!1}}}var Q;if(typeof C=="function")Q=function(){C(Y)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,nt=ct.port2;ct.port1.onmessage=Y,Q=function(){nt.postMessage(null)}}else Q=function(){E(Y,0)};function J(D,U){O=E(function(){D(s.unstable_now())},U)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(D){switch(x){case 1:case 2:case 3:var U=3;break;default:U=x}var N=x;x=U;try{return D()}finally{x=N}},s.unstable_requestPaint=function(){P=!0},s.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var N=x;x=D;try{return U()}finally{x=N}},s.unstable_scheduleCallback=function(D,U,N){var I=s.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?I+N:I):N=I,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=N+B,D={id:g++,callback:U,priorityLevel:D,startTime:N,expirationTime:B,sortIndex:-1},N>I?(D.sortIndex=N,t(p,D),e(f)===null&&D===e(p)&&(R?(T(O),O=-1):R=!0,J(j,N-I))):(D.sortIndex=B,t(f,D),_||A||(_=!0,L||(L=!0,Q()))),D},s.unstable_shouldYield=tt,s.unstable_wrapCallback=function(D){var U=x;return function(){var N=x;x=U;try{return D.apply(this,arguments)}finally{x=N}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var s=requireReact();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,p,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:f,containerInfo:p,implementation:g}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(f,p,null,g)},reactDom_production.flushSync=function(f){var p=c.T,g=n.p;try{if(c.T=null,n.p=2,f)return f()}finally{c.T=p,n.p=g,n.d.f()}},reactDom_production.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(f,p))},reactDom_production.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},reactDom_production.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,b=d(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:A}):g==="script"&&n.d.X(f,{crossOrigin:b,integrity:x,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},reactDom_production.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);n.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(f)},reactDom_production.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,b=d(g,p.crossOrigin);n.d.L(f,g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},reactDom_production.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=d(p.as,p.crossOrigin);n.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(f)},reactDom_production.requestFormReset=function(f){n.d.r(f)},reactDom_production.unstable_batchedUpdates=function(f,p){return f(p)},reactDom_production.useFormState=function(f,p,g){return c.H.useFormState(f,p,g)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var s=requireScheduler(),t=requireReact(),e=requireReactDom();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function c(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function d(a){if(o(a)!==a)throw Error(n(188))}function f(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(n(188));return l!==a?null:a}for(var u=a,m=l;;){var S=u.return;if(S===null)break;var k=S.alternate;if(k===null){if(m=S.return,m!==null){u=m;continue}break}if(S.child===k.child){for(k=S.child;k;){if(k===u)return d(S),a;if(k===m)return d(S),l;k=k.sibling}throw Error(n(188))}if(u.return!==m.return)u=S,m=k;else{for(var F=!1,G=S.child;G;){if(G===u){F=!0,u=S,m=k;break}if(G===m){F=!0,m=S,u=k;break}G=G.sibling}if(!F){for(G=k.child;G;){if(G===u){F=!0,u=k,m=S;break}if(G===m){F=!0,m=k,u=S;break}G=G.sibling}if(!F)throw Error(n(189))}}if(u.alternate!==m)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?a:l}function p(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=p(a),l!==null)return l;a=a.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Q(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var ct=Symbol.for("react.client.reference");function nt(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ct?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case P:return"Profiler";case R:return"StrictMode";case j:return"Suspense";case L:return"SuspenseList";case X:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case A:return"Portal";case C:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case M:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return l=a.displayName||null,l!==null?l:nt(a.type)||"Memo";case V:l=a._payload,a=a._init;try{return nt(a(l))}catch{}}return null}var J=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},I=[],B=-1;function z(a){return{current:a}}function K(a){0>B||(a.current=I[B],I[B]=null,B--)}function st(a,l){B++,I[B]=a.current,a.current=l}var ht=z(null),xt=z(null),mt=z(null),Rt=z(null);function It(a,l){switch(st(mt,l),st(xt,a),st(ht,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?kx(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=kx(l),a=Px(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}K(ht),st(ht,a)}function le(){K(ht),K(xt),K(mt)}function Vt(a){a.memoizedState!==null&&st(Rt,a);var l=ht.current,u=Px(l,a.type);l!==u&&(st(xt,a),st(ht,u))}function ye(a){xt.current===a&&(K(ht),K(xt)),Rt.current===a&&(K(Rt),ah._currentValue=N)}var Re=Object.prototype.hasOwnProperty,jt=s.unstable_scheduleCallback,bt=s.unstable_cancelCallback,Ee=s.unstable_shouldYield,xe=s.unstable_requestPaint,Mt=s.unstable_now,is=s.unstable_getCurrentPriorityLevel,gs=s.unstable_ImmediatePriority,Ke=s.unstable_UserBlockingPriority,ee=s.unstable_NormalPriority,Ls=s.unstable_LowPriority,Ge=s.unstable_IdlePriority,Je=s.log,Ds=s.unstable_setDisableYieldValue,be=null,ae=null;function De(a){if(typeof Je=="function"&&Ds(a),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(be,a)}catch{}}var we=Math.clz32?Math.clz32:Lt,ts=Math.log,ws=Math.LN2;function Lt(a){return a>>>=0,a===0?32:31-(ts(a)/ws|0)|0}var ys=256,un=4194304;function hn(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Di(a,l,u){var m=a.pendingLanes;if(m===0)return 0;var S=0,k=a.suspendedLanes,F=a.pingedLanes;a=a.warmLanes;var G=m&134217727;return G!==0?(m=G&~k,m!==0?S=hn(m):(F&=G,F!==0?S=hn(F):u||(u=G&~a,u!==0&&(S=hn(u))))):(G=m&~k,G!==0?S=hn(G):F!==0?S=hn(F):u||(u=m&~a,u!==0&&(S=hn(u)))),S===0?0:l!==0&&l!==S&&(l&k)===0&&(k=S&-S,u=l&-l,k>=u||k===32&&(u&4194048)!==0)?l:S}function Fs(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function at(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var a=ys;return ys<<=1,(ys&4194048)===0&&(ys=256),a}function Et(){var a=un;return un<<=1,(un&62914560)===0&&(un=4194304),a}function Bt(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function se(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ue(a,l,u,m,S,k){var F=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var G=a.entanglements,W=a.expirationTimes,lt=a.hiddenUpdates;for(u=F&~u;0<u;){var pt=31-we(u),yt=1<<pt;G[pt]=0,W[pt]=-1;var ut=lt[pt];if(ut!==null)for(lt[pt]=null,pt=0;pt<ut.length;pt++){var dt=ut[pt];dt!==null&&(dt.lane&=-536870913)}u&=~yt}m!==0&&Xe(a,m,0),k!==0&&S===0&&a.tag!==0&&(a.suspendedLanes|=k&~(F&~l))}function Xe(a,l,u){a.pendingLanes|=l,a.suspendedLanes&=~l;var m=31-we(l);a.entangledLanes|=l,a.entanglements[m]=a.entanglements[m]|1073741824|u&4194090}function Tt(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var m=31-we(u),S=1<<m;S&l|a[m]&l&&(a[m]|=l),u&=~S}}function Dt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Gt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function qt(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:Wx(a.type))}function ke(a,l){var u=U.p;try{return U.p=a,l()}finally{U.p=u}}var vs=Math.random().toString(36).slice(2),Pe="__reactFiber$"+vs,rs="__reactProps$"+vs,Gs="__reactContainer$"+vs,pr="__reactEvents$"+vs,lo="__reactListeners$"+vs,Fi="__reactHandles$"+vs,aa="__reactResources$"+vs,rt="__reactMarker$"+vs;function kt(a){delete a[Pe],delete a[rs],delete a[pr],delete a[lo],delete a[Fi]}function Yt(a){var l=a[Pe];if(l)return l;for(var u=a.parentNode;u;){if(l=u[Gs]||u[Pe]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=Lx(a);a!==null;){if(u=a[Pe])return u;a=Lx(a)}return l}a=u,u=a.parentNode}return null}function Zt(a){if(a=a[Pe]||a[Gs]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function ne(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function hs(a){var l=a[aa];return l||(l=a[aa]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function fe(a){a[rt]=!0}var Oi=new Set,Ii={};function Pt(a,l){Bi(a,l),Bi(a+"Capture",l)}function Bi(a,l){for(Ii[a]=l,a=0;a<l.length;a++)Oi.add(l[a])}var dn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),co={},oa={};function Pn(a){return Re.call(oa,a)?!0:Re.call(co,a)?!1:dn.test(a)?oa[a]=!0:(co[a]=!0,!1)}function Se(a,l,u){if(Pn(l))if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+u)}}function Yn(a,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+u)}}function En(a,l,u,m){if(m===null)a.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(l,u,""+m)}}var mr,vt;function _t(a){if(mr===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);mr=l&&l[1]||"",vt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mr+a+vt}var wt=!1;function Ae(a,l){if(!a||wt)return"";wt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(dt){var ut=dt}Reflect.construct(a,[],yt)}else{try{yt.call()}catch(dt){ut=dt}a.call(yt.prototype)}}else{try{throw Error()}catch(dt){ut=dt}(yt=a())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(dt){if(dt&&ut&&typeof dt.stack=="string")return[dt.stack,ut.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=m.DetermineComponentFrameRoot(),F=k[0],G=k[1];if(F&&G){var W=F.split(`
`),lt=G.split(`
`);for(S=m=0;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;for(;S<lt.length&&!lt[S].includes("DetermineComponentFrameRoot");)S++;if(m===W.length||S===lt.length)for(m=W.length-1,S=lt.length-1;1<=m&&0<=S&&W[m]!==lt[S];)S--;for(;1<=m&&0<=S;m--,S--)if(W[m]!==lt[S]){if(m!==1||S!==1)do if(m--,S--,0>S||W[m]!==lt[S]){var pt=`
`+W[m].replace(" at new "," at ");return a.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",a.displayName)),pt}while(1<=m&&0<=S);break}}}finally{wt=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?_t(u):""}function es(a){switch(a.tag){case 26:case 27:case 5:return _t(a.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Ae(a.type,!1);case 11:return Ae(a.type.render,!1);case 1:return Ae(a.type,!0);case 31:return _t("Activity");default:return""}}function Wn(a){try{var l="";do l+=es(a),a=a.return;while(a);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Ze(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function fn(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function en(a){var l=fn(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),m=""+a[l];if(!a.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var S=u.get,k=u.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return S.call(this)},set:function(F){m=""+F,k.call(this,F)}}),Object.defineProperty(a,l,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(F){m=""+F},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function pn(a){a._valueTracker||(a._valueTracker=en(a))}function Dl(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),m="";return a&&(m=fn(a)?a.checked?"true":"false":a.value),a=m,a!==u?(l.setValue(a),!0):!1}function la(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var xu=/[\n"\\]/g;function sn(a){return a.replace(xu,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function fi(a,l,u,m,S,k,F,G){a.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?a.type=F:a.removeAttribute("type"),l!=null?F==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Ze(l)):a.value!==""+Ze(l)&&(a.value=""+Ze(l)):F!=="submit"&&F!=="reset"||a.removeAttribute("value"),l!=null?Kn(a,F,Ze(l)):u!=null?Kn(a,F,Ze(u)):m!=null&&a.removeAttribute("value"),S==null&&k!=null&&(a.defaultChecked=!!k),S!=null&&(a.checked=S&&typeof S!="function"&&typeof S!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?a.name=""+Ze(G):a.removeAttribute("name")}function uo(a,l,u,m,S,k,F,G){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(a.type=k),l!=null||u!=null){if(!(k!=="submit"&&k!=="reset"||l!=null))return;u=u!=null?""+Ze(u):"",l=l!=null?""+Ze(l):u,G||l===a.value||(a.value=l),a.defaultValue=l}m=m??S,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=G?a.checked:!!m,a.defaultChecked=!!m,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(a.name=F)}function Kn(a,l,u){l==="number"&&la(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Hi(a,l,u,m){if(a=a.options,l){l={};for(var S=0;S<u.length;S++)l["$"+u[S]]=!0;for(u=0;u<a.length;u++)S=l.hasOwnProperty("$"+a[u].value),a[u].selected!==S&&(a[u].selected=S),S&&m&&(a[u].defaultSelected=!0)}else{for(u=""+Ze(u),l=null,S=0;S<a.length;S++){if(a[S].value===u){a[S].selected=!0,m&&(a[S].defaultSelected=!0);return}l!==null||a[S].disabled||(l=a[S])}l!==null&&(l.selected=!0)}}function ca(a,l,u){if(l!=null&&(l=""+Ze(l),l!==a.value&&(a.value=l),u==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=u!=null?""+Ze(u):""}function ie(a,l,u,m){if(l==null){if(m!=null){if(u!=null)throw Error(n(92));if(J(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),l=u}u=Ze(l),a.defaultValue=u,m=a.textContent,m===u&&m!==""&&m!==null&&(a.value=m)}function pi(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var Ts=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qe(a,l,u){var m=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":m?a.setProperty(l,u):typeof u!="number"||u===0||Ts.has(l)?l==="float"?a.cssFloat=u:a[l]=(""+u).trim():a[l]=u+"px"}function zi(a,l,u){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var S in l)m=l[S],l.hasOwnProperty(S)&&u[S]!==m&&Qe(a,S,m)}else for(var k in l)l.hasOwnProperty(k)&&Qe(a,k,l[k])}function Zn(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ft(a){return mi.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var zt=null;function te(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var pe=null,as=null;function gr(a){var l=Zt(a);if(l&&(a=l.stateNode)){var u=a[rs]||null;t:switch(a=l.stateNode,l.type){case"input":if(fi(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+sn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var m=u[l];if(m!==a&&m.form===a.form){var S=m[rs]||null;if(!S)throw Error(n(90));fi(m,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(l=0;l<u.length;l++)m=u[l],m.form===a.form&&Dl(m)}break t;case"textarea":ca(a,u.value,u.defaultValue);break t;case"select":l=u.value,l!=null&&Hi(a,!!u.multiple,l,!1)}}}var fo=!1;function zd(a,l,u){if(fo)return a(l,u);fo=!0;try{var m=a(l);return m}finally{if(fo=!1,(pe!==null||as!==null)&&(Af(),pe&&(l=pe,a=as,as=pe=null,gr(l),a)))for(l=0;l<a.length;l++)gr(a[l])}}function Fl(a,l){var u=a.stateNode;if(u===null)return null;var m=u[rs]||null;if(m===null)return null;u=m[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break t;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(n(231,l,typeof u));return u}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if(gi)try{var po={};Object.defineProperty(po,"passive",{get:function(){bu=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{bu=!1}var Ui=null,Eu=null,mo=null;function Z(){if(mo)return mo;var a,l=Eu,u=l.length,m,S="value"in Ui?Ui.value:Ui.textContent,k=S.length;for(a=0;a<u&&l[a]===S[a];a++);var F=u-a;for(m=1;m<=F&&l[u-m]===S[k-m];m++);return mo=S.slice(a,1<m?1-m:void 0)}function St(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Wt(){return!0}function Te(){return!1}function Qt(a){function l(u,m,S,k,F){this._reactName=u,this._targetInst=S,this.type=m,this.nativeEvent=k,this.target=F,this.currentTarget=null;for(var G in a)a.hasOwnProperty(G)&&(u=a[G],this[G]=u?u(k):k[G]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Wt:Te,this.isPropagationStopped=Te,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),l}var Me={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qs=Qt(Me),Vi=g({},Me,{view:0,detail:0}),Ud=Qt(Vi),Ol,Bp,Su,Vd=g({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zp,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Su&&(Su&&a.type==="mousemove"?(Ol=a.screenX-Su.screenX,Bp=a.screenY-Su.screenY):Bp=Ol=0,Su=a),Ol)},movementY:function(a){return"movementY"in a?a.movementY:Bp}}),Dy=Qt(Vd),DE=g({},Vd,{dataTransfer:0}),FE=Qt(DE),OE=g({},Vi,{relatedTarget:0}),Hp=Qt(OE),IE=g({},Me,{animationName:0,elapsedTime:0,pseudoElement:0}),BE=Qt(IE),HE=g({},Me,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),zE=Qt(HE),UE=g({},Me,{data:0}),Fy=Qt(UE),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$E={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qE(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=GE[a])?!!l[a]:!1}function zp(){return qE}var XE=g({},Vi,{key:function(a){if(a.key){var l=VE[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=St(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?$E[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zp,charCode:function(a){return a.type==="keypress"?St(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?St(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),YE=Qt(XE),WE=g({},Vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oy=Qt(WE),KE=g({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zp}),ZE=Qt(KE),QE=g({},Me,{propertyName:0,elapsedTime:0,pseudoElement:0}),JE=Qt(QE),t1=g({},Vd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),e1=Qt(t1),s1=g({},Me,{newState:0,oldState:0}),n1=Qt(s1),i1=[9,13,27,32],Up=gi&&"CompositionEvent"in window,_u=null;gi&&"documentMode"in document&&(_u=document.documentMode);var r1=gi&&"TextEvent"in window&&!_u,Iy=gi&&(!Up||_u&&8<_u&&11>=_u),By=" ",Hy=!1;function zy(a,l){switch(a){case"keyup":return i1.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uy(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Il=!1;function a1(a,l){switch(a){case"compositionend":return Uy(l);case"keypress":return l.which!==32?null:(Hy=!0,By);case"textInput":return a=l.data,a===By&&Hy?null:a;default:return null}}function o1(a,l){if(Il)return a==="compositionend"||!Up&&zy(a,l)?(a=Z(),mo=Eu=Ui=null,Il=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Iy&&l.locale!=="ko"?null:l.data;default:return null}}var l1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!l1[a.type]:l==="textarea"}function $y(a,l,u,m){pe?as?as.push(m):as=[m]:pe=m,l=Pf(l,"onChange"),0<l.length&&(u=new qs("onChange","change",null,u,m),a.push({event:u,listeners:l}))}var Au=null,Ru=null;function c1(a){Ax(a,0)}function $d(a){var l=ne(a);if(Dl(l))return a}function Gy(a,l){if(a==="change")return l}var qy=!1;if(gi){var Vp;if(gi){var $p="oninput"in document;if(!$p){var Xy=document.createElement("div");Xy.setAttribute("oninput","return;"),$p=typeof Xy.oninput=="function"}Vp=$p}else Vp=!1;qy=Vp&&(!document.documentMode||9<document.documentMode)}function Yy(){Au&&(Au.detachEvent("onpropertychange",Wy),Ru=Au=null)}function Wy(a){if(a.propertyName==="value"&&$d(Ru)){var l=[];$y(l,Ru,a,te(a)),zd(c1,l)}}function u1(a,l,u){a==="focusin"?(Yy(),Au=l,Ru=u,Au.attachEvent("onpropertychange",Wy)):a==="focusout"&&Yy()}function h1(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $d(Ru)}function d1(a,l){if(a==="click")return $d(l)}function f1(a,l){if(a==="input"||a==="change")return $d(l)}function p1(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Mn=typeof Object.is=="function"?Object.is:p1;function wu(a,l){if(Mn(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),m=Object.keys(l);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var S=u[m];if(!Re.call(l,S)||!Mn(a[S],l[S]))return!1}return!0}function Ky(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Zy(a,l){var u=Ky(a);a=0;for(var m;u;){if(u.nodeType===3){if(m=a+u.textContent.length,a<=l&&m>=l)return{node:u,offset:l-a};a=m}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Ky(u)}}function Qy(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Qy(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Jy(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=la(a.document);l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=la(a.document)}return l}function Gp(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var m1=gi&&"documentMode"in document&&11>=document.documentMode,Bl=null,qp=null,Tu=null,Xp=!1;function tv(a,l,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Xp||Bl==null||Bl!==la(m)||(m=Bl,"selectionStart"in m&&Gp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Tu&&wu(Tu,m)||(Tu=m,m=Pf(qp,"onSelect"),0<m.length&&(l=new qs("onSelect","select",null,l,u),a.push({event:l,listeners:m}),l.target=Bl)))}function go(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var Hl={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionrun:go("Transition","TransitionRun"),transitionstart:go("Transition","TransitionStart"),transitioncancel:go("Transition","TransitionCancel"),transitionend:go("Transition","TransitionEnd")},Yp={},ev={};gi&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function yo(a){if(Yp[a])return Yp[a];if(!Hl[a])return a;var l=Hl[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in ev)return Yp[a]=l[u];return a}var sv=yo("animationend"),nv=yo("animationiteration"),iv=yo("animationstart"),g1=yo("transitionrun"),y1=yo("transitionstart"),v1=yo("transitioncancel"),rv=yo("transitionend"),av=new Map,Wp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wp.push("scrollEnd");function yi(a,l){av.set(a,l),Pt(l,[a])}var ov=new WeakMap;function Qn(a,l){if(typeof a=="object"&&a!==null){var u=ov.get(a);return u!==void 0?u:(l={value:a,source:l,stack:Wn(l)},ov.set(a,l),l)}return{value:a,source:l,stack:Wn(l)}}var Jn=[],zl=0,Kp=0;function Gd(){for(var a=zl,l=Kp=zl=0;l<a;){var u=Jn[l];Jn[l++]=null;var m=Jn[l];Jn[l++]=null;var S=Jn[l];Jn[l++]=null;var k=Jn[l];if(Jn[l++]=null,m!==null&&S!==null){var F=m.pending;F===null?S.next=S:(S.next=F.next,F.next=S),m.pending=S}k!==0&&lv(u,S,k)}}function qd(a,l,u,m){Jn[zl++]=a,Jn[zl++]=l,Jn[zl++]=u,Jn[zl++]=m,Kp|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Zp(a,l,u,m){return qd(a,l,u,m),Xd(a)}function Ul(a,l){return qd(a,null,null,l),Xd(a)}function lv(a,l,u){a.lanes|=u;var m=a.alternate;m!==null&&(m.lanes|=u);for(var S=!1,k=a.return;k!==null;)k.childLanes|=u,m=k.alternate,m!==null&&(m.childLanes|=u),k.tag===22&&(a=k.stateNode,a===null||a._visibility&1||(S=!0)),a=k,k=k.return;return a.tag===3?(k=a.stateNode,S&&l!==null&&(S=31-we(u),a=k.hiddenUpdates,m=a[S],m===null?a[S]=[l]:m.push(l),l.lane=u|536870912),k):null}function Xd(a){if(50<Qu)throw Qu=0,ig=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Vl={};function x1(a,l,u,m){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(a,l,u,m){return new x1(a,l,u,m)}function Qp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function yr(a,l){var u=a.alternate;return u===null?(u=jn(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function cv(a,l){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,l=u.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Yd(a,l,u,m,S,k){var F=0;if(m=a,typeof a=="function")Qp(a)&&(F=1);else if(typeof a=="string")F=ES(a,u,ht.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case X:return a=jn(31,u,l,S),a.elementType=X,a.lanes=k,a;case _:return vo(u.children,S,k,l);case R:F=8,S|=24;break;case P:return a=jn(12,u,l,S|2),a.elementType=P,a.lanes=k,a;case j:return a=jn(13,u,l,S),a.elementType=j,a.lanes=k,a;case L:return a=jn(19,u,l,S),a.elementType=L,a.lanes=k,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case C:F=10;break t;case T:F=9;break t;case M:F=11;break t;case O:F=14;break t;case V:F=16,m=null;break t}F=29,u=Error(n(130,a===null?"null":typeof a,"")),m=null}return l=jn(F,u,l,S),l.elementType=a,l.type=m,l.lanes=k,l}function vo(a,l,u,m){return a=jn(7,a,m,l),a.lanes=u,a}function Jp(a,l,u){return a=jn(6,a,null,l),a.lanes=u,a}function tm(a,l,u){return l=jn(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var $l=[],Gl=0,Wd=null,Kd=0,ti=[],ei=0,xo=null,vr=1,xr="";function bo(a,l){$l[Gl++]=Kd,$l[Gl++]=Wd,Wd=a,Kd=l}function uv(a,l,u){ti[ei++]=vr,ti[ei++]=xr,ti[ei++]=xo,xo=a;var m=vr;a=xr;var S=32-we(m)-1;m&=~(1<<S),u+=1;var k=32-we(l)+S;if(30<k){var F=S-S%5;k=(m&(1<<F)-1).toString(32),m>>=F,S-=F,vr=1<<32-we(l)+S|u<<S|m,xr=k+a}else vr=1<<k|u<<S|m,xr=a}function em(a){a.return!==null&&(bo(a,1),uv(a,1,0))}function sm(a){for(;a===Wd;)Wd=$l[--Gl],$l[Gl]=null,Kd=$l[--Gl],$l[Gl]=null;for(;a===xo;)xo=ti[--ei],ti[ei]=null,xr=ti[--ei],ti[ei]=null,vr=ti[--ei],ti[ei]=null}var mn=null,ds=null,je=!1,Eo=null,$i=!1,im=Error(n(519));function So(a){var l=Error(n(418,""));throw Pu(Qn(l,a)),im}function hv(a){var l=a.stateNode,u=a.type,m=a.memoizedProps;switch(l[Pe]=a,l[rs]=m,u){case"dialog":ge("cancel",l),ge("close",l);break;case"iframe":case"object":case"embed":ge("load",l);break;case"video":case"audio":for(u=0;u<th.length;u++)ge(th[u],l);break;case"source":ge("error",l);break;case"img":case"image":case"link":ge("error",l),ge("load",l);break;case"details":ge("toggle",l);break;case"input":ge("invalid",l),uo(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),pn(l);break;case"select":ge("invalid",l);break;case"textarea":ge("invalid",l),ie(l,m.value,m.defaultValue,m.children),pn(l)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||m.suppressHydrationWarning===!0||Cx(l.textContent,u)?(m.popover!=null&&(ge("beforetoggle",l),ge("toggle",l)),m.onScroll!=null&&ge("scroll",l),m.onScrollEnd!=null&&ge("scrollend",l),m.onClick!=null&&(l.onclick=Mf),l=!0):l=!1,l||So(a)}function dv(a){for(mn=a.return;mn;)switch(mn.tag){case 5:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:mn=mn.return}}function Cu(a){if(a!==mn)return!1;if(!je)return dv(a),je=!0,!1;var l=a.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||bg(a.type,a.memoizedProps)),u=!u),u&&ds&&So(a),dv(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));t:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(l===0){ds=xi(a.nextSibling);break t}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;a=a.nextSibling}ds=null}}else l===27?(l=ds,Ra(a.type)?(a=Ag,Ag=null,ds=a):ds=l):ds=mn?xi(a.stateNode.nextSibling):null;return!0}function ku(){ds=mn=null,je=!1}function fv(){var a=Eo;return a!==null&&(An===null?An=a:An.push.apply(An,a),Eo=null),a}function Pu(a){Eo===null?Eo=[a]:Eo.push(a)}var rm=z(null),_o=null,br=null;function ua(a,l,u){st(rm,l._currentValue),l._currentValue=u}function Er(a){a._currentValue=rm.current,K(rm)}function am(a,l,u){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===u)break;a=a.return}}function om(a,l,u,m){var S=a.child;for(S!==null&&(S.return=a);S!==null;){var k=S.dependencies;if(k!==null){var F=S.child;k=k.firstContext;t:for(;k!==null;){var G=k;k=S;for(var W=0;W<l.length;W++)if(G.context===l[W]){k.lanes|=u,G=k.alternate,G!==null&&(G.lanes|=u),am(k.return,u,a),m||(F=null);break t}k=G.next}}else if(S.tag===18){if(F=S.return,F===null)throw Error(n(341));F.lanes|=u,k=F.alternate,k!==null&&(k.lanes|=u),am(F,u,a),F=null}else F=S.child;if(F!==null)F.return=S;else for(F=S;F!==null;){if(F===a){F=null;break}if(S=F.sibling,S!==null){S.return=F.return,F=S;break}F=F.return}S=F}}function Mu(a,l,u,m){a=null;for(var S=l,k=!1;S!==null;){if(!k){if((S.flags&524288)!==0)k=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var F=S.alternate;if(F===null)throw Error(n(387));if(F=F.memoizedProps,F!==null){var G=S.type;Mn(S.pendingProps.value,F.value)||(a!==null?a.push(G):a=[G])}}else if(S===Rt.current){if(F=S.alternate,F===null)throw Error(n(387));F.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(a!==null?a.push(ah):a=[ah])}S=S.return}a!==null&&om(l,a,u,m),l.flags|=262144}function Zd(a){for(a=a.firstContext;a!==null;){if(!Mn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ao(a){_o=a,br=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function nn(a){return pv(_o,a)}function Qd(a,l){return _o===null&&Ao(a),pv(a,l)}function pv(a,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},br===null){if(a===null)throw Error(n(308));br=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else br=br.next=l;return u}var b1=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(u,m){a.push(m)}};this.abort=function(){l.aborted=!0,a.forEach(function(u){return u()})}},E1=s.unstable_scheduleCallback,S1=s.unstable_NormalPriority,Cs={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new b1,data:new Map,refCount:0}}function ju(a){a.refCount--,a.refCount===0&&E1(S1,function(){a.controller.abort()})}var Nu=null,cm=0,ql=0,Xl=null;function _1(a,l){if(Nu===null){var u=Nu=[];cm=0,ql=hg(),Xl={status:"pending",value:void 0,then:function(m){u.push(m)}}}return cm++,l.then(mv,mv),l}function mv(){if(--cm===0&&Nu!==null){Xl!==null&&(Xl.status="fulfilled");var a=Nu;Nu=null,ql=0,Xl=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function A1(a,l){var u=[],m={status:"pending",value:null,reason:null,then:function(S){u.push(S)}};return a.then(function(){m.status="fulfilled",m.value=l;for(var S=0;S<u.length;S++)(0,u[S])(l)},function(S){for(m.status="rejected",m.reason=S,S=0;S<u.length;S++)(0,u[S])(void 0)}),m}var gv=D.S;D.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&_1(a,l),gv!==null&&gv(a,l)};var Ro=z(null);function um(){var a=Ro.current;return a!==null?a:Ye.pooledCache}function Jd(a,l){l===null?st(Ro,Ro.current):st(Ro,l.pool)}function yv(){var a=um();return a===null?null:{parent:Cs._currentValue,pool:a}}var Lu=Error(n(460)),vv=Error(n(474)),tf=Error(n(542)),hm={then:function(){}};function xv(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ef(){}function bv(a,l,u){switch(u=a[u],u===void 0?a.push(l):u!==l&&(l.then(ef,ef),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Sv(a),a;default:if(typeof l.status=="string")l.then(ef,ef);else{if(a=Ye,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(m){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=m}},function(m){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Sv(a),a}throw Du=l,Lu}}var Du=null;function Ev(){if(Du===null)throw Error(n(459));var a=Du;return Du=null,a}function Sv(a){if(a===Lu||a===tf)throw Error(n(483))}var ha=!1;function dm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function da(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function fa(a,l,u){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(Fe&2)!==0){var S=m.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),m.pending=l,l=Xd(a),lv(a,null,u),l}return qd(a,m,l,u),Xd(a)}function Fu(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var m=l.lanes;m&=a.pendingLanes,u|=m,l.lanes=u,Tt(a,u)}}function pm(a,l){var u=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var S=null,k=null;if(u=u.firstBaseUpdate,u!==null){do{var F={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};k===null?S=k=F:k=k.next=F,u=u.next}while(u!==null);k===null?S=k=l:k=k.next=l}else S=k=l;u={baseState:m.baseState,firstBaseUpdate:S,lastBaseUpdate:k,shared:m.shared,callbacks:m.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}var mm=!1;function Ou(){if(mm){var a=Xl;if(a!==null)throw a}}function Iu(a,l,u,m){mm=!1;var S=a.updateQueue;ha=!1;var k=S.firstBaseUpdate,F=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var W=G,lt=W.next;W.next=null,F===null?k=lt:F.next=lt,F=W;var pt=a.alternate;pt!==null&&(pt=pt.updateQueue,G=pt.lastBaseUpdate,G!==F&&(G===null?pt.firstBaseUpdate=lt:G.next=lt,pt.lastBaseUpdate=W))}if(k!==null){var yt=S.baseState;F=0,pt=lt=W=null,G=k;do{var ut=G.lane&-536870913,dt=ut!==G.lane;if(dt?(_e&ut)===ut:(m&ut)===ut){ut!==0&&ut===ql&&(mm=!0),pt!==null&&(pt=pt.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});t:{var Kt=a,$t=G;ut=l;var Ue=u;switch($t.tag){case 1:if(Kt=$t.payload,typeof Kt=="function"){yt=Kt.call(Ue,yt,ut);break t}yt=Kt;break t;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=$t.payload,ut=typeof Kt=="function"?Kt.call(Ue,yt,ut):Kt,ut==null)break t;yt=g({},yt,ut);break t;case 2:ha=!0}}ut=G.callback,ut!==null&&(a.flags|=64,dt&&(a.flags|=8192),dt=S.callbacks,dt===null?S.callbacks=[ut]:dt.push(ut))}else dt={lane:ut,tag:G.tag,payload:G.payload,callback:G.callback,next:null},pt===null?(lt=pt=dt,W=yt):pt=pt.next=dt,F|=ut;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;dt=G,G=dt.next,dt.next=null,S.lastBaseUpdate=dt,S.shared.pending=null}}while(!0);pt===null&&(W=yt),S.baseState=W,S.firstBaseUpdate=lt,S.lastBaseUpdate=pt,k===null&&(S.shared.lanes=0),Ea|=F,a.lanes=F,a.memoizedState=yt}}function _v(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function Av(a,l){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)_v(u[a],l)}var Yl=z(null),sf=z(0);function Rv(a,l){a=Cr,st(sf,a),st(Yl,l),Cr=a|l.baseLanes}function gm(){st(sf,Cr),st(Yl,Yl.current)}function ym(){Cr=sf.current,K(Yl),K(sf)}var pa=0,ce=null,He=null,Ss=null,nf=!1,Wl=!1,wo=!1,rf=0,Bu=0,Kl=null,R1=0;function xs(){throw Error(n(321))}function vm(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!Mn(a[u],l[u]))return!1;return!0}function xm(a,l,u,m,S,k){return pa=k,ce=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,D.H=a===null||a.memoizedState===null?l0:c0,wo=!1,k=u(m,S),wo=!1,Wl&&(k=Tv(l,u,m,S)),wv(a),k}function wv(a){D.H=hf;var l=He!==null&&He.next!==null;if(pa=0,Ss=He=ce=null,nf=!1,Bu=0,Kl=null,l)throw Error(n(300));a===null||Os||(a=a.dependencies,a!==null&&Zd(a)&&(Os=!0))}function Tv(a,l,u,m){ce=a;var S=0;do{if(Wl&&(Kl=null),Bu=0,Wl=!1,25<=S)throw Error(n(301));if(S+=1,Ss=He=null,a.updateQueue!=null){var k=a.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}D.H=j1,k=l(u,m)}while(Wl);return k}function w1(){var a=D.H,l=a.useState()[0];return l=typeof l.then=="function"?Hu(l):l,a=a.useState()[0],(He!==null?He.memoizedState:null)!==a&&(ce.flags|=1024),l}function bm(){var a=rf!==0;return rf=0,a}function Em(a,l,u){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~u}function Sm(a){if(nf){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}nf=!1}pa=0,Ss=He=ce=null,Wl=!1,Bu=rf=0,Kl=null}function Sn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?ce.memoizedState=Ss=a:Ss=Ss.next=a,Ss}function _s(){if(He===null){var a=ce.alternate;a=a!==null?a.memoizedState:null}else a=He.next;var l=Ss===null?ce.memoizedState:Ss.next;if(l!==null)Ss=l,He=a;else{if(a===null)throw ce.alternate===null?Error(n(467)):Error(n(310));He=a,a={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ss===null?ce.memoizedState=Ss=a:Ss=Ss.next=a}return Ss}function _m(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hu(a){var l=Bu;return Bu+=1,Kl===null&&(Kl=[]),a=bv(Kl,a,l),l=ce,(Ss===null?l.memoizedState:Ss.next)===null&&(l=l.alternate,D.H=l===null||l.memoizedState===null?l0:c0),a}function af(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Hu(a);if(a.$$typeof===C)return nn(a)}throw Error(n(438,String(a)))}function Am(a){var l=null,u=ce.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var m=ce.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=_m(),ce.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(a),m=0;m<a;m++)u[m]=tt;return l.index++,u}function Sr(a,l){return typeof l=="function"?l(a):l}function of(a){var l=_s();return Rm(l,He,a)}function Rm(a,l,u){var m=a.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var S=a.baseQueue,k=m.pending;if(k!==null){if(S!==null){var F=S.next;S.next=k.next,k.next=F}l.baseQueue=S=k,m.pending=null}if(k=a.baseState,S===null)a.memoizedState=k;else{l=S.next;var G=F=null,W=null,lt=l,pt=!1;do{var yt=lt.lane&-536870913;if(yt!==lt.lane?(_e&yt)===yt:(pa&yt)===yt){var ut=lt.revertLane;if(ut===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),yt===ql&&(pt=!0);else if((pa&ut)===ut){lt=lt.next,ut===ql&&(pt=!0);continue}else yt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},W===null?(G=W=yt,F=k):W=W.next=yt,ce.lanes|=ut,Ea|=ut;yt=lt.action,wo&&u(k,yt),k=lt.hasEagerState?lt.eagerState:u(k,yt)}else ut={lane:yt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},W===null?(G=W=ut,F=k):W=W.next=ut,ce.lanes|=yt,Ea|=yt;lt=lt.next}while(lt!==null&&lt!==l);if(W===null?F=k:W.next=G,!Mn(k,a.memoizedState)&&(Os=!0,pt&&(u=Xl,u!==null)))throw u;a.memoizedState=k,a.baseState=F,a.baseQueue=W,m.lastRenderedState=k}return S===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function wm(a){var l=_s(),u=l.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=a;var m=u.dispatch,S=u.pending,k=l.memoizedState;if(S!==null){u.pending=null;var F=S=S.next;do k=a(k,F.action),F=F.next;while(F!==S);Mn(k,l.memoizedState)||(Os=!0),l.memoizedState=k,l.baseQueue===null&&(l.baseState=k),u.lastRenderedState=k}return[k,m]}function Cv(a,l,u){var m=ce,S=_s(),k=je;if(k){if(u===void 0)throw Error(n(407));u=u()}else u=l();var F=!Mn((He||S).memoizedState,u);F&&(S.memoizedState=u,Os=!0),S=S.queue;var G=Mv.bind(null,m,S,a);if(zu(2048,8,G,[a]),S.getSnapshot!==l||F||Ss!==null&&Ss.memoizedState.tag&1){if(m.flags|=2048,Zl(9,lf(),Pv.bind(null,m,S,u,l),null),Ye===null)throw Error(n(349));k||(pa&124)!==0||kv(m,l,u)}return u}function kv(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=ce.updateQueue,l===null?(l=_m(),ce.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function Pv(a,l,u,m){l.value=u,l.getSnapshot=m,jv(l)&&Nv(a)}function Mv(a,l,u){return u(function(){jv(l)&&Nv(a)})}function jv(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!Mn(a,u)}catch{return!0}}function Nv(a){var l=Ul(a,2);l!==null&&On(l,a,2)}function Tm(a){var l=Sn();if(typeof a=="function"){var u=a;if(a=u(),wo){De(!0);try{u()}finally{De(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:a},l}function Lv(a,l,u,m){return a.baseState=u,Rm(a,He,typeof m=="function"?m:Sr)}function T1(a,l,u,m,S){if(uf(a))throw Error(n(485));if(a=l.action,a!==null){var k={payload:S,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){k.listeners.push(F)}};D.T!==null?u(!0):k.isTransition=!1,m(k),u=l.pending,u===null?(k.next=l.pending=k,Dv(l,k)):(k.next=u.next,l.pending=u.next=k)}}function Dv(a,l){var u=l.action,m=l.payload,S=a.state;if(l.isTransition){var k=D.T,F={};D.T=F;try{var G=u(S,m),W=D.S;W!==null&&W(F,G),Fv(a,l,G)}catch(lt){Cm(a,l,lt)}finally{D.T=k}}else try{k=u(S,m),Fv(a,l,k)}catch(lt){Cm(a,l,lt)}}function Fv(a,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){Ov(a,l,m)},function(m){return Cm(a,l,m)}):Ov(a,l,u)}function Ov(a,l,u){l.status="fulfilled",l.value=u,Iv(l),a.state=u,l=a.pending,l!==null&&(u=l.next,u===l?a.pending=null:(u=u.next,l.next=u,Dv(a,u)))}function Cm(a,l,u){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=u,Iv(l),l=l.next;while(l!==m)}a.action=null}function Iv(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Bv(a,l){return l}function Hv(a,l){if(je){var u=Ye.formState;if(u!==null){t:{var m=ce;if(je){if(ds){e:{for(var S=ds,k=$i;S.nodeType!==8;){if(!k){S=null;break e}if(S=xi(S.nextSibling),S===null){S=null;break e}}k=S.data,S=k==="F!"||k==="F"?S:null}if(S){ds=xi(S.nextSibling),m=S.data==="F!";break t}}So(m)}m=!1}m&&(l=u[0])}}return u=Sn(),u.memoizedState=u.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bv,lastRenderedState:l},u.queue=m,u=r0.bind(null,ce,m),m.dispatch=u,m=Tm(!1),k=Nm.bind(null,ce,!1,m.queue),m=Sn(),S={state:l,dispatch:null,action:a,pending:null},m.queue=S,u=T1.bind(null,ce,S,k,u),S.dispatch=u,m.memoizedState=a,[l,u,!1]}function zv(a){var l=_s();return Uv(l,He,a)}function Uv(a,l,u){if(l=Rm(a,l,Bv)[0],a=of(Sr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Hu(l)}catch(F){throw F===Lu?tf:F}else m=l;l=_s();var S=l.queue,k=S.dispatch;return u!==l.memoizedState&&(ce.flags|=2048,Zl(9,lf(),C1.bind(null,S,u),null)),[m,k,a]}function C1(a,l){a.action=l}function Vv(a){var l=_s(),u=He;if(u!==null)return Uv(l,u,a);_s(),l=l.memoizedState,u=_s();var m=u.queue.dispatch;return u.memoizedState=a,[l,m,!1]}function Zl(a,l,u,m){return a={tag:a,create:u,deps:m,inst:l,next:null},l=ce.updateQueue,l===null&&(l=_m(),ce.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=a.next=a:(m=u.next,u.next=a,a.next=m,l.lastEffect=a),a}function lf(){return{destroy:void 0,resource:void 0}}function $v(){return _s().memoizedState}function cf(a,l,u,m){var S=Sn();m=m===void 0?null:m,ce.flags|=a,S.memoizedState=Zl(1|l,lf(),u,m)}function zu(a,l,u,m){var S=_s();m=m===void 0?null:m;var k=S.memoizedState.inst;He!==null&&m!==null&&vm(m,He.memoizedState.deps)?S.memoizedState=Zl(l,k,u,m):(ce.flags|=a,S.memoizedState=Zl(1|l,k,u,m))}function Gv(a,l){cf(8390656,8,a,l)}function qv(a,l){zu(2048,8,a,l)}function Xv(a,l){return zu(4,2,a,l)}function Yv(a,l){return zu(4,4,a,l)}function Wv(a,l){if(typeof l=="function"){a=a();var u=l(a);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Kv(a,l,u){u=u!=null?u.concat([a]):null,zu(4,4,Wv.bind(null,l,a),u)}function km(){}function Zv(a,l){var u=_s();l=l===void 0?null:l;var m=u.memoizedState;return l!==null&&vm(l,m[1])?m[0]:(u.memoizedState=[a,l],a)}function Qv(a,l){var u=_s();l=l===void 0?null:l;var m=u.memoizedState;if(l!==null&&vm(l,m[1]))return m[0];if(m=a(),wo){De(!0);try{a()}finally{De(!1)}}return u.memoizedState=[m,l],m}function Pm(a,l,u){return u===void 0||(pa&1073741824)!==0?a.memoizedState=l:(a.memoizedState=u,a=ex(),ce.lanes|=a,Ea|=a,u)}function Jv(a,l,u,m){return Mn(u,l)?u:Yl.current!==null?(a=Pm(a,u,m),Mn(a,l)||(Os=!0),a):(pa&42)===0?(Os=!0,a.memoizedState=u):(a=ex(),ce.lanes|=a,Ea|=a,l)}function t0(a,l,u,m,S){var k=U.p;U.p=k!==0&&8>k?k:8;var F=D.T,G={};D.T=G,Nm(a,!1,l,u);try{var W=S(),lt=D.S;if(lt!==null&&lt(G,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var pt=A1(W,m);Uu(a,l,pt,Fn(a))}else Uu(a,l,m,Fn(a))}catch(yt){Uu(a,l,{then:function(){},status:"rejected",reason:yt},Fn())}finally{U.p=k,D.T=F}}function k1(){}function Mm(a,l,u,m){if(a.tag!==5)throw Error(n(476));var S=e0(a).queue;t0(a,S,l,N,u===null?k1:function(){return s0(a),u(m)})}function e0(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:N},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:u},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function s0(a){var l=e0(a).next.queue;Uu(a,l,{},Fn())}function jm(){return nn(ah)}function n0(){return _s().memoizedState}function i0(){return _s().memoizedState}function P1(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var u=Fn();a=da(u);var m=fa(l,a,u);m!==null&&(On(m,l,u),Fu(m,l,u)),l={cache:lm()},a.payload=l;return}l=l.return}}function M1(a,l,u){var m=Fn();u={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},uf(a)?a0(l,u):(u=Zp(a,l,u,m),u!==null&&(On(u,a,m),o0(u,l,m)))}function r0(a,l,u){var m=Fn();Uu(a,l,u,m)}function Uu(a,l,u,m){var S={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(uf(a))a0(l,S);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=l.lastRenderedReducer,k!==null))try{var F=l.lastRenderedState,G=k(F,u);if(S.hasEagerState=!0,S.eagerState=G,Mn(G,F))return qd(a,l,S,0),Ye===null&&Gd(),!1}catch{}finally{}if(u=Zp(a,l,S,m),u!==null)return On(u,a,m),o0(u,l,m),!0}return!1}function Nm(a,l,u,m){if(m={lane:2,revertLane:hg(),action:m,hasEagerState:!1,eagerState:null,next:null},uf(a)){if(l)throw Error(n(479))}else l=Zp(a,u,m,2),l!==null&&On(l,a,2)}function uf(a){var l=a.alternate;return a===ce||l!==null&&l===ce}function a0(a,l){Wl=nf=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function o0(a,l,u){if((u&4194048)!==0){var m=l.lanes;m&=a.pendingLanes,u|=m,l.lanes=u,Tt(a,u)}}var hf={readContext:nn,use:af,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useLayoutEffect:xs,useInsertionEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useSyncExternalStore:xs,useId:xs,useHostTransitionStatus:xs,useFormState:xs,useActionState:xs,useOptimistic:xs,useMemoCache:xs,useCacheRefresh:xs},l0={readContext:nn,use:af,useCallback:function(a,l){return Sn().memoizedState=[a,l===void 0?null:l],a},useContext:nn,useEffect:Gv,useImperativeHandle:function(a,l,u){u=u!=null?u.concat([a]):null,cf(4194308,4,Wv.bind(null,l,a),u)},useLayoutEffect:function(a,l){return cf(4194308,4,a,l)},useInsertionEffect:function(a,l){cf(4,2,a,l)},useMemo:function(a,l){var u=Sn();l=l===void 0?null:l;var m=a();if(wo){De(!0);try{a()}finally{De(!1)}}return u.memoizedState=[m,l],m},useReducer:function(a,l,u){var m=Sn();if(u!==void 0){var S=u(l);if(wo){De(!0);try{u(l)}finally{De(!1)}}}else S=l;return m.memoizedState=m.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},m.queue=a,a=a.dispatch=M1.bind(null,ce,a),[m.memoizedState,a]},useRef:function(a){var l=Sn();return a={current:a},l.memoizedState=a},useState:function(a){a=Tm(a);var l=a.queue,u=r0.bind(null,ce,l);return l.dispatch=u,[a.memoizedState,u]},useDebugValue:km,useDeferredValue:function(a,l){var u=Sn();return Pm(u,a,l)},useTransition:function(){var a=Tm(!1);return a=t0.bind(null,ce,a.queue,!0,!1),Sn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,u){var m=ce,S=Sn();if(je){if(u===void 0)throw Error(n(407));u=u()}else{if(u=l(),Ye===null)throw Error(n(349));(_e&124)!==0||kv(m,l,u)}S.memoizedState=u;var k={value:u,getSnapshot:l};return S.queue=k,Gv(Mv.bind(null,m,k,a),[a]),m.flags|=2048,Zl(9,lf(),Pv.bind(null,m,k,u,l),null),u},useId:function(){var a=Sn(),l=Ye.identifierPrefix;if(je){var u=xr,m=vr;u=(m&~(1<<32-we(m)-1)).toString(32)+u,l="«"+l+"R"+u,u=rf++,0<u&&(l+="H"+u.toString(32)),l+="»"}else u=R1++,l="«"+l+"r"+u.toString(32)+"»";return a.memoizedState=l},useHostTransitionStatus:jm,useFormState:Hv,useActionState:Hv,useOptimistic:function(a){var l=Sn();l.memoizedState=l.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Nm.bind(null,ce,!0,u),u.dispatch=l,[a,l]},useMemoCache:Am,useCacheRefresh:function(){return Sn().memoizedState=P1.bind(null,ce)}},c0={readContext:nn,use:af,useCallback:Zv,useContext:nn,useEffect:qv,useImperativeHandle:Kv,useInsertionEffect:Xv,useLayoutEffect:Yv,useMemo:Qv,useReducer:of,useRef:$v,useState:function(){return of(Sr)},useDebugValue:km,useDeferredValue:function(a,l){var u=_s();return Jv(u,He.memoizedState,a,l)},useTransition:function(){var a=of(Sr)[0],l=_s().memoizedState;return[typeof a=="boolean"?a:Hu(a),l]},useSyncExternalStore:Cv,useId:n0,useHostTransitionStatus:jm,useFormState:zv,useActionState:zv,useOptimistic:function(a,l){var u=_s();return Lv(u,He,a,l)},useMemoCache:Am,useCacheRefresh:i0},j1={readContext:nn,use:af,useCallback:Zv,useContext:nn,useEffect:qv,useImperativeHandle:Kv,useInsertionEffect:Xv,useLayoutEffect:Yv,useMemo:Qv,useReducer:wm,useRef:$v,useState:function(){return wm(Sr)},useDebugValue:km,useDeferredValue:function(a,l){var u=_s();return He===null?Pm(u,a,l):Jv(u,He.memoizedState,a,l)},useTransition:function(){var a=wm(Sr)[0],l=_s().memoizedState;return[typeof a=="boolean"?a:Hu(a),l]},useSyncExternalStore:Cv,useId:n0,useHostTransitionStatus:jm,useFormState:Vv,useActionState:Vv,useOptimistic:function(a,l){var u=_s();return He!==null?Lv(u,He,a,l):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Am,useCacheRefresh:i0},Ql=null,Vu=0;function df(a){var l=Vu;return Vu+=1,Ql===null&&(Ql=[]),bv(Ql,a,l)}function $u(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function ff(a,l){throw l.$$typeof===b?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function u0(a){var l=a._init;return l(a._payload)}function h0(a){function l(it,et){if(a){var ot=it.deletions;ot===null?(it.deletions=[et],it.flags|=16):ot.push(et)}}function u(it,et){if(!a)return null;for(;et!==null;)l(it,et),et=et.sibling;return null}function m(it){for(var et=new Map;it!==null;)it.key!==null?et.set(it.key,it):et.set(it.index,it),it=it.sibling;return et}function S(it,et){return it=yr(it,et),it.index=0,it.sibling=null,it}function k(it,et,ot){return it.index=ot,a?(ot=it.alternate,ot!==null?(ot=ot.index,ot<et?(it.flags|=67108866,et):ot):(it.flags|=67108866,et)):(it.flags|=1048576,et)}function F(it){return a&&it.alternate===null&&(it.flags|=67108866),it}function G(it,et,ot,gt){return et===null||et.tag!==6?(et=Jp(ot,it.mode,gt),et.return=it,et):(et=S(et,ot),et.return=it,et)}function W(it,et,ot,gt){var Ot=ot.type;return Ot===_?pt(it,et,ot.props.children,gt,ot.key):et!==null&&(et.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===V&&u0(Ot)===et.type)?(et=S(et,ot.props),$u(et,ot),et.return=it,et):(et=Yd(ot.type,ot.key,ot.props,null,it.mode,gt),$u(et,ot),et.return=it,et)}function lt(it,et,ot,gt){return et===null||et.tag!==4||et.stateNode.containerInfo!==ot.containerInfo||et.stateNode.implementation!==ot.implementation?(et=tm(ot,it.mode,gt),et.return=it,et):(et=S(et,ot.children||[]),et.return=it,et)}function pt(it,et,ot,gt,Ot){return et===null||et.tag!==7?(et=vo(ot,it.mode,gt,Ot),et.return=it,et):(et=S(et,ot),et.return=it,et)}function yt(it,et,ot){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return et=Jp(""+et,it.mode,ot),et.return=it,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case x:return ot=Yd(et.type,et.key,et.props,null,it.mode,ot),$u(ot,et),ot.return=it,ot;case A:return et=tm(et,it.mode,ot),et.return=it,et;case V:var gt=et._init;return et=gt(et._payload),yt(it,et,ot)}if(J(et)||Q(et))return et=vo(et,it.mode,ot,null),et.return=it,et;if(typeof et.then=="function")return yt(it,df(et),ot);if(et.$$typeof===C)return yt(it,Qd(it,et),ot);ff(it,et)}return null}function ut(it,et,ot,gt){var Ot=et!==null?et.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Ot!==null?null:G(it,et,""+ot,gt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case x:return ot.key===Ot?W(it,et,ot,gt):null;case A:return ot.key===Ot?lt(it,et,ot,gt):null;case V:return Ot=ot._init,ot=Ot(ot._payload),ut(it,et,ot,gt)}if(J(ot)||Q(ot))return Ot!==null?null:pt(it,et,ot,gt,null);if(typeof ot.then=="function")return ut(it,et,df(ot),gt);if(ot.$$typeof===C)return ut(it,et,Qd(it,ot),gt);ff(it,ot)}return null}function dt(it,et,ot,gt,Ot){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return it=it.get(ot)||null,G(et,it,""+gt,Ot);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case x:return it=it.get(gt.key===null?ot:gt.key)||null,W(et,it,gt,Ot);case A:return it=it.get(gt.key===null?ot:gt.key)||null,lt(et,it,gt,Ot);case V:var he=gt._init;return gt=he(gt._payload),dt(it,et,ot,gt,Ot)}if(J(gt)||Q(gt))return it=it.get(ot)||null,pt(et,it,gt,Ot,null);if(typeof gt.then=="function")return dt(it,et,ot,df(gt),Ot);if(gt.$$typeof===C)return dt(it,et,ot,Qd(et,gt),Ot);ff(et,gt)}return null}function Kt(it,et,ot,gt){for(var Ot=null,he=null,Ht=et,Xt=et=0,Bs=null;Ht!==null&&Xt<ot.length;Xt++){Ht.index>Xt?(Bs=Ht,Ht=null):Bs=Ht.sibling;var Ce=ut(it,Ht,ot[Xt],gt);if(Ce===null){Ht===null&&(Ht=Bs);break}a&&Ht&&Ce.alternate===null&&l(it,Ht),et=k(Ce,et,Xt),he===null?Ot=Ce:he.sibling=Ce,he=Ce,Ht=Bs}if(Xt===ot.length)return u(it,Ht),je&&bo(it,Xt),Ot;if(Ht===null){for(;Xt<ot.length;Xt++)Ht=yt(it,ot[Xt],gt),Ht!==null&&(et=k(Ht,et,Xt),he===null?Ot=Ht:he.sibling=Ht,he=Ht);return je&&bo(it,Xt),Ot}for(Ht=m(Ht);Xt<ot.length;Xt++)Bs=dt(Ht,it,Xt,ot[Xt],gt),Bs!==null&&(a&&Bs.alternate!==null&&Ht.delete(Bs.key===null?Xt:Bs.key),et=k(Bs,et,Xt),he===null?Ot=Bs:he.sibling=Bs,he=Bs);return a&&Ht.forEach(function(Pa){return l(it,Pa)}),je&&bo(it,Xt),Ot}function $t(it,et,ot,gt){if(ot==null)throw Error(n(151));for(var Ot=null,he=null,Ht=et,Xt=et=0,Bs=null,Ce=ot.next();Ht!==null&&!Ce.done;Xt++,Ce=ot.next()){Ht.index>Xt?(Bs=Ht,Ht=null):Bs=Ht.sibling;var Pa=ut(it,Ht,Ce.value,gt);if(Pa===null){Ht===null&&(Ht=Bs);break}a&&Ht&&Pa.alternate===null&&l(it,Ht),et=k(Pa,et,Xt),he===null?Ot=Pa:he.sibling=Pa,he=Pa,Ht=Bs}if(Ce.done)return u(it,Ht),je&&bo(it,Xt),Ot;if(Ht===null){for(;!Ce.done;Xt++,Ce=ot.next())Ce=yt(it,Ce.value,gt),Ce!==null&&(et=k(Ce,et,Xt),he===null?Ot=Ce:he.sibling=Ce,he=Ce);return je&&bo(it,Xt),Ot}for(Ht=m(Ht);!Ce.done;Xt++,Ce=ot.next())Ce=dt(Ht,it,Xt,Ce.value,gt),Ce!==null&&(a&&Ce.alternate!==null&&Ht.delete(Ce.key===null?Xt:Ce.key),et=k(Ce,et,Xt),he===null?Ot=Ce:he.sibling=Ce,he=Ce);return a&&Ht.forEach(function(NS){return l(it,NS)}),je&&bo(it,Xt),Ot}function Ue(it,et,ot,gt){if(typeof ot=="object"&&ot!==null&&ot.type===_&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case x:t:{for(var Ot=ot.key;et!==null;){if(et.key===Ot){if(Ot=ot.type,Ot===_){if(et.tag===7){u(it,et.sibling),gt=S(et,ot.props.children),gt.return=it,it=gt;break t}}else if(et.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===V&&u0(Ot)===et.type){u(it,et.sibling),gt=S(et,ot.props),$u(gt,ot),gt.return=it,it=gt;break t}u(it,et);break}else l(it,et);et=et.sibling}ot.type===_?(gt=vo(ot.props.children,it.mode,gt,ot.key),gt.return=it,it=gt):(gt=Yd(ot.type,ot.key,ot.props,null,it.mode,gt),$u(gt,ot),gt.return=it,it=gt)}return F(it);case A:t:{for(Ot=ot.key;et!==null;){if(et.key===Ot)if(et.tag===4&&et.stateNode.containerInfo===ot.containerInfo&&et.stateNode.implementation===ot.implementation){u(it,et.sibling),gt=S(et,ot.children||[]),gt.return=it,it=gt;break t}else{u(it,et);break}else l(it,et);et=et.sibling}gt=tm(ot,it.mode,gt),gt.return=it,it=gt}return F(it);case V:return Ot=ot._init,ot=Ot(ot._payload),Ue(it,et,ot,gt)}if(J(ot))return Kt(it,et,ot,gt);if(Q(ot)){if(Ot=Q(ot),typeof Ot!="function")throw Error(n(150));return ot=Ot.call(ot),$t(it,et,ot,gt)}if(typeof ot.then=="function")return Ue(it,et,df(ot),gt);if(ot.$$typeof===C)return Ue(it,et,Qd(it,ot),gt);ff(it,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,et!==null&&et.tag===6?(u(it,et.sibling),gt=S(et,ot),gt.return=it,it=gt):(u(it,et),gt=Jp(ot,it.mode,gt),gt.return=it,it=gt),F(it)):u(it,et)}return function(it,et,ot,gt){try{Vu=0;var Ot=Ue(it,et,ot,gt);return Ql=null,Ot}catch(Ht){if(Ht===Lu||Ht===tf)throw Ht;var he=jn(29,Ht,null,it.mode);return he.lanes=gt,he.return=it,he}finally{}}}var Jl=h0(!0),d0=h0(!1),si=z(null),Gi=null;function ma(a){var l=a.alternate;st(ks,ks.current&1),st(si,a),Gi===null&&(l===null||Yl.current!==null||l.memoizedState!==null)&&(Gi=a)}function f0(a){if(a.tag===22){if(st(ks,ks.current),st(si,a),Gi===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(Gi=a)}}else ga()}function ga(){st(ks,ks.current),st(si,si.current)}function _r(a){K(si),Gi===a&&(Gi=null),K(ks)}var ks=z(0);function pf(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||_g(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Lm(a,l,u,m){l=a.memoizedState,u=u(m,l),u=u==null?l:g({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Dm={enqueueSetState:function(a,l,u){a=a._reactInternals;var m=Fn(),S=da(m);S.payload=l,u!=null&&(S.callback=u),l=fa(a,S,m),l!==null&&(On(l,a,m),Fu(l,a,m))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var m=Fn(),S=da(m);S.tag=1,S.payload=l,u!=null&&(S.callback=u),l=fa(a,S,m),l!==null&&(On(l,a,m),Fu(l,a,m))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=Fn(),m=da(u);m.tag=2,l!=null&&(m.callback=l),l=fa(a,m,u),l!==null&&(On(l,a,u),Fu(l,a,u))}};function p0(a,l,u,m,S,k,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,k,F):l.prototype&&l.prototype.isPureReactComponent?!wu(u,m)||!wu(S,k):!0}function m0(a,l,u,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,m),l.state!==a&&Dm.enqueueReplaceState(l,l.state,null)}function To(a,l){var u=l;if("ref"in l){u={};for(var m in l)m!=="ref"&&(u[m]=l[m])}if(a=a.defaultProps){u===l&&(u=g({},u));for(var S in a)u[S]===void 0&&(u[S]=a[S])}return u}var mf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function g0(a){mf(a)}function y0(a){console.error(a)}function v0(a){mf(a)}function gf(a,l){try{var u=a.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function x0(a,l,u){try{var m=a.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function Fm(a,l,u){return u=da(u),u.tag=3,u.payload={element:null},u.callback=function(){gf(a,l)},u}function b0(a){return a=da(a),a.tag=3,a}function E0(a,l,u,m){var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var k=m.value;a.payload=function(){return S(k)},a.callback=function(){x0(l,u,m)}}var F=u.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(a.callback=function(){x0(l,u,m),typeof S!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})})}function N1(a,l,u,m,S){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=u.alternate,l!==null&&Mu(l,u,S,!0),u=si.current,u!==null){switch(u.tag){case 13:return Gi===null?ag():u.alternate===null&&fs===0&&(fs=3),u.flags&=-257,u.flags|=65536,u.lanes=S,m===hm?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([m]):l.add(m),lg(a,m,S)),!1;case 22:return u.flags|=65536,m===hm?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([m]):u.add(m)),lg(a,m,S)),!1}throw Error(n(435,u.tag))}return lg(a,m,S),ag(),!1}if(je)return l=si.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=S,m!==im&&(a=Error(n(422),{cause:m}),Pu(Qn(a,u)))):(m!==im&&(l=Error(n(423),{cause:m}),Pu(Qn(l,u))),a=a.current.alternate,a.flags|=65536,S&=-S,a.lanes|=S,m=Qn(m,u),S=Fm(a.stateNode,m,S),pm(a,S),fs!==4&&(fs=2)),!1;var k=Error(n(520),{cause:m});if(k=Qn(k,u),Zu===null?Zu=[k]:Zu.push(k),fs!==4&&(fs=2),l===null)return!0;m=Qn(m,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,a=S&-S,u.lanes|=a,a=Fm(u.stateNode,m,a),pm(u,a),!1;case 1:if(l=u.type,k=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Sa===null||!Sa.has(k))))return u.flags|=65536,S&=-S,u.lanes|=S,S=b0(S),E0(S,a,u,m),pm(u,S),!1}u=u.return}while(u!==null);return!1}var S0=Error(n(461)),Os=!1;function Xs(a,l,u,m){l.child=a===null?d0(l,null,u,m):Jl(l,a.child,u,m)}function _0(a,l,u,m,S){u=u.render;var k=l.ref;if("ref"in m){var F={};for(var G in m)G!=="ref"&&(F[G]=m[G])}else F=m;return Ao(l),m=xm(a,l,u,F,k,S),G=bm(),a!==null&&!Os?(Em(a,l,S),Ar(a,l,S)):(je&&G&&em(l),l.flags|=1,Xs(a,l,m,S),l.child)}function A0(a,l,u,m,S){if(a===null){var k=u.type;return typeof k=="function"&&!Qp(k)&&k.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=k,R0(a,l,k,m,S)):(a=Yd(u.type,null,m,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(k=a.child,!$m(a,S)){var F=k.memoizedProps;if(u=u.compare,u=u!==null?u:wu,u(F,m)&&a.ref===l.ref)return Ar(a,l,S)}return l.flags|=1,a=yr(k,m),a.ref=l.ref,a.return=l,l.child=a}function R0(a,l,u,m,S){if(a!==null){var k=a.memoizedProps;if(wu(k,m)&&a.ref===l.ref)if(Os=!1,l.pendingProps=m=k,$m(a,S))(a.flags&131072)!==0&&(Os=!0);else return l.lanes=a.lanes,Ar(a,l,S)}return Om(a,l,u,m,S)}function w0(a,l,u){var m=l.pendingProps,S=m.children,k=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=k!==null?k.baseLanes|u:u,a!==null){for(S=l.child=a.child,k=0;S!==null;)k=k|S.lanes|S.childLanes,S=S.sibling;l.childLanes=k&~m}else l.childLanes=0,l.child=null;return T0(a,l,m,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Jd(l,k!==null?k.cachePool:null),k!==null?Rv(l,k):gm(),f0(l);else return l.lanes=l.childLanes=536870912,T0(a,l,k!==null?k.baseLanes|u:u,u)}else k!==null?(Jd(l,k.cachePool),Rv(l,k),ga(),l.memoizedState=null):(a!==null&&Jd(l,null),gm(),ga());return Xs(a,l,S,u),l.child}function T0(a,l,u,m){var S=um();return S=S===null?null:{parent:Cs._currentValue,pool:S},l.memoizedState={baseLanes:u,cachePool:S},a!==null&&Jd(l,null),gm(),f0(l),a!==null&&Mu(a,l,m,!0),null}function yf(a,l){var u=l.ref;if(u===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(a===null||a.ref!==u)&&(l.flags|=4194816)}}function Om(a,l,u,m,S){return Ao(l),u=xm(a,l,u,m,void 0,S),m=bm(),a!==null&&!Os?(Em(a,l,S),Ar(a,l,S)):(je&&m&&em(l),l.flags|=1,Xs(a,l,u,S),l.child)}function C0(a,l,u,m,S,k){return Ao(l),l.updateQueue=null,u=Tv(l,m,u,S),wv(a),m=bm(),a!==null&&!Os?(Em(a,l,k),Ar(a,l,k)):(je&&m&&em(l),l.flags|=1,Xs(a,l,u,k),l.child)}function k0(a,l,u,m,S){if(Ao(l),l.stateNode===null){var k=Vl,F=u.contextType;typeof F=="object"&&F!==null&&(k=nn(F)),k=new u(m,k),l.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Dm,l.stateNode=k,k._reactInternals=l,k=l.stateNode,k.props=m,k.state=l.memoizedState,k.refs={},dm(l),F=u.contextType,k.context=typeof F=="object"&&F!==null?nn(F):Vl,k.state=l.memoizedState,F=u.getDerivedStateFromProps,typeof F=="function"&&(Lm(l,u,F,m),k.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(F=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),F!==k.state&&Dm.enqueueReplaceState(k,k.state,null),Iu(l,m,k,S),Ou(),k.state=l.memoizedState),typeof k.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(a===null){k=l.stateNode;var G=l.memoizedProps,W=To(u,G);k.props=W;var lt=k.context,pt=u.contextType;F=Vl,typeof pt=="object"&&pt!==null&&(F=nn(pt));var yt=u.getDerivedStateFromProps;pt=typeof yt=="function"||typeof k.getSnapshotBeforeUpdate=="function",G=l.pendingProps!==G,pt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(G||lt!==F)&&m0(l,k,m,F),ha=!1;var ut=l.memoizedState;k.state=ut,Iu(l,m,k,S),Ou(),lt=l.memoizedState,G||ut!==lt||ha?(typeof yt=="function"&&(Lm(l,u,yt,m),lt=l.memoizedState),(W=ha||p0(l,u,W,m,ut,lt,F))?(pt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(l.flags|=4194308)):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=lt),k.props=m,k.state=lt,k.context=F,m=W):(typeof k.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{k=l.stateNode,fm(a,l),F=l.memoizedProps,pt=To(u,F),k.props=pt,yt=l.pendingProps,ut=k.context,lt=u.contextType,W=Vl,typeof lt=="object"&&lt!==null&&(W=nn(lt)),G=u.getDerivedStateFromProps,(lt=typeof G=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(F!==yt||ut!==W)&&m0(l,k,m,W),ha=!1,ut=l.memoizedState,k.state=ut,Iu(l,m,k,S),Ou();var dt=l.memoizedState;F!==yt||ut!==dt||ha||a!==null&&a.dependencies!==null&&Zd(a.dependencies)?(typeof G=="function"&&(Lm(l,u,G,m),dt=l.memoizedState),(pt=ha||p0(l,u,pt,m,ut,dt,W)||a!==null&&a.dependencies!==null&&Zd(a.dependencies))?(lt||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,dt,W),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,dt,W)),typeof k.componentDidUpdate=="function"&&(l.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof k.componentDidUpdate!="function"||F===a.memoizedProps&&ut===a.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&ut===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=dt),k.props=m,k.state=dt,k.context=W,m=pt):(typeof k.componentDidUpdate!="function"||F===a.memoizedProps&&ut===a.memoizedState||(l.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&ut===a.memoizedState||(l.flags|=1024),m=!1)}return k=m,yf(a,l),m=(l.flags&128)!==0,k||m?(k=l.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:k.render(),l.flags|=1,a!==null&&m?(l.child=Jl(l,a.child,null,S),l.child=Jl(l,null,u,S)):Xs(a,l,u,S),l.memoizedState=k.state,a=l.child):a=Ar(a,l,S),a}function P0(a,l,u,m){return ku(),l.flags|=256,Xs(a,l,u,m),l.child}var Im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(a){return{baseLanes:a,cachePool:yv()}}function Hm(a,l,u){return a=a!==null?a.childLanes&~u:0,l&&(a|=ni),a}function M0(a,l,u){var m=l.pendingProps,S=!1,k=(l.flags&128)!==0,F;if((F=k)||(F=a!==null&&a.memoizedState===null?!1:(ks.current&2)!==0),F&&(S=!0,l.flags&=-129),F=(l.flags&32)!==0,l.flags&=-33,a===null){if(je){if(S?ma(l):ga(),je){var G=ds,W;if(W=G){t:{for(W=G,G=$i;W.nodeType!==8;){if(!G){G=null;break t}if(W=xi(W.nextSibling),W===null){G=null;break t}}G=W}G!==null?(l.memoizedState={dehydrated:G,treeContext:xo!==null?{id:vr,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},W=jn(18,null,null,0),W.stateNode=G,W.return=l,l.child=W,mn=l,ds=null,W=!0):W=!1}W||So(l)}if(G=l.memoizedState,G!==null&&(G=G.dehydrated,G!==null))return _g(G)?l.lanes=32:l.lanes=536870912,null;_r(l)}return G=m.children,m=m.fallback,S?(ga(),S=l.mode,G=vf({mode:"hidden",children:G},S),m=vo(m,S,u,null),G.return=l,m.return=l,G.sibling=m,l.child=G,S=l.child,S.memoizedState=Bm(u),S.childLanes=Hm(a,F,u),l.memoizedState=Im,m):(ma(l),zm(l,G))}if(W=a.memoizedState,W!==null&&(G=W.dehydrated,G!==null)){if(k)l.flags&256?(ma(l),l.flags&=-257,l=Um(a,l,u)):l.memoizedState!==null?(ga(),l.child=a.child,l.flags|=128,l=null):(ga(),S=m.fallback,G=l.mode,m=vf({mode:"visible",children:m.children},G),S=vo(S,G,u,null),S.flags|=2,m.return=l,S.return=l,m.sibling=S,l.child=m,Jl(l,a.child,null,u),m=l.child,m.memoizedState=Bm(u),m.childLanes=Hm(a,F,u),l.memoizedState=Im,l=S);else if(ma(l),_g(G)){if(F=G.nextSibling&&G.nextSibling.dataset,F)var lt=F.dgst;F=lt,m=Error(n(419)),m.stack="",m.digest=F,Pu({value:m,source:null,stack:null}),l=Um(a,l,u)}else if(Os||Mu(a,l,u,!1),F=(u&a.childLanes)!==0,Os||F){if(F=Ye,F!==null&&(m=u&-u,m=(m&42)!==0?1:Dt(m),m=(m&(F.suspendedLanes|u))!==0?0:m,m!==0&&m!==W.retryLane))throw W.retryLane=m,Ul(a,m),On(F,a,m),S0;G.data==="$?"||ag(),l=Um(a,l,u)}else G.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=W.treeContext,ds=xi(G.nextSibling),mn=l,je=!0,Eo=null,$i=!1,a!==null&&(ti[ei++]=vr,ti[ei++]=xr,ti[ei++]=xo,vr=a.id,xr=a.overflow,xo=l),l=zm(l,m.children),l.flags|=4096);return l}return S?(ga(),S=m.fallback,G=l.mode,W=a.child,lt=W.sibling,m=yr(W,{mode:"hidden",children:m.children}),m.subtreeFlags=W.subtreeFlags&65011712,lt!==null?S=yr(lt,S):(S=vo(S,G,u,null),S.flags|=2),S.return=l,m.return=l,m.sibling=S,l.child=m,m=S,S=l.child,G=a.child.memoizedState,G===null?G=Bm(u):(W=G.cachePool,W!==null?(lt=Cs._currentValue,W=W.parent!==lt?{parent:lt,pool:lt}:W):W=yv(),G={baseLanes:G.baseLanes|u,cachePool:W}),S.memoizedState=G,S.childLanes=Hm(a,F,u),l.memoizedState=Im,m):(ma(l),u=a.child,a=u.sibling,u=yr(u,{mode:"visible",children:m.children}),u.return=l,u.sibling=null,a!==null&&(F=l.deletions,F===null?(l.deletions=[a],l.flags|=16):F.push(a)),l.child=u,l.memoizedState=null,u)}function zm(a,l){return l=vf({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function vf(a,l){return a=jn(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Um(a,l,u){return Jl(l,a.child,null,u),a=zm(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function j0(a,l,u){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),am(a.return,l,u)}function Vm(a,l,u,m,S){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:S}:(k.isBackwards=l,k.rendering=null,k.renderingStartTime=0,k.last=m,k.tail=u,k.tailMode=S)}function N0(a,l,u){var m=l.pendingProps,S=m.revealOrder,k=m.tail;if(Xs(a,l,m.children,u),m=ks.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&j0(a,u,l);else if(a.tag===19)j0(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break t;for(;a.sibling===null;){if(a.return===null||a.return===l)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(st(ks,m),S){case"forwards":for(u=l.child,S=null;u!==null;)a=u.alternate,a!==null&&pf(a)===null&&(S=u),u=u.sibling;u=S,u===null?(S=l.child,l.child=null):(S=u.sibling,u.sibling=null),Vm(l,!1,S,u,k);break;case"backwards":for(u=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&pf(a)===null){l.child=S;break}a=S.sibling,S.sibling=u,u=S,S=a}Vm(l,!0,u,null,k);break;case"together":Vm(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ar(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),Ea|=l.lanes,(u&l.childLanes)===0)if(a!==null){if(Mu(a,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,u=yr(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=yr(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function $m(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Zd(a)))}function L1(a,l,u){switch(l.tag){case 3:It(l,l.stateNode.containerInfo),ua(l,Cs,a.memoizedState.cache),ku();break;case 27:case 5:Vt(l);break;case 4:It(l,l.stateNode.containerInfo);break;case 10:ua(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(ma(l),l.flags|=128,null):(u&l.child.childLanes)!==0?M0(a,l,u):(ma(l),a=Ar(a,l,u),a!==null?a.sibling:null);ma(l);break;case 19:var S=(a.flags&128)!==0;if(m=(u&l.childLanes)!==0,m||(Mu(a,l,u,!1),m=(u&l.childLanes)!==0),S){if(m)return N0(a,l,u);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),st(ks,ks.current),m)break;return null;case 22:case 23:return l.lanes=0,w0(a,l,u);case 24:ua(l,Cs,a.memoizedState.cache)}return Ar(a,l,u)}function L0(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps)Os=!0;else{if(!$m(a,u)&&(l.flags&128)===0)return Os=!1,L1(a,l,u);Os=(a.flags&131072)!==0}else Os=!1,je&&(l.flags&1048576)!==0&&uv(l,Kd,l.index);switch(l.lanes=0,l.tag){case 16:t:{a=l.pendingProps;var m=l.elementType,S=m._init;if(m=S(m._payload),l.type=m,typeof m=="function")Qp(m)?(a=To(m,a),l.tag=1,l=k0(null,l,m,a,u)):(l.tag=0,l=Om(null,l,m,a,u));else{if(m!=null){if(S=m.$$typeof,S===M){l.tag=11,l=_0(null,l,m,a,u);break t}else if(S===O){l.tag=14,l=A0(null,l,m,a,u);break t}}throw l=nt(m)||m,Error(n(306,l,""))}}return l;case 0:return Om(a,l,l.type,l.pendingProps,u);case 1:return m=l.type,S=To(m,l.pendingProps),k0(a,l,m,S,u);case 3:t:{if(It(l,l.stateNode.containerInfo),a===null)throw Error(n(387));m=l.pendingProps;var k=l.memoizedState;S=k.element,fm(a,l),Iu(l,m,null,u);var F=l.memoizedState;if(m=F.cache,ua(l,Cs,m),m!==k.cache&&om(l,[Cs],u,!0),Ou(),m=F.element,k.isDehydrated)if(k={element:m,isDehydrated:!1,cache:F.cache},l.updateQueue.baseState=k,l.memoizedState=k,l.flags&256){l=P0(a,l,m,u);break t}else if(m!==S){S=Qn(Error(n(424)),l),Pu(S),l=P0(a,l,m,u);break t}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ds=xi(a.firstChild),mn=l,je=!0,Eo=null,$i=!0,u=d0(l,null,m,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ku(),m===S){l=Ar(a,l,u);break t}Xs(a,l,m,u)}l=l.child}return l;case 26:return yf(a,l),a===null?(u=Ix(l.type,null,l.pendingProps,null))?l.memoizedState=u:je||(u=l.type,a=l.pendingProps,m=jf(mt.current).createElement(u),m[Pe]=l,m[rs]=a,Ws(m,u,a),fe(m),l.stateNode=m):l.memoizedState=Ix(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Vt(l),a===null&&je&&(m=l.stateNode=Dx(l.type,l.pendingProps,mt.current),mn=l,$i=!0,S=ds,Ra(l.type)?(Ag=S,ds=xi(m.firstChild)):ds=S),Xs(a,l,l.pendingProps.children,u),yf(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&je&&((S=m=ds)&&(m=lS(m,l.type,l.pendingProps,$i),m!==null?(l.stateNode=m,mn=l,ds=xi(m.firstChild),$i=!1,S=!0):S=!1),S||So(l)),Vt(l),S=l.type,k=l.pendingProps,F=a!==null?a.memoizedProps:null,m=k.children,bg(S,k)?m=null:F!==null&&bg(S,F)&&(l.flags|=32),l.memoizedState!==null&&(S=xm(a,l,w1,null,null,u),ah._currentValue=S),yf(a,l),Xs(a,l,m,u),l.child;case 6:return a===null&&je&&((a=u=ds)&&(u=cS(u,l.pendingProps,$i),u!==null?(l.stateNode=u,mn=l,ds=null,a=!0):a=!1),a||So(l)),null;case 13:return M0(a,l,u);case 4:return It(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=Jl(l,null,m,u):Xs(a,l,m,u),l.child;case 11:return _0(a,l,l.type,l.pendingProps,u);case 7:return Xs(a,l,l.pendingProps,u),l.child;case 8:return Xs(a,l,l.pendingProps.children,u),l.child;case 12:return Xs(a,l,l.pendingProps.children,u),l.child;case 10:return m=l.pendingProps,ua(l,l.type,m.value),Xs(a,l,m.children,u),l.child;case 9:return S=l.type._context,m=l.pendingProps.children,Ao(l),S=nn(S),m=m(S),l.flags|=1,Xs(a,l,m,u),l.child;case 14:return A0(a,l,l.type,l.pendingProps,u);case 15:return R0(a,l,l.type,l.pendingProps,u);case 19:return N0(a,l,u);case 31:return m=l.pendingProps,u=l.mode,m={mode:m.mode,children:m.children},a===null?(u=vf(m,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=yr(a.child,m),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return w0(a,l,u);case 24:return Ao(l),m=nn(Cs),a===null?(S=um(),S===null&&(S=Ye,k=lm(),S.pooledCache=k,k.refCount++,k!==null&&(S.pooledCacheLanes|=u),S=k),l.memoizedState={parent:m,cache:S},dm(l),ua(l,Cs,S)):((a.lanes&u)!==0&&(fm(a,l),Iu(l,null,null,u),Ou()),S=a.memoizedState,k=l.memoizedState,S.parent!==m?(S={parent:m,cache:m},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),ua(l,Cs,m)):(m=k.cache,ua(l,Cs,m),m!==S.cache&&om(l,[Cs],u,!0))),Xs(a,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Rr(a){a.flags|=4}function D0(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Vx(l)){if(l=si.current,l!==null&&((_e&4194048)===_e?Gi!==null:(_e&62914560)!==_e&&(_e&536870912)===0||l!==Gi))throw Du=hm,vv;a.flags|=8192}}function xf(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Et():536870912,a.lanes|=l,nc|=l)}function Gu(a,l){if(!je)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function os(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,m=0;if(l)for(var S=a.child;S!==null;)u|=S.lanes|S.childLanes,m|=S.subtreeFlags&65011712,m|=S.flags&65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)u|=S.lanes|S.childLanes,m|=S.subtreeFlags,m|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=m,a.childLanes=u,l}function D1(a,l,u){var m=l.pendingProps;switch(sm(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(l),null;case 1:return os(l),null;case 3:return u=l.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Er(Cs),le(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Cu(l)?Rr(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,fv())),os(l),null;case 26:return u=l.memoizedState,a===null?(Rr(l),u!==null?(os(l),D0(l,u)):(os(l),l.flags&=-16777217)):u?u!==a.memoizedState?(Rr(l),os(l),D0(l,u)):(os(l),l.flags&=-16777217):(a.memoizedProps!==m&&Rr(l),os(l),l.flags&=-16777217),null;case 27:ye(l),u=mt.current;var S=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==m&&Rr(l);else{if(!m){if(l.stateNode===null)throw Error(n(166));return os(l),null}a=ht.current,Cu(l)?hv(l):(a=Dx(S,m,u),l.stateNode=a,Rr(l))}return os(l),null;case 5:if(ye(l),u=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==m&&Rr(l);else{if(!m){if(l.stateNode===null)throw Error(n(166));return os(l),null}if(a=ht.current,Cu(l))hv(l);else{switch(S=jf(mt.current),a){case 1:a=S.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=S.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=S.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=S.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=S.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?S.createElement("select",{is:m.is}):S.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?S.createElement(u,{is:m.is}):S.createElement(u)}}a[Pe]=l,a[rs]=m;t:for(S=l.child;S!==null;){if(S.tag===5||S.tag===6)a.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===l)break t;for(;S.sibling===null;){if(S.return===null||S.return===l)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}l.stateNode=a;t:switch(Ws(a,u,m),u){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&Rr(l)}}return os(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==m&&Rr(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(a=mt.current,Cu(l)){if(a=l.stateNode,u=l.memoizedProps,m=null,S=mn,S!==null)switch(S.tag){case 27:case 5:m=S.memoizedProps}a[Pe]=l,a=!!(a.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||Cx(a.nodeValue,u)),a||So(l)}else a=jf(a).createTextNode(m),a[Pe]=l,l.stateNode=a}return os(l),null;case 13:if(m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(S=Cu(l),m!==null&&m.dehydrated!==null){if(a===null){if(!S)throw Error(n(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Pe]=l}else ku(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;os(l),S=!1}else S=fv(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return l.flags&256?(_r(l),l):(_r(l),null)}if(_r(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=m!==null,a=a!==null&&a.memoizedState!==null,u){m=l.child,S=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(S=m.alternate.memoizedState.cachePool.pool);var k=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(k=m.memoizedState.cachePool.pool),k!==S&&(m.flags|=2048)}return u!==a&&u&&(l.child.flags|=8192),xf(l,l.updateQueue),os(l),null;case 4:return le(),a===null&&mg(l.stateNode.containerInfo),os(l),null;case 10:return Er(l.type),os(l),null;case 19:if(K(ks),S=l.memoizedState,S===null)return os(l),null;if(m=(l.flags&128)!==0,k=S.rendering,k===null)if(m)Gu(S,!1);else{if(fs!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(k=pf(a),k!==null){for(l.flags|=128,Gu(S,!1),a=k.updateQueue,l.updateQueue=a,xf(l,a),l.subtreeFlags=0,a=u,u=l.child;u!==null;)cv(u,a),u=u.sibling;return st(ks,ks.current&1|2),l.child}a=a.sibling}S.tail!==null&&Mt()>Sf&&(l.flags|=128,m=!0,Gu(S,!1),l.lanes=4194304)}else{if(!m)if(a=pf(k),a!==null){if(l.flags|=128,m=!0,a=a.updateQueue,l.updateQueue=a,xf(l,a),Gu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!k.alternate&&!je)return os(l),null}else 2*Mt()-S.renderingStartTime>Sf&&u!==536870912&&(l.flags|=128,m=!0,Gu(S,!1),l.lanes=4194304);S.isBackwards?(k.sibling=l.child,l.child=k):(a=S.last,a!==null?a.sibling=k:l.child=k,S.last=k)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Mt(),l.sibling=null,a=ks.current,st(ks,m?a&1|2:a&1),l):(os(l),null);case 22:case 23:return _r(l),ym(),m=l.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(u&536870912)!==0&&(l.flags&128)===0&&(os(l),l.subtreeFlags&6&&(l.flags|=8192)):os(l),u=l.updateQueue,u!==null&&xf(l,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==u&&(l.flags|=2048),a!==null&&K(Ro),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Er(Cs),os(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function F1(a,l){switch(sm(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Er(Cs),le(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return ye(l),null;case 13:if(_r(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));ku()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return K(ks),null;case 4:return le(),null;case 10:return Er(l.type),null;case 22:case 23:return _r(l),ym(),a!==null&&K(Ro),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Er(Cs),null;case 25:return null;default:return null}}function F0(a,l){switch(sm(l),l.tag){case 3:Er(Cs),le();break;case 26:case 27:case 5:ye(l);break;case 4:le();break;case 13:_r(l);break;case 19:K(ks);break;case 10:Er(l.type);break;case 22:case 23:_r(l),ym(),a!==null&&K(Ro);break;case 24:Er(Cs)}}function qu(a,l){try{var u=l.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var S=m.next;u=S;do{if((u.tag&a)===a){m=void 0;var k=u.create,F=u.inst;m=k(),F.destroy=m}u=u.next}while(u!==S)}}catch(G){qe(l,l.return,G)}}function ya(a,l,u){try{var m=l.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var k=S.next;m=k;do{if((m.tag&a)===a){var F=m.inst,G=F.destroy;if(G!==void 0){F.destroy=void 0,S=l;var W=u,lt=G;try{lt()}catch(pt){qe(S,W,pt)}}}m=m.next}while(m!==k)}}catch(pt){qe(l,l.return,pt)}}function O0(a){var l=a.updateQueue;if(l!==null){var u=a.stateNode;try{Av(l,u)}catch(m){qe(a,a.return,m)}}}function I0(a,l,u){u.props=To(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(m){qe(a,l,m)}}function Xu(a,l){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof u=="function"?a.refCleanup=u(m):u.current=m}}catch(S){qe(a,l,S)}}function qi(a,l){var u=a.ref,m=a.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(S){qe(a,l,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(S){qe(a,l,S)}else u.current=null}function B0(a){var l=a.type,u=a.memoizedProps,m=a.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break t;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(S){qe(a,a.return,S)}}function Gm(a,l,u){try{var m=a.stateNode;nS(m,a.type,u,l),m[rs]=l}catch(S){qe(a,a.return,S)}}function H0(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ra(a.type)||a.tag===4}function qm(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||H0(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ra(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Xm(a,l,u){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(a),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Mf));else if(m!==4&&(m===27&&Ra(a.type)&&(u=a.stateNode,l=null),a=a.child,a!==null))for(Xm(a,l,u),a=a.sibling;a!==null;)Xm(a,l,u),a=a.sibling}function bf(a,l,u){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(m!==4&&(m===27&&Ra(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(bf(a,l,u),a=a.sibling;a!==null;)bf(a,l,u),a=a.sibling}function z0(a){var l=a.stateNode,u=a.memoizedProps;try{for(var m=a.type,S=l.attributes;S.length;)l.removeAttributeNode(S[0]);Ws(l,m,u),l[Pe]=a,l[rs]=u}catch(k){qe(a,a.return,k)}}var wr=!1,bs=!1,Ym=!1,U0=typeof WeakSet=="function"?WeakSet:Set,Is=null;function O1(a,l){if(a=a.containerInfo,vg=If,a=Jy(a),Gp(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{u=(u=a.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var S=m.anchorOffset,k=m.focusNode;m=m.focusOffset;try{u.nodeType,k.nodeType}catch{u=null;break t}var F=0,G=-1,W=-1,lt=0,pt=0,yt=a,ut=null;e:for(;;){for(var dt;yt!==u||S!==0&&yt.nodeType!==3||(G=F+S),yt!==k||m!==0&&yt.nodeType!==3||(W=F+m),yt.nodeType===3&&(F+=yt.nodeValue.length),(dt=yt.firstChild)!==null;)ut=yt,yt=dt;for(;;){if(yt===a)break e;if(ut===u&&++lt===S&&(G=F),ut===k&&++pt===m&&(W=F),(dt=yt.nextSibling)!==null)break;yt=ut,ut=yt.parentNode}yt=dt}u=G===-1||W===-1?null:{start:G,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(xg={focusedElem:a,selectionRange:u},If=!1,Is=l;Is!==null;)if(l=Is,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,Is=a;else for(;Is!==null;){switch(l=Is,k=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&k!==null){a=void 0,u=l,S=k.memoizedProps,k=k.memoizedState,m=u.stateNode;try{var Kt=To(u.type,S,u.elementType===u.type);a=m.getSnapshotBeforeUpdate(Kt,k),m.__reactInternalSnapshotBeforeUpdate=a}catch($t){qe(u,u.return,$t)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,u=a.nodeType,u===9)Sg(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Sg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,Is=a;break}Is=l.return}}function V0(a,l,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:va(a,u),m&4&&qu(5,u);break;case 1:if(va(a,u),m&4)if(a=u.stateNode,l===null)try{a.componentDidMount()}catch(F){qe(u,u.return,F)}else{var S=To(u.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(S,l,a.__reactInternalSnapshotBeforeUpdate)}catch(F){qe(u,u.return,F)}}m&64&&O0(u),m&512&&Xu(u,u.return);break;case 3:if(va(a,u),m&64&&(a=u.updateQueue,a!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{Av(a,l)}catch(F){qe(u,u.return,F)}}break;case 27:l===null&&m&4&&z0(u);case 26:case 5:va(a,u),l===null&&m&4&&B0(u),m&512&&Xu(u,u.return);break;case 12:va(a,u);break;case 13:va(a,u),m&4&&q0(a,u),m&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=q1.bind(null,u),uS(a,u))));break;case 22:if(m=u.memoizedState!==null||wr,!m){l=l!==null&&l.memoizedState!==null||bs,S=wr;var k=bs;wr=m,(bs=l)&&!k?xa(a,u,(u.subtreeFlags&8772)!==0):va(a,u),wr=S,bs=k}break;case 30:break;default:va(a,u)}}function $0(a){var l=a.alternate;l!==null&&(a.alternate=null,$0(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&kt(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ss=null,_n=!1;function Tr(a,l,u){for(u=u.child;u!==null;)G0(a,l,u),u=u.sibling}function G0(a,l,u){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(be,u)}catch{}switch(u.tag){case 26:bs||qi(u,l),Tr(a,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:bs||qi(u,l);var m=ss,S=_n;Ra(u.type)&&(ss=u.stateNode,_n=!1),Tr(a,l,u),sh(u.stateNode),ss=m,_n=S;break;case 5:bs||qi(u,l);case 6:if(m=ss,S=_n,ss=null,Tr(a,l,u),ss=m,_n=S,ss!==null)if(_n)try{(ss.nodeType===9?ss.body:ss.nodeName==="HTML"?ss.ownerDocument.body:ss).removeChild(u.stateNode)}catch(k){qe(u,l,k)}else try{ss.removeChild(u.stateNode)}catch(k){qe(u,l,k)}break;case 18:ss!==null&&(_n?(a=ss,Nx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),uh(a)):Nx(ss,u.stateNode));break;case 4:m=ss,S=_n,ss=u.stateNode.containerInfo,_n=!0,Tr(a,l,u),ss=m,_n=S;break;case 0:case 11:case 14:case 15:bs||ya(2,u,l),bs||ya(4,u,l),Tr(a,l,u);break;case 1:bs||(qi(u,l),m=u.stateNode,typeof m.componentWillUnmount=="function"&&I0(u,l,m)),Tr(a,l,u);break;case 21:Tr(a,l,u);break;case 22:bs=(m=bs)||u.memoizedState!==null,Tr(a,l,u),bs=m;break;default:Tr(a,l,u)}}function q0(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{uh(a)}catch(u){qe(l,l.return,u)}}function I1(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new U0),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new U0),l;default:throw Error(n(435,a.tag))}}function Wm(a,l){var u=I1(a);l.forEach(function(m){var S=X1.bind(null,a,m);u.has(m)||(u.add(m),m.then(S,S))})}function Nn(a,l){var u=l.deletions;if(u!==null)for(var m=0;m<u.length;m++){var S=u[m],k=a,F=l,G=F;t:for(;G!==null;){switch(G.tag){case 27:if(Ra(G.type)){ss=G.stateNode,_n=!1;break t}break;case 5:ss=G.stateNode,_n=!1;break t;case 3:case 4:ss=G.stateNode.containerInfo,_n=!0;break t}G=G.return}if(ss===null)throw Error(n(160));G0(k,F,S),ss=null,_n=!1,k=S.alternate,k!==null&&(k.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)X0(l,a),l=l.sibling}var vi=null;function X0(a,l){var u=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Nn(l,a),Ln(a),m&4&&(ya(3,a,a.return),qu(3,a),ya(5,a,a.return));break;case 1:Nn(l,a),Ln(a),m&512&&(bs||u===null||qi(u,u.return)),m&64&&wr&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var S=vi;if(Nn(l,a),Ln(a),m&512&&(bs||u===null||qi(u,u.return)),m&4){var k=u!==null?u.memoizedState:null;if(m=a.memoizedState,u===null)if(m===null)if(a.stateNode===null){t:{m=a.type,u=a.memoizedProps,S=S.ownerDocument||S;e:switch(m){case"title":k=S.getElementsByTagName("title")[0],(!k||k[rt]||k[Pe]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=S.createElement(m),S.head.insertBefore(k,S.querySelector("head > title"))),Ws(k,m,u),k[Pe]=a,fe(k),m=k;break t;case"link":var F=zx("link","href",S).get(m+(u.href||""));if(F){for(var G=0;G<F.length;G++)if(k=F[G],k.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&k.getAttribute("rel")===(u.rel==null?null:u.rel)&&k.getAttribute("title")===(u.title==null?null:u.title)&&k.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){F.splice(G,1);break e}}k=S.createElement(m),Ws(k,m,u),S.head.appendChild(k);break;case"meta":if(F=zx("meta","content",S).get(m+(u.content||""))){for(G=0;G<F.length;G++)if(k=F[G],k.getAttribute("content")===(u.content==null?null:""+u.content)&&k.getAttribute("name")===(u.name==null?null:u.name)&&k.getAttribute("property")===(u.property==null?null:u.property)&&k.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&k.getAttribute("charset")===(u.charSet==null?null:u.charSet)){F.splice(G,1);break e}}k=S.createElement(m),Ws(k,m,u),S.head.appendChild(k);break;default:throw Error(n(468,m))}k[Pe]=a,fe(k),m=k}a.stateNode=m}else Ux(S,a.type,a.stateNode);else a.stateNode=Hx(S,m,a.memoizedProps);else k!==m?(k===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):k.count--,m===null?Ux(S,a.type,a.stateNode):Hx(S,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Gm(a,a.memoizedProps,u.memoizedProps)}break;case 27:Nn(l,a),Ln(a),m&512&&(bs||u===null||qi(u,u.return)),u!==null&&m&4&&Gm(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Nn(l,a),Ln(a),m&512&&(bs||u===null||qi(u,u.return)),a.flags&32){S=a.stateNode;try{pi(S,"")}catch(dt){qe(a,a.return,dt)}}m&4&&a.stateNode!=null&&(S=a.memoizedProps,Gm(a,S,u!==null?u.memoizedProps:S)),m&1024&&(Ym=!0);break;case 6:if(Nn(l,a),Ln(a),m&4){if(a.stateNode===null)throw Error(n(162));m=a.memoizedProps,u=a.stateNode;try{u.nodeValue=m}catch(dt){qe(a,a.return,dt)}}break;case 3:if(Df=null,S=vi,vi=Nf(l.containerInfo),Nn(l,a),vi=S,Ln(a),m&4&&u!==null&&u.memoizedState.isDehydrated)try{uh(l.containerInfo)}catch(dt){qe(a,a.return,dt)}Ym&&(Ym=!1,Y0(a));break;case 4:m=vi,vi=Nf(a.stateNode.containerInfo),Nn(l,a),Ln(a),vi=m;break;case 12:Nn(l,a),Ln(a);break;case 13:Nn(l,a),Ln(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(eg=Mt()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Wm(a,m)));break;case 22:S=a.memoizedState!==null;var W=u!==null&&u.memoizedState!==null,lt=wr,pt=bs;if(wr=lt||S,bs=pt||W,Nn(l,a),bs=pt,wr=lt,Ln(a),m&8192)t:for(l=a.stateNode,l._visibility=S?l._visibility&-2:l._visibility|1,S&&(u===null||W||wr||bs||Co(a)),u=null,l=a;;){if(l.tag===5||l.tag===26){if(u===null){W=u=l;try{if(k=W.stateNode,S)F=k.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{G=W.stateNode;var yt=W.memoizedProps.style,ut=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;G.style.display=ut==null||typeof ut=="boolean"?"":(""+ut).trim()}}catch(dt){qe(W,W.return,dt)}}}else if(l.tag===6){if(u===null){W=l;try{W.stateNode.nodeValue=S?"":W.memoizedProps}catch(dt){qe(W,W.return,dt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break t;for(;l.sibling===null;){if(l.return===null||l.return===a)break t;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=a.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,Wm(a,u))));break;case 19:Nn(l,a),Ln(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Wm(a,m)));break;case 30:break;case 21:break;default:Nn(l,a),Ln(a)}}function Ln(a){var l=a.flags;if(l&2){try{for(var u,m=a.return;m!==null;){if(H0(m)){u=m;break}m=m.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var S=u.stateNode,k=qm(a);bf(a,k,S);break;case 5:var F=u.stateNode;u.flags&32&&(pi(F,""),u.flags&=-33);var G=qm(a);bf(a,G,F);break;case 3:case 4:var W=u.stateNode.containerInfo,lt=qm(a);Xm(a,lt,W);break;default:throw Error(n(161))}}catch(pt){qe(a,a.return,pt)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Y0(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;Y0(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function va(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)V0(a,l.alternate,l),l=l.sibling}function Co(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:ya(4,l,l.return),Co(l);break;case 1:qi(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&I0(l,l.return,u),Co(l);break;case 27:sh(l.stateNode);case 26:case 5:qi(l,l.return),Co(l);break;case 22:l.memoizedState===null&&Co(l);break;case 30:Co(l);break;default:Co(l)}a=a.sibling}}function xa(a,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,S=a,k=l,F=k.flags;switch(k.tag){case 0:case 11:case 15:xa(S,k,u),qu(4,k);break;case 1:if(xa(S,k,u),m=k,S=m.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(lt){qe(m,m.return,lt)}if(m=k,S=m.updateQueue,S!==null){var G=m.stateNode;try{var W=S.shared.hiddenCallbacks;if(W!==null)for(S.shared.hiddenCallbacks=null,S=0;S<W.length;S++)_v(W[S],G)}catch(lt){qe(m,m.return,lt)}}u&&F&64&&O0(k),Xu(k,k.return);break;case 27:z0(k);case 26:case 5:xa(S,k,u),u&&m===null&&F&4&&B0(k),Xu(k,k.return);break;case 12:xa(S,k,u);break;case 13:xa(S,k,u),u&&F&4&&q0(S,k);break;case 22:k.memoizedState===null&&xa(S,k,u),Xu(k,k.return);break;case 30:break;default:xa(S,k,u)}l=l.sibling}}function Km(a,l){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&ju(u))}function Zm(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&ju(a))}function Xi(a,l,u,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)W0(a,l,u,m),l=l.sibling}function W0(a,l,u,m){var S=l.flags;switch(l.tag){case 0:case 11:case 15:Xi(a,l,u,m),S&2048&&qu(9,l);break;case 1:Xi(a,l,u,m);break;case 3:Xi(a,l,u,m),S&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&ju(a)));break;case 12:if(S&2048){Xi(a,l,u,m),a=l.stateNode;try{var k=l.memoizedProps,F=k.id,G=k.onPostCommit;typeof G=="function"&&G(F,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(W){qe(l,l.return,W)}}else Xi(a,l,u,m);break;case 13:Xi(a,l,u,m);break;case 23:break;case 22:k=l.stateNode,F=l.alternate,l.memoizedState!==null?k._visibility&2?Xi(a,l,u,m):Yu(a,l):k._visibility&2?Xi(a,l,u,m):(k._visibility|=2,tc(a,l,u,m,(l.subtreeFlags&10256)!==0)),S&2048&&Km(F,l);break;case 24:Xi(a,l,u,m),S&2048&&Zm(l.alternate,l);break;default:Xi(a,l,u,m)}}function tc(a,l,u,m,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var k=a,F=l,G=u,W=m,lt=F.flags;switch(F.tag){case 0:case 11:case 15:tc(k,F,G,W,S),qu(8,F);break;case 23:break;case 22:var pt=F.stateNode;F.memoizedState!==null?pt._visibility&2?tc(k,F,G,W,S):Yu(k,F):(pt._visibility|=2,tc(k,F,G,W,S)),S&&lt&2048&&Km(F.alternate,F);break;case 24:tc(k,F,G,W,S),S&&lt&2048&&Zm(F.alternate,F);break;default:tc(k,F,G,W,S)}l=l.sibling}}function Yu(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=a,m=l,S=m.flags;switch(m.tag){case 22:Yu(u,m),S&2048&&Km(m.alternate,m);break;case 24:Yu(u,m),S&2048&&Zm(m.alternate,m);break;default:Yu(u,m)}l=l.sibling}}var Wu=8192;function ec(a){if(a.subtreeFlags&Wu)for(a=a.child;a!==null;)K0(a),a=a.sibling}function K0(a){switch(a.tag){case 26:ec(a),a.flags&Wu&&a.memoizedState!==null&&_S(vi,a.memoizedState,a.memoizedProps);break;case 5:ec(a);break;case 3:case 4:var l=vi;vi=Nf(a.stateNode.containerInfo),ec(a),vi=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Wu,Wu=16777216,ec(a),Wu=l):ec(a));break;default:ec(a)}}function Z0(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Ku(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var m=l[u];Is=m,J0(m,a)}Z0(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Q0(a),a=a.sibling}function Q0(a){switch(a.tag){case 0:case 11:case 15:Ku(a),a.flags&2048&&ya(9,a,a.return);break;case 3:Ku(a);break;case 12:Ku(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Ef(a)):Ku(a);break;default:Ku(a)}}function Ef(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var m=l[u];Is=m,J0(m,a)}Z0(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:ya(8,l,l.return),Ef(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Ef(l));break;default:Ef(l)}a=a.sibling}}function J0(a,l){for(;Is!==null;){var u=Is;switch(u.tag){case 0:case 11:case 15:ya(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ju(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Is=m;else t:for(u=a;Is!==null;){m=Is;var S=m.sibling,k=m.return;if($0(m),m===u){Is=null;break t}if(S!==null){S.return=k,Is=S;break t}Is=k}}}var B1={getCacheForType:function(a){var l=nn(Cs),u=l.data.get(a);return u===void 0&&(u=a(),l.data.set(a,u)),u}},H1=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Ye=null,me=null,_e=0,Oe=0,Dn=null,ba=!1,sc=!1,Qm=!1,Cr=0,fs=0,Ea=0,ko=0,Jm=0,ni=0,nc=0,Zu=null,An=null,tg=!1,eg=0,Sf=1/0,_f=null,Sa=null,Ys=0,_a=null,ic=null,rc=0,sg=0,ng=null,tx=null,Qu=0,ig=null;function Fn(){if((Fe&2)!==0&&_e!==0)return _e&-_e;if(D.T!==null){var a=ql;return a!==0?a:hg()}return qt()}function ex(){ni===0&&(ni=(_e&536870912)===0||je?ft():536870912);var a=si.current;return a!==null&&(a.flags|=32),ni}function On(a,l,u){(a===Ye&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)&&(ac(a,0),Aa(a,_e,ni,!1)),se(a,u),((Fe&2)===0||a!==Ye)&&(a===Ye&&((Fe&2)===0&&(ko|=u),fs===4&&Aa(a,_e,ni,!1)),Yi(a))}function sx(a,l,u){if((Fe&6)!==0)throw Error(n(327));var m=!u&&(l&124)===0&&(l&a.expiredLanes)===0||Fs(a,l),S=m?V1(a,l):og(a,l,!0),k=m;do{if(S===0){sc&&!m&&Aa(a,l,0,!1);break}else{if(u=a.current.alternate,k&&!z1(u)){S=og(a,l,!1),k=!1;continue}if(S===2){if(k=l,a.errorRecoveryDisabledLanes&k)var F=0;else F=a.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){l=F;t:{var G=a;S=Zu;var W=G.current.memoizedState.isDehydrated;if(W&&(ac(G,F).flags|=256),F=og(G,F,!1),F!==2){if(Qm&&!W){G.errorRecoveryDisabledLanes|=k,ko|=k,S=4;break t}k=An,An=S,k!==null&&(An===null?An=k:An.push.apply(An,k))}S=F}if(k=!1,S!==2)continue}}if(S===1){ac(a,0),Aa(a,l,0,!0);break}t:{switch(m=a,k=S,k){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Aa(m,l,ni,!ba);break t;case 2:An=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(S=eg+300-Mt(),10<S)){if(Aa(m,l,ni,!ba),Di(m,0,!0)!==0)break t;m.timeoutHandle=Mx(nx.bind(null,m,u,An,_f,tg,l,ni,ko,nc,ba,k,2,-0,0),S);break t}nx(m,u,An,_f,tg,l,ni,ko,nc,ba,k,0,-0,0)}}break}while(!0);Yi(a)}function nx(a,l,u,m,S,k,F,G,W,lt,pt,yt,ut,dt){if(a.timeoutHandle=-1,yt=l.subtreeFlags,(yt&8192||(yt&16785408)===16785408)&&(rh={stylesheets:null,count:0,unsuspend:SS},K0(l),yt=AS(),yt!==null)){a.cancelPendingCommit=yt(ux.bind(null,a,l,k,u,m,S,F,G,W,pt,1,ut,dt)),Aa(a,k,F,!lt);return}ux(a,l,k,u,m,S,F,G,W)}function z1(a){for(var l=a;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var S=u[m],k=S.getSnapshot;S=S.value;try{if(!Mn(k(),S))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Aa(a,l,u,m){l&=~Jm,l&=~ko,a.suspendedLanes|=l,a.pingedLanes&=~l,m&&(a.warmLanes|=l),m=a.expirationTimes;for(var S=l;0<S;){var k=31-we(S),F=1<<k;m[k]=-1,S&=~F}u!==0&&Xe(a,u,l)}function Af(){return(Fe&6)===0?(Ju(0),!1):!0}function rg(){if(me!==null){if(Oe===0)var a=me.return;else a=me,br=_o=null,Sm(a),Ql=null,Vu=0,a=me;for(;a!==null;)F0(a.alternate,a),a=a.return;me=null}}function ac(a,l){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,rS(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),rg(),Ye=a,me=u=yr(a.current,null),_e=l,Oe=0,Dn=null,ba=!1,sc=Fs(a,l),Qm=!1,nc=ni=Jm=ko=Ea=fs=0,An=Zu=null,tg=!1,(l&8)!==0&&(l|=l&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=l;0<m;){var S=31-we(m),k=1<<S;l|=a[S],m&=~k}return Cr=l,Gd(),u}function ix(a,l){ce=null,D.H=hf,l===Lu||l===tf?(l=Ev(),Oe=3):l===vv?(l=Ev(),Oe=4):Oe=l===S0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Dn=l,me===null&&(fs=1,gf(a,Qn(l,a.current)))}function rx(){var a=D.H;return D.H=hf,a===null?hf:a}function ax(){var a=D.A;return D.A=B1,a}function ag(){fs=4,ba||(_e&4194048)!==_e&&si.current!==null||(sc=!0),(Ea&134217727)===0&&(ko&134217727)===0||Ye===null||Aa(Ye,_e,ni,!1)}function og(a,l,u){var m=Fe;Fe|=2;var S=rx(),k=ax();(Ye!==a||_e!==l)&&(_f=null,ac(a,l)),l=!1;var F=fs;t:do try{if(Oe!==0&&me!==null){var G=me,W=Dn;switch(Oe){case 8:rg(),F=6;break t;case 3:case 2:case 9:case 6:si.current===null&&(l=!0);var lt=Oe;if(Oe=0,Dn=null,oc(a,G,W,lt),u&&sc){F=0;break t}break;default:lt=Oe,Oe=0,Dn=null,oc(a,G,W,lt)}}U1(),F=fs;break}catch(pt){ix(a,pt)}while(!0);return l&&a.shellSuspendCounter++,br=_o=null,Fe=m,D.H=S,D.A=k,me===null&&(Ye=null,_e=0,Gd()),F}function U1(){for(;me!==null;)ox(me)}function V1(a,l){var u=Fe;Fe|=2;var m=rx(),S=ax();Ye!==a||_e!==l?(_f=null,Sf=Mt()+500,ac(a,l)):sc=Fs(a,l);t:do try{if(Oe!==0&&me!==null){l=me;var k=Dn;e:switch(Oe){case 1:Oe=0,Dn=null,oc(a,l,k,1);break;case 2:case 9:if(xv(k)){Oe=0,Dn=null,lx(l);break}l=function(){Oe!==2&&Oe!==9||Ye!==a||(Oe=7),Yi(a)},k.then(l,l);break t;case 3:Oe=7;break t;case 4:Oe=5;break t;case 7:xv(k)?(Oe=0,Dn=null,lx(l)):(Oe=0,Dn=null,oc(a,l,k,7));break;case 5:var F=null;switch(me.tag){case 26:F=me.memoizedState;case 5:case 27:var G=me;if(!F||Vx(F)){Oe=0,Dn=null;var W=G.sibling;if(W!==null)me=W;else{var lt=G.return;lt!==null?(me=lt,Rf(lt)):me=null}break e}}Oe=0,Dn=null,oc(a,l,k,5);break;case 6:Oe=0,Dn=null,oc(a,l,k,6);break;case 8:rg(),fs=6;break t;default:throw Error(n(462))}}$1();break}catch(pt){ix(a,pt)}while(!0);return br=_o=null,D.H=m,D.A=S,Fe=u,me!==null?0:(Ye=null,_e=0,Gd(),fs)}function $1(){for(;me!==null&&!Ee();)ox(me)}function ox(a){var l=L0(a.alternate,a,Cr);a.memoizedProps=a.pendingProps,l===null?Rf(a):me=l}function lx(a){var l=a,u=l.alternate;switch(l.tag){case 15:case 0:l=C0(u,l,l.pendingProps,l.type,void 0,_e);break;case 11:l=C0(u,l,l.pendingProps,l.type.render,l.ref,_e);break;case 5:Sm(l);default:F0(u,l),l=me=cv(l,Cr),l=L0(u,l,Cr)}a.memoizedProps=a.pendingProps,l===null?Rf(a):me=l}function oc(a,l,u,m){br=_o=null,Sm(l),Ql=null,Vu=0;var S=l.return;try{if(N1(a,S,l,u,_e)){fs=1,gf(a,Qn(u,a.current)),me=null;return}}catch(k){if(S!==null)throw me=S,k;fs=1,gf(a,Qn(u,a.current)),me=null;return}l.flags&32768?(je||m===1?a=!0:sc||(_e&536870912)!==0?a=!1:(ba=a=!0,(m===2||m===9||m===3||m===6)&&(m=si.current,m!==null&&m.tag===13&&(m.flags|=16384))),cx(l,a)):Rf(l)}function Rf(a){var l=a;do{if((l.flags&32768)!==0){cx(l,ba);return}a=l.return;var u=D1(l.alternate,l,Cr);if(u!==null){me=u;return}if(l=l.sibling,l!==null){me=l;return}me=l=a}while(l!==null);fs===0&&(fs=5)}function cx(a,l){do{var u=F1(a.alternate,a);if(u!==null){u.flags&=32767,me=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(a=a.sibling,a!==null)){me=a;return}me=a=u}while(a!==null);fs=6,me=null}function ux(a,l,u,m,S,k,F,G,W){a.cancelPendingCommit=null;do wf();while(Ys!==0);if((Fe&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(k=l.lanes|l.childLanes,k|=Kp,ue(a,u,k,F,G,W),a===Ye&&(me=Ye=null,_e=0),ic=l,_a=a,rc=u,sg=k,ng=S,tx=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Y1(ee,function(){return mx(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=D.T,D.T=null,S=U.p,U.p=2,F=Fe,Fe|=4;try{O1(a,l,u)}finally{Fe=F,U.p=S,D.T=m}}Ys=1,hx(),dx(),fx()}}function hx(){if(Ys===1){Ys=0;var a=_a,l=ic,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=D.T,D.T=null;var m=U.p;U.p=2;var S=Fe;Fe|=4;try{X0(l,a);var k=xg,F=Jy(a.containerInfo),G=k.focusedElem,W=k.selectionRange;if(F!==G&&G&&G.ownerDocument&&Qy(G.ownerDocument.documentElement,G)){if(W!==null&&Gp(G)){var lt=W.start,pt=W.end;if(pt===void 0&&(pt=lt),"selectionStart"in G)G.selectionStart=lt,G.selectionEnd=Math.min(pt,G.value.length);else{var yt=G.ownerDocument||document,ut=yt&&yt.defaultView||window;if(ut.getSelection){var dt=ut.getSelection(),Kt=G.textContent.length,$t=Math.min(W.start,Kt),Ue=W.end===void 0?$t:Math.min(W.end,Kt);!dt.extend&&$t>Ue&&(F=Ue,Ue=$t,$t=F);var it=Zy(G,$t),et=Zy(G,Ue);if(it&&et&&(dt.rangeCount!==1||dt.anchorNode!==it.node||dt.anchorOffset!==it.offset||dt.focusNode!==et.node||dt.focusOffset!==et.offset)){var ot=yt.createRange();ot.setStart(it.node,it.offset),dt.removeAllRanges(),$t>Ue?(dt.addRange(ot),dt.extend(et.node,et.offset)):(ot.setEnd(et.node,et.offset),dt.addRange(ot))}}}}for(yt=[],dt=G;dt=dt.parentNode;)dt.nodeType===1&&yt.push({element:dt,left:dt.scrollLeft,top:dt.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<yt.length;G++){var gt=yt[G];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}If=!!vg,xg=vg=null}finally{Fe=S,U.p=m,D.T=u}}a.current=l,Ys=2}}function dx(){if(Ys===2){Ys=0;var a=_a,l=ic,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=D.T,D.T=null;var m=U.p;U.p=2;var S=Fe;Fe|=4;try{V0(a,l.alternate,l)}finally{Fe=S,U.p=m,D.T=u}}Ys=3}}function fx(){if(Ys===4||Ys===3){Ys=0,xe();var a=_a,l=ic,u=rc,m=tx;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ys=5:(Ys=0,ic=_a=null,px(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&&(Sa=null),Gt(u),l=l.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(be,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=D.T,S=U.p,U.p=2,D.T=null;try{for(var k=a.onRecoverableError,F=0;F<m.length;F++){var G=m[F];k(G.value,{componentStack:G.stack})}}finally{D.T=l,U.p=S}}(rc&3)!==0&&wf(),Yi(a),S=a.pendingLanes,(u&4194090)!==0&&(S&42)!==0?a===ig?Qu++:(Qu=0,ig=a):Qu=0,Ju(0)}}function px(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,ju(l)))}function wf(a){return hx(),dx(),fx(),mx()}function mx(){if(Ys!==5)return!1;var a=_a,l=sg;sg=0;var u=Gt(rc),m=D.T,S=U.p;try{U.p=32>u?32:u,D.T=null,u=ng,ng=null;var k=_a,F=rc;if(Ys=0,ic=_a=null,rc=0,(Fe&6)!==0)throw Error(n(331));var G=Fe;if(Fe|=4,Q0(k.current),W0(k,k.current,F,u),Fe=G,Ju(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(be,k)}catch{}return!0}finally{U.p=S,D.T=m,px(a,l)}}function gx(a,l,u){l=Qn(u,l),l=Fm(a.stateNode,l,2),a=fa(a,l,2),a!==null&&(se(a,2),Yi(a))}function qe(a,l,u){if(a.tag===3)gx(a,a,u);else for(;l!==null;){if(l.tag===3){gx(l,a,u);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Sa===null||!Sa.has(m))){a=Qn(u,a),u=b0(2),m=fa(l,u,2),m!==null&&(E0(u,m,l,a),se(m,2),Yi(m));break}}l=l.return}}function lg(a,l,u){var m=a.pingCache;if(m===null){m=a.pingCache=new H1;var S=new Set;m.set(l,S)}else S=m.get(l),S===void 0&&(S=new Set,m.set(l,S));S.has(u)||(Qm=!0,S.add(u),a=G1.bind(null,a,l,u),l.then(a,a))}function G1(a,l,u){var m=a.pingCache;m!==null&&m.delete(l),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Ye===a&&(_e&u)===u&&(fs===4||fs===3&&(_e&62914560)===_e&&300>Mt()-eg?(Fe&2)===0&&ac(a,0):Jm|=u,nc===_e&&(nc=0)),Yi(a)}function yx(a,l){l===0&&(l=Et()),a=Ul(a,l),a!==null&&(se(a,l),Yi(a))}function q1(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),yx(a,u)}function X1(a,l){var u=0;switch(a.tag){case 13:var m=a.stateNode,S=a.memoizedState;S!==null&&(u=S.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(l),yx(a,u)}function Y1(a,l){return jt(a,l)}var Tf=null,lc=null,cg=!1,Cf=!1,ug=!1,Po=0;function Yi(a){a!==lc&&a.next===null&&(lc===null?Tf=lc=a:lc=lc.next=a),Cf=!0,cg||(cg=!0,K1())}function Ju(a,l){if(!ug&&Cf){ug=!0;do for(var u=!1,m=Tf;m!==null;){if(a!==0){var S=m.pendingLanes;if(S===0)var k=0;else{var F=m.suspendedLanes,G=m.pingedLanes;k=(1<<31-we(42|a)+1)-1,k&=S&~(F&~G),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(u=!0,Ex(m,k))}else k=_e,k=Di(m,m===Ye?k:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(k&3)===0||Fs(m,k)||(u=!0,Ex(m,k));m=m.next}while(u);ug=!1}}function W1(){vx()}function vx(){Cf=cg=!1;var a=0;Po!==0&&(iS()&&(a=Po),Po=0);for(var l=Mt(),u=null,m=Tf;m!==null;){var S=m.next,k=xx(m,l);k===0?(m.next=null,u===null?Tf=S:u.next=S,S===null&&(lc=u)):(u=m,(a!==0||(k&3)!==0)&&(Cf=!0)),m=S}Ju(a)}function xx(a,l){for(var u=a.suspendedLanes,m=a.pingedLanes,S=a.expirationTimes,k=a.pendingLanes&-62914561;0<k;){var F=31-we(k),G=1<<F,W=S[F];W===-1?((G&u)===0||(G&m)!==0)&&(S[F]=at(G,l)):W<=l&&(a.expiredLanes|=G),k&=~G}if(l=Ye,u=_e,u=Di(a,a===l?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,u===0||a===l&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&bt(m),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Fs(a,u)){if(l=u&-u,l===a.callbackPriority)return l;switch(m!==null&&bt(m),Gt(u)){case 2:case 8:u=Ke;break;case 32:u=ee;break;case 268435456:u=Ge;break;default:u=ee}return m=bx.bind(null,a),u=jt(u,m),a.callbackPriority=l,a.callbackNode=u,l}return m!==null&&m!==null&&bt(m),a.callbackPriority=2,a.callbackNode=null,2}function bx(a,l){if(Ys!==0&&Ys!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(wf()&&a.callbackNode!==u)return null;var m=_e;return m=Di(a,a===Ye?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(sx(a,m,l),xx(a,Mt()),a.callbackNode!=null&&a.callbackNode===u?bx.bind(null,a):null)}function Ex(a,l){if(wf())return null;sx(a,l,!0)}function K1(){aS(function(){(Fe&6)!==0?jt(gs,W1):vx()})}function hg(){return Po===0&&(Po=ft()),Po}function Sx(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ft(""+a)}function _x(a,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,a.id&&u.setAttribute("form",a.id),l.parentNode.insertBefore(u,l),a=new FormData(a),u.parentNode.removeChild(u),a}function Z1(a,l,u,m,S){if(l==="submit"&&u&&u.stateNode===S){var k=Sx((S[rs]||null).action),F=m.submitter;F&&(l=(l=F[rs]||null)?Sx(l.formAction):F.getAttribute("formAction"),l!==null&&(k=l,F=null));var G=new qs("action","action",null,m,S);a.push({event:G,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Po!==0){var W=F?_x(S,F):new FormData(S);Mm(u,{pending:!0,data:W,method:S.method,action:k},null,W)}}else typeof k=="function"&&(G.preventDefault(),W=F?_x(S,F):new FormData(S),Mm(u,{pending:!0,data:W,method:S.method,action:k},k,W))},currentTarget:S}]})}}for(var dg=0;dg<Wp.length;dg++){var fg=Wp[dg],Q1=fg.toLowerCase(),J1=fg[0].toUpperCase()+fg.slice(1);yi(Q1,"on"+J1)}yi(sv,"onAnimationEnd"),yi(nv,"onAnimationIteration"),yi(iv,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(g1,"onTransitionRun"),yi(y1,"onTransitionStart"),yi(v1,"onTransitionCancel"),yi(rv,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),Pt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(th));function Ax(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var m=a[u],S=m.event;m=m.listeners;t:{var k=void 0;if(l)for(var F=m.length-1;0<=F;F--){var G=m[F],W=G.instance,lt=G.currentTarget;if(G=G.listener,W!==k&&S.isPropagationStopped())break t;k=G,S.currentTarget=lt;try{k(S)}catch(pt){mf(pt)}S.currentTarget=null,k=W}else for(F=0;F<m.length;F++){if(G=m[F],W=G.instance,lt=G.currentTarget,G=G.listener,W!==k&&S.isPropagationStopped())break t;k=G,S.currentTarget=lt;try{k(S)}catch(pt){mf(pt)}S.currentTarget=null,k=W}}}}function ge(a,l){var u=l[pr];u===void 0&&(u=l[pr]=new Set);var m=a+"__bubble";u.has(m)||(Rx(l,a,2,!1),u.add(m))}function pg(a,l,u){var m=0;l&&(m|=4),Rx(u,a,m,l)}var kf="_reactListening"+Math.random().toString(36).slice(2);function mg(a){if(!a[kf]){a[kf]=!0,Oi.forEach(function(u){u!=="selectionchange"&&(tS.has(u)||pg(u,!1,a),pg(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[kf]||(l[kf]=!0,pg("selectionchange",!1,l))}}function Rx(a,l,u,m){switch(Wx(l)){case 2:var S=TS;break;case 8:S=CS;break;default:S=kg}u=S.bind(null,l,u,a),S=void 0,!bu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),m?S!==void 0?a.addEventListener(l,u,{capture:!0,passive:S}):a.addEventListener(l,u,!0):S!==void 0?a.addEventListener(l,u,{passive:S}):a.addEventListener(l,u,!1)}function gg(a,l,u,m,S){var k=m;if((l&1)===0&&(l&2)===0&&m!==null)t:for(;;){if(m===null)return;var F=m.tag;if(F===3||F===4){var G=m.stateNode.containerInfo;if(G===S)break;if(F===4)for(F=m.return;F!==null;){var W=F.tag;if((W===3||W===4)&&F.stateNode.containerInfo===S)return;F=F.return}for(;G!==null;){if(F=Yt(G),F===null)return;if(W=F.tag,W===5||W===6||W===26||W===27){m=k=F;continue t}G=G.parentNode}}m=m.return}zd(function(){var lt=k,pt=te(u),yt=[];t:{var ut=av.get(a);if(ut!==void 0){var dt=qs,Kt=a;switch(a){case"keypress":if(St(u)===0)break t;case"keydown":case"keyup":dt=YE;break;case"focusin":Kt="focus",dt=Hp;break;case"focusout":Kt="blur",dt=Hp;break;case"beforeblur":case"afterblur":dt=Hp;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Dy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=FE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=ZE;break;case sv:case nv:case iv:dt=BE;break;case rv:dt=JE;break;case"scroll":case"scrollend":dt=Ud;break;case"wheel":dt=e1;break;case"copy":case"cut":case"paste":dt=zE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Oy;break;case"toggle":case"beforetoggle":dt=n1}var $t=(l&4)!==0,Ue=!$t&&(a==="scroll"||a==="scrollend"),it=$t?ut!==null?ut+"Capture":null:ut;$t=[];for(var et=lt,ot;et!==null;){var gt=et;if(ot=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||ot===null||it===null||(gt=Fl(et,it),gt!=null&&$t.push(eh(et,gt,ot))),Ue)break;et=et.return}0<$t.length&&(ut=new dt(ut,Kt,null,u,pt),yt.push({event:ut,listeners:$t}))}}if((l&7)===0){t:{if(ut=a==="mouseover"||a==="pointerover",dt=a==="mouseout"||a==="pointerout",ut&&u!==zt&&(Kt=u.relatedTarget||u.fromElement)&&(Yt(Kt)||Kt[Gs]))break t;if((dt||ut)&&(ut=pt.window===pt?pt:(ut=pt.ownerDocument)?ut.defaultView||ut.parentWindow:window,dt?(Kt=u.relatedTarget||u.toElement,dt=lt,Kt=Kt?Yt(Kt):null,Kt!==null&&(Ue=o(Kt),$t=Kt.tag,Kt!==Ue||$t!==5&&$t!==27&&$t!==6)&&(Kt=null)):(dt=null,Kt=lt),dt!==Kt)){if($t=Dy,gt="onMouseLeave",it="onMouseEnter",et="mouse",(a==="pointerout"||a==="pointerover")&&($t=Oy,gt="onPointerLeave",it="onPointerEnter",et="pointer"),Ue=dt==null?ut:ne(dt),ot=Kt==null?ut:ne(Kt),ut=new $t(gt,et+"leave",dt,u,pt),ut.target=Ue,ut.relatedTarget=ot,gt=null,Yt(pt)===lt&&($t=new $t(it,et+"enter",Kt,u,pt),$t.target=ot,$t.relatedTarget=Ue,gt=$t),Ue=gt,dt&&Kt)e:{for($t=dt,it=Kt,et=0,ot=$t;ot;ot=cc(ot))et++;for(ot=0,gt=it;gt;gt=cc(gt))ot++;for(;0<et-ot;)$t=cc($t),et--;for(;0<ot-et;)it=cc(it),ot--;for(;et--;){if($t===it||it!==null&&$t===it.alternate)break e;$t=cc($t),it=cc(it)}$t=null}else $t=null;dt!==null&&wx(yt,ut,dt,$t,!1),Kt!==null&&Ue!==null&&wx(yt,Ue,Kt,$t,!0)}}t:{if(ut=lt?ne(lt):window,dt=ut.nodeName&&ut.nodeName.toLowerCase(),dt==="select"||dt==="input"&&ut.type==="file")var Ot=Gy;else if(Vy(ut))if(qy)Ot=f1;else{Ot=h1;var he=u1}else dt=ut.nodeName,!dt||dt.toLowerCase()!=="input"||ut.type!=="checkbox"&&ut.type!=="radio"?lt&&Zn(lt.elementType)&&(Ot=Gy):Ot=d1;if(Ot&&(Ot=Ot(a,lt))){$y(yt,Ot,u,pt);break t}he&&he(a,ut,lt),a==="focusout"&&lt&&ut.type==="number"&&lt.memoizedProps.value!=null&&Kn(ut,"number",ut.value)}switch(he=lt?ne(lt):window,a){case"focusin":(Vy(he)||he.contentEditable==="true")&&(Bl=he,qp=lt,Tu=null);break;case"focusout":Tu=qp=Bl=null;break;case"mousedown":Xp=!0;break;case"contextmenu":case"mouseup":case"dragend":Xp=!1,tv(yt,u,pt);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":tv(yt,u,pt)}var Ht;if(Up)t:{switch(a){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else Il?zy(a,u)&&(Xt="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Xt="onCompositionStart");Xt&&(Iy&&u.locale!=="ko"&&(Il||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&Il&&(Ht=Z()):(Ui=pt,Eu="value"in Ui?Ui.value:Ui.textContent,Il=!0)),he=Pf(lt,Xt),0<he.length&&(Xt=new Fy(Xt,a,null,u,pt),yt.push({event:Xt,listeners:he}),Ht?Xt.data=Ht:(Ht=Uy(u),Ht!==null&&(Xt.data=Ht)))),(Ht=r1?a1(a,u):o1(a,u))&&(Xt=Pf(lt,"onBeforeInput"),0<Xt.length&&(he=new Fy("onBeforeInput","beforeinput",null,u,pt),yt.push({event:he,listeners:Xt}),he.data=Ht)),Z1(yt,a,lt,u,pt)}Ax(yt,l)})}function eh(a,l,u){return{instance:a,listener:l,currentTarget:u}}function Pf(a,l){for(var u=l+"Capture",m=[];a!==null;){var S=a,k=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||k===null||(S=Fl(a,u),S!=null&&m.unshift(eh(a,S,k)),S=Fl(a,l),S!=null&&m.push(eh(a,S,k))),a.tag===3)return m;a=a.return}return[]}function cc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function wx(a,l,u,m,S){for(var k=l._reactName,F=[];u!==null&&u!==m;){var G=u,W=G.alternate,lt=G.stateNode;if(G=G.tag,W!==null&&W===m)break;G!==5&&G!==26&&G!==27||lt===null||(W=lt,S?(lt=Fl(u,k),lt!=null&&F.unshift(eh(u,lt,W))):S||(lt=Fl(u,k),lt!=null&&F.push(eh(u,lt,W)))),u=u.return}F.length!==0&&a.push({event:l,listeners:F})}var eS=/\r\n?/g,sS=/\u0000|\uFFFD/g;function Tx(a){return(typeof a=="string"?a:""+a).replace(eS,`
`).replace(sS,"")}function Cx(a,l){return l=Tx(l),Tx(a)===l}function Mf(){}function ze(a,l,u,m,S,k){switch(u){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||pi(a,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&pi(a,""+m);break;case"className":Yn(a,"class",m);break;case"tabIndex":Yn(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(a,u,m);break;case"style":zi(a,m,k);break;case"data":if(l!=="object"){Yn(a,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||u!=="href")){a.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(u);break}m=Ft(""+m),a.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(u==="formAction"?(l!=="input"&&ze(a,l,"name",S.name,S,null),ze(a,l,"formEncType",S.formEncType,S,null),ze(a,l,"formMethod",S.formMethod,S,null),ze(a,l,"formTarget",S.formTarget,S,null)):(ze(a,l,"encType",S.encType,S,null),ze(a,l,"method",S.method,S,null),ze(a,l,"target",S.target,S,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(u);break}m=Ft(""+m),a.setAttribute(u,m);break;case"onClick":m!=null&&(a.onclick=Mf);break;case"onScroll":m!=null&&ge("scroll",a);break;case"onScrollEnd":m!=null&&ge("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(S.children!=null)throw Error(n(60));a.innerHTML=u}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}u=Ft(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,""+m):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":m===!0?a.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(u,m):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(u,m):a.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(u):a.setAttribute(u,m);break;case"popover":ge("beforetoggle",a),ge("toggle",a),Se(a,"popover",m);break;case"xlinkActuate":En(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":En(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":En(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":En(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":En(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":En(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":En(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":En(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":En(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Se(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=ho.get(u)||u,Se(a,u,m))}}function yg(a,l,u,m,S,k){switch(u){case"style":zi(a,m,k);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(S.children!=null)throw Error(n(60));a.innerHTML=u}}break;case"children":typeof m=="string"?pi(a,m):(typeof m=="number"||typeof m=="bigint")&&pi(a,""+m);break;case"onScroll":m!=null&&ge("scroll",a);break;case"onScrollEnd":m!=null&&ge("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ii.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(S=u.endsWith("Capture"),l=u.slice(2,S?u.length-7:void 0),k=a[rs]||null,k=k!=null?k[u]:null,typeof k=="function"&&a.removeEventListener(l,k,S),typeof m=="function")){typeof k!="function"&&k!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(l,m,S);break t}u in a?a[u]=m:m===!0?a.setAttribute(u,""):Se(a,u,m)}}}function Ws(a,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",a),ge("load",a);var m=!1,S=!1,k;for(k in u)if(u.hasOwnProperty(k)){var F=u[k];if(F!=null)switch(k){case"src":m=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:ze(a,l,k,F,u,null)}}S&&ze(a,l,"srcSet",u.srcSet,u,null),m&&ze(a,l,"src",u.src,u,null);return;case"input":ge("invalid",a);var G=k=F=S=null,W=null,lt=null;for(m in u)if(u.hasOwnProperty(m)){var pt=u[m];if(pt!=null)switch(m){case"name":S=pt;break;case"type":F=pt;break;case"checked":W=pt;break;case"defaultChecked":lt=pt;break;case"value":k=pt;break;case"defaultValue":G=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(n(137,l));break;default:ze(a,l,m,pt,u,null)}}uo(a,k,G,W,lt,F,S,!1),pn(a);return;case"select":ge("invalid",a),m=F=k=null;for(S in u)if(u.hasOwnProperty(S)&&(G=u[S],G!=null))switch(S){case"value":k=G;break;case"defaultValue":F=G;break;case"multiple":m=G;default:ze(a,l,S,G,u,null)}l=k,u=F,a.multiple=!!m,l!=null?Hi(a,!!m,l,!1):u!=null&&Hi(a,!!m,u,!0);return;case"textarea":ge("invalid",a),k=S=m=null;for(F in u)if(u.hasOwnProperty(F)&&(G=u[F],G!=null))switch(F){case"value":m=G;break;case"defaultValue":S=G;break;case"children":k=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(91));break;default:ze(a,l,F,G,u,null)}ie(a,m,S,k),pn(a);return;case"option":for(W in u)if(u.hasOwnProperty(W)&&(m=u[W],m!=null))switch(W){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ze(a,l,W,m,u,null)}return;case"dialog":ge("beforetoggle",a),ge("toggle",a),ge("cancel",a),ge("close",a);break;case"iframe":case"object":ge("load",a);break;case"video":case"audio":for(m=0;m<th.length;m++)ge(th[m],a);break;case"image":ge("error",a),ge("load",a);break;case"details":ge("toggle",a);break;case"embed":case"source":case"link":ge("error",a),ge("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in u)if(u.hasOwnProperty(lt)&&(m=u[lt],m!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:ze(a,l,lt,m,u,null)}return;default:if(Zn(l)){for(pt in u)u.hasOwnProperty(pt)&&(m=u[pt],m!==void 0&&yg(a,l,pt,m,u,void 0));return}}for(G in u)u.hasOwnProperty(G)&&(m=u[G],m!=null&&ze(a,l,G,m,u,null))}function nS(a,l,u,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,k=null,F=null,G=null,W=null,lt=null,pt=null;for(dt in u){var yt=u[dt];if(u.hasOwnProperty(dt)&&yt!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":W=yt;default:m.hasOwnProperty(dt)||ze(a,l,dt,null,m,yt)}}for(var ut in m){var dt=m[ut];if(yt=u[ut],m.hasOwnProperty(ut)&&(dt!=null||yt!=null))switch(ut){case"type":k=dt;break;case"name":S=dt;break;case"checked":lt=dt;break;case"defaultChecked":pt=dt;break;case"value":F=dt;break;case"defaultValue":G=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,l));break;default:dt!==yt&&ze(a,l,ut,dt,m,yt)}}fi(a,F,G,W,lt,pt,k,S);return;case"select":dt=F=G=ut=null;for(k in u)if(W=u[k],u.hasOwnProperty(k)&&W!=null)switch(k){case"value":break;case"multiple":dt=W;default:m.hasOwnProperty(k)||ze(a,l,k,null,m,W)}for(S in m)if(k=m[S],W=u[S],m.hasOwnProperty(S)&&(k!=null||W!=null))switch(S){case"value":ut=k;break;case"defaultValue":G=k;break;case"multiple":F=k;default:k!==W&&ze(a,l,S,k,m,W)}l=G,u=F,m=dt,ut!=null?Hi(a,!!u,ut,!1):!!m!=!!u&&(l!=null?Hi(a,!!u,l,!0):Hi(a,!!u,u?[]:"",!1));return;case"textarea":dt=ut=null;for(G in u)if(S=u[G],u.hasOwnProperty(G)&&S!=null&&!m.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:ze(a,l,G,null,m,S)}for(F in m)if(S=m[F],k=u[F],m.hasOwnProperty(F)&&(S!=null||k!=null))switch(F){case"value":ut=S;break;case"defaultValue":dt=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==k&&ze(a,l,F,S,m,k)}ca(a,ut,dt);return;case"option":for(var Kt in u)if(ut=u[Kt],u.hasOwnProperty(Kt)&&ut!=null&&!m.hasOwnProperty(Kt))switch(Kt){case"selected":a.selected=!1;break;default:ze(a,l,Kt,null,m,ut)}for(W in m)if(ut=m[W],dt=u[W],m.hasOwnProperty(W)&&ut!==dt&&(ut!=null||dt!=null))switch(W){case"selected":a.selected=ut&&typeof ut!="function"&&typeof ut!="symbol";break;default:ze(a,l,W,ut,m,dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in u)ut=u[$t],u.hasOwnProperty($t)&&ut!=null&&!m.hasOwnProperty($t)&&ze(a,l,$t,null,m,ut);for(lt in m)if(ut=m[lt],dt=u[lt],m.hasOwnProperty(lt)&&ut!==dt&&(ut!=null||dt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(n(137,l));break;default:ze(a,l,lt,ut,m,dt)}return;default:if(Zn(l)){for(var Ue in u)ut=u[Ue],u.hasOwnProperty(Ue)&&ut!==void 0&&!m.hasOwnProperty(Ue)&&yg(a,l,Ue,void 0,m,ut);for(pt in m)ut=m[pt],dt=u[pt],!m.hasOwnProperty(pt)||ut===dt||ut===void 0&&dt===void 0||yg(a,l,pt,ut,m,dt);return}}for(var it in u)ut=u[it],u.hasOwnProperty(it)&&ut!=null&&!m.hasOwnProperty(it)&&ze(a,l,it,null,m,ut);for(yt in m)ut=m[yt],dt=u[yt],!m.hasOwnProperty(yt)||ut===dt||ut==null&&dt==null||ze(a,l,yt,ut,m,dt)}var vg=null,xg=null;function jf(a){return a.nodeType===9?a:a.ownerDocument}function kx(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Px(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function bg(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Eg=null;function iS(){var a=window.event;return a&&a.type==="popstate"?a===Eg?!1:(Eg=a,!0):(Eg=null,!1)}var Mx=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,aS=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(a){return jx.resolve(null).then(a).catch(oS)}:Mx;function oS(a){setTimeout(function(){throw a})}function Ra(a){return a==="head"}function Nx(a,l){var u=l,m=0,S=0;do{var k=u.nextSibling;if(a.removeChild(u),k&&k.nodeType===8)if(u=k.data,u==="/$"){if(0<m&&8>m){u=m;var F=a.ownerDocument;if(u&1&&sh(F.documentElement),u&2&&sh(F.body),u&4)for(u=F.head,sh(u),F=u.firstChild;F;){var G=F.nextSibling,W=F.nodeName;F[rt]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&F.rel.toLowerCase()==="stylesheet"||u.removeChild(F),F=G}}if(S===0){a.removeChild(k),uh(l);return}S--}else u==="$"||u==="$?"||u==="$!"?S++:m=u.charCodeAt(0)-48;else m=0;u=k}while(u);uh(l)}function Sg(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Sg(u),kt(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function lS(a,l,u,m){for(;a.nodeType===1;){var S=u;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[rt])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(k=a.getAttribute("rel"),k==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(k!==S.rel||a.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||a.getAttribute("title")!==(S.title==null?null:S.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(k=a.getAttribute("src"),(k!==(S.src==null?null:S.src)||a.getAttribute("type")!==(S.type==null?null:S.type)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&k&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var k=S.name==null?null:""+S.name;if(S.type==="hidden"&&a.getAttribute("name")===k)return a}else return a;if(a=xi(a.nextSibling),a===null)break}return null}function cS(a,l,u){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=xi(a.nextSibling),a===null))return null;return a}function _g(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function uS(a,l){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")l();else{var m=function(){l(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function xi(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var Ag=null;function Lx(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return a;l--}else u==="/$"&&l++}a=a.previousSibling}return null}function Dx(a,l,u){switch(l=jf(u),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function sh(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);kt(a)}var ii=new Map,Fx=new Set;function Nf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var kr=U.d;U.d={f:hS,r:dS,D:fS,C:pS,L:mS,m:gS,X:vS,S:yS,M:xS};function hS(){var a=kr.f(),l=Af();return a||l}function dS(a){var l=Zt(a);l!==null&&l.tag===5&&l.type==="form"?s0(l):kr.r(a)}var uc=typeof document>"u"?null:document;function Ox(a,l,u){var m=uc;if(m&&typeof l=="string"&&l){var S=sn(l);S='link[rel="'+a+'"][href="'+S+'"]',typeof u=="string"&&(S+='[crossorigin="'+u+'"]'),Fx.has(S)||(Fx.add(S),a={rel:a,crossOrigin:u,href:l},m.querySelector(S)===null&&(l=m.createElement("link"),Ws(l,"link",a),fe(l),m.head.appendChild(l)))}}function fS(a){kr.D(a),Ox("dns-prefetch",a,null)}function pS(a,l){kr.C(a,l),Ox("preconnect",a,l)}function mS(a,l,u){kr.L(a,l,u);var m=uc;if(m&&a&&l){var S='link[rel="preload"][as="'+sn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(S+='[imagesrcset="'+sn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(S+='[imagesizes="'+sn(u.imageSizes)+'"]')):S+='[href="'+sn(a)+'"]';var k=S;switch(l){case"style":k=hc(a);break;case"script":k=dc(a)}ii.has(k)||(a=g({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:a,as:l},u),ii.set(k,a),m.querySelector(S)!==null||l==="style"&&m.querySelector(nh(k))||l==="script"&&m.querySelector(ih(k))||(l=m.createElement("link"),Ws(l,"link",a),fe(l),m.head.appendChild(l)))}}function gS(a,l){kr.m(a,l);var u=uc;if(u&&a){var m=l&&typeof l.as=="string"?l.as:"script",S='link[rel="modulepreload"][as="'+sn(m)+'"][href="'+sn(a)+'"]',k=S;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=dc(a)}if(!ii.has(k)&&(a=g({rel:"modulepreload",href:a},l),ii.set(k,a),u.querySelector(S)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ih(k)))return}m=u.createElement("link"),Ws(m,"link",a),fe(m),u.head.appendChild(m)}}}function yS(a,l,u){kr.S(a,l,u);var m=uc;if(m&&a){var S=hs(m).hoistableStyles,k=hc(a);l=l||"default";var F=S.get(k);if(!F){var G={loading:0,preload:null};if(F=m.querySelector(nh(k)))G.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":l},u),(u=ii.get(k))&&Rg(a,u);var W=F=m.createElement("link");fe(W),Ws(W,"link",a),W._p=new Promise(function(lt,pt){W.onload=lt,W.onerror=pt}),W.addEventListener("load",function(){G.loading|=1}),W.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Lf(F,l,m)}F={type:"stylesheet",instance:F,count:1,state:G},S.set(k,F)}}}function vS(a,l){kr.X(a,l);var u=uc;if(u&&a){var m=hs(u).hoistableScripts,S=dc(a),k=m.get(S);k||(k=u.querySelector(ih(S)),k||(a=g({src:a,async:!0},l),(l=ii.get(S))&&wg(a,l),k=u.createElement("script"),fe(k),Ws(k,"link",a),u.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},m.set(S,k))}}function xS(a,l){kr.M(a,l);var u=uc;if(u&&a){var m=hs(u).hoistableScripts,S=dc(a),k=m.get(S);k||(k=u.querySelector(ih(S)),k||(a=g({src:a,async:!0,type:"module"},l),(l=ii.get(S))&&wg(a,l),k=u.createElement("script"),fe(k),Ws(k,"link",a),u.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},m.set(S,k))}}function Ix(a,l,u,m){var S=(S=mt.current)?Nf(S):null;if(!S)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=hc(u.href),u=hs(S).hoistableStyles,m=u.get(l),m||(m={type:"style",instance:null,count:0,state:null},u.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=hc(u.href);var k=hs(S).hoistableStyles,F=k.get(a);if(F||(S=S.ownerDocument||S,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(a,F),(k=S.querySelector(nh(a)))&&!k._p&&(F.instance=k,F.state.loading=5),ii.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ii.set(a,u),k||bS(S,a,u,F.state))),l&&m===null)throw Error(n(528,""));return F}if(l&&m!==null)throw Error(n(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=dc(u),u=hs(S).hoistableScripts,m=u.get(l),m||(m={type:"script",instance:null,count:0,state:null},u.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function hc(a){return'href="'+sn(a)+'"'}function nh(a){return'link[rel="stylesheet"]['+a+"]"}function Bx(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function bS(a,l,u,m){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=a.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Ws(l,"link",u),fe(l),a.head.appendChild(l))}function dc(a){return'[src="'+sn(a)+'"]'}function ih(a){return"script[async]"+a}function Hx(a,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var m=a.querySelector('style[data-href~="'+sn(u.href)+'"]');if(m)return l.instance=m,fe(m),m;var S=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),fe(m),Ws(m,"style",S),Lf(m,u.precedence,a),l.instance=m;case"stylesheet":S=hc(u.href);var k=a.querySelector(nh(S));if(k)return l.state.loading|=4,l.instance=k,fe(k),k;m=Bx(u),(S=ii.get(S))&&Rg(m,S),k=(a.ownerDocument||a).createElement("link"),fe(k);var F=k;return F._p=new Promise(function(G,W){F.onload=G,F.onerror=W}),Ws(k,"link",m),l.state.loading|=4,Lf(k,u.precedence,a),l.instance=k;case"script":return k=dc(u.src),(S=a.querySelector(ih(k)))?(l.instance=S,fe(S),S):(m=u,(S=ii.get(k))&&(m=g({},u),wg(m,S)),a=a.ownerDocument||a,S=a.createElement("script"),fe(S),Ws(S,"link",m),a.head.appendChild(S),l.instance=S);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Lf(m,u.precedence,a));return l.instance}function Lf(a,l,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=m.length?m[m.length-1]:null,k=S,F=0;F<m.length;F++){var G=m[F];if(G.dataset.precedence===l)k=G;else if(k!==S)break}k?k.parentNode.insertBefore(a,k.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(a,l.firstChild))}function Rg(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function wg(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var Df=null;function zx(a,l,u){if(Df===null){var m=new Map,S=Df=new Map;S.set(u,m)}else S=Df,m=S.get(u),m||(m=new Map,S.set(u,m));if(m.has(a))return m;for(m.set(a,null),u=u.getElementsByTagName(a),S=0;S<u.length;S++){var k=u[S];if(!(k[rt]||k[Pe]||a==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var F=k.getAttribute(l)||"";F=a+F;var G=m.get(F);G?G.push(k):m.set(F,[k])}}return m}function Ux(a,l,u){a=a.ownerDocument||a,a.head.insertBefore(u,l==="title"?a.querySelector("head > title"):null)}function ES(a,l,u){if(u===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Vx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var rh=null;function SS(){}function _S(a,l,u){if(rh===null)throw Error(n(475));var m=rh;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var S=hc(u.href),k=a.querySelector(nh(S));if(k){a=k._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Ff.bind(m),a.then(m,m)),l.state.loading|=4,l.instance=k,fe(k);return}k=a.ownerDocument||a,u=Bx(u),(S=ii.get(S))&&Rg(u,S),k=k.createElement("link"),fe(k);var F=k;F._p=new Promise(function(G,W){F.onload=G,F.onerror=W}),Ws(k,"link",u),l.instance=k}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Ff.bind(m),a.addEventListener("load",l),a.addEventListener("error",l))}}function AS(){if(rh===null)throw Error(n(475));var a=rh;return a.stylesheets&&a.count===0&&Tg(a,a.stylesheets),0<a.count?function(l){var u=setTimeout(function(){if(a.stylesheets&&Tg(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(u)}}:null}function Ff(){if(this.count--,this.count===0){if(this.stylesheets)Tg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Of=null;function Tg(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Of=new Map,l.forEach(RS,a),Of=null,Ff.call(a))}function RS(a,l){if(!(l.state.loading&4)){var u=Of.get(a);if(u)var m=u.get(null);else{u=new Map,Of.set(a,u);for(var S=a.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<S.length;k++){var F=S[k];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(u.set(F.dataset.precedence,F),m=F)}m&&u.set(null,m)}S=l.instance,F=S.getAttribute("data-precedence"),k=u.get(F)||m,k===m&&u.set(null,S),u.set(F,S),this.count++,m=Ff.bind(this),S.addEventListener("load",m),S.addEventListener("error",m),k?k.parentNode.insertBefore(S,k.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(S,a.firstChild)),l.state.loading|=4}}var ah={$$typeof:C,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function wS(a,l,u,m,S,k,F,G){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.hiddenUpdates=Bt(null),this.identifierPrefix=m,this.onUncaughtError=S,this.onCaughtError=k,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function $x(a,l,u,m,S,k,F,G,W,lt,pt,yt){return a=new wS(a,l,u,F,G,W,lt,yt),l=1,k===!0&&(l|=24),k=jn(3,null,null,l),a.current=k,k.stateNode=a,l=lm(),l.refCount++,a.pooledCache=l,l.refCount++,k.memoizedState={element:m,isDehydrated:u,cache:l},dm(k),a}function Gx(a){return a?(a=Vl,a):Vl}function qx(a,l,u,m,S,k){S=Gx(S),m.context===null?m.context=S:m.pendingContext=S,m=da(l),m.payload={element:u},k=k===void 0?null:k,k!==null&&(m.callback=k),u=fa(a,m,l),u!==null&&(On(u,a,l),Fu(u,a,l))}function Xx(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function Cg(a,l){Xx(a,l),(a=a.alternate)&&Xx(a,l)}function Yx(a){if(a.tag===13){var l=Ul(a,67108864);l!==null&&On(l,a,67108864),Cg(a,67108864)}}var If=!0;function TS(a,l,u,m){var S=D.T;D.T=null;var k=U.p;try{U.p=2,kg(a,l,u,m)}finally{U.p=k,D.T=S}}function CS(a,l,u,m){var S=D.T;D.T=null;var k=U.p;try{U.p=8,kg(a,l,u,m)}finally{U.p=k,D.T=S}}function kg(a,l,u,m){if(If){var S=Pg(m);if(S===null)gg(a,l,m,Bf,u),Kx(a,m);else if(PS(S,a,l,u,m))m.stopPropagation();else if(Kx(a,m),l&4&&-1<kS.indexOf(a)){for(;S!==null;){var k=Zt(S);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var F=hn(k.pendingLanes);if(F!==0){var G=k;for(G.pendingLanes|=2,G.entangledLanes|=2;F;){var W=1<<31-we(F);G.entanglements[1]|=W,F&=~W}Yi(k),(Fe&6)===0&&(Sf=Mt()+500,Ju(0))}}break;case 13:G=Ul(k,2),G!==null&&On(G,k,2),Af(),Cg(k,2)}if(k=Pg(m),k===null&&gg(a,l,m,Bf,u),k===S)break;S=k}S!==null&&m.stopPropagation()}else gg(a,l,m,null,u)}}function Pg(a){return a=te(a),Mg(a)}var Bf=null;function Mg(a){if(Bf=null,a=Yt(a),a!==null){var l=o(a);if(l===null)a=null;else{var u=l.tag;if(u===13){if(a=c(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Bf=a,null}function Wx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(is()){case gs:return 2;case Ke:return 8;case ee:case Ls:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var jg=!1,wa=null,Ta=null,Ca=null,oh=new Map,lh=new Map,ka=[],kS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kx(a,l){switch(a){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":oh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":lh.delete(l.pointerId)}}function ch(a,l,u,m,S,k){return a===null||a.nativeEvent!==k?(a={blockedOn:l,domEventName:u,eventSystemFlags:m,nativeEvent:k,targetContainers:[S]},l!==null&&(l=Zt(l),l!==null&&Yx(l)),a):(a.eventSystemFlags|=m,l=a.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),a)}function PS(a,l,u,m,S){switch(l){case"focusin":return wa=ch(wa,a,l,u,m,S),!0;case"dragenter":return Ta=ch(Ta,a,l,u,m,S),!0;case"mouseover":return Ca=ch(Ca,a,l,u,m,S),!0;case"pointerover":var k=S.pointerId;return oh.set(k,ch(oh.get(k)||null,a,l,u,m,S)),!0;case"gotpointercapture":return k=S.pointerId,lh.set(k,ch(lh.get(k)||null,a,l,u,m,S)),!0}return!1}function Zx(a){var l=Yt(a.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=c(u),l!==null){a.blockedOn=l,ke(a.priority,function(){if(u.tag===13){var m=Fn();m=Dt(m);var S=Ul(u,m);S!==null&&On(S,u,m),Cg(u,m)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Hf(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=Pg(a.nativeEvent);if(u===null){u=a.nativeEvent;var m=new u.constructor(u.type,u);zt=m,u.target.dispatchEvent(m),zt=null}else return l=Zt(u),l!==null&&Yx(l),a.blockedOn=u,!1;l.shift()}return!0}function Qx(a,l,u){Hf(a)&&u.delete(l)}function MS(){jg=!1,wa!==null&&Hf(wa)&&(wa=null),Ta!==null&&Hf(Ta)&&(Ta=null),Ca!==null&&Hf(Ca)&&(Ca=null),oh.forEach(Qx),lh.forEach(Qx)}function zf(a,l){a.blockedOn===l&&(a.blockedOn=null,jg||(jg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,MS)))}var Uf=null;function Jx(a){Uf!==a&&(Uf=a,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uf===a&&(Uf=null);for(var l=0;l<a.length;l+=3){var u=a[l],m=a[l+1],S=a[l+2];if(typeof m!="function"){if(Mg(m||u)===null)continue;break}var k=Zt(u);k!==null&&(a.splice(l,3),l-=3,Mm(k,{pending:!0,data:S,method:u.method,action:m},m,S))}}))}function uh(a){function l(W){return zf(W,a)}wa!==null&&zf(wa,a),Ta!==null&&zf(Ta,a),Ca!==null&&zf(Ca,a),oh.forEach(l),lh.forEach(l);for(var u=0;u<ka.length;u++){var m=ka[u];m.blockedOn===a&&(m.blockedOn=null)}for(;0<ka.length&&(u=ka[0],u.blockedOn===null);)Zx(u),u.blockedOn===null&&ka.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var S=u[m],k=u[m+1],F=S[rs]||null;if(typeof k=="function")F||Jx(u);else if(F){var G=null;if(k&&k.hasAttribute("formAction")){if(S=k,F=k[rs]||null)G=F.formAction;else if(Mg(S)!==null)continue}else G=F.action;typeof G=="function"?u[m+1]=G:(u.splice(m,3),m-=3),Jx(u)}}}function Ng(a){this._internalRoot=a}Vf.prototype.render=Ng.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var u=l.current,m=Fn();qx(u,m,a,l,null,null)},Vf.prototype.unmount=Ng.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;qx(a.current,2,null,a,null,null),Af(),l[Gs]=null}};function Vf(a){this._internalRoot=a}Vf.prototype.unstable_scheduleHydration=function(a){if(a){var l=qt();a={blockedOn:null,target:a,priority:l};for(var u=0;u<ka.length&&l!==0&&l<ka[u].priority;u++);ka.splice(u,0,a),u===0&&Zx(a)}};var tb=t.version;if(tb!=="19.1.0")throw Error(n(527,tb,"19.1.0"));U.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=f(l),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var jS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{be=$f.inject(jS),ae=$f}catch{}}return reactDomClient_production.createRoot=function(a,l){if(!i(a))throw Error(n(299));var u=!1,m="",S=g0,k=y0,F=v0,G=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(k=l.onCaughtError),l.onRecoverableError!==void 0&&(F=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(G=l.unstable_transitionCallbacks)),l=$x(a,1,!1,null,null,u,m,S,k,F,G,null),a[Gs]=l.current,mg(a),new Ng(l)},reactDomClient_production.hydrateRoot=function(a,l,u){if(!i(a))throw Error(n(299));var m=!1,S="",k=g0,F=y0,G=v0,W=null,lt=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onUncaughtError!==void 0&&(k=u.onUncaughtError),u.onCaughtError!==void 0&&(F=u.onCaughtError),u.onRecoverableError!==void 0&&(G=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(W=u.unstable_transitionCallbacks),u.formState!==void 0&&(lt=u.formState)),l=$x(a,1,!0,l,u??null,m,S,k,F,G,W,lt),l.context=Gx(null),u=l.current,m=Fn(),m=Dt(m),S=da(m),S.callback=null,fa(u,S,m),u=m,l.current.lanes=u,se(l,u),Yi(l),a[Gs]=l.current,mg(a),new Vf(l)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.parse=c,dist.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function c(x,A){const _=new o,R=x.length;if(R<2)return _;const P=(A==null?void 0:A.decode)||g;let E=0;do{const T=x.indexOf("=",E);if(T===-1)break;const C=x.indexOf(";",E),M=C===-1?R:C;if(T>M){E=x.lastIndexOf(";",T-1)+1;continue}const j=d(x,E,T),L=f(x,T,j),O=x.slice(j,L);if(_[O]===void 0){let V=d(x,T+1,M),X=f(x,M,V);const tt=P(x.slice(V,X));_[O]=tt}E=M+1}while(E<R);return _}function d(x,A,_){do{const R=x.charCodeAt(A);if(R!==32&&R!==9)return A}while(++A<_);return _}function f(x,A,_){for(;A>_;){const R=x.charCodeAt(--A);if(R!==32&&R!==9)return A+1}return _}function p(x,A,_){const R=(_==null?void 0:_.encode)||encodeURIComponent;if(!s.test(x))throw new TypeError(`argument name is invalid: ${x}`);const P=R(A);if(!t.test(P))throw new TypeError(`argument val is invalid: ${A}`);let E=x+"="+P;if(!_)return E;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);E+="; Max-Age="+_.maxAge}if(_.domain){if(!e.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);E+="; Domain="+_.domain}if(_.path){if(!n.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);E+="; Path="+_.path}if(_.expires){if(!b(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);E+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(E+="; HttpOnly"),_.secure&&(E+="; Secure"),_.partitioned&&(E+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return E}function g(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function b(x){return i.call(x)==="[object Date]"}return dist}requireDist();var PopStateEventType="popstate";function createBrowserHistory(s={}){function t(n,i){let{pathname:o,search:c,hash:d}=n.location;return createLocation("",{pathname:o,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:createPath(i)}return getUrlBasedHistory(t,e,null,s)}function invariant$1(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function warning$1(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(s,t){return{usr:s.state,key:s.key,idx:t}}function createLocation(s,t,e=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?parsePath(t):t,state:e,key:t&&t.key||n||createKey()}}function createPath({pathname:s="/",search:t="",hash:e=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function parsePath(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substring(e),s=s.substring(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function getUrlBasedHistory(s,t,e,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,c=i.history,d="POP",f=null,p=g();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function g(){return(c.state||{idx:null}).idx}function b(){d="POP";let P=g(),E=P==null?null:P-p;p=P,f&&f({action:d,location:R.location,delta:E})}function x(P,E){d="PUSH";let T=createLocation(R.location,P,E);p=g()+1;let C=getHistoryState(T,p),M=R.createHref(T);try{c.pushState(C,"",M)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(M)}o&&f&&f({action:d,location:R.location,delta:1})}function A(P,E){d="REPLACE";let T=createLocation(R.location,P,E);p=g();let C=getHistoryState(T,p),M=R.createHref(T);c.replaceState(C,"",M),o&&f&&f({action:d,location:R.location,delta:0})}function _(P){return createBrowserURLImpl(P)}let R={get action(){return d},get location(){return s(i,c)},listen(P){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(PopStateEventType,b),f=P,()=>{i.removeEventListener(PopStateEventType,b),f=null}},createHref(P){return t(i,P)},createURL:_,encodeLocation(P){let E=_(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:x,replace:A,go(P){return c.go(P)}};return R}function createBrowserURLImpl(s,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(e,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:createPath(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function matchRoutes(s,t,e="/"){return matchRoutesImpl(s,t,e,!1)}function matchRoutesImpl(s,t,e,n){let i=typeof t=="string"?parsePath(t):t,o=stripBasename(i.pathname||"/",e);if(o==null)return null;let c=flattenRoutes(s);rankRouteBranches(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=decodePath(o);d=matchRouteBranch(c[f],p,n)}return d}function flattenRoutes(s,t=[],e=[],n=""){let i=(o,c,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(invariant$1(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length));let p=joinPaths([n,f.relativePath]),g=e.concat(f);o.children&&o.children.length>0&&(invariant$1(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),flattenRoutes(o.children,t,g,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:computeScore(p,o.index),routesMeta:g})};return s.forEach((o,c)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,c);else for(let f of explodeOptionalSegments(o.path))i(o,c,f)}),t}function explodeOptionalSegments(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let c=explodeOptionalSegments(n.join("/")),d=[];return d.push(...c.map(f=>f===""?o:[o,f].join("/"))),i&&d.push(...c),d.map(f=>s.startsWith("/")&&f===""?"/":f)}function rankRouteBranches(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:compareIndexes(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s=>s==="*";function computeScore(s,t){let e=s.split("/"),n=e.length;return e.some(isSplat)&&(n+=splatPenalty),t&&(n+=indexRouteValue),e.filter(i=>!isSplat(i)).reduce((i,o)=>i+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(s,t){return s.length===t.length&&s.slice(0,-1).every((n,i)=>n===t[i])?s[s.length-1]-t[t.length-1]:0}function matchRouteBranch(s,t,e=!1){let{routesMeta:n}=s,i={},o="/",c=[];for(let d=0;d<n.length;++d){let f=n[d],p=d===n.length-1,g=o==="/"?t:t.slice(o.length)||"/",b=matchPath({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),x=f.route;if(!b&&p&&e&&!n[n.length-1].route.index&&(b=matchPath({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:joinPaths([o,b.pathname]),pathnameBase:normalizePathname(joinPaths([o,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(o=joinPaths([o,b.pathnameBase]))}return c}function matchPath(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=compilePath(s.path,s.caseSensitive,s.end),i=t.match(e);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:n.reduce((p,{paramName:g,isOptional:b},x)=>{if(g==="*"){let _=d[x]||"";c=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const A=d[x];return b&&!A?p[g]=void 0:p[g]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:s}}function compilePath(s,t=!1,e=!0){warning$1(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function decodePath(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning$1(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function stripBasename(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}function resolvePath(s,t="/"){let{pathname:e,search:n="",hash:i=""}=typeof s=="string"?parsePath(s):s;return{pathname:e?e.startsWith("/")?e:resolvePathname(e,t):t,search:normalizeSearch(n),hash:normalizeHash(i)}}function resolvePathname(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function getInvalidPathError(s,t,e,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(s){let t=getPathContributingMatches(s);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function resolveTo(s,t,e,n=!1){let i;typeof s=="string"?i=parsePath(s):(i={...s},invariant$1(!i.pathname||!i.pathname.includes("?"),getInvalidPathError("?","pathname","search",i)),invariant$1(!i.pathname||!i.pathname.includes("#"),getInvalidPathError("#","pathname","hash",i)),invariant$1(!i.search||!i.search.includes("#"),getInvalidPathError("#","search","hash",i)));let o=s===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=e;else{let b=t.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),b-=1;i.pathname=x.join("/")}d=b>=0?t[b]:"/"}let f=resolvePath(i,d),p=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var joinPaths=s=>s.join("/").replace(/\/\/+/g,"/"),normalizePathname=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,normalizeHash=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function isRouteErrorResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(s,{relative:t}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=reactExports.useContext(NavigationContext),{hash:i,pathname:o,search:c}=useResolvedPath(s,{relative:t}),d=o;return e!=="/"&&(d=o==="/"?e:joinPaths([e,o])),n.createHref({pathname:d,search:c,hash:i})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(s){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(s)}function useNavigate(){let{isDataRoute:s}=reactExports.useContext(RouteContext);return s?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let s=reactExports.useContext(DataRouterContext),{basename:t,navigator:e}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),o=JSON.stringify(getResolveToMatches(n)),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{c.current=!0}),reactExports.useCallback((f,p={})=>{if(warning$1(c.current,navigateEffectWarning),!c.current)return;if(typeof f=="number"){e.go(f);return}let g=resolveTo(f,JSON.parse(o),i,p.relative==="path");s==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:joinPaths([t,g.pathname])),(p.replace?e.replace:e.push)(g,p.state,p)},[t,e,o,i,s])}reactExports.createContext(null);function useParams(){let{matches:s}=reactExports.useContext(RouteContext),t=s[s.length-1];return t?t.params:{}}function useResolvedPath(s,{relative:t}={}){let{matches:e}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),i=JSON.stringify(getResolveToMatches(e));return reactExports.useMemo(()=>resolveTo(s,JSON.parse(i),n,t==="path"),[s,i,n,t])}function useRoutes(s,t){return useRoutesImpl(s,t)}function useRoutesImpl(s,t,e,n){var E;invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),c=o[o.length-1],d=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let T=g&&g.path||"";warningOnce(f,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=useLocation(),x;if(t){let T=typeof t=="string"?parsePath(t):t;invariant$1(p==="/"||((E=T.pathname)==null?void 0:E.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),x=T}else x=b;let A=x.pathname||"/",_=A;if(p!=="/"){let T=p.replace(/^\//,"").split("/");_="/"+A.replace(/^\//,"").split("/").slice(T.length).join("/")}let R=matchRoutes(s,{pathname:_});warning$1(g||R!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),warning$1(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=_renderMatches(R&&R.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:joinPaths([p,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:joinPaths([p,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,e,n);return t&&P?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},P):P}function DefaultErrorComponent(){let s=useRouteError(),t=isRouteErrorResponse(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),e?reactExports.createElement("pre",{style:i},e):null,c)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:s,match:t,children:e}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:s},e)}function _renderMatches(s,t=[],e=null,n=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let i=s,o=e==null?void 0:e.errors;if(o!=null){let f=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);invariant$1(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,d=-1;if(e)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:b}=e,x=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||x){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,p,g)=>{let b,x=!1,A=null,_=null;e&&(b=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||defaultErrorElement,c&&(d<0&&g===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):d===g&&(x=!0,_=p.route.hydrateFallbackElement||null)));let R=t.concat(i.slice(0,g+1)),P=()=>{let E;return b?E=A:x?E=_:p.route.Component?E=reactExports.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,reactExports.createElement(RenderedRoute,{match:p,routeContext:{outlet:f,matches:R,isDataRoute:e!=null},children:E})};return e&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?reactExports.createElement(RenderErrorBoundary,{location:e.location,revalidation:e.revalidation,component:A,error:b,children:P(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):P()},null)}function getDataRouterConsoleError(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(s){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError(s)),t}function useDataRouterState(s){let t=reactExports.useContext(DataRouterStateContext);return invariant$1(t,getDataRouterConsoleError(s)),t}function useRouteContext(s){let t=reactExports.useContext(RouteContext);return invariant$1(t,getDataRouterConsoleError(s)),t}function useCurrentRouteId(s){let t=useRouteContext(s),e=t.matches[t.matches.length-1];return invariant$1(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var n;let s=reactExports.useContext(RouteErrorContext),t=useDataRouterState("useRouteError"),e=useCurrentRouteId("useRouteError");return s!==void 0?s:(n=t.errors)==null?void 0:n[e]}function useNavigateStable(){let{router:s}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{e.current=!0}),reactExports.useCallback(async(i,o={})=>{warning$1(e.current,navigateEffectWarning),e.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:t,...o}))},[s,t])}var alreadyWarned={};function warningOnce(s,t,e){!t&&!alreadyWarned[s]&&(alreadyWarned[s]=!0,warning$1(!1,e))}reactExports.memo(DataRoutes);function DataRoutes({routes:s,future:t,state:e}){return useRoutesImpl(s,void 0,e,t)}function Navigate({to:s,replace:t,state:e,relative:n}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=reactExports.useContext(NavigationContext);warning$1(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=useNavigate(),f=resolveTo(s,getResolveToMatches(o),c,n==="path"),p=JSON.stringify(f);return reactExports.useEffect(()=>{d(JSON.parse(p),{replace:t,state:e,relative:n})},[d,p,n,t,e]),null}function Route(s){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:s="/",children:t=null,location:e,navigationType:n="POP",navigator:i,static:o=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=reactExports.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof e=="string"&&(e=parsePath(e));let{pathname:f="/",search:p="",hash:g="",state:b=null,key:x="default"}=e,A=reactExports.useMemo(()=>{let _=stripBasename(f,c);return _==null?null:{location:{pathname:_,search:p,hash:g,state:b,key:x},navigationType:n}},[c,f,p,g,b,x,n]);return warning$1(A!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:reactExports.createElement(NavigationContext.Provider,{value:d},reactExports.createElement(LocationContext.Provider,{children:t,value:A}))}function Routes({children:s,location:t}){return useRoutes(createRoutesFromChildren(s),t)}function createRoutesFromChildren(s,t=[]){let e=[];return reactExports.Children.forEach(s,(n,i)=>{if(!reactExports.isValidElement(n))return;let o=[...t,i];if(n.type===reactExports.Fragment){e.push.apply(e,createRoutesFromChildren(n.props.children,o));return}invariant$1(n.type===Route,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=createRoutesFromChildren(n.props.children,o)),e.push(c)}),e}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(s){return s!=null&&typeof s.tagName=="string"}function isButtonElement(s){return isHtmlElement(s)&&s.tagName.toLowerCase()==="button"}function isFormElement(s){return isHtmlElement(s)&&s.tagName.toLowerCase()==="form"}function isInputElement(s){return isHtmlElement(s)&&s.tagName.toLowerCase()==="input"}function isModifiedEvent(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function shouldProcessLinkClick(s,t){return s.button===0&&(!t||t==="_self")&&!isModifiedEvent(s)}function createSearchParams(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((t,e)=>{let n=s[e];return t.concat(Array.isArray(n)?n.map(i=>[e,i]):[[e,n]])},[]))}function getSearchParamsForLocation(s,t){let e=createSearchParams(s);return t&&t.forEach((n,i)=>{e.has(i)||t.getAll(i).forEach(o=>{e.append(i,o)})}),e}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(s){return s!=null&&!supportedFormEncTypes.has(s)?(warning$1(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):s}function getFormSubmissionInfo(s,t){let e,n,i,o,c;if(isFormElement(s)){let d=s.getAttribute("action");n=d?stripBasename(d,t):null,e=s.getAttribute("method")||defaultMethod,i=getFormEncType(s.getAttribute("enctype"))||defaultEncType,o=new FormData(s)}else if(isButtonElement(s)||isInputElement(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=s.getAttribute("formaction")||d.getAttribute("action");if(n=f?stripBasename(f,t):null,e=s.getAttribute("formmethod")||d.getAttribute("method")||defaultMethod,i=getFormEncType(s.getAttribute("formenctype"))||getFormEncType(d.getAttribute("enctype"))||defaultEncType,o=new FormData(d,s),!isFormDataSubmitterSupported()){let{name:p,type:g,value:b}=s;if(g==="image"){let x=p?`${p}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else p&&o.append(p,b)}}else{if(isHtmlElement(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=defaultMethod,n=null,i=defaultEncType,c=s}return o&&i==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:i,formData:o,body:c}}function invariant2(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function loadRouteModule(s,t){if(s.id in t)return t[s.id];try{let e=await import(s.module);return t[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function getKeyedPrefetchLinks(s,t,e){let n=await Promise.all(s.map(async i=>{let o=t.routes[i.route.id];if(o){let c=await loadRouteModule(o,e);return c.links?c.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function getNewMatchesForLinks(s,t,e,n,i,o){let c=(f,p)=>e[p]?f.route.id!==e[p].route.id:!0,d=(f,p)=>{var g;return e[p].pathname!==f.pathname||((g=e[p].route.path)==null?void 0:g.endsWith("*"))&&e[p].params["*"]!==f.params["*"]};return o==="assets"?t.filter((f,p)=>c(f,p)||d(f,p)):o==="data"?t.filter((f,p)=>{var b;let g=n.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let x=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((b=e[0])==null?void 0:b.params)||{},nextUrl:new URL(s,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function getModuleLinkHrefs(s,t,{includeHydrateFallback:e}={}){return dedupeHrefs(s.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),e&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function dedupeHrefs(s){return[...new Set(s)]}function sortKeys(s){let t={},e=Object.keys(s).sort();for(let n of e)t[n]=s[n];return t}function dedupeLinkDescriptors(s,t){let e=new Set;return new Set(t),s.reduce((n,i)=>{let o=JSON.stringify(sortKeys(i));return e.has(o)||(e.add(o),n.push({key:o,link:i})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(s,t){let e=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return e.pathname==="/"?e.pathname="_root.data":t&&stripBasename(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function useDataRouterContext2(){let s=reactExports.useContext(DataRouterContext);return invariant2(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function useDataRouterStateContext(){let s=reactExports.useContext(DataRouterStateContext);return invariant2(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let s=reactExports.useContext(FrameworkContext);return invariant2(s,"You must render this element inside a <HydratedRouter> element"),s}function usePrefetchBehavior(s,t){let e=reactExports.useContext(FrameworkContext),[n,i]=reactExports.useState(!1),[o,c]=reactExports.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:b}=t,x=reactExports.useRef(null);reactExports.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let R=E=>{E.forEach(T=>{c(T.isIntersecting)})},P=new IntersectionObserver(R,{threshold:.5});return x.current&&P.observe(x.current),()=>{P.disconnect()}}},[s]),reactExports.useEffect(()=>{if(n){let R=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(R)}}},[n]);let A=()=>{i(!0)},_=()=>{i(!1),c(!1)};return e?s!=="intent"?[o,x,{}]:[o,x,{onFocus:composeEventHandlers(d,A),onBlur:composeEventHandlers(f,_),onMouseEnter:composeEventHandlers(p,A),onMouseLeave:composeEventHandlers(g,_),onTouchStart:composeEventHandlers(b,A)}]:[!1,x,{}]}function composeEventHandlers(s,t){return e=>{s&&s(e),e.defaultPrevented||t(e)}}function PrefetchPageLinks({page:s,...t}){let{router:e}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(e.routes,s,e.basename),[e.routes,s,e.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:s,matches:n,...t}):null}function useKeyedPrefetchLinks(s){let{manifest:t,routeModules:e}=useFrameworkContext(),[n,i]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(s,t,e).then(c=>{o||i(c)}),()=>{o=!0}},[s,t,e]),n}function PrefetchPageLinksImpl({page:s,matches:t,...e}){let n=useLocation(),{manifest:i,routeModules:o}=useFrameworkContext(),{basename:c}=useDataRouterContext2(),{loaderData:d,matches:f}=useDataRouterStateContext(),p=reactExports.useMemo(()=>getNewMatchesForLinks(s,t,f,i,n,"data"),[s,t,f,i,n]),g=reactExports.useMemo(()=>getNewMatchesForLinks(s,t,f,i,n,"assets"),[s,t,f,i,n]),b=reactExports.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let _=new Set,R=!1;if(t.forEach(E=>{var C;let T=i.routes[E.route.id];!T||!T.hasLoader||(!p.some(M=>M.route.id===E.route.id)&&E.route.id in d&&((C=o[E.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?R=!0:_.add(E.route.id))}),_.size===0)return[];let P=singleFetchUrl(s,c);return R&&_.size>0&&P.searchParams.set("_routes",t.filter(E=>_.has(E.route.id)).map(E=>E.route.id).join(",")),[P.pathname+P.search]},[c,d,n,i,p,t,s,o]),x=reactExports.useMemo(()=>getModuleLinkHrefs(g,i),[g,i]),A=useKeyedPrefetchLinks(g);return reactExports.createElement(reactExports.Fragment,null,b.map(_=>reactExports.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...e})),x.map(_=>reactExports.createElement("link",{key:_,rel:"modulepreload",href:_,...e})),A.map(({key:_,link:R})=>reactExports.createElement("link",{key:_,...R})))}function mergeRefs$1(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.6.2")}catch{}function BrowserRouter({basename:s,children:t,window:e}){let n=reactExports.useRef();n.current==null&&(n.current=createBrowserHistory({window:e,v5Compat:!0}));let i=n.current,[o,c]=reactExports.useState({action:i.action,location:i.location}),d=reactExports.useCallback(f=>{reactExports.startTransition(()=>c(f))},[c]);return reactExports.useLayoutEffect(()=>i.listen(d),[i,d]),reactExports.createElement(Router,{basename:s,children:t,location:o.location,navigationType:o.action,navigator:i})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:i,reloadDocument:o,replace:c,state:d,target:f,to:p,preventScrollReset:g,viewTransition:b,...x},A){let{basename:_}=reactExports.useContext(NavigationContext),R=typeof p=="string"&&ABSOLUTE_URL_REGEX2.test(p),P,E=!1;if(typeof p=="string"&&R&&(P=p,isBrowser$1))try{let X=new URL(window.location.href),tt=p.startsWith("//")?new URL(X.protocol+p):new URL(p),Y=stripBasename(tt.pathname,_);tt.origin===X.origin&&Y!=null?p=Y+tt.search+tt.hash:E=!0}catch{warning$1(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=useHref(p,{relative:i}),[C,M,j]=usePrefetchBehavior(n,x),L=useLinkClickHandler(p,{replace:c,state:d,target:f,preventScrollReset:g,relative:i,viewTransition:b});function O(X){t&&t(X),X.defaultPrevented||L(X)}let V=reactExports.createElement("a",{...x,...j,href:P||T,onClick:E||o?t:O,ref:mergeRefs$1(A,M),target:f,"data-discover":!R&&e==="render"?"true":void 0});return C&&!R?reactExports.createElement(reactExports.Fragment,null,V,reactExports.createElement(PrefetchPageLinks,{page:T})):V});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:i=!1,style:o,to:c,viewTransition:d,children:f,...p},g){let b=useResolvedPath(c,{relative:p.relative}),x=useLocation(),A=reactExports.useContext(DataRouterStateContext),{navigator:_,basename:R}=reactExports.useContext(NavigationContext),P=A!=null&&useViewTransitionState(b)&&d===!0,E=_.encodeLocation?_.encodeLocation(b).pathname:b.pathname,T=x.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;e||(T=T.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&R&&(C=stripBasename(C,R)||C);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let j=T===E||!i&&T.startsWith(E)&&T.charAt(M)==="/",L=C!=null&&(C===E||!i&&C.startsWith(E)&&C.charAt(E.length)==="/"),O={isActive:j,isPending:L,isTransitioning:P},V=j?t:void 0,X;typeof n=="function"?X=n(O):X=[n,j?"active":null,L?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let tt=typeof o=="function"?o(O):o;return reactExports.createElement(Link,{...p,"aria-current":V,className:X,ref:g,style:tt,to:c,viewTransition:d},typeof f=="function"?f(O):f)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:s="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:i,state:o,method:c=defaultMethod,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:b,...x},A)=>{let _=useSubmit(),R=useFormAction(d,{relative:p}),P=c.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),T=C=>{if(f&&f(C),C.defaultPrevented)return;C.preventDefault();let M=C.nativeEvent.submitter,j=(M==null?void 0:M.getAttribute("formmethod"))||c;_(M||C.currentTarget,{fetcherKey:t,method:j,navigate:e,replace:i,state:o,relative:p,preventScrollReset:g,viewTransition:b})};return reactExports.createElement("form",{ref:A,method:P,action:R,onSubmit:n?f:T,...x,"data-discover":!E&&s==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(s){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError2(s)),t}function useLinkClickHandler(s,{target:t,replace:e,state:n,preventScrollReset:i,relative:o,viewTransition:c}={}){let d=useNavigate(),f=useLocation(),p=useResolvedPath(s,{relative:o});return reactExports.useCallback(g=>{if(shouldProcessLinkClick(g,t)){g.preventDefault();let b=e!==void 0?e:createPath(f)===createPath(p);d(s,{replace:b,state:n,preventScrollReset:i,relative:o,viewTransition:c})}},[f,d,p,e,n,t,s,i,o,c])}function useSearchParams(s){warning$1(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=reactExports.useRef(createSearchParams(s)),e=reactExports.useRef(!1),n=useLocation(),i=reactExports.useMemo(()=>getSearchParamsForLocation(n.search,e.current?null:t.current),[n.search]),o=useNavigate(),c=reactExports.useCallback((d,f)=>{const p=createSearchParams(typeof d=="function"?d(i):d);e.current=!0,o("?"+p,f)},[o,i]);return[i,c]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:s}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),e=useRouteId();return reactExports.useCallback(async(n,i={})=>{let{action:o,method:c,encType:d,formData:f,body:p}=getFormSubmissionInfo(n,t);if(i.navigate===!1){let g=i.fetcherKey||getUniqueFetcherId();await s.fetch(g,e,i.action||o,{preventScrollReset:i.preventScrollReset,formData:f,body:p,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await s.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:f,body:p,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:e,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,t,e])}function useFormAction(s,{relative:t}={}){let{basename:e}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant$1(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...useResolvedPath(s||".",{relative:t})},c=useLocation();if(s==null){o.search=c.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(b=>b).forEach(b=>d.append("index",b));let g=d.toString();o.search=g?`?${g}`:""}}return(!s||s===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:joinPaths([e,o.pathname])),createPath(o)}function useViewTransitionState(s,t={}){let e=reactExports.useContext(ViewTransitionContext);invariant$1(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),i=useResolvedPath(s,{relative:t.relative});if(!e.isTransitioning)return!1;let o=stripBasename(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=stripBasename(e.nextLocation.pathname,n)||e.nextLocation.pathname;return matchPath(i.pathname,c)!=null||matchPath(i.pathname,o)!=null}[...NO_BODY_STATUS_CODES];function Error500(){return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100 text-center p-3",children:[jsxRuntimeExports.jsx("img",{src:"/500errorboundary.png",alt:"500 Internal Server Error",style:{maxWidth:400,width:"100%"},className:"mb-4"}),jsxRuntimeExports.jsx("h1",{className:"display-6 fw-bold",children:"Ошибка сервера (500)"}),jsxRuntimeExports.jsx("p",{className:"lead mb-4",children:"Что-то пошло не так. Наши разработчики уже работают над этим."}),jsxRuntimeExports.jsx(Link,{to:"/",className:"btn btn-primary",children:"На главную"})]})}class ErrorBoundary extends React.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(t,e){console.error("ErrorBoundary caught:",t,e)}render(){return this.state.hasError?jsxRuntimeExports.jsx(Error500,{}):this.props.children}}function bind(s,t){return function(){return s.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(s=>t=>{const e=toString.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=s=>(s=s.toLowerCase(),t=>kindOf(t)===s),typeOfTest=s=>t=>typeof t===s,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(s){return s!==null&&!isUndefined(s)&&s.constructor!==null&&!isUndefined(s.constructor)&&isFunction(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&isArrayBuffer$1(s.buffer),t}const isString$1=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=s=>s!==null&&typeof s=="object",isBoolean=s=>s===!0||s===!1,isPlainObject=s=>{if(kindOf(s)!=="object")return!1;const t=getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(toStringTag in s)&&!(iterator in s)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=s=>isObject(s)&&isFunction(s.pipe),isFormData=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||isFunction(s.append)&&((t=kindOf(s))==="formdata"||t==="object"&&isFunction(s.toString)&&s.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(s,t,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let n,i;if(typeof s!="object"&&(s=[s]),isArray(s))for(n=0,i=s.length;n<i;n++)t.call(null,s[n],n,s);else{const o=e?Object.getOwnPropertyNames(s):Object.keys(s),c=o.length;let d;for(n=0;n<c;n++)d=o[n],t.call(null,s[d],d,s)}}function findKey(s,t){t=t.toLowerCase();const e=Object.keys(s);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=s=>!isUndefined(s)&&s!==_global;function merge(){const{caseless:s}=isContextDefined(this)&&this||{},t={},e=(n,i)=>{const o=s&&findKey(t,i)||i;isPlainObject(t[o])&&isPlainObject(n)?t[o]=merge(t[o],n):isPlainObject(n)?t[o]=merge({},n):isArray(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&forEach(arguments[n],e);return t}const extend=(s,t,e,{allOwnKeys:n}={})=>(forEach(t,(i,o)=>{e&&isFunction(i)?s[o]=bind(i,e):s[o]=i},{allOwnKeys:n}),s),stripBOM=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),inherits=(s,t,e,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),e&&Object.assign(s.prototype,e)},toFlatObject=(s,t,e,n)=>{let i,o,c;const d={};if(t=t||{},s==null)return t;do{for(i=Object.getOwnPropertyNames(s),o=i.length;o-- >0;)c=i[o],(!n||n(c,s,t))&&!d[c]&&(t[c]=s[c],d[c]=!0);s=e!==!1&&getPrototypeOf(s)}while(s&&(!e||e(s,t))&&s!==Object.prototype);return t},endsWith=(s,t,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=t.length;const n=s.indexOf(t,e);return n!==-1&&n===e},toArray=s=>{if(!s)return null;if(isArray(s))return s;let t=s.length;if(!isNumber(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=s[t];return e},isTypedArray=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(s,t)=>{const n=(s&&s[iterator]).call(s);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(s,o[0],o[1])}},matchAll=(s,t)=>{let e;const n=[];for(;(e=s.exec(t))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),hasOwnProperty=(({hasOwnProperty:s})=>(t,e)=>s.call(t,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(s,t)=>{const e=Object.getOwnPropertyDescriptors(s),n={};forEach(e,(i,o)=>{let c;(c=t(i,o,s))!==!1&&(n[o]=c||i)}),Object.defineProperties(s,n)},freezeMethods=s=>{reduceDescriptors(s,(t,e)=>{if(isFunction(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=s[e];if(isFunction(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(s,t)=>{const e={},n=i=>{i.forEach(o=>{e[o]=!0})};return isArray(s)?n(s):n(String(s).split(t)),e},noop=()=>{},toFiniteNumber=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function isSpecCompliantForm(s){return!!(s&&isFunction(s.append)&&s[toStringTag]==="FormData"&&s[iterator])}const toJSONObject=s=>{const t=new Array(10),e=(n,i)=>{if(isObject(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=isArray(n)?[]:{};return forEach(n,(c,d)=>{const f=e(c,i+1);!isUndefined(f)&&(o[d]=f)}),t[i]=void 0,o}}return n};return e(s,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=s=>s&&(isObject(s)||isFunction(s))&&isFunction(s.then)&&isFunction(s.catch),_setImmediate=((s,t)=>s?setImmediate:t?((e,n)=>(_global.addEventListener("message",({source:i,data:o})=>{i===_global&&o===e&&n.length&&n.shift()()},!1),i=>{n.push(i),_global.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=s=>s!=null&&isFunction(s[iterator]),utils$1={isArray,isArrayBuffer:isArrayBuffer$1,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(s,t,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{descriptors[s]={value:s}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(s,t,e,n,i,o)=>{const c=Object.create(prototype$1);return utils$1.toFlatObject(s,c,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),AxiosError$1.call(c,s.message,t,e,n,i),c.cause=s,c.name=s.name,o&&Object.assign(c,o),c};const httpAdapter=null;function isVisitable(s){return utils$1.isPlainObject(s)||utils$1.isArray(s)}function removeBrackets(s){return utils$1.endsWith(s,"[]")?s.slice(0,-2):s}function renderKey(s,t,e){return s?s.concat(t).map(function(i,o){return i=removeBrackets(i),!e&&o?"["+i+"]":i}).join(e?".":""):t}function isFlatArray(s){return utils$1.isArray(s)&&!s.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(s,t,e){if(!utils$1.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,e=utils$1.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,P){return!utils$1.isUndefined(P[R])});const n=e.metaTokens,i=e.visitor||g,o=e.dots,c=e.indexes,f=(e.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(i))throw new TypeError("visitor must be a function");function p(_){if(_===null)return"";if(utils$1.isDate(_))return _.toISOString();if(utils$1.isBoolean(_))return _.toString();if(!f&&utils$1.isBlob(_))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(_)||utils$1.isTypedArray(_)?f&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function g(_,R,P){let E=_;if(_&&!P&&typeof _=="object"){if(utils$1.endsWith(R,"{}"))R=n?R:R.slice(0,-2),_=JSON.stringify(_);else if(utils$1.isArray(_)&&isFlatArray(_)||(utils$1.isFileList(_)||utils$1.endsWith(R,"[]"))&&(E=utils$1.toArray(_)))return R=removeBrackets(R),E.forEach(function(C,M){!(utils$1.isUndefined(C)||C===null)&&t.append(c===!0?renderKey([R],M,o):c===null?R:R+"[]",p(C))}),!1}return isVisitable(_)?!0:(t.append(renderKey(P,R,o),p(_)),!1)}const b=[],x=Object.assign(predicates,{defaultVisitor:g,convertValue:p,isVisitable});function A(_,R){if(!utils$1.isUndefined(_)){if(b.indexOf(_)!==-1)throw Error("Circular reference detected in "+R.join("."));b.push(_),utils$1.forEach(_,function(E,T){(!(utils$1.isUndefined(E)||E===null)&&i.call(t,E,utils$1.isString(T)?T.trim():T,R,x))===!0&&A(E,R?R.concat(T):[T])}),b.pop()}}if(!utils$1.isObject(s))throw new TypeError("data must be an object");return A(s),t}function encode$1(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function AxiosURLSearchParams(s,t){this._pairs=[],s&&toFormData$1(s,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,e){this._pairs.push([t,e])};prototype.toString=function(t){const e=t?function(n){return t.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function encode(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(s,t,e){if(!t)return s;const n=e&&e.encode||encode;utils$1.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let o;if(i?o=i(t,e):o=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,e).toString(n),o){const c=s.indexOf("#");c!==-1&&(s=s.slice(0,c)),s+=(s.indexOf("?")===-1?"?":"&")+o}return s}class InterceptorManager{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(n){n!==null&&t(n)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(s,t){return toFormData$1(s,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,i,o){return platform.isNode&&utils$1.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(s){return utils$1.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(s){const t={},e=Object.keys(s);let n;const i=e.length;let o;for(n=0;n<i;n++)o=e[n],t[o]=s[o];return t}function formDataToJSON(s){function t(e,n,i,o){let c=e[o++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),f=o>=e.length;return c=!c&&utils$1.isArray(i)?i.length:c,f?(utils$1.hasOwnProp(i,c)?i[c]=[i[c],n]:i[c]=n,!d):((!i[c]||!utils$1.isObject(i[c]))&&(i[c]=[]),t(e,n,i[c],o)&&utils$1.isArray(i[c])&&(i[c]=arrayToObject(i[c])),!d)}if(utils$1.isFormData(s)&&utils$1.isFunction(s.entries)){const e={};return utils$1.forEachEntry(s,(n,i)=>{t(parsePropPath(n),i,e,0)}),e}return null}function stringifySafely(s,t,e){if(utils$1.isString(s))try{return(t||JSON.parse)(s),utils$1.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(s)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,o=utils$1.isObject(t);if(o&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return i?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((d=utils$1.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return toFormData$1(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||i?(e.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(n&&!this.responseType||i)){const c=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(d){if(c)throw d.name==="SyntaxError"?AxiosError$1.from(d,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],s=>{defaults.headers[s]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=s=>{const t={};let e,n,i;return s&&s.split(`
`).forEach(function(c){i=c.indexOf(":"),e=c.substring(0,i).trim().toLowerCase(),n=c.substring(i+1).trim(),!(!e||t[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},$internals=Symbol("internals");function normalizeHeader(s){return s&&String(s).trim().toLowerCase()}function normalizeValue(s){return s===!1||s==null?s:utils$1.isArray(s)?s.map(normalizeValue):String(s)}function parseTokens(s){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(s);)t[n[1]]=n[2];return t}const isValidHeaderName=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function matchHeaderValue(s,t,e,n,i){if(utils$1.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!utils$1.isString(t)){if(utils$1.isString(n))return t.indexOf(n)!==-1;if(utils$1.isRegExp(n))return n.test(t)}}function formatHeader(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function buildAccessors(s,t){const e=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+e,{value:function(i,o,c){return this[n].call(this,t,i,o,c)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function o(d,f,p){const g=normalizeHeader(f);if(!g)throw new Error("header name must be a non-empty string");const b=utils$1.findKey(i,g);(!b||i[b]===void 0||p===!0||p===void 0&&i[b]!==!1)&&(i[b||f]=normalizeValue(d))}const c=(d,f)=>utils$1.forEach(d,(p,g)=>o(p,g,f));if(utils$1.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))c(parseHeaders(t),e);else if(utils$1.isObject(t)&&utils$1.isIterable(t)){let d={},f,p;for(const g of t){if(!utils$1.isArray(g))throw TypeError("Object iterator must return a key-value pair");d[p=g[0]]=(f=d[p])?utils$1.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}c(d,e)}else t!=null&&o(e,t,n);return this}get(t,e){if(t=normalizeHeader(t),t){const n=utils$1.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return parseTokens(i);if(utils$1.isFunction(e))return e.call(this,i,n);if(utils$1.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=normalizeHeader(t),t){const n=utils$1.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function o(c){if(c=normalizeHeader(c),c){const d=utils$1.findKey(n,c);d&&(!e||matchHeaderValue(n,n[d],d,e))&&(delete n[d],i=!0)}}return utils$1.isArray(t)?t.forEach(o):o(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const o=e[n];(!t||matchHeaderValue(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const e=this,n={};return utils$1.forEach(this,(i,o)=>{const c=utils$1.findKey(n,o);if(c){e[c]=normalizeValue(i),delete e[o];return}const d=t?formatHeader(o):String(o).trim();d!==o&&delete e[o],e[d]=normalizeValue(i),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return utils$1.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&utils$1.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,i=this.prototype;function o(c){const d=normalizeHeader(c);n[d]||(buildAccessors(i,c),n[d]=!0)}return utils$1.isArray(t)?t.forEach(o):o(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:s},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[e]=n}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(s,t){const e=this||defaults,n=t||e,i=AxiosHeaders$1.from(n.headers);let o=n.data;return utils$1.forEach(s,function(d){o=d.call(e,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function isCancel$1(s){return!!(s&&s.__CANCEL__)}function CanceledError$1(s,t,e){AxiosError$1.call(this,s??"canceled",AxiosError$1.ERR_CANCELED,t,e),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(s,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?s(e):t(new AxiosError$1("Request failed with status code "+e.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function parseProtocol(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function speedometer(s,t){s=s||10;const e=new Array(s),n=new Array(s);let i=0,o=0,c;return t=t!==void 0?t:1e3,function(f){const p=Date.now(),g=n[o];c||(c=p),e[i]=f,n[i]=p;let b=o,x=0;for(;b!==i;)x+=e[b++],b=b%s;if(i=(i+1)%s,i===o&&(o=(o+1)%s),p-c<t)return;const A=g&&p-g;return A?Math.round(x*1e3/A):void 0}}function throttle(s,t){let e=0,n=1e3/t,i,o;const c=(p,g=Date.now())=>{e=g,i=null,o&&(clearTimeout(o),o=null),s.apply(null,p)};return[(...p)=>{const g=Date.now(),b=g-e;b>=n?c(p,g):(i=p,o||(o=setTimeout(()=>{o=null,c(i)},n-b)))},()=>i&&c(i)]}const progressEventReducer=(s,t,e=3)=>{let n=0;const i=speedometer(50,250);return throttle(o=>{const c=o.loaded,d=o.lengthComputable?o.total:void 0,f=c-n,p=i(f),g=c<=d;n=c;const b={loaded:c,total:d,progress:d?c/d:void 0,bytes:f,rate:p||void 0,estimated:p&&d&&g?(d-c)/p:void 0,event:o,lengthComputable:d!=null,[t?"download":"upload"]:!0};s(b)},e)},progressEventDecorator=(s,t)=>{const e=s!=null;return[n=>t[0]({lengthComputable:e,total:s,loaded:n}),t[1]]},asyncDecorator=s=>(...t)=>utils$1.asap(()=>s(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((s,t)=>e=>(e=new URL(e,platform.origin),s.protocol===e.protocol&&s.host===e.host&&(t||s.port===e.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(s,t,e,n,i,o){const c=[s+"="+encodeURIComponent(t)];utils$1.isNumber(e)&&c.push("expires="+new Date(e).toGMTString()),utils$1.isString(n)&&c.push("path="+n),utils$1.isString(i)&&c.push("domain="+i),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function combineURLs(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function buildFullPath(s,t,e){let n=!isAbsoluteURL(t);return s&&(n||e==!1)?combineURLs(s,t):t}const headersToObject=s=>s instanceof AxiosHeaders$1?{...s}:s;function mergeConfig$1(s,t){t=t||{};const e={};function n(p,g,b,x){return utils$1.isPlainObject(p)&&utils$1.isPlainObject(g)?utils$1.merge.call({caseless:x},p,g):utils$1.isPlainObject(g)?utils$1.merge({},g):utils$1.isArray(g)?g.slice():g}function i(p,g,b,x){if(utils$1.isUndefined(g)){if(!utils$1.isUndefined(p))return n(void 0,p,b,x)}else return n(p,g,b,x)}function o(p,g){if(!utils$1.isUndefined(g))return n(void 0,g)}function c(p,g){if(utils$1.isUndefined(g)){if(!utils$1.isUndefined(p))return n(void 0,p)}else return n(void 0,g)}function d(p,g,b){if(b in t)return n(p,g);if(b in s)return n(void 0,p)}const f={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(p,g,b)=>i(headersToObject(p),headersToObject(g),b,!0)};return utils$1.forEach(Object.keys(Object.assign({},s,t)),function(g){const b=f[g]||i,x=b(s[g],t[g],g);utils$1.isUndefined(x)&&b!==d||(e[g]=x)}),e}const resolveConfig=s=>{const t=mergeConfig$1({},s);let{data:e,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:c,auth:d}=t;t.headers=c=AxiosHeaders$1.from(c),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(utils$1.isFormData(e)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[p,...g]=f?f.split(";").map(b=>b.trim()).filter(Boolean):[];c.setContentType([p||"multipart/form-data",...g].join("; "))}}if(platform.hasStandardBrowserEnv&&(n&&utils$1.isFunction(n)&&(n=n(t)),n||n!==!1&&isURLSameOrigin(t.url))){const p=i&&o&&cookies.read(o);p&&c.set(i,p)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(s){return new Promise(function(e,n){const i=resolveConfig(s);let o=i.data;const c=AxiosHeaders$1.from(i.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:p}=i,g,b,x,A,_;function R(){A&&A(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let P=new XMLHttpRequest;P.open(i.method.toUpperCase(),i.url,!0),P.timeout=i.timeout;function E(){if(!P)return;const C=AxiosHeaders$1.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),j={data:!d||d==="text"||d==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:C,config:s,request:P};settle(function(O){e(O),R()},function(O){n(O),R()},j),P=null}"onloadend"in P?P.onloadend=E:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(E)},P.onabort=function(){P&&(n(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,s,P)),P=null)},P.onerror=function(){n(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,s,P)),P=null},P.ontimeout=function(){let M=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const j=i.transitional||transitionalDefaults;i.timeoutErrorMessage&&(M=i.timeoutErrorMessage),n(new AxiosError$1(M,j.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,s,P)),P=null},o===void 0&&c.setContentType(null),"setRequestHeader"in P&&utils$1.forEach(c.toJSON(),function(M,j){P.setRequestHeader(j,M)}),utils$1.isUndefined(i.withCredentials)||(P.withCredentials=!!i.withCredentials),d&&d!=="json"&&(P.responseType=i.responseType),p&&([x,_]=progressEventReducer(p,!0),P.addEventListener("progress",x)),f&&P.upload&&([b,A]=progressEventReducer(f),P.upload.addEventListener("progress",b),P.upload.addEventListener("loadend",A)),(i.cancelToken||i.signal)&&(g=C=>{P&&(n(!C||C.type?new CanceledError$1(null,s,P):C),P.abort(),P=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const T=parseProtocol(i.url);if(T&&platform.protocols.indexOf(T)===-1){n(new AxiosError$1("Unsupported protocol "+T+":",AxiosError$1.ERR_BAD_REQUEST,s));return}P.send(o||null)})},composeSignals=(s,t)=>{const{length:e}=s=s?s.filter(Boolean):[];if(t||e){let n=new AbortController,i;const o=function(p){if(!i){i=!0,d();const g=p instanceof Error?p:this.reason;n.abort(g instanceof AxiosError$1?g:new CanceledError$1(g instanceof Error?g.message:g))}};let c=t&&setTimeout(()=>{c=null,o(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const d=()=>{s&&(c&&clearTimeout(c),c=null,s.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),s=null)};s.forEach(p=>p.addEventListener("abort",o));const{signal:f}=n;return f.unsubscribe=()=>utils$1.asap(d),f}},streamChunk=function*(s,t){let e=s.byteLength;if(e<t){yield s;return}let n=0,i;for(;n<e;)i=n+t,yield s.slice(n,i),n=i},readBytes=async function*(s,t){for await(const e of readStream(s))yield*streamChunk(e,t)},readStream=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},trackStream=(s,t,e,n)=>{const i=readBytes(s,t);let o=0,c,d=f=>{c||(c=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:p,value:g}=await i.next();if(p){d(),f.close();return}let b=g.byteLength;if(e){let x=o+=b;e(x)}f.enqueue(new Uint8Array(g))}catch(p){throw d(p),p}},cancel(f){return d(f),i.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),test=(s,...t)=>{try{return!!s(...t)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let s=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(s=>s.body)};isFetchSupported&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!resolvers[t]&&(resolvers[t]=utils$1.isFunction(s[t])?e=>e[t]():(e,n)=>{throw new AxiosError$1(`Response type '${t}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,n)})})})(new Response);const getBodyLength=async s=>{if(s==null)return 0;if(utils$1.isBlob(s))return s.size;if(utils$1.isSpecCompliantForm(s))return(await new Request(platform.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(s)||utils$1.isArrayBuffer(s))return s.byteLength;if(utils$1.isURLSearchParams(s)&&(s=s+""),utils$1.isString(s))return(await encodeText(s)).byteLength},resolveBodyLength=async(s,t)=>{const e=utils$1.toFiniteNumber(s.getContentLength());return e??getBodyLength(t)},fetchAdapter=isFetchSupported&&(async s=>{let{url:t,method:e,data:n,signal:i,cancelToken:o,timeout:c,onDownloadProgress:d,onUploadProgress:f,responseType:p,headers:g,withCredentials:b="same-origin",fetchOptions:x}=resolveConfig(s);p=p?(p+"").toLowerCase():"text";let A=composeSignals([i,o&&o.toAbortSignal()],c),_;const R=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let P;try{if(f&&supportsRequestStream&&e!=="get"&&e!=="head"&&(P=await resolveBodyLength(g,n))!==0){let j=new Request(t,{method:"POST",body:n,duplex:"half"}),L;if(utils$1.isFormData(n)&&(L=j.headers.get("content-type"))&&g.setContentType(L),j.body){const[O,V]=progressEventDecorator(P,progressEventReducer(asyncDecorator(f)));n=trackStream(j.body,DEFAULT_CHUNK_SIZE,O,V)}}utils$1.isString(b)||(b=b?"include":"omit");const E="credentials"in Request.prototype;_=new Request(t,{...x,signal:A,method:e.toUpperCase(),headers:g.normalize().toJSON(),body:n,duplex:"half",credentials:E?b:void 0});let T=await fetch(_,x);const C=supportsResponseStream&&(p==="stream"||p==="response");if(supportsResponseStream&&(d||C&&R)){const j={};["status","statusText","headers"].forEach(X=>{j[X]=T[X]});const L=utils$1.toFiniteNumber(T.headers.get("content-length")),[O,V]=d&&progressEventDecorator(L,progressEventReducer(asyncDecorator(d),!0))||[];T=new Response(trackStream(T.body,DEFAULT_CHUNK_SIZE,O,()=>{V&&V(),R&&R()}),j)}p=p||"text";let M=await resolvers[utils$1.findKey(resolvers,p)||"text"](T,s);return!C&&R&&R(),await new Promise((j,L)=>{settle(j,L,{data:M,headers:AxiosHeaders$1.from(T.headers),status:T.status,statusText:T.statusText,config:s,request:_})})}catch(E){throw R&&R(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,s,_),{cause:E.cause||E}):AxiosError$1.from(E,E&&E.code,s,_)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const renderReason=s=>`- ${s}`,isResolvedHandle=s=>utils$1.isFunction(s)||s===null||s===!1,adapters={getAdapter:s=>{s=utils$1.isArray(s)?s:[s];const{length:t}=s;let e,n;const i={};for(let o=0;o<t;o++){e=s[o];let c;if(n=e,!isResolvedHandle(e)&&(n=knownAdapters[(c=String(e)).toLowerCase()],n===void 0))throw new AxiosError$1(`Unknown adapter '${c}'`);if(n)break;i[c||"#"+o]=n}if(!n){const o=Object.entries(i).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=t?o.length>1?`since :
`+o.map(renderReason).join(`
`):" "+renderReason(o[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new CanceledError$1(null,s)}function dispatchRequest(s){return throwIfCancellationRequested(s),s.headers=AxiosHeaders$1.from(s.headers),s.data=transformData.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(s.adapter||defaults.adapter)(s).then(function(n){return throwIfCancellationRequested(s),n.data=transformData.call(s,s.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel$1(n)||(throwIfCancellationRequested(s),n&&n.response&&(n.response.data=transformData.call(s,s.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const VERSION$1="1.10.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{validators$1[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const deprecatedWarnings={};validators$1.transitional=function(t,e,n){function i(o,c){return"[Axios v"+VERSION$1+"] Transitional option '"+o+"'"+c+(n?". "+n:"")}return(o,c,d)=>{if(t===!1)throw new AxiosError$1(i(c," has been removed"+(e?" in "+e:"")),AxiosError$1.ERR_DEPRECATED);return e&&!deprecatedWarnings[c]&&(deprecatedWarnings[c]=!0,console.warn(i(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,c,d):!0}};validators$1.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function assertOptions(s,t,e){if(typeof s!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let i=n.length;for(;i-- >0;){const o=n[i],c=t[o];if(c){const d=s[o],f=d===void 0||c(d,o,s);if(f!==!0)throw new AxiosError$1("option "+o+" must be "+f,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError$1("Unknown option "+o,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(t){this.defaults=t||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=mergeConfig$1(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:o}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),i!=null&&(utils$1.isFunction(i)?e.paramsSerializer={serialize:i}:validator.assertOptions(i,{encode:validators.function,serialize:validators.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),validator.assertOptions(e,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=o&&utils$1.merge(o.common,o[e.method]);o&&utils$1.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),e.headers=AxiosHeaders$1.concat(c,o);const d=[];let f=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(e)===!1||(f=f&&R.synchronous,d.unshift(R.fulfilled,R.rejected))});const p=[];this.interceptors.response.forEach(function(R){p.push(R.fulfilled,R.rejected)});let g,b=0,x;if(!f){const _=[dispatchRequest.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,p),x=_.length,g=Promise.resolve(e);b<x;)g=g.then(_[b++],_[b++]);return g}x=d.length;let A=e;for(b=0;b<x;){const _=d[b++],R=d[b++];try{A=_(A)}catch(P){R.call(this,P);break}}try{g=dispatchRequest.call(this,A)}catch(_){return Promise.reject(_)}for(b=0,x=p.length;b<x;)g=g.then(p[b++],p[b++]);return g}getUri(t){t=mergeConfig$1(this.defaults,t);const e=buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls);return buildURL(e,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(e,n){return this.request(mergeConfig$1(n||{},{method:t,url:e,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){function e(n){return function(o,c,d){return this.request(mergeConfig$1(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}Axios$1.prototype[t]=e(),Axios$1.prototype[t+"Form"]=e(!0)});let CancelToken$1=class ib{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const c=new Promise(d=>{n.subscribe(d),o=d}).then(i);return c.cancel=function(){n.unsubscribe(o)},c},t(function(o,c,d){n.reason||(n.reason=new CanceledError$1(o,c,d),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new ib(function(i){t=i}),cancel:t}}};function spread$1(s){return function(e){return s.apply(null,e)}}function isAxiosError$1(s){return utils$1.isObject(s)&&s.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([s,t])=>{HttpStatusCode$1[t]=s});function createInstance(s){const t=new Axios$1(s),e=bind(Axios$1.prototype.request,t);return utils$1.extend(e,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return createInstance(mergeConfig$1(s,i))},e}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=s=>formDataToJSON(utils$1.isHTMLForm(s)?new FormData(s):s);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,api=axios.create({baseURL:"/api"});api.interceptors.request.use(s=>{const t=localStorage.getItem("token")||sessionStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});api.interceptors.response.use(s=>s,s=>{var t;return((t=s.response)==null?void 0:t.status)===401&&(sessionStorage.clear(),localStorage.removeItem("token"),window.location.replace("/login?expired=1")),Promise.reject(s)});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$3=["attr","size","title"];function _objectWithoutProperties$2(s,t){if(s==null)return{};var e=_objectWithoutPropertiesLoose$2(s,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(e[n]=s[n])}return e}function _objectWithoutPropertiesLoose$2(s,t){if(s==null)return{};var e={};for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)){if(t.indexOf(n)>=0)continue;e[n]=s[n]}return e}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},_extends$1.apply(this,arguments)}function ownKeys$3(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,n)}return e}function _objectSpread$2(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$3(Object(e),!0).forEach(function(n){_defineProperty$2(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys$3(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function _defineProperty$2(s,t,e){return t=_toPropertyKey$1(t),t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function _toPropertyKey$1(s){var t=_toPrimitive$1(s,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$1(s,t){if(typeof s!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Tree2Element(s){return s&&s.map((t,e)=>React.createElement(t.tag,_objectSpread$2({key:e},t.attr),Tree2Element(t.child)))}function GenIcon(s){return t=>React.createElement(IconBase,_extends$1({attr:_objectSpread$2({},s.attr)},t),Tree2Element(s.child))}function IconBase(s){var t=e=>{var{attr:n,size:i,title:o}=s,c=_objectWithoutProperties$2(s,_excluded$3),d=i||e.size||"1em",f;return e.className&&(f=e.className),s.className&&(f=(f?f+" ":"")+s.className),React.createElement("svg",_extends$1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,c,{className:f,style:_objectSpread$2(_objectSpread$2({color:s.color||e.color},e.style),s.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&React.createElement("title",null,o),s.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,e=>t(e)):t(DefaultContext)}function FaAddressBook(s){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-228-32c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H118.4C106 384 96 375.4 96 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2z"},child:[]}]})(s)}function FaArrowLeft(s){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(s)}function FaBell(s){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function FaChevronLeft(s){return GenIcon({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(s)}function FaChevronRight(s){return GenIcon({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(s)}function FaEyeSlash(s){return GenIcon({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(s)}function FaEye(s){return GenIcon({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(s)}function FaFolderOpen(s){return GenIcon({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z"},child:[]}]})(s)}function FaFolder(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"},child:[]}]})(s)}function FaHistory(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(s)}function FaMoon(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(s)}function FaPlus(s){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function FaSearch(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(s)}function FaSignOutAlt(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(s)}function FaSpinner(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(s)}function FaSun(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(s)}function FaTimes(s){return GenIcon({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(s)}function FaTrash(s){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(s)}function FaUserCircle(s){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(s)}function LoginForm({theme:s,onLogin:t}){const e=useNavigate(),[n,i]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,f]=reactExports.useState(""),[p,g]=reactExports.useState(!1),[b,x]=reactExports.useState(!1),A=async _=>{_.preventDefault(),f(""),g(!0);try{const{data:R}=await api.post("/auth/login",{email:n,password:o}),P=R.token;sessionStorage.setItem("token",P);const E=P.split(".")[1],T=atob(E),M=JSON.parse(T)["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"];M&&sessionStorage.setItem("userId",M),t(P),e("/",{replace:!0})}catch{f("Неверные данные или ошибка сети."),g(!1)}};return jsxRuntimeExports.jsxs("form",{onSubmit:A,autoComplete:"off",children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"email",id:"loginEmail",className:`form-control ${s==="dark"?"bg-secondary text-light border-0":""}`,placeholder:"Email",value:n,onChange:_=>i(_.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"loginEmail",children:"Email"})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:b?"text":"password",id:"loginPassword",className:`form-control ${s==="dark"?"bg-secondary text-light border-0":""}`,placeholder:"Пароль",value:o,onChange:_=>c(_.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"loginPassword",children:"Пароль"}),jsxRuntimeExports.jsx("button",{type:"button",className:`btn btn-link position-absolute top-50 end-0 translate-middle-y\r
                          text-decoration-none p-0 me-2`,tabIndex:-1,onClick:()=>x(_=>!_),"aria-label":b?"Скрыть пароль":"Показать пароль",children:b?jsxRuntimeExports.jsx(FaEyeSlash,{}):jsxRuntimeExports.jsx(FaEye,{})})]}),d&&jsxRuntimeExports.jsx("div",{className:"alert alert-danger py-2",children:d}),jsxRuntimeExports.jsxs("button",{className:"btn btn-primary w-100",disabled:p,children:[p&&jsxRuntimeExports.jsx(FaSpinner,{className:"me-2 spin"}),"Войти"]}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-center",children:jsxRuntimeExports.jsx(Link,{to:"/forgot-password",children:"Забыли пароль?"})})]})}function debounce(s,t=300){let e;return(...n)=>{clearTimeout(e),e=setTimeout(()=>s.apply(this,n),t)}}const AlertCtx=reactExports.createContext(),AlertProvider=({children:s})=>{const[t,e]=reactExports.useState([]),n=reactExports.useCallback((i,o="info",c=4e3)=>{const d=crypto.randomUUID();e(f=>[...f,{id:d,text:i,variant:o}]),setTimeout(()=>{e(f=>f.filter(p=>p.id!==d))},c)},[]);return jsxRuntimeExports.jsxs(AlertCtx.Provider,{value:{push:n},children:[s,jsxRuntimeExports.jsx("div",{className:"toast-container position-fixed top-0 end-0 p-3",style:{zIndex:1060},children:t.map(i=>jsxRuntimeExports.jsx("div",{className:`toast show text-bg-${i.variant}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"d-flex",children:[jsxRuntimeExports.jsx("div",{className:"toast-body",children:i.text}),jsxRuntimeExports.jsx("button",{type:"button",className:"btn-close btn-close-white me-2 m-auto",onClick:()=>e(o=>o.filter(c=>c.id!==i.id))})]})},i.id))})]})},useAlert=()=>reactExports.useContext(AlertCtx);function RegisterForm({theme:s,onLogin:t}){const[e,n]=reactExports.useState(""),[i,o]=reactExports.useState(""),[c,d]=reactExports.useState(!0),[f,p]=reactExports.useState(!1),[g,b]=reactExports.useState(""),[x,A]=reactExports.useState(""),[_,R]=reactExports.useState(""),[P,E]=reactExports.useState(!1),{push:T}=useAlert(),[C,M]=reactExports.useState(!1),[j,L]=reactExports.useState(!1);function O(){return e.includes("@")?i.length<3?"Имя не менее 3 символов":c?g.length<6?"Пароль не менее 6 символов":g!==x?"Пароли не совпадают":null:"Имя уже занято":"Некорректный email"}const V=async X=>{var Y;X.preventDefault(),R("");const tt=O();if(tt){R(tt);return}E(!0);try{const{data:Q}=await api.post("/auth/register",{email:e,name:i,password:g,confirmPassword:x});if(Q.token){sessionStorage.setItem("token",Q.token),t(Q.token);return}E(!1),T("Регистрация прошла успешно! Войдите в систему.","success")}catch(Q){((Y=Q.response)==null?void 0:Y.status)===409?R(Q.response.data):R("Ошибка сети или сервера."),E(!1)}};return reactExports.useCallback(debounce(async X=>{if(X.trim().length<3)return d(!0);p(!0);try{const{data:tt}=await api.get("/users/name-exists",{params:{name:X}});d(!tt.exists)}finally{p(!1)}},350),[]),jsxRuntimeExports.jsxs("form",{onSubmit:V,autoComplete:"off",children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"email",id:"regEmail",className:`form-control ${s==="dark"?"bg-secondary text-light border-0":""}`,placeholder:"Email",value:e,onChange:X=>n(X.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"regEmail",children:"Email"})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"text",id:"regUsername",className:`form-control ${s==="dark"?"bg-secondary text-light border-0":""}`,placeholder:"Имя пользователя",value:i,onChange:X=>o(X.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"regUsername",children:"Имя пользователя"})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3 position-relative",children:[jsxRuntimeExports.jsx("input",{type:C?"text":"password",id:"regPassword",className:`form-control ${s==="dark"?"bg-secondary text-light border-0":""}`,placeholder:"Пароль",value:g,onChange:X=>b(X.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"regPassword",children:"Пароль"}),jsxRuntimeExports.jsx("button",{type:"button",className:`btn btn-link position-absolute top-50 end-0 translate-middle-y\r
                     text-decoration-none p-0 me-2`,tabIndex:-1,onClick:()=>M(X=>!X),"aria-label":C?"Скрыть пароль":"Показать пароль",children:C?jsxRuntimeExports.jsx(FaEyeSlash,{}):jsxRuntimeExports.jsx(FaEye,{})})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3 position-relative",children:[jsxRuntimeExports.jsx("input",{type:C?"text":"password",id:"regConfirm",className:`form-control ${s==="dark"?"bg-secondary text-light border-0":""}`,placeholder:"Повторите пароль",value:x,onChange:X=>A(X.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"regConfirm",children:"Повторите пароль"}),jsxRuntimeExports.jsx("button",{type:"button",className:`btn btn-link position-absolute top-50 end-0 translate-middle-y\r
                     text-decoration-none p-0 me-2`,tabIndex:-1,onClick:()=>M(X=>!X),"aria-label":C?"Скрыть пароль":"Показать пароль",children:C?jsxRuntimeExports.jsx(FaEyeSlash,{}):jsxRuntimeExports.jsx(FaEye,{})})]}),_&&jsxRuntimeExports.jsx("div",{className:"alert alert-danger py-2",children:_}),!c&&!_&&jsxRuntimeExports.jsx("div",{className:"alert alert-warning py-2",children:"Имя уже занято"}),jsxRuntimeExports.jsxs("button",{className:"btn btn-success w-100",disabled:P||!c,children:[P&&jsxRuntimeExports.jsx(FaSpinner,{className:"me-2 spin"}),"Зарегистрироваться"]})]})}function AuthPage({onLogin:s}){const[t,e]=reactExports.useState("login"),[n,i]=reactExports.useState(()=>localStorage.getItem("theme")||"light");reactExports.useEffect(()=>{document.body.className=n==="dark"?"bg-dark text-light":"bg-light text-dark",localStorage.setItem("theme",n)},[n]);const o=n==="dark"?"bg-dark bg-gradient text-light":"bg-white text-dark";return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center min-vh-100 p-3",children:[jsxRuntimeExports.jsx("img",{src:"/logo-small.png",alt:"Logo",height:80,className:"mb-4"}),jsxRuntimeExports.jsxs("div",{className:`card shadow ${o}`,style:{minWidth:340,maxWidth:380},children:[jsxRuntimeExports.jsxs("div",{className:"card-header bg-transparent d-flex justify-content-between",children:[jsxRuntimeExports.jsxs("ul",{className:"nav nav-tabs card-header-tabs",children:[jsxRuntimeExports.jsx("li",{className:"nav-item",children:jsxRuntimeExports.jsx("button",{className:`nav-link ${t==="login"?"active":""}`,onClick:()=>e("login"),type:"button",children:"Вход"})}),jsxRuntimeExports.jsx("li",{className:"nav-item",children:jsxRuntimeExports.jsx("button",{className:`nav-link ${t==="register"?"active":""}`,onClick:()=>e("register"),type:"button",children:"Регистрация"})})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-link",onClick:()=>i(n==="dark"?"light":"dark"),title:"Переключить тему",children:n==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"card-body",children:t==="login"?jsxRuntimeExports.jsx(LoginForm,{theme:n,onLogin:s}):jsxRuntimeExports.jsx(RegisterForm,{theme:n,onLogin:s})})]}),jsxRuntimeExports.jsxs("footer",{className:`mt-4 text-center w-100 ${n==="dark"?"text-secondary":"text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO. Все права защищены."]})]})}function ProfileModal({show:s,onClose:t,user:e,onUpdateUser:n,theme:i}){const[o]=reactExports.useState(e.name),[c,d]=reactExports.useState(e.name),[f,p]=reactExports.useState((e==null?void 0:e.email)??""),[g,b]=reactExports.useState(""),[x,A]=reactExports.useState(""),[_,R]=reactExports.useState(""),[P,E]=reactExports.useState(!0),[T,C]=reactExports.useState(""),[M,j]=reactExports.useState(""),[L,O]=reactExports.useState(!1),[V,X]=reactExports.useState(null),tt=i==="dark"?{background:"#1e1e1e",color:"#f8f9fa"}:{},Y=i==="dark"?"bg-dark text-light":"bg-light text-dark";reactExports.useEffect(()=>{s&&(d((e==null?void 0:e.name)??""),p((e==null?void 0:e.email)??""),b(""),A(""),R(""),j(""),C(""))},[s,e]),reactExports.useEffect(()=>{document.body.className=i==="dark"?"dark":"light"},[i]);const Q=reactExports.useCallback(debounce(async J=>{if(!J||typeof J!="string"||!J.trim()||J===o){E(!0);return}const{data:D}=await api.get("/users/name-exists",{params:{name:J}});E(!D.exists)},350),[o]);if(reactExports.useEffect(()=>{Q(c)},[c,Q]),!s)return null;const ct=async J=>{var D;if(J.preventDefault(),C(""),j(""),O(!0),!P){C("Имя занято");return}try{const{data:U}=await api.put("/users/me",{name:c,email:f});j("Профиль обновлён"),n(U)}catch(U){((D=U.response)==null?void 0:D.status)===409?C(U.response.data):C("Не удалось обновить профиль")}O(!1)},nt=async J=>{if(J.preventDefault(),x!==_){C("Пароли не совпадают");return}C(""),j(""),O(!0);try{await api.post("/auth/change-password",{currentPassword:g,newPassword:x}),j("Пароль изменён успешно"),b(""),A(""),R("")}catch{C("Не удалось сменить пароль")}O(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"modal fade show",tabIndex:"-1",style:{display:"block"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:tt,children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Y}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Управление профилем"}),jsxRuntimeExports.jsx("button",{type:"button",className:"btn-close",onClick:t})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Y}`,children:[T&&jsxRuntimeExports.jsx("div",{className:"alert alert-danger",children:T}),M&&jsxRuntimeExports.jsx("div",{className:"alert alert-success",children:M}),jsxRuntimeExports.jsxs("div",{className:"accordion",id:"profileAccordion",children:[jsxRuntimeExports.jsxs("div",{className:"accordion-item",children:[jsxRuntimeExports.jsx("h2",{className:"accordion-header",id:"headingProfile",children:jsxRuntimeExports.jsx("button",{className:`accordion-button ${V!=="profile"?"collapsed":""}`,type:"button",onClick:()=>X(V==="profile"?null:"profile"),children:"Управление логином"})}),jsxRuntimeExports.jsx("div",{id:"collapseProfile",className:`accordion-collapse collapse ${V==="profile"?"show":""}`,"aria-labelledby":"headingProfile","data-bs-parent":"#profileAccordion",children:jsxRuntimeExports.jsx("div",{className:`accordion-body ${Y}`,children:jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"text",className:"form-control",id:"profileName",placeholder:"Имя",value:c,onChange:J=>d(J.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"profileName",children:"Имя"})]}),!P&&jsxRuntimeExports.jsx("div",{className:"alert alert-warning py-2",children:"Имя уже занято"}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"email",className:"form-control",id:"profileEmail",placeholder:"Email",value:f,onChange:J=>p(J.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"profileEmail",children:"Email"})]}),jsxRuntimeExports.jsxs("button",{className:"btn btn-primary w-100",disabled:L,children:[L?jsxRuntimeExports.jsx("span",{className:"spinner-border spinner-border-sm me-2"}):null,"Сохранить"]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"accordion-item",children:[jsxRuntimeExports.jsx("h2",{className:"accordion-header",id:"headingPassword",children:jsxRuntimeExports.jsx("button",{className:`accordion-button ${V!=="password"?"collapsed":""}`,type:"button",onClick:()=>X(V==="password"?null:"password"),children:"Управление паролем"})}),jsxRuntimeExports.jsx("div",{id:"collapsePassword",className:`accordion-collapse collapse ${V==="password"?"show":""}`,"aria-labelledby":"headingPassword","data-bs-parent":"#profileAccordion",children:jsxRuntimeExports.jsx("div",{className:`accordion-body ${Y}`,children:jsxRuntimeExports.jsxs("form",{onSubmit:nt,children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"password",className:"form-control",id:"currentPwd",placeholder:"Текущий пароль",value:g,onChange:J=>b(J.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"currentPwd",children:"Текущий пароль"})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"password",className:"form-control",id:"newPwd",placeholder:"Новый пароль",value:x,onChange:J=>A(J.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"newPwd",children:"Новый пароль"})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"password",className:"form-control",id:"confirmPwd",placeholder:"Подтвердите пароль",value:_,onChange:J=>R(J.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"confirmPwd",children:"Подтвердите пароль"})]}),jsxRuntimeExports.jsxs("button",{className:"btn btn-warning w-100",disabled:L,children:[L?jsxRuntimeExports.jsx("span",{className:"spinner-border spinner-border-sm me-2"}):null,"Сменить пароль"]})]})})})]})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"modal-backdrop fade show"})]})}function ContactsModal({show:s,onClose:t,theme:e}){const[n,i]=reactExports.useState([]),[o,c]=reactExports.useState(""),[d,f]=reactExports.useState([]),[p,g]=reactExports.useState(!1),b=e==="dark",x=b?"text-light":"",A=b?{filter:"invert(1)"}:{};reactExports.useEffect(()=>{s&&api.get("/contacts").then(E=>i(E.data))},[s]);const _=async()=>{if(!o.trim())return f([]);g(!0);try{const{data:E}=await api.get("/users/search",{params:{q:o}}),T=new Set(n.map(C=>C.id));f(E.filter(C=>!T.has(C.id)))}finally{g(!1)}},R=async E=>{await api.post(`/contacts/${E}`),i(await(await api.get("/contacts")).data),f(T=>T.filter(C=>C.id!==E))},P=async E=>{await api.delete(`/contacts/${E}`),i(T=>T.filter(C=>C.id!==E))};return s?jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)",color:b?"#f8f9fa":"#212529"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:{background:b?"#1e1e1e":"#fff"},children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${b?"bg-dark text-light":""}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Мои контакты"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:t,style:A})]}),jsxRuntimeExports.jsxs("div",{className:"modal-body",children:[jsxRuntimeExports.jsx("h6",{className:`modal-title ${x}`,children:"Сохранённые"}),n.length===0&&jsxRuntimeExports.jsx("p",{className:"text-muted",children:"Пусто"}),jsxRuntimeExports.jsx("ul",{className:"list-group mb-3",children:n.map(E=>jsxRuntimeExports.jsxs("li",{className:"list-group-item d-flex justify-content-between "+(e==="dark"?"bg-dark text-light border-secondary":""),children:[jsxRuntimeExports.jsx("span",{children:E.name}),jsxRuntimeExports.jsx("button",{className:"btn btn-sm "+(e==="dark"?"btn-outline-light":"btn-outline-danger"),onClick:()=>P(E.id),children:jsxRuntimeExports.jsx(FaTrash,{})})]},E.id))}),jsxRuntimeExports.jsx("h6",{className:`modal-title ${x}`,children:"Найти пользователя"}),jsxRuntimeExports.jsxs("div",{className:"input-group mb-2",children:[jsxRuntimeExports.jsx("input",{className:"form-control",placeholder:"Имя пользователя…",value:o,onChange:E=>c(E.target.value),onKeyDown:E=>E.key==="Enter"&&_()}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:_,children:p?"...":jsxRuntimeExports.jsx(FaSearch,{})})]}),d.length>0&&jsxRuntimeExports.jsx("ul",{className:"list-group",children:d.map(E=>jsxRuntimeExports.jsxs("li",{className:"list-group-item d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:E.name}),jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-success",title:"Добавить в контакты",onClick:()=>R(E.id),children:jsxRuntimeExports.jsx(FaPlus,{})})]},E.id))})]}),jsxRuntimeExports.jsx("div",{className:`modal-footer ${b?"bg-dark":""}`,children:jsxRuntimeExports.jsxs("button",{className:"btn btn-secondary",onClick:t,children:[jsxRuntimeExports.jsx(FaTimes,{className:"me-1"})," Закрыть"]})})]})})}):null}function Notifications({theme:s,onActivitiesRead:t}){const[e,n]=reactExports.useState([]),[i,o]=reactExports.useState(!1),c=reactExports.useRef(),d=async()=>{const{data:R}=await api.get("/activity",{params:{top:10}});n(R)};reactExports.useEffect(()=>{d();const R=setInterval(d,6e4);return()=>clearInterval(R)},[]),reactExports.useEffect(()=>{if(!i)return;const R=P=>{c.current&&!c.current.contains(P.target)&&p()};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[i,e]);const f=e.filter(R=>!R.isRead).length,p=async()=>{o(!1);const R=e.filter(P=>!P.isRead&&P.type!=="InvitedToContacts").map(P=>P.id);await Promise.all(R.map(P=>api.patch(`/activity/${P}/read`))),n(P=>P.map(E=>R.includes(E.id)?{...E,isRead:!0}:E))},g=async(R,P)=>{var T;const E=(T=R.meta)==null?void 0:T.ContactId;E&&(P?await api.post(`/contacts/${E}/accept`):await api.post(`/contacts/${E}/block`),await api.patch(`/activity/${R.id}/read`),n(C=>C.map(M=>M.id===R.id?{...M,isRead:!0}:M)))},b=async(R,P)=>{const E=R.roomId;if(!E)return;const T=P?`/rooms/${E}/accept`:`/rooms/${E}/decline`;await api.post(T),await api.patch(`/activity/${R.id}/read`),n(C=>C.map(M=>M.id===R.id?{...M,isRead:!0}:M))},x=async()=>{const R=e.filter(P=>!P.isRead&&P.type!=="InvitedToContacts").map(P=>P.id);await Promise.all(R.map(P=>api.patch(`/activity/${P}/read`))),n(P=>P.map(E=>R.includes(E.id)?{...E,isRead:!0}:E))};function A(R){const{type:P,meta:E,createdAt:T}=R,C=new Date(T).toLocaleString();switch(P){case"CreatedDocument":return`📄 Добавлен документ «${(E==null?void 0:E.Name)??"(без названия)"}».`;case"UpdatedDocument":return`✏️ Обновлён документ «${(E==null?void 0:E.Name)??"(без названия)"}» v${E==null?void 0:E.Version}-${(E==null?void 0:E.ForkPath)||"0"}.`;case"DeletedDocument":return`🗑️ Удалён документ «${(E==null?void 0:E.Name)??"(без названия)"}».`;case"ArchivedDocument":return`📦 Архивирован документ ${E==null?void 0:E.Name} v${E==null?void 0:E.Version}-${(E==null?void 0:E.ForkPath)||"0"}.`;case"RenamedDocument":return`🔖 Переименован документ: «${E==null?void 0:E.OldName}» → «${E==null?void 0:E.NewName}».`;case"IssuedToken":return`🔑 Выдан доступ к документу «${E==null?void 0:E.Name}».`;case"UpdatedToken":return`🔐 Обновлён доступ к документу «${E==null?void 0:E.Name}».`;case"RevokedToken":return`🚫 Отозван доступ к документу «${E==null?void 0:E.Name}».`;case"CreatedRoom":return`🆕 Создана комната «${(E==null?void 0:E.RoomTitle)??"(без названия)"}».`;case"InvitedToRoom":return`✉️ Приглашение в комнату «${(E==null?void 0:E.RoomTitle)??"(без названия)"} от ${E==null?void 0:E.UserName}».`;case"AcceptedRoom":return`✅ Приглашение для ${E==null?void 0:E.UserName} в комнату принято.`;case"DeclinedRoom":return`🚫 Приглашение для ${E==null?void 0:E.UserName} в комнату отклонено.`;case"RevokedRoom":return`🚫 Отозван доступ к комнате «${E==null?void 0:E.RoomTitle}».`;case"UpdatedRoomAccess":return`🔧 Изменён уровень доступа в комнате «${(E==null?void 0:E.RoomTitle)??"(без названия)"}».`;case"DeletedRoom":return`❌ Удалена комната «${(E==null?void 0:E.RoomTitle)??"(без названия)"}» с ${(E==null?void 0:E.Count)??"0"} документами.`;case"InvitedToContacts":return`👤 Запрос на добавление в контакты от ${E==null?void 0:E.UserName}.`;case"AcceptedContact":return`✅ Запрос для ${E==null?void 0:E.UserName} на добавление в контакты принят.`;case"DeclinedContact":return`🚫 Запрос для ${E==null?void 0:E.UserName} на добавление в контакты отклонён.`;default:return`ℹ️ Неизвестная активность от ${C}`}}function _(R,P,E){var M,j,L,O,V;const T=new Date(R.createdAt).toLocaleString(),C=({children:X,extra:tt})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"small",children:T}),jsxRuntimeExports.jsx("div",{children:X}),tt&&jsxRuntimeExports.jsx("div",{className:"mt-1",children:tt})]});switch(R.type){case"InvitedToRoom":return jsxRuntimeExports.jsxs(C,{extra:!R.isRead&&jsxRuntimeExports.jsxs("div",{className:"d-flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>b(R,!0),children:"Принять"}),jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>b(R,!1),children:"Отклонить"})]}),children:["✉️ Приглашение в комнату «",jsxRuntimeExports.jsx("strong",{children:(M=R.meta)==null?void 0:M.RoomTitle}),"» от ",(j=R.meta)==null?void 0:j.UserName,"."]});case"InvitedToContacts":return jsxRuntimeExports.jsxs(C,{extra:!R.isRead&&jsxRuntimeExports.jsxs("div",{className:"d-flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>P(R,!0),children:"Принять"}),jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>P(R,!1),children:"Отклонить"})]}),children:["👤 Запрос в контакты от ",jsxRuntimeExports.jsx("strong",{children:(L=R.meta)==null?void 0:L.UserName}),"."]});case"AcceptedContact":return jsxRuntimeExports.jsxs(C,{children:["✅ Ваш запрос принял ",jsxRuntimeExports.jsx("strong",{children:(O=R.meta)==null?void 0:O.UserName}),"."]});case"DeclinedContact":return jsxRuntimeExports.jsxs(C,{children:["🚫 Ваш запрос отклонил ",jsxRuntimeExports.jsx("strong",{children:(V=R.meta)==null?void 0:V.UserName}),"."]});default:return jsxRuntimeExports.jsx(C,{children:A(R)})}}return jsxRuntimeExports.jsxs("div",{className:"dropdown position-relative",ref:c,children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link position-relative",title:"Уведомления",onClick:()=>o(R=>!R),style:{color:s==="dark"?"#ccc":"#333"},children:[jsxRuntimeExports.jsx(FaBell,{size:20}),f>0&&jsxRuntimeExports.jsx("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.65rem"},children:f>99?"99+":f})]}),i&&jsxRuntimeExports.jsxs("div",{className:`dropdown-menu dropdown-menu-start shadow ${s==="dark"?"bg-dark text-light":""} show`,style:{minWidth:320,maxHeight:420,overflowY:"auto",transform:"translateX(-100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"dropdown-header d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:"Уведомления"}),jsxRuntimeExports.jsx("button",{onClick:x,className:"btn btn-sm btn-light",children:"Очистить"})]}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"px-3 py-2 text-muted",children:"Нет уведомлений"}),e.map(R=>jsxRuntimeExports.jsx("div",{className:`dropdown-item${R.isRead?"":" fw-bold"}`,children:_(R,g)},R.id))]})]})}var lottie$2={exports:{}},lottie$1=lottie$2.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof document<"u"&&typeof navigator<"u"&&function(s,t){module.exports=t()}(lottie$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(s){return document.createElement(s)}function extendPrototype(s,t){var e,n=s.length,i;for(e=0;e<n;e+=1){i=s[e].prototype;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t.prototype[o]=i[o])}}function getDescriptor(s,t){return Object.getOwnPropertyDescriptor(s,t)}function createProxyFunction(s){function t(){}return t.prototype=s,t}var audioControllerFactory=function(){function s(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return s.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].pause()},resume:function(){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].resume()},setRate:function(e){var n,i=this.audios.length;for(n=0;n<i;n+=1)this.audios[n].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,n=this.audios.length;for(e=0;e<n;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new s}}(),createTypedArray=function(){function s(e,n){var i=0,o=[],c;switch(e){case"int16":case"uint8c":c=1;break;default:c=1.1;break}for(i=0;i<n;i+=1)o.push(c);return o}function t(e,n){return e==="float32"?new Float32Array(n):e==="int16"?new Int16Array(n):e==="uint8c"?new Uint8ClampedArray(n):s(e,n)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?t:s}();function createSizedArray(s){return Array.apply(null,{length:s})}function _typeof$6(s){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(s)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var s=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],t,e=s.length;for(t=0;t<e;t+=1)BMMath[s[t]]=Math[s[t]]})(),BMMath.random=Math.random,BMMath.abs=function(s){var t=_typeof$6(s);if(t==="object"&&s.length){var e=createSizedArray(s.length),n,i=s.length;for(n=0;n<i;n+=1)e[n]=Math.abs(s[n]);return e}return Math.abs(s)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(s){s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.display="block",s.style.transformOrigin="0 0",s.style.webkitTransformOrigin="0 0",s.style.backfaceVisibility="visible",s.style.webkitBackfaceVisibility="visible",s.style.transformStyle="preserve-3d",s.style.webkitTransformStyle="preserve-3d",s.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(s,t,e,n){this.type=s,this.currentTime=t,this.totalTime=e,this.direction=n<0?-1:1}function BMCompleteEvent(s,t){this.type=s,this.direction=t<0?-1:1}function BMCompleteLoopEvent(s,t,e,n){this.type=s,this.currentLoop=e,this.totalLoops=t,this.direction=n<0?-1:1}function BMSegmentStartEvent(s,t,e){this.type=s,this.firstFrame=t,this.totalFrames=e}function BMDestroyEvent(s,t){this.type=s,this.target=t}function BMRenderFrameErrorEvent(s,t){this.type="renderFrameError",this.nativeError=s,this.currentTime=t}function BMConfigErrorEvent(s){this.type="configError",this.nativeError=s}var createElementID=function(){var s=0;return function(){return s+=1,idPrefix$1+"__lottie_element_"+s}}();function HSVtoRGB(s,t,e){var n,i,o,c,d,f,p,g;switch(c=Math.floor(s*6),d=s*6-c,f=e*(1-t),p=e*(1-d*t),g=e*(1-(1-d)*t),c%6){case 0:n=e,i=g,o=f;break;case 1:n=p,i=e,o=f;break;case 2:n=f,i=e,o=g;break;case 3:n=f,i=p,o=e;break;case 4:n=g,i=f,o=e;break;case 5:n=e,i=f,o=p;break}return[n,i,o]}function RGBtoHSV(s,t,e){var n=Math.max(s,t,e),i=Math.min(s,t,e),o=n-i,c,d=n===0?0:o/n,f=n/255;switch(n){case i:c=0;break;case s:c=t-e+o*(t<e?6:0),c/=6*o;break;case t:c=e-s+o*2,c/=6*o;break;case e:c=s-t+o*4,c/=6*o;break}return[c,d,f]}function addSaturationToRGB(s,t){var e=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return e[1]+=t,e[1]>1?e[1]=1:e[1]<=0&&(e[1]=0),HSVtoRGB(e[0],e[1],e[2])}function addBrightnessToRGB(s,t){var e=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return e[2]+=t,e[2]>1?e[2]=1:e[2]<0&&(e[2]=0),HSVtoRGB(e[0],e[1],e[2])}function addHueToRGB(s,t){var e=RGBtoHSV(s[0]*255,s[1]*255,s[2]*255);return e[0]+=t/360,e[0]>1?e[0]-=1:e[0]<0&&(e[0]+=1),HSVtoRGB(e[0],e[1],e[2])}var rgbToHex=function(){var s=[],t,e;for(t=0;t<256;t+=1)e=t.toString(16),s[t]=e.length===1?"0"+e:e;return function(n,i,o){return n<0&&(n=0),i<0&&(i=0),o<0&&(o=0),"#"+s[n]+s[i]+s[o]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t};function createNS(s){return document.createElementNS(svgNS,s)}function _typeof$5(s){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(s)}var dataManager=function(){var s=1,t=[],e,n,i={onmessage:function(){},postMessage:function(A){e({data:A})}},o={postMessage:function(A){i.onmessage({data:A})}};function c(x){if(window.Worker&&window.Blob&&getWebWorker()){var A=new Blob(["var _workerSelf = self; self.onmessage = ",x.toString()],{type:"text/javascript"}),_=URL.createObjectURL(A);return new Worker(_)}return e=x,i}function d(){n||(n=c(function(A){function _(){function P(J,D){var U,N,I=J.length,B,z,K,st;for(N=0;N<I;N+=1)if(U=J[N],"ks"in U&&!U.completed){if(U.completed=!0,U.hasMask){var ht=U.masksProperties;for(z=ht.length,B=0;B<z;B+=1)if(ht[B].pt.k.i)j(ht[B].pt.k);else for(st=ht[B].pt.k.length,K=0;K<st;K+=1)ht[B].pt.k[K].s&&j(ht[B].pt.k[K].s[0]),ht[B].pt.k[K].e&&j(ht[B].pt.k[K].e[0])}U.ty===0?(U.layers=C(U.refId,D),P(U.layers,D)):U.ty===4?M(U.shapes):U.ty===5&&ct(U)}}function E(J,D){if(J){var U=0,N=J.length;for(U=0;U<N;U+=1)J[U].t===1&&(J[U].data.layers=C(J[U].data.refId,D),P(J[U].data.layers,D))}}function T(J,D){for(var U=0,N=D.length;U<N;){if(D[U].id===J)return D[U];U+=1}return null}function C(J,D){var U=T(J,D);return U?U.layers.__used?JSON.parse(JSON.stringify(U.layers)):(U.layers.__used=!0,U.layers):null}function M(J){var D,U=J.length,N,I;for(D=U-1;D>=0;D-=1)if(J[D].ty==="sh")if(J[D].ks.k.i)j(J[D].ks.k);else for(I=J[D].ks.k.length,N=0;N<I;N+=1)J[D].ks.k[N].s&&j(J[D].ks.k[N].s[0]),J[D].ks.k[N].e&&j(J[D].ks.k[N].e[0]);else J[D].ty==="gr"&&M(J[D].it)}function j(J){var D,U=J.i.length;for(D=0;D<U;D+=1)J.i[D][0]+=J.v[D][0],J.i[D][1]+=J.v[D][1],J.o[D][0]+=J.v[D][0],J.o[D][1]+=J.v[D][1]}function L(J,D){var U=D?D.split("."):[100,100,100];return J[0]>U[0]?!0:U[0]>J[0]?!1:J[1]>U[1]?!0:U[1]>J[1]?!1:J[2]>U[2]?!0:U[2]>J[2]?!1:null}var O=function(){var J=[4,4,14];function D(N){var I=N.t.d;N.t.d={k:[{s:I,t:0}]}}function U(N){var I,B=N.length;for(I=0;I<B;I+=1)N[I].ty===5&&D(N[I])}return function(N){if(L(J,N.v)&&(U(N.layers),N.assets)){var I,B=N.assets.length;for(I=0;I<B;I+=1)N.assets[I].layers&&U(N.assets[I].layers)}}}(),V=function(){var J=[4,7,99];return function(D){if(D.chars&&!L(J,D.v)){var U,N=D.chars.length;for(U=0;U<N;U+=1){var I=D.chars[U];I.data&&I.data.shapes&&(M(I.data.shapes),I.data.ip=0,I.data.op=99999,I.data.st=0,I.data.sr=1,I.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},D.chars[U].t||(I.data.shapes.push({ty:"no"}),I.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),X=function(){var J=[5,7,15];function D(N){var I=N.t.p;typeof I.a=="number"&&(I.a={a:0,k:I.a}),typeof I.p=="number"&&(I.p={a:0,k:I.p}),typeof I.r=="number"&&(I.r={a:0,k:I.r})}function U(N){var I,B=N.length;for(I=0;I<B;I+=1)N[I].ty===5&&D(N[I])}return function(N){if(L(J,N.v)&&(U(N.layers),N.assets)){var I,B=N.assets.length;for(I=0;I<B;I+=1)N.assets[I].layers&&U(N.assets[I].layers)}}}(),tt=function(){var J=[4,1,9];function D(N){var I,B=N.length,z,K;for(I=0;I<B;I+=1)if(N[I].ty==="gr")D(N[I].it);else if(N[I].ty==="fl"||N[I].ty==="st")if(N[I].c.k&&N[I].c.k[0].i)for(K=N[I].c.k.length,z=0;z<K;z+=1)N[I].c.k[z].s&&(N[I].c.k[z].s[0]/=255,N[I].c.k[z].s[1]/=255,N[I].c.k[z].s[2]/=255,N[I].c.k[z].s[3]/=255),N[I].c.k[z].e&&(N[I].c.k[z].e[0]/=255,N[I].c.k[z].e[1]/=255,N[I].c.k[z].e[2]/=255,N[I].c.k[z].e[3]/=255);else N[I].c.k[0]/=255,N[I].c.k[1]/=255,N[I].c.k[2]/=255,N[I].c.k[3]/=255}function U(N){var I,B=N.length;for(I=0;I<B;I+=1)N[I].ty===4&&D(N[I].shapes)}return function(N){if(L(J,N.v)&&(U(N.layers),N.assets)){var I,B=N.assets.length;for(I=0;I<B;I+=1)N.assets[I].layers&&U(N.assets[I].layers)}}}(),Y=function(){var J=[4,4,18];function D(N){var I,B=N.length,z,K;for(I=B-1;I>=0;I-=1)if(N[I].ty==="sh")if(N[I].ks.k.i)N[I].ks.k.c=N[I].closed;else for(K=N[I].ks.k.length,z=0;z<K;z+=1)N[I].ks.k[z].s&&(N[I].ks.k[z].s[0].c=N[I].closed),N[I].ks.k[z].e&&(N[I].ks.k[z].e[0].c=N[I].closed);else N[I].ty==="gr"&&D(N[I].it)}function U(N){var I,B,z=N.length,K,st,ht,xt;for(B=0;B<z;B+=1){if(I=N[B],I.hasMask){var mt=I.masksProperties;for(st=mt.length,K=0;K<st;K+=1)if(mt[K].pt.k.i)mt[K].pt.k.c=mt[K].cl;else for(xt=mt[K].pt.k.length,ht=0;ht<xt;ht+=1)mt[K].pt.k[ht].s&&(mt[K].pt.k[ht].s[0].c=mt[K].cl),mt[K].pt.k[ht].e&&(mt[K].pt.k[ht].e[0].c=mt[K].cl)}I.ty===4&&D(I.shapes)}}return function(N){if(L(J,N.v)&&(U(N.layers),N.assets)){var I,B=N.assets.length;for(I=0;I<B;I+=1)N.assets[I].layers&&U(N.assets[I].layers)}}}();function Q(J){J.__complete||(tt(J),O(J),V(J),X(J),Y(J),P(J.layers,J.assets),E(J.chars,J.assets),J.__complete=!0)}function ct(J){J.t.a.length===0&&"m"in J.t.p}var nt={};return nt.completeData=Q,nt.checkColors=tt,nt.checkChars=V,nt.checkPathProperties=X,nt.checkShapes=Y,nt.completeLayers=P,nt}if(o.dataManager||(o.dataManager=_()),o.assetLoader||(o.assetLoader=function(){function P(T){var C=T.getResponseHeader("content-type");return C&&T.responseType==="json"&&C.indexOf("json")!==-1||T.response&&_typeof$5(T.response)==="object"?T.response:T.response&&typeof T.response=="string"?JSON.parse(T.response):T.responseText?JSON.parse(T.responseText):null}function E(T,C,M,j){var L,O=new XMLHttpRequest;try{O.responseType="json"}catch{}O.onreadystatechange=function(){if(O.readyState===4)if(O.status===200)L=P(O),M(L);else try{L=P(O),M(L)}catch(V){j&&j(V)}};try{O.open(["G","E","T"].join(""),T,!0)}catch{O.open(["G","E","T"].join(""),C+"/"+T,!0)}O.send()}return{load:E}}()),A.data.type==="loadAnimation")o.assetLoader.load(A.data.path,A.data.fullPath,function(P){o.dataManager.completeData(P),o.postMessage({id:A.data.id,payload:P,status:"success"})},function(){o.postMessage({id:A.data.id,status:"error"})});else if(A.data.type==="complete"){var R=A.data.animation;o.dataManager.completeData(R),o.postMessage({id:A.data.id,payload:R,status:"success"})}else A.data.type==="loadData"&&o.assetLoader.load(A.data.path,A.data.fullPath,function(P){o.postMessage({id:A.data.id,payload:P,status:"success"})},function(){o.postMessage({id:A.data.id,status:"error"})})}),n.onmessage=function(x){var A=x.data,_=A.id,R=t[_];t[_]=null,A.status==="success"?R.onComplete(A.payload):R.onError&&R.onError()})}function f(x,A){s+=1;var _="processId_"+s;return t[_]={onComplete:x,onError:A},_}function p(x,A,_){d();var R=f(A,_);n.postMessage({type:"loadAnimation",path:x,fullPath:window.location.origin+window.location.pathname,id:R})}function g(x,A,_){d();var R=f(A,_);n.postMessage({type:"loadData",path:x,fullPath:window.location.origin+window.location.pathname,id:R})}function b(x,A,_){d();var R=f(A,_);n.postMessage({type:"complete",animation:x,id:R})}return{loadAnimation:p,loadData:g,completeAnimation:b}}(),ImagePreloader=function(){var s=function(){var E=createTag("canvas");E.width=1,E.height=1;var T=E.getContext("2d");return T.fillStyle="rgba(0,0,0,0)",T.fillRect(0,0,1,1),E}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function e(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(E,T,C){var M="";if(E.e)M=E.p;else if(T){var j=E.p;j.indexOf("images/")!==-1&&(j=j.split("/")[1]),M=T+j}else M=C,M+=E.u?E.u:"",M+=E.p;return M}function i(E){var T=0,C=setInterval((function(){var M=E.getBBox();(M.width||T>500)&&(this._imageLoaded(),clearInterval(C)),T+=1}).bind(this),50)}function o(E){var T=n(E,this.assetsPath,this.path),C=createNS("image");isSafari?this.testImageLoaded(C):C.addEventListener("load",this._imageLoaded,!1),C.addEventListener("error",(function(){M.img=s,this._imageLoaded()}).bind(this),!1),C.setAttributeNS("http://www.w3.org/1999/xlink","href",T),this._elementHelper.append?this._elementHelper.append(C):this._elementHelper.appendChild(C);var M={img:C,assetData:E};return M}function c(E){var T=n(E,this.assetsPath,this.path),C=createTag("img");C.crossOrigin="anonymous",C.addEventListener("load",this._imageLoaded,!1),C.addEventListener("error",(function(){M.img=s,this._imageLoaded()}).bind(this),!1),C.src=T;var M={img:C,assetData:E};return M}function d(E){var T={assetData:E},C=n(E,this.assetsPath,this.path);return dataManager.loadData(C,(function(M){T.img=M,this._footageLoaded()}).bind(this),(function(){T.img={},this._footageLoaded()}).bind(this)),T}function f(E,T){this.imagesLoadedCb=T;var C,M=E.length;for(C=0;C<M;C+=1)E[C].layers||(!E[C].t||E[C].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(E[C]))):E[C].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(E[C]))))}function p(E){this.path=E||""}function g(E){this.assetsPath=E||""}function b(E){for(var T=0,C=this.images.length;T<C;){if(this.images[T].assetData===E)return this.images[T].img;T+=1}return null}function x(){this.imagesLoadedCb=null,this.images.length=0}function A(){return this.totalImages===this.loadedAssets}function _(){return this.totalFootages===this.loadedFootagesCount}function R(E,T){E==="svg"?(this._elementHelper=T,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function P(){this._imageLoaded=t.bind(this),this._footageLoaded=e.bind(this),this.testImageLoaded=i.bind(this),this.createFootageData=d.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return P.prototype={loadAssets:f,setAssetsPath:g,setPath:p,loadedImages:A,loadedFootages:_,destroy:x,getAsset:b,createImgData:c,createImageData:o,imageLoaded:t,footageLoaded:e,setCacheType:R},P}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var n=this._cbs[t],i=0;i<n.length;i+=1)n[i](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),(function(){this.removeEventListener(t,e)}).bind(this)},removeEventListener:function(t,e){if(!e)this._cbs[t]=null;else if(this._cbs[t]){for(var n=0,i=this._cbs[t].length;n<i;)this._cbs[t][n]===e&&(this._cbs[t].splice(n,1),n-=1,i-=1),n+=1;this._cbs[t].length||(this._cbs[t]=null)}}};var markerParser=function(){function s(t){for(var e=t.split(`\r
`),n={},i,o=0,c=0;c<e.length;c+=1)i=e[c].split(":"),i.length===2&&(n[i[0]]=i[1].trim(),o+=1);if(o===0)throw new Error;return n}return function(t){for(var e=[],n=0;n<t.length;n+=1){var i=t[n],o={time:i.tm,duration:i.dr};try{o.payload=JSON.parse(t[n].cm)}catch{try{o.payload=s(t[n].cm)}catch{o.payload={name:t[n].cm}}}e.push(o)}return e}}(),ProjectInterface=function(){function s(t){this.compositions.push(t)}return function(){function t(e){for(var n=0,i=this.compositions.length;n<i;){if(this.compositions[n].data&&this.compositions[n].data.nm===e)return this.compositions[n].prepareFrame&&this.compositions[n].data.xt&&this.compositions[n].prepareFrame(this.currentFrame),this.compositions[n].compInterface;n+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=s,t}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(s){return renderers[s]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var s in renderers)if(renderers[s])return s;return""}function _typeof$4(s){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(s)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(s){(s.wrapper||s.container)&&(this.wrapper=s.wrapper||s.container);var t="svg";s.animType?t=s.animType:s.renderer&&(t=s.renderer);var e=getRenderer(t);this.renderer=new e(this,s.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,s.loop===""||s.loop===null||s.loop===void 0||s.loop===!0?this.loop=!0:s.loop===!1?this.loop=!1:this.loop=parseInt(s.loop,10),this.autoplay="autoplay"in s?s.autoplay:!0,this.name=s.name?s.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(s,"autoloadSegments")?s.autoloadSegments:!0,this.assetsPath=s.assetsPath,this.initialSegment=s.initialSegment,s.audioFactory&&this.audioController.setAudioFactory(s.audioFactory),s.animationData?this.setupAnimation(s.animationData):s.path&&(s.path.lastIndexOf("\\")!==-1?this.path=s.path.substr(0,s.path.lastIndexOf("\\")+1):this.path=s.path.substr(0,s.path.lastIndexOf("/")+1),this.fileName=s.path.substr(s.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(s.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(s){dataManager.completeAnimation(s,this.configAnimation)},AnimationItem.prototype.setData=function(s,t){t&&_typeof$4(t)!=="object"&&(t=JSON.parse(t));var e={wrapper:s,animationData:t},n=s.attributes;e.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",e.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var i=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";i==="false"?e.loop=!1:i==="true"?e.loop=!0:i!==""&&(e.loop=parseInt(i,10));var o=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:n.getNamedItem("bm-autoplay")?n.getNamedItem("bm-autoplay").value:!0;e.autoplay=o!=="false",e.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var c=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";c==="false"&&(e.prerender=!1),e.path?this.setParams(e):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(s){s.op>this.animationData.op&&(this.animationData.op=s.op,this.totalFrames=Math.floor(s.op-this.animationData.ip));var t=this.animationData.layers,e,n=t.length,i=s.layers,o,c=i.length;for(o=0;o<c;o+=1)for(e=0;e<n;){if(t[e].id===i[o].id){t[e]=i[o];break}e+=1}if((s.chars||s.fonts)&&(this.renderer.globalData.fontManager.addChars(s.chars),this.renderer.globalData.fontManager.addFonts(s.fonts,this.renderer.globalData.defs)),s.assets)for(n=s.assets.length,e=0;e<n;e+=1)this.animationData.assets.push(s.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(s){this.animationData=s;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var s=this.animationData.segments;if(!s||s.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var t=s.shift();this.timeCompleted=t.time*this.frameRate;var e=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(e,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var s=this.animationData.segments;s||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(s){if(this.renderer)try{this.animationData=s,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(s),s.assets||(s.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(s.assets),this.markers=markerParser(s.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var s=getExpressionsPlugin();s&&s.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(s,t){var e=typeof s=="number"?s:void 0,n=typeof t=="number"?t:void 0;this.renderer.updateContainerSize(e,n)},AnimationItem.prototype.setSubframe=function(s){this.isSubframeEnabled=!!s},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(s){this.triggerRenderFrameError(s)}},AnimationItem.prototype.play=function(s){s&&this.name!==s||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(s){s&&this.name!==s||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(s){s&&this.name!==s||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(s){s&&this.name!==s||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(s){for(var t,e=0;e<this.markers.length;e+=1)if(t=this.markers[e],t.payload&&t.payload.name===s)return t;return null},AnimationItem.prototype.goToAndStop=function(s,t,e){if(!(e&&this.name!==e)){var n=Number(s);if(isNaN(n)){var i=this.getMarkerData(s);i&&this.goToAndStop(i.time,!0)}else t?this.setCurrentRawFrameValue(s):this.setCurrentRawFrameValue(s*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(s,t,e){if(!(e&&this.name!==e)){var n=Number(s);if(isNaN(n)){var i=this.getMarkerData(s);i&&(i.duration?this.playSegments([i.time,i.time+i.duration],!0):this.goToAndStop(i.time,!0))}else this.goToAndStop(n,t,e);this.play()}},AnimationItem.prototype.advanceTime=function(s){if(!(this.isPaused===!0||this.isLoaded===!1)){var t=this.currentRawFrame+s*this.frameModifier,e=!1;t>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(e=!0,t=this.totalFrames-1):t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):t<0?this.checkSegments(t%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(e=!0,t=0)):this.setCurrentRawFrameValue(t),e&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(s,t){this.playCount=0,s[1]<s[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=s[0]-s[1],this.timeCompleted=this.totalFrames,this.firstFrame=s[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):s[1]>s[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=s[1]-s[0],this.timeCompleted=this.totalFrames,this.firstFrame=s[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(s,t){var e=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<s?e=s:this.currentRawFrame+this.firstFrame>t&&(e=t-s)),this.firstFrame=s,this.totalFrames=t-s,this.timeCompleted=this.totalFrames,e!==-1&&this.goToAndStop(e,!0)},AnimationItem.prototype.playSegments=function(s,t){if(t&&(this.segments.length=0),_typeof$4(s[0])==="object"){var e,n=s.length;for(e=0;e<n;e+=1)this.segments.push(s[e])}else this.segments.push(s);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(s){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),s&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(s){return this.segments.length?(this.adjustSegment(this.segments.shift(),s),!0):!1},AnimationItem.prototype.destroy=function(s){s&&this.name!==s||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(s){this.currentRawFrame=s,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(s){this.playSpeed=s,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(s){this.playDirection=s<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(s){this.loop=s},AnimationItem.prototype.setVolume=function(s,t){t&&this.name!==t||this.audioController.setVolume(s)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(s){s&&this.name!==s||this.audioController.mute()},AnimationItem.prototype.unmute=function(s){s&&this.name!==s||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(s){var t="";if(s.e)t=s.p;else if(this.assetsPath){var e=s.p;e.indexOf("images/")!==-1&&(e=e.split("/")[1]),t=this.assetsPath+e}else t=this.path,t+=s.u?s.u:"",t+=s.p;return t},AnimationItem.prototype.getAssetData=function(s){for(var t=0,e=this.assets.length;t<e;){if(s===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(s){return s?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(s,t,e){try{var n=this.renderer.getElementByPath(s);n.updateDocumentData(t,e)}catch{}},AnimationItem.prototype.trigger=function(s){if(this._cbs&&this._cbs[s])switch(s){case"enterFrame":this.triggerEvent(s,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(s,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(s,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(s,new BMCompleteEvent(s,this.frameMult));break;case"segmentStart":this.triggerEvent(s,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(s,new BMDestroyEvent(s,this));break;default:this.triggerEvent(s)}s==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(s,this.currentFrame,this.totalFrames,this.frameMult)),s==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(s,this.loop,this.playCount,this.frameMult)),s==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(s,this.frameMult)),s==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(s,this.firstFrame,this.totalFrames)),s==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(s,this))},AnimationItem.prototype.triggerRenderFrameError=function(s){var t=new BMRenderFrameErrorEvent(s,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(s){var t=new BMConfigErrorEvent(s,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var s={},t=[],e=0,n=0,i=0,o=!0,c=!1;function d(D){for(var U=0,N=D.target;U<n;)t[U].animation===N&&(t.splice(U,1),U-=1,n-=1,N.isPaused||b()),U+=1}function f(D,U){if(!D)return null;for(var N=0;N<n;){if(t[N].elem===D&&t[N].elem!==null)return t[N].animation;N+=1}var I=new AnimationItem;return x(I,D),I.setData(D,U),I}function p(){var D,U=t.length,N=[];for(D=0;D<U;D+=1)N.push(t[D].animation);return N}function g(){i+=1,tt()}function b(){i-=1}function x(D,U){D.addEventListener("destroy",d),D.addEventListener("_active",g),D.addEventListener("_idle",b),t.push({elem:U,animation:D}),n+=1}function A(D){var U=new AnimationItem;return x(U,null),U.setParams(D),U}function _(D,U){var N;for(N=0;N<n;N+=1)t[N].animation.setSpeed(D,U)}function R(D,U){var N;for(N=0;N<n;N+=1)t[N].animation.setDirection(D,U)}function P(D){var U;for(U=0;U<n;U+=1)t[U].animation.play(D)}function E(D){var U=D-e,N;for(N=0;N<n;N+=1)t[N].animation.advanceTime(U);e=D,i&&!c?window.requestAnimationFrame(E):o=!0}function T(D){e=D,window.requestAnimationFrame(E)}function C(D){var U;for(U=0;U<n;U+=1)t[U].animation.pause(D)}function M(D,U,N){var I;for(I=0;I<n;I+=1)t[I].animation.goToAndStop(D,U,N)}function j(D){var U;for(U=0;U<n;U+=1)t[U].animation.stop(D)}function L(D){var U;for(U=0;U<n;U+=1)t[U].animation.togglePause(D)}function O(D){var U;for(U=n-1;U>=0;U-=1)t[U].animation.destroy(D)}function V(D,U,N){var I=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),B,z=I.length;for(B=0;B<z;B+=1)N&&I[B].setAttribute("data-bm-type",N),f(I[B],D);if(U&&z===0){N||(N="svg");var K=document.getElementsByTagName("body")[0];K.innerText="";var st=createTag("div");st.style.width="100%",st.style.height="100%",st.setAttribute("data-bm-type",N),K.appendChild(st),f(st,D)}}function X(){var D;for(D=0;D<n;D+=1)t[D].animation.resize()}function tt(){!c&&i&&o&&(window.requestAnimationFrame(T),o=!1)}function Y(){c=!0}function Q(){c=!1,tt()}function ct(D,U){var N;for(N=0;N<n;N+=1)t[N].animation.setVolume(D,U)}function nt(D){var U;for(U=0;U<n;U+=1)t[U].animation.mute(D)}function J(D){var U;for(U=0;U<n;U+=1)t[U].animation.unmute(D)}return s.registerAnimation=f,s.loadAnimation=A,s.setSpeed=_,s.setDirection=R,s.play=P,s.pause=C,s.stop=j,s.togglePause=L,s.searchAnimations=V,s.resize=X,s.goToAndStop=M,s.destroy=O,s.freeze=Y,s.unfreeze=Q,s.setVolume=ct,s.mute=nt,s.unmute=J,s.getRegisteredAnimations=p,s}(),BezierFactory=function(){var s={};s.getBezierEasing=e;var t={};function e(T,C,M,j,L){var O=L||("bez_"+T+"_"+C+"_"+M+"_"+j).replace(/\./g,"p");if(t[O])return t[O];var V=new E([T,C,M,j]);return t[O]=V,V}var n=4,i=.001,o=1e-7,c=10,d=11,f=1/(d-1),p=typeof Float32Array=="function";function g(T,C){return 1-3*C+3*T}function b(T,C){return 3*C-6*T}function x(T){return 3*T}function A(T,C,M){return((g(C,M)*T+b(C,M))*T+x(C))*T}function _(T,C,M){return 3*g(C,M)*T*T+2*b(C,M)*T+x(C)}function R(T,C,M,j,L){var O,V,X=0;do V=C+(M-C)/2,O=A(V,j,L)-T,O>0?M=V:C=V;while(Math.abs(O)>o&&++X<c);return V}function P(T,C,M,j){for(var L=0;L<n;++L){var O=_(C,M,j);if(O===0)return C;var V=A(C,M,j)-T;C-=V/O}return C}function E(T){this._p=T,this._mSampleValues=p?new Float32Array(d):new Array(d),this._precomputed=!1,this.get=this.get.bind(this)}return E.prototype={get:function(C){var M=this._p[0],j=this._p[1],L=this._p[2],O=this._p[3];return this._precomputed||this._precompute(),M===j&&L===O?C:C===0?0:C===1?1:A(this._getTForX(C),j,O)},_precompute:function(){var C=this._p[0],M=this._p[1],j=this._p[2],L=this._p[3];this._precomputed=!0,(C!==M||j!==L)&&this._calcSampleValues()},_calcSampleValues:function(){for(var C=this._p[0],M=this._p[2],j=0;j<d;++j)this._mSampleValues[j]=A(j*f,C,M)},_getTForX:function(C){for(var M=this._p[0],j=this._p[2],L=this._mSampleValues,O=0,V=1,X=d-1;V!==X&&L[V]<=C;++V)O+=f;--V;var tt=(C-L[V])/(L[V+1]-L[V]),Y=O+tt*f,Q=_(Y,M,j);return Q>=i?P(C,Y,M,j):Q===0?Y:R(C,O,O+f,M,j)}},s}(),pooling=function(){function s(t){return t.concat(createSizedArray(t.length))}return{double:s}}(),poolFactory=function(){return function(s,t,e){var n=0,i=s,o=createSizedArray(i),c={newElement:d,release:f};function d(){var p;return n?(n-=1,p=o[n]):p=t(),p}function f(p){n===i&&(o=pooling.double(o),i*=2),e&&e(p),o[n]=p,n+=1}return c}}(),bezierLengthPool=function(){function s(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,s)}(),segmentsLengthPool=function(){function s(){return{lengths:[],totalLength:0}}function t(e){var n,i=e.lengths.length;for(n=0;n<i;n+=1)bezierLengthPool.release(e.lengths[n]);e.lengths.length=0}return poolFactory(8,s,t)}();function bezFunction(){var s=Math;function t(x,A,_,R,P,E){var T=x*R+A*P+_*E-P*R-E*x-_*A;return T>-.001&&T<.001}function e(x,A,_,R,P,E,T,C,M){if(_===0&&E===0&&M===0)return t(x,A,R,P,T,C);var j=s.sqrt(s.pow(R-x,2)+s.pow(P-A,2)+s.pow(E-_,2)),L=s.sqrt(s.pow(T-x,2)+s.pow(C-A,2)+s.pow(M-_,2)),O=s.sqrt(s.pow(T-R,2)+s.pow(C-P,2)+s.pow(M-E,2)),V;return j>L?j>O?V=j-L-O:V=O-L-j:O>L?V=O-L-j:V=L-j-O,V>-1e-4&&V<1e-4}var n=function(){return function(x,A,_,R){var P=getDefaultCurveSegments(),E,T,C,M,j,L=0,O,V=[],X=[],tt=bezierLengthPool.newElement();for(C=_.length,E=0;E<P;E+=1){for(j=E/(P-1),O=0,T=0;T<C;T+=1)M=bmPow(1-j,3)*x[T]+3*bmPow(1-j,2)*j*_[T]+3*(1-j)*bmPow(j,2)*R[T]+bmPow(j,3)*A[T],V[T]=M,X[T]!==null&&(O+=bmPow(V[T]-X[T],2)),X[T]=V[T];O&&(O=bmSqrt(O),L+=O),tt.percents[E]=j,tt.lengths[E]=L}return tt.addedLength=L,tt}}();function i(x){var A=segmentsLengthPool.newElement(),_=x.c,R=x.v,P=x.o,E=x.i,T,C=x._length,M=A.lengths,j=0;for(T=0;T<C-1;T+=1)M[T]=n(R[T],R[T+1],P[T],E[T+1]),j+=M[T].addedLength;return _&&C&&(M[T]=n(R[T],R[0],P[T],E[0]),j+=M[T].addedLength),A.totalLength=j,A}function o(x){this.segmentLength=0,this.points=new Array(x)}function c(x,A){this.partialLength=x,this.point=A}var d=function(){var x={};return function(A,_,R,P){var E=(A[0]+"_"+A[1]+"_"+_[0]+"_"+_[1]+"_"+R[0]+"_"+R[1]+"_"+P[0]+"_"+P[1]).replace(/\./g,"p");if(!x[E]){var T=getDefaultCurveSegments(),C,M,j,L,O,V=0,X,tt,Y=null;A.length===2&&(A[0]!==_[0]||A[1]!==_[1])&&t(A[0],A[1],_[0],_[1],A[0]+R[0],A[1]+R[1])&&t(A[0],A[1],_[0],_[1],_[0]+P[0],_[1]+P[1])&&(T=2);var Q=new o(T);for(j=R.length,C=0;C<T;C+=1){for(tt=createSizedArray(j),O=C/(T-1),X=0,M=0;M<j;M+=1)L=bmPow(1-O,3)*A[M]+3*bmPow(1-O,2)*O*(A[M]+R[M])+3*(1-O)*bmPow(O,2)*(_[M]+P[M])+bmPow(O,3)*_[M],tt[M]=L,Y!==null&&(X+=bmPow(tt[M]-Y[M],2));X=bmSqrt(X),V+=X,Q.points[C]=new c(X,tt),Y=tt}Q.segmentLength=V,x[E]=Q}return x[E]}}();function f(x,A){var _=A.percents,R=A.lengths,P=_.length,E=bmFloor((P-1)*x),T=x*A.addedLength,C=0;if(E===P-1||E===0||T===R[E])return _[E];for(var M=R[E]>T?-1:1,j=!0;j;)if(R[E]<=T&&R[E+1]>T?(C=(T-R[E])/(R[E+1]-R[E]),j=!1):E+=M,E<0||E>=P-1){if(E===P-1)return _[E];j=!1}return _[E]+(_[E+1]-_[E])*C}function p(x,A,_,R,P,E){var T=f(P,E),C=1-T,M=s.round((C*C*C*x[0]+(T*C*C+C*T*C+C*C*T)*_[0]+(T*T*C+C*T*T+T*C*T)*R[0]+T*T*T*A[0])*1e3)/1e3,j=s.round((C*C*C*x[1]+(T*C*C+C*T*C+C*C*T)*_[1]+(T*T*C+C*T*T+T*C*T)*R[1]+T*T*T*A[1])*1e3)/1e3;return[M,j]}var g=createTypedArray("float32",8);function b(x,A,_,R,P,E,T){P<0?P=0:P>1&&(P=1);var C=f(P,T);E=E>1?1:E;var M=f(E,T),j,L=x.length,O=1-C,V=1-M,X=O*O*O,tt=C*O*O*3,Y=C*C*O*3,Q=C*C*C,ct=O*O*V,nt=C*O*V+O*C*V+O*O*M,J=C*C*V+O*C*M+C*O*M,D=C*C*M,U=O*V*V,N=C*V*V+O*M*V+O*V*M,I=C*M*V+O*M*M+C*V*M,B=C*M*M,z=V*V*V,K=M*V*V+V*M*V+V*V*M,st=M*M*V+V*M*M+M*V*M,ht=M*M*M;for(j=0;j<L;j+=1)g[j*4]=s.round((X*x[j]+tt*_[j]+Y*R[j]+Q*A[j])*1e3)/1e3,g[j*4+1]=s.round((ct*x[j]+nt*_[j]+J*R[j]+D*A[j])*1e3)/1e3,g[j*4+2]=s.round((U*x[j]+N*_[j]+I*R[j]+B*A[j])*1e3)/1e3,g[j*4+3]=s.round((z*x[j]+K*_[j]+st*R[j]+ht*A[j])*1e3)/1e3;return g}return{getSegmentsLength:i,getNewSegment:b,getPointInSegment:p,buildBezierData:d,pointOnLine2D:t,pointOnLine3D:e}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(s,t){var e=this.offsetTime,n;this.propType==="multidimensional"&&(n=createTypedArray("float32",this.pv.length));for(var i=t.lastIndex,o=i,c=this.keyframes.length-1,d=!0,f,p,g;d;){if(f=this.keyframes[o],p=this.keyframes[o+1],o===c-1&&s>=p.t-e){f.h&&(f=p),i=0;break}if(p.t-e>s){i=o;break}o<c-1?o+=1:(i=0,d=!1)}g=this.keyframesMetadata[o]||{};var b,x,A,_,R,P,E=p.t-e,T=f.t-e,C;if(f.to){g.bezierData||(g.bezierData=bez.buildBezierData(f.s,p.s||f.e,f.to,f.ti));var M=g.bezierData;if(s>=E||s<T){var j=s>=E?M.points.length-1:0;for(x=M.points[j].point.length,b=0;b<x;b+=1)n[b]=M.points[j].point[b]}else{g.__fnct?P=g.__fnct:(P=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y,f.n).get,g.__fnct=P),A=P((s-T)/(E-T));var L=M.segmentLength*A,O,V=t.lastFrame<s&&t._lastKeyframeIndex===o?t._lastAddedLength:0;for(R=t.lastFrame<s&&t._lastKeyframeIndex===o?t._lastPoint:0,d=!0,_=M.points.length;d;){if(V+=M.points[R].partialLength,L===0||A===0||R===M.points.length-1){for(x=M.points[R].point.length,b=0;b<x;b+=1)n[b]=M.points[R].point[b];break}else if(L>=V&&L<V+M.points[R+1].partialLength){for(O=(L-V)/M.points[R+1].partialLength,x=M.points[R].point.length,b=0;b<x;b+=1)n[b]=M.points[R].point[b]+(M.points[R+1].point[b]-M.points[R].point[b])*O;break}R<_-1?R+=1:d=!1}t._lastPoint=R,t._lastAddedLength=V-M.points[R].partialLength,t._lastKeyframeIndex=o}}else{var X,tt,Y,Q,ct;if(c=f.s.length,C=p.s||f.e,this.sh&&f.h!==1)if(s>=E)n[0]=C[0],n[1]=C[1],n[2]=C[2];else if(s<=T)n[0]=f.s[0],n[1]=f.s[1],n[2]=f.s[2];else{var nt=createQuaternion(f.s),J=createQuaternion(C),D=(s-T)/(E-T);quaternionToEuler(n,slerp(nt,J,D))}else for(o=0;o<c;o+=1)f.h!==1&&(s>=E?A=1:s<T?A=0:(f.o.x.constructor===Array?(g.__fnct||(g.__fnct=[]),g.__fnct[o]?P=g.__fnct[o]:(X=f.o.x[o]===void 0?f.o.x[0]:f.o.x[o],tt=f.o.y[o]===void 0?f.o.y[0]:f.o.y[o],Y=f.i.x[o]===void 0?f.i.x[0]:f.i.x[o],Q=f.i.y[o]===void 0?f.i.y[0]:f.i.y[o],P=BezierFactory.getBezierEasing(X,tt,Y,Q).get,g.__fnct[o]=P)):g.__fnct?P=g.__fnct:(X=f.o.x,tt=f.o.y,Y=f.i.x,Q=f.i.y,P=BezierFactory.getBezierEasing(X,tt,Y,Q).get,f.keyframeMetadata=P),A=P((s-T)/(E-T)))),C=p.s||f.e,ct=f.h===1?f.s[o]:f.s[o]+(C[o]-f.s[o])*A,this.propType==="multidimensional"?n[o]=ct:n=ct}return t.lastIndex=i,n}function slerp(s,t,e){var n=[],i=s[0],o=s[1],c=s[2],d=s[3],f=t[0],p=t[1],g=t[2],b=t[3],x,A,_,R,P;return A=i*f+o*p+c*g+d*b,A<0&&(A=-A,f=-f,p=-p,g=-g,b=-b),1-A>1e-6?(x=Math.acos(A),_=Math.sin(x),R=Math.sin((1-e)*x)/_,P=Math.sin(e*x)/_):(R=1-e,P=e),n[0]=R*i+P*f,n[1]=R*o+P*p,n[2]=R*c+P*g,n[3]=R*d+P*b,n}function quaternionToEuler(s,t){var e=t[0],n=t[1],i=t[2],o=t[3],c=Math.atan2(2*n*o-2*e*i,1-2*n*n-2*i*i),d=Math.asin(2*e*n+2*i*o),f=Math.atan2(2*e*o-2*n*i,1-2*e*e-2*i*i);s[0]=c/degToRads,s[1]=d/degToRads,s[2]=f/degToRads}function createQuaternion(s){var t=s[0]*degToRads,e=s[1]*degToRads,n=s[2]*degToRads,i=Math.cos(t/2),o=Math.cos(e/2),c=Math.cos(n/2),d=Math.sin(t/2),f=Math.sin(e/2),p=Math.sin(n/2),g=i*o*c-d*f*p,b=d*f*c+i*o*p,x=d*o*c+i*f*p,A=i*f*c-d*o*p;return[b,x,A,g]}function getValueAtCurrentTime(){var s=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,e=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(s===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=e&&s>=e||this._caching.lastFrame<t&&s<t))){this._caching.lastFrame>=s&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var n=this.interpolateValue(s,this._caching);this.pv=n}return this._caching.lastFrame=s,this.pv}function setVValue(s){var t;if(this.propType==="unidimensional")t=s*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var e=0,n=this.v.length;e<n;)t=s[e]*this.mult,mathAbs(this.v[e]-t)>1e-5&&(this.v[e]=t,this._mdf=!0),e+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var s,t=this.effectsSequence.length,e=this.kf?this.pv:this.data.k;for(s=0;s<t;s+=1)e=this.effectsSequence[s](e);this.setVValue(e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(s){this.effectsSequence.push(s),this.container.addDynamicProperty(this)}function ValueProperty(s,t,e,n){this.propType="unidimensional",this.mult=e||1,this.data=t,this.v=e?t.k*e:t.k,this.pv=t.k,this._mdf=!1,this.elem=s,this.container=n,this.comp=s.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(s,t,e,n){this.propType="multidimensional",this.mult=e||1,this.data=t,this._mdf=!1,this.elem=s,this.container=n,this.comp=s.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,o=t.k.length;for(this.v=createTypedArray("float32",o),this.pv=createTypedArray("float32",o),this.vel=createTypedArray("float32",o),i=0;i<o;i+=1)this.v[i]=t.k[i]*this.mult,this.pv[i]=t.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(s,t,e,n){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=s.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=e||1,this.elem=s,this.container=n,this.comp=s.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(s,t,e,n){this.propType="multidimensional";var i,o=t.k.length,c,d,f,p;for(i=0;i<o-1;i+=1)t.k[i].to&&t.k[i].s&&t.k[i+1]&&t.k[i+1].s&&(c=t.k[i].s,d=t.k[i+1].s,f=t.k[i].to,p=t.k[i].ti,(c.length===2&&!(c[0]===d[0]&&c[1]===d[1])&&bez.pointOnLine2D(c[0],c[1],d[0],d[1],c[0]+f[0],c[1]+f[1])&&bez.pointOnLine2D(c[0],c[1],d[0],d[1],d[0]+p[0],d[1]+p[1])||c.length===3&&!(c[0]===d[0]&&c[1]===d[1]&&c[2]===d[2])&&bez.pointOnLine3D(c[0],c[1],c[2],d[0],d[1],d[2],c[0]+f[0],c[1]+f[1],c[2]+f[2])&&bez.pointOnLine3D(c[0],c[1],c[2],d[0],d[1],d[2],d[0]+p[0],d[1]+p[1],d[2]+p[2]))&&(t.k[i].to=null,t.k[i].ti=null),c[0]===d[0]&&c[1]===d[1]&&f[0]===0&&f[1]===0&&p[0]===0&&p[1]===0&&(c.length===2||c[2]===d[2]&&f[2]===0&&p[2]===0)&&(t.k[i].to=null,t.k[i].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=s.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=e||1,this.elem=s,this.container=n,this.comp=s.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var g=t.k[0].s.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),i=0;i<g;i+=1)this.v[i]=initFrame,this.pv[i]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",g)},this.addEffect=addEffect}var PropertyFactory=function(){function s(e,n,i,o,c){n.sid&&(n=e.globalData.slotManager.getProp(n));var d;if(!n.k.length)d=new ValueProperty(e,n,o,c);else if(typeof n.k[0]=="number")d=new MultiDimensionalProperty(e,n,o,c);else switch(i){case 0:d=new KeyframedValueProperty(e,n,o,c);break;case 1:d=new KeyframedMultidimensionalProperty(e,n,o,c);break}return d.effectsSequence.length&&c.addDynamicProperty(d),d}var t={getProp:s};return t}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function s(){return createTypedArray("float32",2)}return poolFactory(8,s)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(s,t){this.c=s,this.setLength(t);for(var e=0;e<t;)this.v[e]=pointPool.newElement(),this.o[e]=pointPool.newElement(),this.i[e]=pointPool.newElement(),e+=1},ShapePath.prototype.setLength=function(s){for(;this._maxLength<s;)this.doubleArrayLength();this._length=s},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(s,t,e,n,i){var o;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),e){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o;break;default:o=[];break}(!o[n]||o[n]&&!i)&&(o[n]=pointPool.newElement()),o[n][0]=s,o[n][1]=t},ShapePath.prototype.setTripleAt=function(s,t,e,n,i,o,c,d){this.setXYAt(s,t,"v",c,d),this.setXYAt(e,n,"o",c,d),this.setXYAt(i,o,"i",c,d)},ShapePath.prototype.reverse=function(){var s=new ShapePath;s.setPathData(this.c,this._length);var t=this.v,e=this.o,n=this.i,i=0;this.c&&(s.setTripleAt(t[0][0],t[0][1],n[0][0],n[0][1],e[0][0],e[0][1],0,!1),i=1);var o=this._length-1,c=this._length,d;for(d=i;d<c;d+=1)s.setTripleAt(t[o][0],t[o][1],n[o][0],n[o][1],e[o][0],e[o][1],d,!1),o-=1;return s},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function s(){return new ShapePath}function t(i){var o=i._length,c;for(c=0;c<o;c+=1)pointPool.release(i.v[c]),pointPool.release(i.i[c]),pointPool.release(i.o[c]),i.v[c]=null,i.i[c]=null,i.o[c]=null;i._length=0,i.c=!1}function e(i){var o=n.newElement(),c,d=i._length===void 0?i.v.length:i._length;for(o.setLength(d),o.c=i.c,c=0;c<d;c+=1)o.setTripleAt(i.v[c][0],i.v[c][1],i.o[c][0],i.o[c][1],i.i[c][0],i.i[c][1],c);return o}var n=poolFactory(4,s,t);return n.clone=e,n}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(s){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=s,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var s;for(s=0;s<this._length;s+=1)shapePool.release(this.shapes[s]);this._length=0};var shapeCollectionPool=function(){var s={newShapeCollection:i,release:o},t=0,e=4,n=createSizedArray(e);function i(){var c;return t?(t-=1,c=n[t]):c=new ShapeCollection,c}function o(c){var d,f=c._length;for(d=0;d<f;d+=1)shapePool.release(c.shapes[d]);c._length=0,t===e&&(n=pooling.double(n),e*=2),n[t]=c,t+=1}return s}(),ShapePropertyFactory=function(){var s=-999999;function t(E,T,C){var M=C.lastIndex,j,L,O,V,X,tt,Y,Q,ct,nt=this.keyframes;if(E<nt[0].t-this.offsetTime)j=nt[0].s[0],O=!0,M=0;else if(E>=nt[nt.length-1].t-this.offsetTime)j=nt[nt.length-1].s?nt[nt.length-1].s[0]:nt[nt.length-2].e[0],O=!0;else{for(var J=M,D=nt.length-1,U=!0,N,I,B;U&&(N=nt[J],I=nt[J+1],!(I.t-this.offsetTime>E));)J<D-1?J+=1:U=!1;if(B=this.keyframesMetadata[J]||{},O=N.h===1,M=J,!O){if(E>=I.t-this.offsetTime)Q=1;else if(E<N.t-this.offsetTime)Q=0;else{var z;B.__fnct?z=B.__fnct:(z=BezierFactory.getBezierEasing(N.o.x,N.o.y,N.i.x,N.i.y).get,B.__fnct=z),Q=z((E-(N.t-this.offsetTime))/(I.t-this.offsetTime-(N.t-this.offsetTime)))}L=I.s?I.s[0]:N.e[0]}j=N.s[0]}for(tt=T._length,Y=j.i[0].length,C.lastIndex=M,V=0;V<tt;V+=1)for(X=0;X<Y;X+=1)ct=O?j.i[V][X]:j.i[V][X]+(L.i[V][X]-j.i[V][X])*Q,T.i[V][X]=ct,ct=O?j.o[V][X]:j.o[V][X]+(L.o[V][X]-j.o[V][X])*Q,T.o[V][X]=ct,ct=O?j.v[V][X]:j.v[V][X]+(L.v[V][X]-j.v[V][X])*Q,T.v[V][X]=ct}function e(){var E=this.comp.renderedFrame-this.offsetTime,T=this.keyframes[0].t-this.offsetTime,C=this.keyframes[this.keyframes.length-1].t-this.offsetTime,M=this._caching.lastFrame;return M!==s&&(M<T&&E<T||M>C&&E>C)||(this._caching.lastIndex=M<E?this._caching.lastIndex:0,this.interpolateShape(E,this.pv,this._caching)),this._caching.lastFrame=E,this.pv}function n(){this.paths=this.localShapeCollection}function i(E,T){if(E._length!==T._length||E.c!==T.c)return!1;var C,M=E._length;for(C=0;C<M;C+=1)if(E.v[C][0]!==T.v[C][0]||E.v[C][1]!==T.v[C][1]||E.o[C][0]!==T.o[C][0]||E.o[C][1]!==T.o[C][1]||E.i[C][0]!==T.i[C][0]||E.i[C][1]!==T.i[C][1])return!1;return!0}function o(E){i(this.v,E)||(this.v=shapePool.clone(E),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function c(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var E;this.kf?E=this.pv:this.data.ks?E=this.data.ks.k:E=this.data.pt.k;var T,C=this.effectsSequence.length;for(T=0;T<C;T+=1)E=this.effectsSequence[T](E);this.setVValue(E),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function d(E,T,C){this.propType="shape",this.comp=E.comp,this.container=E,this.elem=E,this.data=T,this.k=!1,this.kf=!1,this._mdf=!1;var M=C===3?T.pt.k:T.ks.k;this.v=shapePool.clone(M),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function f(E){this.effectsSequence.push(E),this.container.addDynamicProperty(this)}d.prototype.interpolateShape=t,d.prototype.getValue=c,d.prototype.setVValue=o,d.prototype.addEffect=f;function p(E,T,C){this.propType="shape",this.comp=E.comp,this.elem=E,this.container=E,this.offsetTime=E.data.st,this.keyframes=C===3?T.pt.k:T.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var M=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,M),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=s,this.reset=n,this._caching={lastFrame:s,lastIndex:0},this.effectsSequence=[e.bind(this)]}p.prototype.getValue=c,p.prototype.interpolateShape=t,p.prototype.setVValue=o,p.prototype.addEffect=f;var g=function(){var E=roundCorner;function T(C,M){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=M.d,this.elem=C,this.comp=C.comp,this.frameId=-1,this.initDynamicPropertyContainer(C),this.p=PropertyFactory.getProp(C,M.p,1,0,this),this.s=PropertyFactory.getProp(C,M.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return T.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var M=this.p.v[0],j=this.p.v[1],L=this.s.v[0]/2,O=this.s.v[1]/2,V=this.d!==3,X=this.v;X.v[0][0]=M,X.v[0][1]=j-O,X.v[1][0]=V?M+L:M-L,X.v[1][1]=j,X.v[2][0]=M,X.v[2][1]=j+O,X.v[3][0]=V?M-L:M+L,X.v[3][1]=j,X.i[0][0]=V?M-L*E:M+L*E,X.i[0][1]=j-O,X.i[1][0]=V?M+L:M-L,X.i[1][1]=j-O*E,X.i[2][0]=V?M+L*E:M-L*E,X.i[2][1]=j+O,X.i[3][0]=V?M-L:M+L,X.i[3][1]=j+O*E,X.o[0][0]=V?M+L*E:M-L*E,X.o[0][1]=j-O,X.o[1][0]=V?M+L:M-L,X.o[1][1]=j+O*E,X.o[2][0]=V?M-L*E:M+L*E,X.o[2][1]=j+O,X.o[3][0]=V?M-L:M+L,X.o[3][1]=j-O*E}},extendPrototype([DynamicPropertyContainer],T),T}(),b=function(){function E(T,C){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=T,this.comp=T.comp,this.data=C,this.frameId=-1,this.d=C.d,this.initDynamicPropertyContainer(T),C.sy===1?(this.ir=PropertyFactory.getProp(T,C.ir,0,0,this),this.is=PropertyFactory.getProp(T,C.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(T,C.pt,0,0,this),this.p=PropertyFactory.getProp(T,C.p,1,0,this),this.r=PropertyFactory.getProp(T,C.r,0,degToRads,this),this.or=PropertyFactory.getProp(T,C.or,0,0,this),this.os=PropertyFactory.getProp(T,C.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return E.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var C=Math.floor(this.pt.v)*2,M=Math.PI*2/C,j=!0,L=this.or.v,O=this.ir.v,V=this.os.v,X=this.is.v,tt=2*Math.PI*L/(C*2),Y=2*Math.PI*O/(C*2),Q,ct,nt,J,D=-Math.PI/2;D+=this.r.v;var U=this.data.d===3?-1:1;for(this.v._length=0,Q=0;Q<C;Q+=1){ct=j?L:O,nt=j?V:X,J=j?tt:Y;var N=ct*Math.cos(D),I=ct*Math.sin(D),B=N===0&&I===0?0:I/Math.sqrt(N*N+I*I),z=N===0&&I===0?0:-N/Math.sqrt(N*N+I*I);N+=+this.p.v[0],I+=+this.p.v[1],this.v.setTripleAt(N,I,N-B*J*nt*U,I-z*J*nt*U,N+B*J*nt*U,I+z*J*nt*U,Q,!0),j=!j,D+=M*U}},convertPolygonToPath:function(){var C=Math.floor(this.pt.v),M=Math.PI*2/C,j=this.or.v,L=this.os.v,O=2*Math.PI*j/(C*4),V,X=-Math.PI*.5,tt=this.data.d===3?-1:1;for(X+=this.r.v,this.v._length=0,V=0;V<C;V+=1){var Y=j*Math.cos(X),Q=j*Math.sin(X),ct=Y===0&&Q===0?0:Q/Math.sqrt(Y*Y+Q*Q),nt=Y===0&&Q===0?0:-Y/Math.sqrt(Y*Y+Q*Q);Y+=+this.p.v[0],Q+=+this.p.v[1],this.v.setTripleAt(Y,Q,Y-ct*O*L*tt,Q-nt*O*L*tt,Y+ct*O*L*tt,Q+nt*O*L*tt,V,!0),X+=M*tt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],E),E}(),x=function(){function E(T,C){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=T,this.comp=T.comp,this.frameId=-1,this.d=C.d,this.initDynamicPropertyContainer(T),this.p=PropertyFactory.getProp(T,C.p,1,0,this),this.s=PropertyFactory.getProp(T,C.s,1,0,this),this.r=PropertyFactory.getProp(T,C.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return E.prototype={convertRectToPath:function(){var C=this.p.v[0],M=this.p.v[1],j=this.s.v[0]/2,L=this.s.v[1]/2,O=bmMin(j,L,this.r.v),V=O*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(C+j,M-L+O,C+j,M-L+O,C+j,M-L+V,0,!0),this.v.setTripleAt(C+j,M+L-O,C+j,M+L-V,C+j,M+L-O,1,!0),O!==0?(this.v.setTripleAt(C+j-O,M+L,C+j-O,M+L,C+j-V,M+L,2,!0),this.v.setTripleAt(C-j+O,M+L,C-j+V,M+L,C-j+O,M+L,3,!0),this.v.setTripleAt(C-j,M+L-O,C-j,M+L-O,C-j,M+L-V,4,!0),this.v.setTripleAt(C-j,M-L+O,C-j,M-L+V,C-j,M-L+O,5,!0),this.v.setTripleAt(C-j+O,M-L,C-j+O,M-L,C-j+V,M-L,6,!0),this.v.setTripleAt(C+j-O,M-L,C+j-V,M-L,C+j-O,M-L,7,!0)):(this.v.setTripleAt(C-j,M+L,C-j+V,M+L,C-j,M+L,2),this.v.setTripleAt(C-j,M-L,C-j,M-L+V,C-j,M-L,3))):(this.v.setTripleAt(C+j,M-L+O,C+j,M-L+V,C+j,M-L+O,0,!0),O!==0?(this.v.setTripleAt(C+j-O,M-L,C+j-O,M-L,C+j-V,M-L,1,!0),this.v.setTripleAt(C-j+O,M-L,C-j+V,M-L,C-j+O,M-L,2,!0),this.v.setTripleAt(C-j,M-L+O,C-j,M-L+O,C-j,M-L+V,3,!0),this.v.setTripleAt(C-j,M+L-O,C-j,M+L-V,C-j,M+L-O,4,!0),this.v.setTripleAt(C-j+O,M+L,C-j+O,M+L,C-j+V,M+L,5,!0),this.v.setTripleAt(C+j-O,M+L,C+j-V,M+L,C+j-O,M+L,6,!0),this.v.setTripleAt(C+j,M+L-O,C+j,M+L-O,C+j,M+L-V,7,!0)):(this.v.setTripleAt(C-j,M-L,C-j+V,M-L,C-j,M-L,1,!0),this.v.setTripleAt(C-j,M+L,C-j,M+L-V,C-j,M+L,2,!0),this.v.setTripleAt(C+j,M+L,C+j-V,M+L,C+j,M+L,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],E),E}();function A(E,T,C){var M;if(C===3||C===4){var j=C===3?T.pt:T.ks,L=j.k;L.length?M=new p(E,T,C):M=new d(E,T,C)}else C===5?M=new x(E,T):C===6?M=new g(E,T):C===7&&(M=new b(E,T));return M.k&&E.addDynamicProperty(M),M}function _(){return d}function R(){return p}var P={};return P.getShapeProp=A,P.getConstructorFunction=_,P.getKeyframedConstructorFunction=R,P}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var s=Math.cos,t=Math.sin,e=Math.tan,n=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(N){if(N===0)return this;var I=s(N),B=t(N);return this._t(I,-B,0,0,B,I,0,0,0,0,1,0,0,0,0,1)}function c(N){if(N===0)return this;var I=s(N),B=t(N);return this._t(1,0,0,0,0,I,-B,0,0,B,I,0,0,0,0,1)}function d(N){if(N===0)return this;var I=s(N),B=t(N);return this._t(I,0,B,0,0,1,0,0,-B,0,I,0,0,0,0,1)}function f(N){if(N===0)return this;var I=s(N),B=t(N);return this._t(I,-B,0,0,B,I,0,0,0,0,1,0,0,0,0,1)}function p(N,I){return this._t(1,I,N,1,0,0)}function g(N,I){return this.shear(e(N),e(I))}function b(N,I){var B=s(I),z=t(I);return this._t(B,z,0,0,-z,B,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,e(N),1,0,0,0,0,1,0,0,0,0,1)._t(B,-z,0,0,z,B,0,0,0,0,1,0,0,0,0,1)}function x(N,I,B){return!B&&B!==0&&(B=1),N===1&&I===1&&B===1?this:this._t(N,0,0,0,0,I,0,0,0,0,B,0,0,0,0,1)}function A(N,I,B,z,K,st,ht,xt,mt,Rt,It,le,Vt,ye,Re,jt){return this.props[0]=N,this.props[1]=I,this.props[2]=B,this.props[3]=z,this.props[4]=K,this.props[5]=st,this.props[6]=ht,this.props[7]=xt,this.props[8]=mt,this.props[9]=Rt,this.props[10]=It,this.props[11]=le,this.props[12]=Vt,this.props[13]=ye,this.props[14]=Re,this.props[15]=jt,this}function _(N,I,B){return B=B||0,N!==0||I!==0||B!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,N,I,B,1):this}function R(N,I,B,z,K,st,ht,xt,mt,Rt,It,le,Vt,ye,Re,jt){var bt=this.props;if(N===1&&I===0&&B===0&&z===0&&K===0&&st===1&&ht===0&&xt===0&&mt===0&&Rt===0&&It===1&&le===0)return bt[12]=bt[12]*N+bt[15]*Vt,bt[13]=bt[13]*st+bt[15]*ye,bt[14]=bt[14]*It+bt[15]*Re,bt[15]*=jt,this._identityCalculated=!1,this;var Ee=bt[0],xe=bt[1],Mt=bt[2],is=bt[3],gs=bt[4],Ke=bt[5],ee=bt[6],Ls=bt[7],Ge=bt[8],Je=bt[9],Ds=bt[10],be=bt[11],ae=bt[12],De=bt[13],we=bt[14],ts=bt[15];return bt[0]=Ee*N+xe*K+Mt*mt+is*Vt,bt[1]=Ee*I+xe*st+Mt*Rt+is*ye,bt[2]=Ee*B+xe*ht+Mt*It+is*Re,bt[3]=Ee*z+xe*xt+Mt*le+is*jt,bt[4]=gs*N+Ke*K+ee*mt+Ls*Vt,bt[5]=gs*I+Ke*st+ee*Rt+Ls*ye,bt[6]=gs*B+Ke*ht+ee*It+Ls*Re,bt[7]=gs*z+Ke*xt+ee*le+Ls*jt,bt[8]=Ge*N+Je*K+Ds*mt+be*Vt,bt[9]=Ge*I+Je*st+Ds*Rt+be*ye,bt[10]=Ge*B+Je*ht+Ds*It+be*Re,bt[11]=Ge*z+Je*xt+Ds*le+be*jt,bt[12]=ae*N+De*K+we*mt+ts*Vt,bt[13]=ae*I+De*st+we*Rt+ts*ye,bt[14]=ae*B+De*ht+we*It+ts*Re,bt[15]=ae*z+De*xt+we*le+ts*jt,this._identityCalculated=!1,this}function P(N){var I=N.props;return this.transform(I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],I[12],I[13],I[14],I[15])}function E(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function T(N){for(var I=0;I<16;){if(N.props[I]!==this.props[I])return!1;I+=1}return!0}function C(N){var I;for(I=0;I<16;I+=1)N.props[I]=this.props[I];return N}function M(N){var I;for(I=0;I<16;I+=1)this.props[I]=N[I]}function j(N,I,B){return{x:N*this.props[0]+I*this.props[4]+B*this.props[8]+this.props[12],y:N*this.props[1]+I*this.props[5]+B*this.props[9]+this.props[13],z:N*this.props[2]+I*this.props[6]+B*this.props[10]+this.props[14]}}function L(N,I,B){return N*this.props[0]+I*this.props[4]+B*this.props[8]+this.props[12]}function O(N,I,B){return N*this.props[1]+I*this.props[5]+B*this.props[9]+this.props[13]}function V(N,I,B){return N*this.props[2]+I*this.props[6]+B*this.props[10]+this.props[14]}function X(){var N=this.props[0]*this.props[5]-this.props[1]*this.props[4],I=this.props[5]/N,B=-this.props[1]/N,z=-this.props[4]/N,K=this.props[0]/N,st=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/N,ht=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/N,xt=new Matrix;return xt.props[0]=I,xt.props[1]=B,xt.props[4]=z,xt.props[5]=K,xt.props[12]=st,xt.props[13]=ht,xt}function tt(N){var I=this.getInverseMatrix();return I.applyToPointArray(N[0],N[1],N[2]||0)}function Y(N){var I,B=N.length,z=[];for(I=0;I<B;I+=1)z[I]=tt(N[I]);return z}function Q(N,I,B){var z=createTypedArray("float32",6);if(this.isIdentity())z[0]=N[0],z[1]=N[1],z[2]=I[0],z[3]=I[1],z[4]=B[0],z[5]=B[1];else{var K=this.props[0],st=this.props[1],ht=this.props[4],xt=this.props[5],mt=this.props[12],Rt=this.props[13];z[0]=N[0]*K+N[1]*ht+mt,z[1]=N[0]*st+N[1]*xt+Rt,z[2]=I[0]*K+I[1]*ht+mt,z[3]=I[0]*st+I[1]*xt+Rt,z[4]=B[0]*K+B[1]*ht+mt,z[5]=B[0]*st+B[1]*xt+Rt}return z}function ct(N,I,B){var z;return this.isIdentity()?z=[N,I,B]:z=[N*this.props[0]+I*this.props[4]+B*this.props[8]+this.props[12],N*this.props[1]+I*this.props[5]+B*this.props[9]+this.props[13],N*this.props[2]+I*this.props[6]+B*this.props[10]+this.props[14]],z}function nt(N,I){if(this.isIdentity())return N+","+I;var B=this.props;return Math.round((N*B[0]+I*B[4]+B[12])*100)/100+","+Math.round((N*B[1]+I*B[5]+B[13])*100)/100}function J(){for(var N=0,I=this.props,B="matrix3d(",z=1e4;N<16;)B+=n(I[N]*z)/z,B+=N===15?")":",",N+=1;return B}function D(N){var I=1e4;return N<1e-6&&N>0||N>-1e-6&&N<0?n(N*I)/I:N}function U(){var N=this.props,I=D(N[0]),B=D(N[1]),z=D(N[4]),K=D(N[5]),st=D(N[12]),ht=D(N[13]);return"matrix("+I+","+B+","+z+","+K+","+st+","+ht+")"}return function(){this.reset=i,this.rotate=o,this.rotateX=c,this.rotateY=d,this.rotateZ=f,this.skew=g,this.skewFromAxis=b,this.shear=p,this.scale=x,this.setTransform=A,this.translate=_,this.transform=R,this.multiply=P,this.applyToPoint=j,this.applyToX=L,this.applyToY=O,this.applyToZ=V,this.applyToPointArray=ct,this.applyToTriplePoints=Q,this.applyToPointStringified=nt,this.toCSS=J,this.to2dCSS=U,this.clone=C,this.cloneFromProps=M,this.equals=T,this.inversePoints=Y,this.inversePoint=tt,this.getInverseMatrix=X,this._t=this.transform,this.isIdentity=E,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(s){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(s)}var lottie={};function setLocation(s){setLocationHref(s)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(s){setSubframeEnabled(s)}function setPrefix(s){setIdPrefix(s)}function loadAnimation(s){return animationManager.loadAnimation(s)}function setQuality(s){if(typeof s=="string")switch(s){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(s)&&s>1&&setDefaultCurveSegments(s)}function inBrowser(){return typeof navigator<"u"}function installPlugin(s,t){s==="expressions"&&setExpressionsPlugin(t)}function getFactory(s){switch(s){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(s){for(var t=queryString.split("&"),e=0;e<t.length;e+=1){var n=t[e].split("=");if(decodeURIComponent(n[0])==s)return decodeURIComponent(n[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(s){}var ShapeModifiers=function(){var s={},t={};s.registerModifier=e,s.getModifier=n;function e(i,o){t[i]||(t[i]=o)}function n(i,o,c){return new t[i](o,c)}return s}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(s){if(!this.closed){s.sh.container.addDynamicProperty(s.sh);var t={shape:s.sh,data:s,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&s.setAsAnimated()}},ShapeModifier.prototype.init=function(s,t){this.shapes=[],this.elem=s,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(s,t){this.s=PropertyFactory.getProp(s,t.s,0,.01,this),this.e=PropertyFactory.getProp(s,t.e,0,.01,this),this.o=PropertyFactory.getProp(s,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(s){s.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(s,t,e,n,i){var o=[];t<=1?o.push({s,e:t}):s>=1?o.push({s:s-1,e:t-1}):(o.push({s,e:1}),o.push({s:0,e:t-1}));var c=[],d,f=o.length,p;for(d=0;d<f;d+=1)if(p=o[d],!(p.e*i<n||p.s*i>n+e)){var g,b;p.s*i<=n?g=0:g=(p.s*i-n)/e,p.e*i>=n+e?b=1:b=(p.e*i-n)/e,c.push([g,b])}return c.length||c.push([0,0]),c},TrimModifier.prototype.releasePathsData=function(s){var t,e=s.length;for(t=0;t<e;t+=1)segmentsLengthPool.release(s[t]);return s.length=0,s},TrimModifier.prototype.processShapes=function(s){var t,e;if(this._mdf||s){var n=this.o.v%360/360;if(n<0&&(n+=1),this.s.v>1?t=1+n:this.s.v<0?t=0+n:t=this.s.v+n,this.e.v>1?e=1+n:this.e.v<0?e=0+n:e=this.e.v+n,t>e){var i=t;t=e,e=i}t=Math.round(t*1e4)*1e-4,e=Math.round(e*1e4)*1e-4,this.sValue=t,this.eValue=e}else t=this.sValue,e=this.eValue;var o,c,d=this.shapes.length,f,p,g,b,x,A=0;if(e===t)for(c=0;c<d;c+=1)this.shapes[c].localShapeCollection.releaseShapes(),this.shapes[c].shape._mdf=!0,this.shapes[c].shape.paths=this.shapes[c].localShapeCollection,this._mdf&&(this.shapes[c].pathsData.length=0);else if(e===1&&t===0||e===0&&t===1){if(this._mdf)for(c=0;c<d;c+=1)this.shapes[c].pathsData.length=0,this.shapes[c].shape._mdf=!0}else{var _=[],R,P;for(c=0;c<d;c+=1)if(R=this.shapes[c],!R.shape._mdf&&!this._mdf&&!s&&this.m!==2)R.shape.paths=R.localShapeCollection;else{if(o=R.shape.paths,p=o._length,x=0,!R.shape._mdf&&R.pathsData.length)x=R.totalShapeLength;else{for(g=this.releasePathsData(R.pathsData),f=0;f<p;f+=1)b=bez.getSegmentsLength(o.shapes[f]),g.push(b),x+=b.totalLength;R.totalShapeLength=x,R.pathsData=g}A+=x,R.shape._mdf=!0}var E=t,T=e,C=0,M;for(c=d-1;c>=0;c-=1)if(R=this.shapes[c],R.shape._mdf){for(P=R.localShapeCollection,P.releaseShapes(),this.m===2&&d>1?(M=this.calculateShapeEdges(t,e,R.totalShapeLength,C,A),C+=R.totalShapeLength):M=[[E,T]],p=M.length,f=0;f<p;f+=1){E=M[f][0],T=M[f][1],_.length=0,T<=1?_.push({s:R.totalShapeLength*E,e:R.totalShapeLength*T}):E>=1?_.push({s:R.totalShapeLength*(E-1),e:R.totalShapeLength*(T-1)}):(_.push({s:R.totalShapeLength*E,e:R.totalShapeLength}),_.push({s:0,e:R.totalShapeLength*(T-1)}));var j=this.addShapes(R,_[0]);if(_[0].s!==_[0].e){if(_.length>1){var L=R.shape.paths.shapes[R.shape.paths._length-1];if(L.c){var O=j.pop();this.addPaths(j,P),j=this.addShapes(R,_[1],O)}else this.addPaths(j,P),j=this.addShapes(R,_[1])}this.addPaths(j,P)}}R.shape.paths=P}}},TrimModifier.prototype.addPaths=function(s,t){var e,n=s.length;for(e=0;e<n;e+=1)t.addShape(s[e])},TrimModifier.prototype.addSegment=function(s,t,e,n,i,o,c){i.setXYAt(t[0],t[1],"o",o),i.setXYAt(e[0],e[1],"i",o+1),c&&i.setXYAt(s[0],s[1],"v",o),i.setXYAt(n[0],n[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(s,t,e,n){t.setXYAt(s[1],s[5],"o",e),t.setXYAt(s[2],s[6],"i",e+1),n&&t.setXYAt(s[0],s[4],"v",e),t.setXYAt(s[3],s[7],"v",e+1)},TrimModifier.prototype.addShapes=function(s,t,e){var n=s.pathsData,i=s.shape.paths.shapes,o,c=s.shape.paths._length,d,f,p=0,g,b,x,A,_=[],R,P=!0;for(e?(b=e._length,R=e._length):(e=shapePool.newElement(),b=0,R=0),_.push(e),o=0;o<c;o+=1){for(x=n[o].lengths,e.c=i[o].c,f=i[o].c?x.length:x.length+1,d=1;d<f;d+=1)if(g=x[d-1],p+g.addedLength<t.s)p+=g.addedLength,e.c=!1;else if(p>t.e){e.c=!1;break}else t.s<=p&&t.e>=p+g.addedLength?(this.addSegment(i[o].v[d-1],i[o].o[d-1],i[o].i[d],i[o].v[d],e,b,P),P=!1):(A=bez.getNewSegment(i[o].v[d-1],i[o].v[d],i[o].o[d-1],i[o].i[d],(t.s-p)/g.addedLength,(t.e-p)/g.addedLength,x[d-1]),this.addSegmentFromArray(A,e,b,P),P=!1,e.c=!1),p+=g.addedLength,b+=1;if(i[o].c&&x.length){if(g=x[d-1],p<=t.e){var E=x[d-1].addedLength;t.s<=p&&t.e>=p+E?(this.addSegment(i[o].v[d-1],i[o].o[d-1],i[o].i[0],i[o].v[0],e,b,P),P=!1):(A=bez.getNewSegment(i[o].v[d-1],i[o].v[0],i[o].o[d-1],i[o].i[0],(t.s-p)/E,(t.e-p)/E,x[d-1]),this.addSegmentFromArray(A,e,b,P),P=!1,e.c=!1)}else e.c=!1;p+=g.addedLength,b+=1}if(e._length&&(e.setXYAt(e.v[R][0],e.v[R][1],"i",R),e.setXYAt(e.v[e._length-1][0],e.v[e._length-1][1],"o",e._length-1)),p>t.e)break;o<c-1&&(e=shapePool.newElement(),P=!0,_.push(e),b=0)}return _};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(s,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(s,t){var e=t/100,n=[0,0],i=s._length,o=0;for(o=0;o<i;o+=1)n[0]+=s.v[o][0],n[1]+=s.v[o][1];n[0]/=i,n[1]/=i;var c=shapePool.newElement();c.c=s.c;var d,f,p,g,b,x;for(o=0;o<i;o+=1)d=s.v[o][0]+(n[0]-s.v[o][0])*e,f=s.v[o][1]+(n[1]-s.v[o][1])*e,p=s.o[o][0]+(n[0]-s.o[o][0])*-e,g=s.o[o][1]+(n[1]-s.o[o][1])*-e,b=s.i[o][0]+(n[0]-s.i[o][0])*-e,x=s.i[o][1]+(n[1]-s.i[o][1])*-e,c.setTripleAt(d,f,p,g,b,x,o);return c},PuckerAndBloatModifier.prototype.processShapes=function(s){var t,e,n=this.shapes.length,i,o,c=this.amount.v;if(c!==0){var d,f;for(e=0;e<n;e+=1){if(d=this.shapes[e],f=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!s))for(f.releaseShapes(),d.shape._mdf=!0,t=d.shape.paths.shapes,o=d.shape.paths._length,i=0;i<o;i+=1)f.addShape(this.processPath(t[i],c));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var s=[0,0];function t(f){var p=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||p,this.a&&f.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&f.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&f.skewFromAxis(-this.sk.v,this.sa.v),this.r?f.rotate(-this.r.v):f.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?f.translate(this.px.v,this.py.v,-this.pz.v):f.translate(this.px.v,this.py.v,0):f.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function e(f){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||f){var p;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var g,b;if(p=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(g=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/p,0),b=this.p.getValueAtTime(this.p.keyframes[0].t/p,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(g=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/p,0),b=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/p,0)):(g=this.p.pv,b=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/p,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){g=[],b=[];var x=this.px,A=this.py;x._caching.lastFrame+x.offsetTime<=x.keyframes[0].t?(g[0]=x.getValueAtTime((x.keyframes[0].t+.01)/p,0),g[1]=A.getValueAtTime((A.keyframes[0].t+.01)/p,0),b[0]=x.getValueAtTime(x.keyframes[0].t/p,0),b[1]=A.getValueAtTime(A.keyframes[0].t/p,0)):x._caching.lastFrame+x.offsetTime>=x.keyframes[x.keyframes.length-1].t?(g[0]=x.getValueAtTime(x.keyframes[x.keyframes.length-1].t/p,0),g[1]=A.getValueAtTime(A.keyframes[A.keyframes.length-1].t/p,0),b[0]=x.getValueAtTime((x.keyframes[x.keyframes.length-1].t-.01)/p,0),b[1]=A.getValueAtTime((A.keyframes[A.keyframes.length-1].t-.01)/p,0)):(g=[x.pv,A.pv],b[0]=x.getValueAtTime((x._caching.lastFrame+x.offsetTime-.01)/p,x.offsetTime),b[1]=A.getValueAtTime((A._caching.lastFrame+A.offsetTime-.01)/p,A.offsetTime))}else b=s,g=b;this.v.rotate(-Math.atan2(g[1]-b[1],g[0]-b[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function n(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function i(){}function o(f){this._addDynamicProperty(f),this.elem.addDynamicProperty(f),this._isDirty=!0}function c(f,p,g){if(this.elem=f,this.frameId=-1,this.propType="transform",this.data=p,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(g||f),p.p&&p.p.s?(this.px=PropertyFactory.getProp(f,p.p.x,0,0,this),this.py=PropertyFactory.getProp(f,p.p.y,0,0,this),p.p.z&&(this.pz=PropertyFactory.getProp(f,p.p.z,0,0,this))):this.p=PropertyFactory.getProp(f,p.p||{k:[0,0,0]},1,0,this),p.rx){if(this.rx=PropertyFactory.getProp(f,p.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(f,p.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(f,p.rz,0,degToRads,this),p.or.k[0].ti){var b,x=p.or.k.length;for(b=0;b<x;b+=1)p.or.k[b].to=null,p.or.k[b].ti=null}this.or=PropertyFactory.getProp(f,p.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(f,p.r||{k:0},0,degToRads,this);p.sk&&(this.sk=PropertyFactory.getProp(f,p.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(f,p.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(f,p.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(f,p.s||{k:[100,100,100]},1,.01,this),p.o?this.o=PropertyFactory.getProp(f,p.o,0,.01,f):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}c.prototype={applyToMatrix:t,getValue:e,precalculateMatrix:n,autoOrient:i},extendPrototype([DynamicPropertyContainer],c),c.prototype.addDynamicProperty=o,c.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function d(f,p,g){return new c(f,p,g)}return{getTransformProperty:d}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(s,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(s,t.c,0,null,this),this.o=PropertyFactory.getProp(s,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(s,t.tr,this),this.so=PropertyFactory.getProp(s,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(s,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(s,t,e,n,i,o){var c=o?-1:1,d=n.s.v[0]+(1-n.s.v[0])*(1-i),f=n.s.v[1]+(1-n.s.v[1])*(1-i);s.translate(n.p.v[0]*c*i,n.p.v[1]*c*i,n.p.v[2]),t.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),t.rotate(-n.r.v*c*i),t.translate(n.a.v[0],n.a.v[1],n.a.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.scale(o?1/d:d,o?1/f:f),e.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(s,t,e,n){for(this.elem=s,this.arr=t,this.pos=e,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(s),this.initModifierProperties(s,t[e]);e>0;)e-=1,this._elements.unshift(t[e]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(s){var t,e=s.length;for(t=0;t<e;t+=1)s[t]._processed=!1,s[t].ty==="gr"&&this.resetElements(s[t].it)},RepeaterModifier.prototype.cloneElements=function(s){var t=JSON.parse(JSON.stringify(s));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(s,t){var e,n=s.length;for(e=0;e<n;e+=1)s[e]._render=t,s[e].ty==="gr"&&this.changeGroupRender(s[e].it,t)},RepeaterModifier.prototype.processShapes=function(s){var t,e,n,i,o,c=!1;if(this._mdf||s){var d=Math.ceil(this.c.v);if(this._groups.length<d){for(;this._groups.length<d;){var f={it:this.cloneElements(this._elements),ty:"gr"};f.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,f),this._groups.splice(0,0,f),this._currentCopies+=1}this.elem.reloadShapes(),c=!0}o=0;var p;for(n=0;n<=this._groups.length-1;n+=1){if(p=o<d,this._groups[n]._render=p,this.changeGroupRender(this._groups[n].it,p),!p){var g=this.elemsData[n].it,b=g[g.length-1];b.transform.op.v!==0?(b.transform.op._mdf=!0,b.transform.op.v=0):b.transform.op._mdf=!1}o+=1}this._currentCopies=d;var x=this.o.v,A=x%1,_=x>0?Math.floor(x):Math.ceil(x),R=this.pMatrix.props,P=this.rMatrix.props,E=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var T=0;if(x>0){for(;T<_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),T+=1;A&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,A,!1),T+=A)}else if(x<0){for(;T>_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),T-=1;A&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-A,!0),T-=A)}n=this.data.m===1?0:this._currentCopies-1,i=this.data.m===1?1:-1,o=this._currentCopies;for(var C,M;o;){if(t=this.elemsData[n].it,e=t[t.length-1].transform.mProps.v.props,M=e.length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),T!==0){for((n!==0&&i===1||n!==this._currentCopies-1&&i===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15]),this.matrix.transform(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15]),this.matrix.transform(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8],R[9],R[10],R[11],R[12],R[13],R[14],R[15]),C=0;C<M;C+=1)e[C]=this.matrix.props[C];this.matrix.reset()}else for(this.matrix.reset(),C=0;C<M;C+=1)e[C]=this.matrix.props[C];T+=1,o-=1,n+=i}}else for(o=this._currentCopies,n=0,i=1;o;)t=this.elemsData[n].it,e=t[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,o-=1,n+=i;return c},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(s,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(s,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(s,t){var e=shapePool.newElement();e.c=s.c;var n,i=s._length,o,c,d,f,p,g,b=0,x,A,_,R,P,E;for(n=0;n<i;n+=1)o=s.v[n],d=s.o[n],c=s.i[n],o[0]===d[0]&&o[1]===d[1]&&o[0]===c[0]&&o[1]===c[1]?(n===0||n===i-1)&&!s.c?(e.setTripleAt(o[0],o[1],d[0],d[1],c[0],c[1],b),b+=1):(n===0?f=s.v[i-1]:f=s.v[n-1],p=Math.sqrt(Math.pow(o[0]-f[0],2)+Math.pow(o[1]-f[1],2)),g=p?Math.min(p/2,t)/p:0,P=o[0]+(f[0]-o[0])*g,x=P,E=o[1]-(o[1]-f[1])*g,A=E,_=x-(x-o[0])*roundCorner,R=A-(A-o[1])*roundCorner,e.setTripleAt(x,A,_,R,P,E,b),b+=1,n===i-1?f=s.v[0]:f=s.v[n+1],p=Math.sqrt(Math.pow(o[0]-f[0],2)+Math.pow(o[1]-f[1],2)),g=p?Math.min(p/2,t)/p:0,_=o[0]+(f[0]-o[0])*g,x=_,R=o[1]+(f[1]-o[1])*g,A=R,P=x-(x-o[0])*roundCorner,E=A-(A-o[1])*roundCorner,e.setTripleAt(x,A,_,R,P,E,b),b+=1):(e.setTripleAt(s.v[n][0],s.v[n][1],s.o[n][0],s.o[n][1],s.i[n][0],s.i[n][1],b),b+=1);return e},RoundCornersModifier.prototype.processShapes=function(s){var t,e,n=this.shapes.length,i,o,c=this.rd.v;if(c!==0){var d,f;for(e=0;e<n;e+=1){if(d=this.shapes[e],f=d.localShapeCollection,!(!d.shape._mdf&&!this._mdf&&!s))for(f.releaseShapes(),d.shape._mdf=!0,t=d.shape.paths.shapes,o=d.shape.paths._length,i=0;i<o;i+=1)f.addShape(this.processPath(t[i],c));d.shape.paths=d.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(s,t){return Math.abs(s-t)*1e5<=Math.min(Math.abs(s),Math.abs(t))}function floatZero(s){return Math.abs(s)<=1e-5}function lerp(s,t,e){return s*(1-e)+t*e}function lerpPoint(s,t,e){return[lerp(s[0],t[0],e),lerp(s[1],t[1],e)]}function quadRoots(s,t,e){if(s===0)return[];var n=t*t-4*s*e;if(n<0)return[];var i=-t/(2*s);if(n===0)return[i];var o=Math.sqrt(n)/(2*s);return[i-o,i+o]}function polynomialCoefficients(s,t,e,n){return[-s+3*t-3*e+n,3*s-6*t+3*e,-3*s+3*t,s]}function singlePoint(s){return new PolynomialBezier(s,s,s,s,!1)}function PolynomialBezier(s,t,e,n,i){i&&pointEqual(s,t)&&(t=lerpPoint(s,n,1/3)),i&&pointEqual(e,n)&&(e=lerpPoint(s,n,2/3));var o=polynomialCoefficients(s[0],t[0],e[0],n[0]),c=polynomialCoefficients(s[1],t[1],e[1],n[1]);this.a=[o[0],c[0]],this.b=[o[1],c[1]],this.c=[o[2],c[2]],this.d=[o[3],c[3]],this.points=[s,t,e,n]}PolynomialBezier.prototype.point=function(s){return[((this.a[0]*s+this.b[0])*s+this.c[0])*s+this.d[0],((this.a[1]*s+this.b[1])*s+this.c[1])*s+this.d[1]]},PolynomialBezier.prototype.derivative=function(s){return[(3*s*this.a[0]+2*this.b[0])*s+this.c[0],(3*s*this.a[1]+2*this.b[1])*s+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(s){var t=this.derivative(s);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(s){var t=this.derivative(s);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var s=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(s))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/s,e=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/s;if(e<0)return[];var n=Math.sqrt(e);return floatZero(n)?n>0&&n<1?[t]:[]:[t-n,t+n].filter(function(i){return i>0&&i<1})},PolynomialBezier.prototype.split=function(s){if(s<=0)return[singlePoint(this.points[0]),this];if(s>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],s),e=lerpPoint(this.points[1],this.points[2],s),n=lerpPoint(this.points[2],this.points[3],s),i=lerpPoint(t,e,s),o=lerpPoint(e,n,s),c=lerpPoint(i,o,s);return[new PolynomialBezier(this.points[0],t,i,c,!0),new PolynomialBezier(c,o,n,this.points[3],!0)]};function extrema(s,t){var e=s.points[0][t],n=s.points[s.points.length-1][t];if(e>n){var i=n;n=e,e=i}for(var o=quadRoots(3*s.a[t],2*s.b[t],s.c[t]),c=0;c<o.length;c+=1)if(o[c]>0&&o[c]<1){var d=s.point(o[c])[t];d<e?e=d:d>n&&(n=d)}return{min:e,max:n}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var s=this.bounds();return{left:s.x.min,right:s.x.max,top:s.y.min,bottom:s.y.max,width:s.x.max-s.x.min,height:s.y.max-s.y.min,cx:(s.x.max+s.x.min)/2,cy:(s.y.max+s.y.min)/2}};function intersectData(s,t,e){var n=s.boundingBox();return{cx:n.cx,cy:n.cy,width:n.width,height:n.height,bez:s,t:(t+e)/2,t1:t,t2:e}}function splitData(s){var t=s.bez.split(.5);return[intersectData(t[0],s.t1,s.t),intersectData(t[1],s.t,s.t2)]}function boxIntersect(s,t){return Math.abs(s.cx-t.cx)*2<s.width+t.width&&Math.abs(s.cy-t.cy)*2<s.height+t.height}function intersectsImpl(s,t,e,n,i,o){if(boxIntersect(s,t)){if(e>=o||s.width<=n&&s.height<=n&&t.width<=n&&t.height<=n){i.push([s.t,t.t]);return}var c=splitData(s),d=splitData(t);intersectsImpl(c[0],d[0],e+1,n,i,o),intersectsImpl(c[0],d[1],e+1,n,i,o),intersectsImpl(c[1],d[0],e+1,n,i,o),intersectsImpl(c[1],d[1],e+1,n,i,o)}}PolynomialBezier.prototype.intersections=function(s,t,e){t===void 0&&(t=2),e===void 0&&(e=7);var n=[];return intersectsImpl(intersectData(this,0,1),intersectData(s,0,1),0,t,n,e),n},PolynomialBezier.shapeSegment=function(s,t){var e=(t+1)%s.length();return new PolynomialBezier(s.v[t],s.o[t],s.i[e],s.v[e],!0)},PolynomialBezier.shapeSegmentInverted=function(s,t){var e=(t+1)%s.length();return new PolynomialBezier(s.v[e],s.i[e],s.o[t],s.v[t],!0)};function crossProduct(s,t){return[s[1]*t[2]-s[2]*t[1],s[2]*t[0]-s[0]*t[2],s[0]*t[1]-s[1]*t[0]]}function lineIntersection(s,t,e,n){var i=[s[0],s[1],1],o=[t[0],t[1],1],c=[e[0],e[1],1],d=[n[0],n[1],1],f=crossProduct(crossProduct(i,o),crossProduct(c,d));return floatZero(f[2])?null:[f[0]/f[2],f[1]/f[2]]}function polarOffset(s,t,e){return[s[0]+Math.cos(t)*e,s[1]-Math.sin(t)*e]}function pointDistance(s,t){return Math.hypot(s[0]-t[0],s[1]-t[1])}function pointEqual(s,t){return floatEqual(s[0],t[0])&&floatEqual(s[1],t[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(s,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(s,t.s,0,null,this),this.frequency=PropertyFactory.getProp(s,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(s,t.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(s,t,e,n,i,o,c){var d=e-Math.PI/2,f=e+Math.PI/2,p=t[0]+Math.cos(e)*n*i,g=t[1]-Math.sin(e)*n*i;s.setTripleAt(p,g,p+Math.cos(d)*o,g-Math.sin(d)*o,p+Math.cos(f)*c,g-Math.sin(f)*c,s.length())}function getPerpendicularVector(s,t){var e=[t[0]-s[0],t[1]-s[1]],n=-Math.PI*.5,i=[Math.cos(n)*e[0]-Math.sin(n)*e[1],Math.sin(n)*e[0]+Math.cos(n)*e[1]];return i}function getProjectingAngle(s,t){var e=t===0?s.length()-1:t-1,n=(t+1)%s.length(),i=s.v[e],o=s.v[n],c=getPerpendicularVector(i,o);return Math.atan2(0,1)-Math.atan2(c[1],c[0])}function zigZagCorner(s,t,e,n,i,o,c){var d=getProjectingAngle(t,e),f=t.v[e%t._length],p=t.v[e===0?t._length-1:e-1],g=t.v[(e+1)%t._length],b=o===2?Math.sqrt(Math.pow(f[0]-p[0],2)+Math.pow(f[1]-p[1],2)):0,x=o===2?Math.sqrt(Math.pow(f[0]-g[0],2)+Math.pow(f[1]-g[1],2)):0;setPoint(s,t.v[e%t._length],d,c,n,x/((i+1)*2),b/((i+1)*2))}function zigZagSegment(s,t,e,n,i,o){for(var c=0;c<n;c+=1){var d=(c+1)/(n+1),f=i===2?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,p=t.normalAngle(d),g=t.point(d);setPoint(s,g,p,o,e,f/((n+1)*2),f/((n+1)*2)),o=-o}return o}ZigZagModifier.prototype.processPath=function(s,t,e,n){var i=s._length,o=shapePool.newElement();if(o.c=s.c,s.c||(i-=1),i===0)return o;var c=-1,d=PolynomialBezier.shapeSegment(s,0);zigZagCorner(o,s,0,t,e,n,c);for(var f=0;f<i;f+=1)c=zigZagSegment(o,d,t,e,n,-c),f===i-1&&!s.c?d=null:d=PolynomialBezier.shapeSegment(s,(f+1)%i),zigZagCorner(o,s,f+1,t,e,n,c);return o},ZigZagModifier.prototype.processShapes=function(s){var t,e,n=this.shapes.length,i,o,c=this.amplitude.v,d=Math.max(0,Math.round(this.frequency.v)),f=this.pointsType.v;if(c!==0){var p,g;for(e=0;e<n;e+=1){if(p=this.shapes[e],g=p.localShapeCollection,!(!p.shape._mdf&&!this._mdf&&!s))for(g.releaseShapes(),p.shape._mdf=!0,t=p.shape.paths.shapes,o=p.shape.paths._length,i=0;i<o;i+=1)g.addShape(this.processPath(t[i],c,d,f));p.shape.paths=p.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(s,t,e){var n=Math.atan2(t[0]-s[0],t[1]-s[1]);return[polarOffset(s,n,e),polarOffset(t,n,e)]}function offsetSegment(s,t){var e,n,i,o,c,d,f;f=linearOffset(s.points[0],s.points[1],t),e=f[0],n=f[1],f=linearOffset(s.points[1],s.points[2],t),i=f[0],o=f[1],f=linearOffset(s.points[2],s.points[3],t),c=f[0],d=f[1];var p=lineIntersection(e,n,i,o);p===null&&(p=n);var g=lineIntersection(c,d,i,o);return g===null&&(g=c),new PolynomialBezier(e,p,g,d)}function joinLines(s,t,e,n,i){var o=t.points[3],c=e.points[0];if(n===3||pointEqual(o,c))return o;if(n===2){var d=-t.tangentAngle(1),f=-e.tangentAngle(0)+Math.PI,p=lineIntersection(o,polarOffset(o,d+Math.PI/2,100),c,polarOffset(c,d+Math.PI/2,100)),g=p?pointDistance(p,o):pointDistance(o,c)/2,b=polarOffset(o,d,2*g*roundCorner);return s.setXYAt(b[0],b[1],"o",s.length()-1),b=polarOffset(c,f,2*g*roundCorner),s.setTripleAt(c[0],c[1],c[0],c[1],b[0],b[1],s.length()),c}var x=pointEqual(o,t.points[2])?t.points[0]:t.points[2],A=pointEqual(c,e.points[1])?e.points[3]:e.points[1],_=lineIntersection(x,o,c,A);return _&&pointDistance(_,o)<i?(s.setTripleAt(_[0],_[1],_[0],_[1],_[0],_[1],s.length()),_):o}function getIntersection(s,t){var e=s.intersections(t);return e.length&&floatEqual(e[0][0],1)&&e.shift(),e.length?e[0]:null}function pruneSegmentIntersection(s,t){var e=s.slice(),n=t.slice(),i=getIntersection(s[s.length-1],t[0]);return i&&(e[s.length-1]=s[s.length-1].split(i[0])[0],n[0]=t[0].split(i[1])[1]),s.length>1&&t.length>1&&(i=getIntersection(s[0],t[t.length-1]),i)?[[s[0].split(i[0])[0]],[t[t.length-1].split(i[1])[1]]]:[e,n]}function pruneIntersections(s){for(var t,e=1;e<s.length;e+=1)t=pruneSegmentIntersection(s[e-1],s[e]),s[e-1]=t[0],s[e]=t[1];return s.length>1&&(t=pruneSegmentIntersection(s[s.length-1],s[0]),s[s.length-1]=t[0],s[0]=t[1]),s}function offsetSegmentSplit(s,t){var e=s.inflectionPoints(),n,i,o,c;if(e.length===0)return[offsetSegment(s,t)];if(e.length===1||floatEqual(e[1],1))return o=s.split(e[0]),n=o[0],i=o[1],[offsetSegment(n,t),offsetSegment(i,t)];o=s.split(e[0]),n=o[0];var d=(e[1]-e[0])/(1-e[0]);return o=o[1].split(d),c=o[0],i=o[1],[offsetSegment(n,t),offsetSegment(c,t),offsetSegment(i,t)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(s,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(s,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(s,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(s,t,e,n){var i=shapePool.newElement();i.c=s.c;var o=s.length();s.c||(o-=1);var c,d,f,p=[];for(c=0;c<o;c+=1)f=PolynomialBezier.shapeSegment(s,c),p.push(offsetSegmentSplit(f,t));if(!s.c)for(c=o-1;c>=0;c-=1)f=PolynomialBezier.shapeSegmentInverted(s,c),p.push(offsetSegmentSplit(f,t));p=pruneIntersections(p);var g=null,b=null;for(c=0;c<p.length;c+=1){var x=p[c];for(b&&(g=joinLines(i,b,x[0],e,n)),b=x[x.length-1],d=0;d<x.length;d+=1)f=x[d],g&&pointEqual(f.points[0],g)?i.setXYAt(f.points[1][0],f.points[1][1],"o",i.length()-1):i.setTripleAt(f.points[0][0],f.points[0][1],f.points[1][0],f.points[1][1],f.points[0][0],f.points[0][1],i.length()),i.setTripleAt(f.points[3][0],f.points[3][1],f.points[3][0],f.points[3][1],f.points[2][0],f.points[2][1],i.length()),g=f.points[3]}return p.length&&joinLines(i,b,p[0][0],e,n),i},OffsetPathModifier.prototype.processShapes=function(s){var t,e,n=this.shapes.length,i,o,c=this.amount.v,d=this.miterLimit.v,f=this.lineJoin;if(c!==0){var p,g;for(e=0;e<n;e+=1){if(p=this.shapes[e],g=p.localShapeCollection,!(!p.shape._mdf&&!this._mdf&&!s))for(g.releaseShapes(),p.shape._mdf=!0,t=p.shape.paths.shapes,o=p.shape.paths._length,i=0;i<o;i+=1)g.addShape(this.processPath(t[i],c,f,d));p.shape.paths=p.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(s){for(var t=s.fStyle?s.fStyle.split(" "):[],e="normal",n="normal",i=t.length,o,c=0;c<i;c+=1)switch(o=t[c].toLowerCase(),o){case"italic":n="italic";break;case"bold":e="700";break;case"black":e="900";break;case"medium":e="500";break;case"regular":case"normal":e="400";break;case"light":case"thin":e="200";break}return{style:n,weight:s.fWeight||e}}var FontManager=function(){var s=5e3,t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,i=917631,o=917601,c=917626,d=65039,f=8205,p=127462,g=127487,b=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function x(D){var U=D.split(","),N,I=U.length,B=[];for(N=0;N<I;N+=1)U[N]!=="sans-serif"&&U[N]!=="monospace"&&B.push(U[N]);return B.join(",")}function A(D,U){var N=createTag("span");N.setAttribute("aria-hidden",!0),N.style.fontFamily=U;var I=createTag("span");I.innerText="giItT1WQy@!-/#",N.style.position="absolute",N.style.left="-10000px",N.style.top="-10000px",N.style.fontSize="300px",N.style.fontVariant="normal",N.style.fontStyle="normal",N.style.fontWeight="normal",N.style.letterSpacing="0",N.appendChild(I),document.body.appendChild(N);var B=I.offsetWidth;return I.style.fontFamily=x(D)+", "+U,{node:I,w:B,parent:N}}function _(){var D,U=this.fonts.length,N,I,B=U;for(D=0;D<U;D+=1)this.fonts[D].loaded?B-=1:this.fonts[D].fOrigin==="n"||this.fonts[D].origin===0?this.fonts[D].loaded=!0:(N=this.fonts[D].monoCase.node,I=this.fonts[D].monoCase.w,N.offsetWidth!==I?(B-=1,this.fonts[D].loaded=!0):(N=this.fonts[D].sansCase.node,I=this.fonts[D].sansCase.w,N.offsetWidth!==I&&(B-=1,this.fonts[D].loaded=!0)),this.fonts[D].loaded&&(this.fonts[D].sansCase.parent.parentNode.removeChild(this.fonts[D].sansCase.parent),this.fonts[D].monoCase.parent.parentNode.removeChild(this.fonts[D].monoCase.parent)));B!==0&&Date.now()-this.initTime<s?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function R(D,U){var N=document.body&&U?"svg":"canvas",I,B=getFontProperties(D);if(N==="svg"){var z=createNS("text");z.style.fontSize="100px",z.setAttribute("font-family",D.fFamily),z.setAttribute("font-style",B.style),z.setAttribute("font-weight",B.weight),z.textContent="1",D.fClass?(z.style.fontFamily="inherit",z.setAttribute("class",D.fClass)):z.style.fontFamily=D.fFamily,U.appendChild(z),I=z}else{var K=new OffscreenCanvas(500,500).getContext("2d");K.font=B.style+" "+B.weight+" 100px "+D.fFamily,I=K}function st(ht){return N==="svg"?(I.textContent=ht,I.getComputedTextLength()):I.measureText(ht).width}return{measureText:st}}function P(D,U){if(!D){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=D.list;return}if(!document.body){this.isLoaded=!0,D.list.forEach(function(It){It.helper=R(It),It.cache={}}),this.fonts=D.list;return}var N=D.list,I,B=N.length,z=B;for(I=0;I<B;I+=1){var K=!0,st,ht;if(N[I].loaded=!1,N[I].monoCase=A(N[I].fFamily,"monospace"),N[I].sansCase=A(N[I].fFamily,"sans-serif"),!N[I].fPath)N[I].loaded=!0,z-=1;else if(N[I].fOrigin==="p"||N[I].origin===3){if(st=document.querySelectorAll('style[f-forigin="p"][f-family="'+N[I].fFamily+'"], style[f-origin="3"][f-family="'+N[I].fFamily+'"]'),st.length>0&&(K=!1),K){var xt=createTag("style");xt.setAttribute("f-forigin",N[I].fOrigin),xt.setAttribute("f-origin",N[I].origin),xt.setAttribute("f-family",N[I].fFamily),xt.type="text/css",xt.innerText="@font-face {font-family: "+N[I].fFamily+"; font-style: normal; src: url('"+N[I].fPath+"');}",U.appendChild(xt)}}else if(N[I].fOrigin==="g"||N[I].origin===1){for(st=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ht=0;ht<st.length;ht+=1)st[ht].href.indexOf(N[I].fPath)!==-1&&(K=!1);if(K){var mt=createTag("link");mt.setAttribute("f-forigin",N[I].fOrigin),mt.setAttribute("f-origin",N[I].origin),mt.type="text/css",mt.rel="stylesheet",mt.href=N[I].fPath,document.body.appendChild(mt)}}else if(N[I].fOrigin==="t"||N[I].origin===2){for(st=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ht=0;ht<st.length;ht+=1)N[I].fPath===st[ht].src&&(K=!1);if(K){var Rt=createTag("link");Rt.setAttribute("f-forigin",N[I].fOrigin),Rt.setAttribute("f-origin",N[I].origin),Rt.setAttribute("rel","stylesheet"),Rt.setAttribute("href",N[I].fPath),U.appendChild(Rt)}}N[I].helper=R(N[I],U),N[I].cache={},this.fonts.push(N[I])}z===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function E(D){if(D){this.chars||(this.chars=[]);var U,N=D.length,I,B=this.chars.length,z;for(U=0;U<N;U+=1){for(I=0,z=!1;I<B;)this.chars[I].style===D[U].style&&this.chars[I].fFamily===D[U].fFamily&&this.chars[I].ch===D[U].ch&&(z=!0),I+=1;z||(this.chars.push(D[U]),B+=1)}}}function T(D,U,N){for(var I=0,B=this.chars.length;I<B;){if(this.chars[I].ch===D&&this.chars[I].style===U&&this.chars[I].fFamily===N)return this.chars[I];I+=1}return(typeof D=="string"&&D.charCodeAt(0)!==13||!D)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",D,U,N)),t}function C(D,U,N){var I=this.getFontByName(U),B=D;if(!I.cache[B]){var z=I.helper;if(D===" "){var K=z.measureText("|"+D+"|"),st=z.measureText("||");I.cache[B]=(K-st)/100}else I.cache[B]=z.measureText(D)/100}return I.cache[B]*N}function M(D){for(var U=0,N=this.fonts.length;U<N;){if(this.fonts[U].fName===D)return this.fonts[U];U+=1}return this.fonts[0]}function j(D){var U=0,N=D.charCodeAt(0);if(N>=55296&&N<=56319){var I=D.charCodeAt(1);I>=56320&&I<=57343&&(U=(N-55296)*1024+I-56320+65536)}return U}function L(D,U){var N=D.toString(16)+U.toString(16);return b.indexOf(N)!==-1}function O(D){return D===f}function V(D){return D===d}function X(D){var U=j(D);return U>=p&&U<=g}function tt(D){return X(D.substr(0,2))&&X(D.substr(2,2))}function Y(D){return e.indexOf(D)!==-1}function Q(D,U){var N=j(D.substr(U,2));if(N!==n)return!1;var I=0;for(U+=2;I<5;){if(N=j(D.substr(U,2)),N<o||N>c)return!1;I+=1,U+=2}return j(D.substr(U,2))===i}function ct(){this.isLoaded=!0}var nt=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};nt.isModifier=L,nt.isZeroWidthJoiner=O,nt.isFlagEmoji=tt,nt.isRegionalCode=X,nt.isCombinedCharacter=Y,nt.isRegionalFlag=Q,nt.isVariationSelector=V,nt.BLACK_FLAG_CODE_POINT=n;var J={addChars:E,addFonts:P,getCharData:T,getFontByName:M,measureText:C,checkLoadedFonts:_,setIsLoaded:ct};return nt.prototype=J,nt}();function SlotManager(s){this.animationData=s}SlotManager.prototype.getProp=function(s){return this.animationData.slots&&this.animationData.slots[s.sid]?Object.assign(s,this.animationData.slots[s.sid].p):s};function slotFactory(s){return new SlotManager(s)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){this.renderableComponents.indexOf(t)===-1&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){this.renderableComponents.indexOf(t)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var s={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return s[t]||""}}();function SliderEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,0,0,e)}function AngleEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,0,0,e)}function ColorEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,1,0,e)}function PointEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,1,0,e)}function LayerIndexEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,0,0,e)}function MaskIndexEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,0,0,e)}function CheckboxEffect(s,t,e){this.p=PropertyFactory.getProp(t,s.v,0,0,e)}function NoValueEffect(){this.p={}}function EffectsManager(s,t){var e=s.ef||[];this.effectElements=[];var n,i=e.length,o;for(n=0;n<i;n+=1)o=new GroupEffect(e[n],t),this.effectElements.push(o)}function GroupEffect(s,t){this.init(s,t)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(s,t){this.data=s,this.effectElements=[],this.initDynamicPropertyContainer(t);var e,n=this.data.ef.length,i,o=this.data.ef;for(e=0;e<n;e+=1){switch(i=null,o[e].ty){case 0:i=new SliderEffect(o[e],t,this);break;case 1:i=new AngleEffect(o[e],t,this);break;case 2:i=new ColorEffect(o[e],t,this);break;case 3:i=new PointEffect(o[e],t,this);break;case 4:case 7:i=new CheckboxEffect(o[e],t,this);break;case 10:i=new LayerIndexEffect(o[e],t,this);break;case 11:i=new MaskIndexEffect(o[e],t,this);break;case 5:i=new EffectsManager(o[e],t);break;default:i=new NoValueEffect(o[e]);break}i&&this.effectElements.push(i)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if(this.data.masksProperties[t].mode!=="n"&&this.data.masksProperties[t].cl!==!1)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var e=t("layer"),n=t("effects"),i=t("shape"),o=t("text"),c=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var d=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(d),this.data.ty===0||this.data.xt?this.compInterface=c(this):this.data.ty===4?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=o(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm),e=this.baseElement||this.layerElement;e.style["mix-blend-mode"]=t},initBaseData:function(t,e,n){this.globalData=e,this.comp=n,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var n,i=this.dynamicProperties.length;for(n=0;n<i;n+=1)(e||this._isParent&&this.dynamicProperties[n].propType==="transform")&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&this.dynamicProperties.push(t)}};function FootageElement(s,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(s.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(s,t,e)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var s=getExpressionInterfaces();if(s){var t=s("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(s,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(s.refId),this.initBaseData(s,t,e),this._isPlaying=!1,this._canPlay=!1;var n=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(n),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,s.au&&s.au.lv?s.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(s){if(this.prepareRenderableFrame(s,!0),this.prepareProperties(s,!0),this.tm._placeholder)this._currentTime=s/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var e=this._volume*this._volumeMultiplier;this._previousVolume!==e&&(this._previousVolume=e,this.audio.volume(e))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(s){this.audio.rate(s)},AudioElement.prototype.volume=function(s){this._volumeMultiplier=s,this._previousVolume=s*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(s){var t,e=this.layers.length,n;for(this.completeLayers=!0,t=e-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t],n.ip-n.st<=s-this.layers[t].st&&n.op-n.st>s-this.layers[t].st&&this.buildItem(t)),this.completeLayers=this.elements[t]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(s){switch(s.ty){case 2:return this.createImage(s);case 0:return this.createComp(s);case 1:return this.createSolid(s);case 3:return this.createNull(s);case 4:return this.createShape(s);case 5:return this.createText(s);case 6:return this.createAudio(s);case 13:return this.createCamera(s);case 15:return this.createFootage(s);default:return this.createNull(s)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(s){return new AudioElement(s,this.globalData,this)},BaseRenderer.prototype.createFootage=function(s){return new FootageElement(s,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var s,t=this.layers.length;for(s=0;s<t;s+=1)this.buildItem(s);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(s){this.completeLayers=!1;var t,e=s.length,n,i=this.layers.length;for(t=0;t<e;t+=1)for(n=0;n<i;){if(this.layers[n].id===s[t].id){this.layers[n]=s[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(s){this.globalData.projectInterface=s},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(s,t,e){for(var n=this.elements,i=this.layers,o=0,c=i.length;o<c;)i[o].ind==t&&(!n[o]||n[o]===!0?(this.buildItem(o),this.addPendingElement(s)):(e.push(n[o]),n[o].setAsParent(),i[o].parent!==void 0?this.buildElementParenting(s,i[o].parent,e):s.setHierarchy(e))),o+=1},BaseRenderer.prototype.addPendingElement=function(s){this.pendingElements.push(s)},BaseRenderer.prototype.searchExtraCompositions=function(s){var t,e=s.length;for(t=0;t<e;t+=1)if(s[t].xt){var n=this.createComp(s[t]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.getElementById=function(s){var t,e=this.elements.length;for(t=0;t<e;t+=1)if(this.elements[t].data.ind===s)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(s){var t=s.shift(),e;if(typeof t=="number")e=this.elements[t];else{var n,i=this.elements.length;for(n=0;n<i;n+=1)if(this.elements[n].data.nm===t){e=this.elements[n];break}}return s.length===0?e:e.getElementByPath(s)},BaseRenderer.prototype.setupGlobalData=function(s,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(s),this.globalData.fontManager.addChars(s.chars),this.globalData.fontManager.addFonts(s.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=s.fr,this.globalData.nm=s.nm,this.globalData.compSize={w:s.w,h:s.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var t=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:t,localMat:t,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,n=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<i;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),n=0;n<i;n+=1)e.multiply(this.hierarchy[n].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var t=0,e=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;t<e;)this.localTransforms[t]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[t]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),t+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),t=1;t<e;t+=1){var i=this.localTransforms[t].matrix;n.multiply(i)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var o=this.finalTransform.localOpacity;for(t=0;t<e;t+=1)o*=this.localTransforms[t].opacity*.01;this.finalTransform.localOpacity=o}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var t=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(t.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var e=0,n=t.length;for(e=0;e<n;e+=1)this.localTransforms.push(t[e])}}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var n=!0,i=this.comp;n;)i.finalTransform?(i.data.hasMask&&e.splice(0,0,i.finalTransform),i=i.comp):n=!1;var o,c=e.length,d;for(o=0;o<c;o+=1)d=e[o].mat.applyToPointArray(0,0,0),t=[t[0]-d[0],t[1]-d[1],0];return t},mHelper:new Matrix};function MaskElement(s,t,e){this.data=s,this.element=t,this.globalData=e,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,i,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var c,d=this.masksProperties,f=0,p=[],g,b,x=createElementID(),A,_,R,P,E="clipPath",T="clip-path";for(i=0;i<o;i+=1)if((d[i].mode!=="a"&&d[i].mode!=="n"||d[i].inv||d[i].o.k!==100||d[i].o.x)&&(E="mask",T="mask"),(d[i].mode==="s"||d[i].mode==="i")&&f===0?(A=createNS("rect"),A.setAttribute("fill","#ffffff"),A.setAttribute("width",this.element.comp.data.w||0),A.setAttribute("height",this.element.comp.data.h||0),p.push(A)):A=null,c=createNS("path"),d[i].mode==="n")this.viewData[i]={op:PropertyFactory.getProp(this.element,d[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[i],3),elem:c,lastPath:""},n.appendChild(c);else{f+=1,c.setAttribute("fill",d[i].mode==="s"?"#000000":"#ffffff"),c.setAttribute("clip-rule","nonzero");var C;if(d[i].x.k!==0?(E="mask",T="mask",P=PropertyFactory.getProp(this.element,d[i].x,0,null,this.element),C=createElementID(),_=createNS("filter"),_.setAttribute("id",C),R=createNS("feMorphology"),R.setAttribute("operator","erode"),R.setAttribute("in","SourceGraphic"),R.setAttribute("radius","0"),_.appendChild(R),n.appendChild(_),c.setAttribute("stroke",d[i].mode==="s"?"#000000":"#ffffff")):(R=null,P=null),this.storedData[i]={elem:c,x:P,expan:R,lastPath:"",lastOperator:"",filterId:C,lastRadius:0},d[i].mode==="i"){b=p.length;var M=createNS("g");for(g=0;g<b;g+=1)M.appendChild(p[g]);var j=createNS("mask");j.setAttribute("mask-type","alpha"),j.setAttribute("id",x+"_"+f),j.appendChild(c),n.appendChild(j),M.setAttribute("mask","url("+getLocationHref()+"#"+x+"_"+f+")"),p.length=0,p.push(M)}else p.push(c);d[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:c,lastPath:"",op:PropertyFactory.getProp(this.element,d[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[i],3),invRect:A},this.viewData[i].prop.k||this.drawPath(d[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(E),o=p.length,i=0;i<o;i+=1)this.maskElement.appendChild(p[i]);f>0&&(this.maskElement.setAttribute("id",x),this.element.maskedElement.setAttribute(T,"url("+getLocationHref()+"#"+x+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(s){return this.viewData[s].prop},MaskElement.prototype.renderFrame=function(s){var t=this.element.finalTransform.mat,e,n=this.masksProperties.length;for(e=0;e<n;e+=1)if((this.viewData[e].prop._mdf||s)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||s)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),this.masksProperties[e].mode!=="n"&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||s)&&this.viewData[e].invRect.setAttribute("transform",t.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||s))){var i=this.storedData[e].expan;this.storedData[e].x.v<0?(this.storedData[e].lastOperator!=="erode"&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),i.setAttribute("radius",-this.storedData[e].x.v)):(this.storedData[e].lastOperator!=="dilate"&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",this.storedData[e].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var s="M0,0 ";return s+=" h"+this.globalData.compSize.w,s+=" v"+this.globalData.compSize.h,s+=" h-"+this.globalData.compSize.w,s+=" v-"+this.globalData.compSize.h+" ",s},MaskElement.prototype.drawPath=function(s,t,e){var n=" M"+t.v[0][0]+","+t.v[0][1],i,o;for(o=t._length,i=1;i<o;i+=1)n+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[i][0]+","+t.i[i][1]+" "+t.v[i][0]+","+t.v[i][1];if(t.c&&o>1&&(n+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),e.lastPath!==n){var c="";e.elem&&(t.c&&(c=s.inv?this.solidPath+n:n),e.elem.setAttribute("d",c)),e.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var s={};s.createFilter=t,s.createAlphaToLuminanceFilter=e;function t(n,i){var o=createNS("filter");return o.setAttribute("id",n),i!==!0&&(o.setAttribute("filterUnits","objectBoundingBox"),o.setAttribute("x","0%"),o.setAttribute("y","0%"),o.setAttribute("width","100%"),o.setAttribute("height","100%")),o}function e(){var n=createNS("feColorMatrix");return n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),n}return s}(),featureSupport=function(){var s={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(s.maskType=!1),/firefox/i.test(navigator.userAgent)&&(s.svgLumaHidden=!1),s}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(s){var t,e="SourceGraphic",n=s.data.ef?s.data.ef.length:0,i=createElementID(),o=filtersFactory.createFilter(i,!0),c=0;this.filters=[];var d;for(t=0;t<n;t+=1){d=null;var f=s.data.ef[t].ty;if(registeredEffects$1[f]){var p=registeredEffects$1[f].effect;d=new p(o,s.effectsManager.effectElements[t],s,idPrefix+c,e),e=idPrefix+c,registeredEffects$1[f].countsAsEffect&&(c+=1)}d&&this.filters.push(d)}c&&(s.globalData.defs.appendChild(o),s.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+i+")")),this.filters.length&&s.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(s){var t,e=this.filters.length;for(t=0;t<e;t+=1)this.filters[t].renderFrame(s)},SVGEffects.prototype.getEffects=function(s){var t,e=this.filters.length,n=[];for(t=0;t<e;t+=1)this.filters[t].type===s&&n.push(this.filters[t]);return n};function registerEffect$1(s,t,e){registeredEffects$1[s]={effect:t,countsAsEffect:e}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("g");e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var n=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var o=createElementID();if(n.setAttribute("id",o),n.appendChild(i),this.globalData.defs.appendChild(n),this.checkMasks()){var c=createNS("g");c.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),c.appendChild(this.layerElement),this.transformedElement=c,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(t){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[t]){var e=this.layerId+"_"+t,n,i,o,c;if(t===1||t===3){var d=createNS("mask");d.setAttribute("id",e),d.setAttribute("mask-type",t===3?"luminance":"alpha"),o=createNS("use"),o.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),d.appendChild(o),this.globalData.defs.appendChild(d),!featureSupport.maskType&&t===1&&(d.setAttribute("mask-type","luminance"),n=createElementID(),i=filtersFactory.createFilter(n),this.globalData.defs.appendChild(i),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),c=createNS("g"),c.appendChild(o),d.appendChild(c),c.setAttribute("filter","url("+getLocationHref()+"#"+n+")"))}else if(t===2){var f=createNS("mask");f.setAttribute("id",e),f.setAttribute("mask-type","alpha");var p=createNS("g");f.appendChild(p),n=createElementID(),i=filtersFactory.createFilter(n);var g=createNS("feComponentTransfer");g.setAttribute("in","SourceGraphic"),i.appendChild(g);var b=createNS("feFuncA");b.setAttribute("type","table"),b.setAttribute("tableValues","1.0 0.0"),g.appendChild(b),this.globalData.defs.appendChild(i);var x=createNS("rect");x.setAttribute("width",this.comp.data.w),x.setAttribute("height",this.comp.data.h),x.setAttribute("x","0"),x.setAttribute("y","0"),x.setAttribute("fill","#ffffff"),x.setAttribute("opacity","0"),p.setAttribute("filter","url("+getLocationHref()+"#"+n+")"),p.appendChild(x),o=createNS("use"),o.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),p.appendChild(o),featureSupport.maskType||(f.setAttribute("mask-type","luminance"),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),c=createNS("g"),p.appendChild(x),c.appendChild(this.layerElement),p.appendChild(c)),this.globalData.defs.appendChild(f)}this.matteMasks[t]=e}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var s={initElement:function(e,n,i){this.initFrame(),this.initBaseData(e,n,i),this.initTransform(e,n,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var e=this.baseElement||this.layerElement;e.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var e=this.baseElement||this.layerElement;e.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(s)],RenderableDOMElement)})();function IImageElement(s,t,e){this.assetData=t.getAssetData(s.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(s,t,e),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(s,t){this.elem=s,this.pos=t}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(t){var e,n=this.shapeModifiers.length;for(e=0;e<n;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=0,n=this.shapeModifiers.length;e<n;)if(this.shapeModifiers[e].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();e=this.shapeModifiers.length;var n;for(t=e-1;t>=0&&(n=this.shapeModifiers[t].processShapes(this._isFirstFrame),!n);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,n=0,i=e.length;n<i;){if(e[n].elem===t)return e[n].pos;n+=1}return 0},addProcessedElement:function(t,e){for(var n=this.processedElements,i=n.length;i;)if(i-=1,n[i].elem===t){n[i].pos=e;return}n.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(s,t,e){this.caches=[],this.styles=[],this.transformers=s,this.lStr="",this.sh=e,this.lvl=t,this._isAnimated=!!e.k;for(var n=0,i=s.length;n<i;){if(s[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(s,t){this.data=s,this.type=s.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=s.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(s,t,e,n){this.elem=s,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=e,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var i,o=t.length||0,c;for(i=0;i<o;i+=1)c=PropertyFactory.getProp(s,t[i].v,0,0,this),this.k=c.k||this.k,this.dataProps[i]={n:t[i].n,p:c};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(s){if(!(this.elem.globalData.frameId===this.frameId&&!s)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||s,this._mdf)){var t=0,e=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),t=0;t<e;t+=1)this.dataProps[t].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(s,t,e){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,t.o,0,.01,this),this.w=PropertyFactory.getProp(s,t.w,0,null,this),this.d=new DashProperty(s,t.d||{},"svg",this),this.c=PropertyFactory.getProp(s,t.c,1,255,this),this.style=e,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(s,t,e){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(s,t.o,0,.01,this),this.c=PropertyFactory.getProp(s,t.c,1,255,this),this.style=e}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(s,t,e){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.style=e}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(s,t,e){this.data=t,this.c=createTypedArray("uint8c",t.p*4);var n=t.k.k[0].s?t.k.k[0].s.length-t.p*4:t.k.k.length-t.p*4;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(e),this.prop=PropertyFactory.getProp(s,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(s,t){for(var e=0,n=this.o.length/2,i;e<n;){if(i=Math.abs(s[e*4]-s[t*4+e*2]),i>.01)return!1;e+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var s=0,t=this.data.k.k.length;s<t;){if(!this.comparePoints(this.data.k.k[s].s,this.data.p))return!1;s+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(s){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||s){var t,e=this.data.p*4,n,i;for(t=0;t<e;t+=1)n=t%4===0?100:255,i=Math.round(this.prop.v[t]*n),this.c[t]!==i&&(this.c[t]=i,this._cmdf=!s);if(this.o.length)for(e=this.prop.v.length,t=this.data.p*4;t<e;t+=1)n=t%2===0?100:1,i=t%2===0?Math.round(this.prop.v[t]*100):this.prop.v[t],this.o[t-this.data.p*4]!==i&&(this.o[t-this.data.p*4]=i,this._omdf=!s);this._mdf=!s}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(s,t,e){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.initGradientData(s,t,e)}SVGGradientFillStyleData.prototype.initGradientData=function(s,t,e){this.o=PropertyFactory.getProp(s,t.o,0,.01,this),this.s=PropertyFactory.getProp(s,t.s,1,null,this),this.e=PropertyFactory.getProp(s,t.e,1,null,this),this.h=PropertyFactory.getProp(s,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(s,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(s,t.g,this),this.style=e,this.stops=[],this.setGradientData(e.pElem,t),this.setGradientOpacity(t,e),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(s,t){var e=createElementID(),n=createNS(t.t===1?"linearGradient":"radialGradient");n.setAttribute("id",e),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var i=[],o,c,d;for(d=t.g.p*4,c=0;c<d;c+=4)o=createNS("stop"),n.appendChild(o),i.push(o);s.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+e+")"),this.gf=n,this.cst=i},SVGGradientFillStyleData.prototype.setGradientOpacity=function(s,t){if(this.g._hasOpacity&&!this.g._collapsable){var e,n,i,o=createNS("mask"),c=createNS("path");o.appendChild(c);var d=createElementID(),f=createElementID();o.setAttribute("id",f);var p=createNS(s.t===1?"linearGradient":"radialGradient");p.setAttribute("id",d),p.setAttribute("spreadMethod","pad"),p.setAttribute("gradientUnits","userSpaceOnUse"),i=s.g.k.k[0].s?s.g.k.k[0].s.length:s.g.k.k.length;var g=this.stops;for(n=s.g.p*4;n<i;n+=2)e=createNS("stop"),e.setAttribute("stop-color","rgb(255,255,255)"),p.appendChild(e),g.push(e);c.setAttribute(s.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+d+")"),s.ty==="gs"&&(c.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),c.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),s.lj===1&&c.setAttribute("stroke-miterlimit",s.ml)),this.of=p,this.ms=o,this.ost=g,this.maskId=f,t.msElem=c}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(s,t,e){this.initDynamicPropertyContainer(s),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(s,t.w,0,null,this),this.d=new DashProperty(s,t.d||{},"svg",this),this.initGradientData(s,t,e),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(s,t,e){this.transform={mProps:s,op:t,container:e},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(t,e,n,i){if(e===0)return"";var o=t.o,c=t.i,d=t.v,f,p=" M"+i.applyToPointStringified(d[0][0],d[0][1]);for(f=1;f<e;f+=1)p+=" C"+i.applyToPointStringified(o[f-1][0],o[f-1][1])+" "+i.applyToPointStringified(c[f][0],c[f][1])+" "+i.applyToPointStringified(d[f][0],d[f][1]);return n&&e&&(p+=" C"+i.applyToPointStringified(o[f-1][0],o[f-1][1])+" "+i.applyToPointStringified(c[0][0],c[0][1])+" "+i.applyToPointStringified(d[0][0],d[0][1]),p+="z"),p},SVGElementsRenderer=function(){var s=new Matrix,t=new Matrix,e={createRenderFunction:n};function n(b){switch(b.ty){case"fl":return d;case"gf":return p;case"gs":return f;case"st":return g;case"sh":case"el":case"rc":case"sr":return c;case"tr":return i;case"no":return o;default:return null}}function i(b,x,A){(A||x.transform.op._mdf)&&x.transform.container.setAttribute("opacity",x.transform.op.v),(A||x.transform.mProps._mdf)&&x.transform.container.setAttribute("transform",x.transform.mProps.v.to2dCSS())}function o(){}function c(b,x,A){var _,R,P,E,T,C,M=x.styles.length,j=x.lvl,L,O,V,X;for(C=0;C<M;C+=1){if(E=x.sh._mdf||A,x.styles[C].lvl<j){for(O=t.reset(),V=j-x.styles[C].lvl,X=x.transformers.length-1;!E&&V>0;)E=x.transformers[X].mProps._mdf||E,V-=1,X-=1;if(E)for(V=j-x.styles[C].lvl,X=x.transformers.length-1;V>0;)O.multiply(x.transformers[X].mProps.v),V-=1,X-=1}else O=s;if(L=x.sh.paths,R=L._length,E){for(P="",_=0;_<R;_+=1)T=L.shapes[_],T&&T._length&&(P+=buildShapeString(T,T._length,T.c,O));x.caches[C]=P}else P=x.caches[C];x.styles[C].d+=b.hd===!0?"":P,x.styles[C]._mdf=E||x.styles[C]._mdf}}function d(b,x,A){var _=x.style;(x.c._mdf||A)&&_.pElem.setAttribute("fill","rgb("+bmFloor(x.c.v[0])+","+bmFloor(x.c.v[1])+","+bmFloor(x.c.v[2])+")"),(x.o._mdf||A)&&_.pElem.setAttribute("fill-opacity",x.o.v)}function f(b,x,A){p(b,x,A),g(b,x,A)}function p(b,x,A){var _=x.gf,R=x.g._hasOpacity,P=x.s.v,E=x.e.v;if(x.o._mdf||A){var T=b.ty==="gf"?"fill-opacity":"stroke-opacity";x.style.pElem.setAttribute(T,x.o.v)}if(x.s._mdf||A){var C=b.t===1?"x1":"cx",M=C==="x1"?"y1":"cy";_.setAttribute(C,P[0]),_.setAttribute(M,P[1]),R&&!x.g._collapsable&&(x.of.setAttribute(C,P[0]),x.of.setAttribute(M,P[1]))}var j,L,O,V;if(x.g._cmdf||A){j=x.cst;var X=x.g.c;for(O=j.length,L=0;L<O;L+=1)V=j[L],V.setAttribute("offset",X[L*4]+"%"),V.setAttribute("stop-color","rgb("+X[L*4+1]+","+X[L*4+2]+","+X[L*4+3]+")")}if(R&&(x.g._omdf||A)){var tt=x.g.o;for(x.g._collapsable?j=x.cst:j=x.ost,O=j.length,L=0;L<O;L+=1)V=j[L],x.g._collapsable||V.setAttribute("offset",tt[L*2]+"%"),V.setAttribute("stop-opacity",tt[L*2+1])}if(b.t===1)(x.e._mdf||A)&&(_.setAttribute("x2",E[0]),_.setAttribute("y2",E[1]),R&&!x.g._collapsable&&(x.of.setAttribute("x2",E[0]),x.of.setAttribute("y2",E[1])));else{var Y;if((x.s._mdf||x.e._mdf||A)&&(Y=Math.sqrt(Math.pow(P[0]-E[0],2)+Math.pow(P[1]-E[1],2)),_.setAttribute("r",Y),R&&!x.g._collapsable&&x.of.setAttribute("r",Y)),x.s._mdf||x.e._mdf||x.h._mdf||x.a._mdf||A){Y||(Y=Math.sqrt(Math.pow(P[0]-E[0],2)+Math.pow(P[1]-E[1],2)));var Q=Math.atan2(E[1]-P[1],E[0]-P[0]),ct=x.h.v;ct>=1?ct=.99:ct<=-1&&(ct=-.99);var nt=Y*ct,J=Math.cos(Q+x.a.v)*nt+P[0],D=Math.sin(Q+x.a.v)*nt+P[1];_.setAttribute("fx",J),_.setAttribute("fy",D),R&&!x.g._collapsable&&(x.of.setAttribute("fx",J),x.of.setAttribute("fy",D))}}}function g(b,x,A){var _=x.style,R=x.d;R&&(R._mdf||A)&&R.dashStr&&(_.pElem.setAttribute("stroke-dasharray",R.dashStr),_.pElem.setAttribute("stroke-dashoffset",R.dashoffset[0])),x.c&&(x.c._mdf||A)&&_.pElem.setAttribute("stroke","rgb("+bmFloor(x.c.v[0])+","+bmFloor(x.c.v[1])+","+bmFloor(x.c.v[2])+")"),(x.o._mdf||A)&&_.pElem.setAttribute("stroke-opacity",x.o.v),(x.w._mdf||A)&&(_.pElem.setAttribute("stroke-width",x.w.v),_.msElem&&_.msElem.setAttribute("stroke-width",x.w.v))}return e}();function SVGShapeElement(s,t,e){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(s,t,e),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var s,t=this.shapes.length,e,n,i=this.stylesList.length,o,c=[],d=!1;for(n=0;n<i;n+=1){for(o=this.stylesList[n],d=!1,c.length=0,s=0;s<t;s+=1)e=this.shapes[s],e.styles.indexOf(o)!==-1&&(c.push(e),d=e._isAnimated||d);c.length>1&&d&&this.setShapesAsAnimated(c)}},SVGShapeElement.prototype.setShapesAsAnimated=function(s){var t,e=s.length;for(t=0;t<e;t+=1)s[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(s,t){var e,n=new SVGStyleData(s,t),i=n.pElem;if(s.ty==="st")e=new SVGStrokeStyleData(this,s,n);else if(s.ty==="fl")e=new SVGFillStyleData(this,s,n);else if(s.ty==="gf"||s.ty==="gs"){var o=s.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;e=new o(this,s,n),this.globalData.defs.appendChild(e.gf),e.maskId&&(this.globalData.defs.appendChild(e.ms),this.globalData.defs.appendChild(e.of),i.setAttribute("mask","url("+getLocationHref()+"#"+e.maskId+")"))}else s.ty==="no"&&(e=new SVGNoStyleData(this,s,n));return(s.ty==="st"||s.ty==="gs")&&(i.setAttribute("stroke-linecap",lineCapEnum[s.lc||2]),i.setAttribute("stroke-linejoin",lineJoinEnum[s.lj||2]),i.setAttribute("fill-opacity","0"),s.lj===1&&i.setAttribute("stroke-miterlimit",s.ml)),s.r===2&&i.setAttribute("fill-rule","evenodd"),s.ln&&i.setAttribute("id",s.ln),s.cl&&i.setAttribute("class",s.cl),s.bm&&(i.style["mix-blend-mode"]=getBlendMode(s.bm)),this.stylesList.push(n),this.addToAnimatedContents(s,e),e},SVGShapeElement.prototype.createGroupElement=function(s){var t=new ShapeGroupData;return s.ln&&t.gr.setAttribute("id",s.ln),s.cl&&t.gr.setAttribute("class",s.cl),s.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(s.bm)),t},SVGShapeElement.prototype.createTransformElement=function(s,t){var e=TransformPropertyFactory.getTransformProperty(this,s,this),n=new SVGTransformData(e,e.o,t);return this.addToAnimatedContents(s,n),n},SVGShapeElement.prototype.createShapeElement=function(s,t,e){var n=4;s.ty==="rc"?n=5:s.ty==="el"?n=6:s.ty==="sr"&&(n=7);var i=ShapePropertyFactory.getShapeProp(this,s,n,this),o=new SVGShapeData(t,e,i);return this.shapes.push(o),this.addShapeToModifiers(o),this.addToAnimatedContents(s,o),o},SVGShapeElement.prototype.addToAnimatedContents=function(s,t){for(var e=0,n=this.animatedContents.length;e<n;){if(this.animatedContents[e].element===t)return;e+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(s),element:t,data:s})},SVGShapeElement.prototype.setElementStyles=function(s){var t=s.styles,e,n=this.stylesList.length;for(e=0;e<n;e+=1)t.indexOf(this.stylesList[e])===-1&&!this.stylesList[e].closed&&t.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,t=this.itemsData.length;for(s=0;s<t;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,s=0;s<t;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(s,t,e,n,i,o,c){var d=[].concat(o),f,p=s.length-1,g,b,x=[],A=[],_,R,P;for(f=p;f>=0;f-=1){if(P=this.searchProcessedElement(s[f]),P?t[f]=e[P-1]:s[f]._render=c,s[f].ty==="fl"||s[f].ty==="st"||s[f].ty==="gf"||s[f].ty==="gs"||s[f].ty==="no")P?t[f].style.closed=s[f].hd:t[f]=this.createStyleElement(s[f],i),s[f]._render&&t[f].style.pElem.parentNode!==n&&n.appendChild(t[f].style.pElem),x.push(t[f].style);else if(s[f].ty==="gr"){if(!P)t[f]=this.createGroupElement(s[f]);else for(b=t[f].it.length,g=0;g<b;g+=1)t[f].prevViewData[g]=t[f].it[g];this.searchShapes(s[f].it,t[f].it,t[f].prevViewData,t[f].gr,i+1,d,c),s[f]._render&&t[f].gr.parentNode!==n&&n.appendChild(t[f].gr)}else s[f].ty==="tr"?(P||(t[f]=this.createTransformElement(s[f],n)),_=t[f].transform,d.push(_)):s[f].ty==="sh"||s[f].ty==="rc"||s[f].ty==="el"||s[f].ty==="sr"?(P||(t[f]=this.createShapeElement(s[f],d,i)),this.setElementStyles(t[f])):s[f].ty==="tm"||s[f].ty==="rd"||s[f].ty==="ms"||s[f].ty==="pb"||s[f].ty==="zz"||s[f].ty==="op"?(P?(R=t[f],R.closed=!1):(R=ShapeModifiers.getModifier(s[f].ty),R.init(this,s[f]),t[f]=R,this.shapeModifiers.push(R)),A.push(R)):s[f].ty==="rp"&&(P?(R=t[f],R.closed=!0):(R=ShapeModifiers.getModifier(s[f].ty),t[f]=R,R.init(this,s,f,t),this.shapeModifiers.push(R),c=!1),A.push(R));this.addProcessedElement(s[f],f+1)}for(p=x.length,f=0;f<p;f+=1)x[f].closed=!0;for(p=A.length,f=0;f<p;f+=1)A[f].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var s,t=this.stylesList.length;for(s=0;s<t;s+=1)this.stylesList[s].reset();for(this.renderShape(),s=0;s<t;s+=1)(this.stylesList[s]._mdf||this._isFirstFrame)&&(this.stylesList[s].msElem&&(this.stylesList[s].msElem.setAttribute("d",this.stylesList[s].d),this.stylesList[s].d="M0 0"+this.stylesList[s].d),this.stylesList[s].pElem.setAttribute("d",this.stylesList[s].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var s,t=this.animatedContents.length,e;for(s=0;s<t;s+=1)e=this.animatedContents[s],(this._isFirstFrame||e.element._isAnimated)&&e.data!==!0&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(s,t,e,n,i,o){this.o=s,this.sw=t,this.sc=e,this.fc=n,this.m=i,this.p=o,this._mdf={o:!0,sw:!!t,sc:!!e,fc:!!n,m:!0,p:!0}}LetterProps.prototype.update=function(s,t,e,n,i,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var c=!1;return this.o!==s&&(this.o=s,this._mdf.o=!0,c=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,c=!0),this.sc!==e&&(this.sc=e,this._mdf.sc=!0,c=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,c=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,c=!0),o.length&&(this.p[0]!==o[0]||this.p[1]!==o[1]||this.p[4]!==o[4]||this.p[5]!==o[5]||this.p[12]!==o[12]||this.p[13]!==o[13])&&(this.p=o,this._mdf.p=!0,c=!0),c};function TextProperty(s,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=s.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=s,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e]);return s},TextProperty.prototype.setCurrentData=function(s){s.__complete||this.completeTextData(s),this.currentData=s,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(s){this.effectsSequence.push(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(s){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!s)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,e=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var n,i=this.effectsSequence.length,o=s||this.data.d.k[this.keysIndex].s;for(n=0;n<i;n+=1)e!==this.keysIndex?o=this.effectsSequence[n](o,o.t):o=this.effectsSequence[n](this.currentData,o.t);t!==o&&this.setCurrentData(o),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var s=this.data.d.k,t=this.elem.comp.renderedFrame,e=0,n=s.length;e<=n-1&&!(e===n-1||s[e+1].t>t);)e+=1;return this.keysIndex!==e&&(this.keysIndex=e),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(s){for(var t=[],e=0,n=s.length,i,o,c=!1,d=!1,f="";e<n;)c=d,d=!1,i=s.charCodeAt(e),f=s.charAt(e),FontManager.isCombinedCharacter(i)?c=!0:i>=55296&&i<=56319?FontManager.isRegionalFlag(s,e)?f=s.substr(e,14):(o=s.charCodeAt(e+1),o>=56320&&o<=57343&&(FontManager.isModifier(i,o)?(f=s.substr(e,2),c=!0):FontManager.isFlagEmoji(s.substr(e,4))?f=s.substr(e,4):f=s.substr(e,2))):i>56319?(o=s.charCodeAt(e+1),FontManager.isVariationSelector(i)&&(c=!0)):FontManager.isZeroWidthJoiner(i)&&(c=!0,d=!0),c?(t[t.length-1]+=f,c=!1):t.push(f),e+=f.length;return t},TextProperty.prototype.completeTextData=function(s){s.__complete=!0;var t=this.elem.globalData.fontManager,e=this.data,n=[],i,o,c,d=0,f,p=e.m.g,g=0,b=0,x=0,A=[],_=0,R=0,P,E,T=t.getFontByName(s.f),C,M=0,j=getFontProperties(T);s.fWeight=j.weight,s.fStyle=j.style,s.finalSize=s.s,s.finalText=this.buildFinalText(s.t),o=s.finalText.length,s.finalLineHeight=s.lh;var L=s.tr/1e3*s.finalSize,O;if(s.sz)for(var V=!0,X=s.sz[0],tt=s.sz[1],Y,Q;V;){Q=this.buildFinalText(s.t),Y=0,_=0,o=Q.length,L=s.tr/1e3*s.finalSize;var ct=-1;for(i=0;i<o;i+=1)O=Q[i].charCodeAt(0),c=!1,Q[i]===" "?ct=i:(O===13||O===3)&&(_=0,c=!0,Y+=s.finalLineHeight||s.finalSize*1.2),t.chars?(C=t.getCharData(Q[i],T.fStyle,T.fFamily),M=c?0:C.w*s.finalSize/100):M=t.measureText(Q[i],s.f,s.finalSize),_+M>X&&Q[i]!==" "?(ct===-1?o+=1:i=ct,Y+=s.finalLineHeight||s.finalSize*1.2,Q.splice(i,ct===i?1:0,"\r"),ct=-1,_=0):(_+=M,_+=L);Y+=T.ascent*s.finalSize/100,this.canResize&&s.finalSize>this.minimumFontSize&&tt<Y?(s.finalSize-=1,s.finalLineHeight=s.finalSize*s.lh/s.s):(s.finalText=Q,o=s.finalText.length,V=!1)}_=-L,M=0;var nt=0,J;for(i=0;i<o;i+=1)if(c=!1,J=s.finalText[i],O=J.charCodeAt(0),O===13||O===3?(nt=0,A.push(_),R=_>R?_:R,_=-2*L,f="",c=!0,x+=1):f=J,t.chars?(C=t.getCharData(J,T.fStyle,t.getFontByName(s.f).fFamily),M=c?0:C.w*s.finalSize/100):M=t.measureText(f,s.f,s.finalSize),J===" "?nt+=M+L:(_+=M+L+nt,nt=0),n.push({l:M,an:M,add:g,n:c,anIndexes:[],val:f,line:x,animatorJustifyOffset:0}),p==2){if(g+=M,f===""||f===" "||i===o-1){for((f===""||f===" ")&&(g-=M);b<=i;)n[b].an=g,n[b].ind=d,n[b].extra=M,b+=1;d+=1,g=0}}else if(p==3){if(g+=M,f===""||i===o-1){for(f===""&&(g-=M);b<=i;)n[b].an=g,n[b].ind=d,n[b].extra=M,b+=1;g=0,d+=1}}else n[d].ind=d,n[d].extra=0,d+=1;if(s.l=n,R=_>R?_:R,A.push(_),s.sz)s.boxWidth=s.sz[0],s.justifyOffset=0;else switch(s.boxWidth=R,s.j){case 1:s.justifyOffset=-s.boxWidth;break;case 2:s.justifyOffset=-s.boxWidth/2;break;default:s.justifyOffset=0}s.lineWidths=A;var D=e.a,U,N;E=D.length;var I,B,z=[];for(P=0;P<E;P+=1){for(U=D[P],U.a.sc&&(s.strokeColorAnim=!0),U.a.sw&&(s.strokeWidthAnim=!0),(U.a.fc||U.a.fh||U.a.fs||U.a.fb)&&(s.fillColorAnim=!0),B=0,I=U.s.b,i=0;i<o;i+=1)N=n[i],N.anIndexes[P]=B,(I==1&&N.val!==""||I==2&&N.val!==""&&N.val!==" "||I==3&&(N.n||N.val==" "||i==o-1)||I==4&&(N.n||i==o-1))&&(U.s.rn===1&&z.push(B),B+=1);e.a[P].s.totalChars=B;var K=-1,st;if(U.s.rn===1)for(i=0;i<o;i+=1)N=n[i],K!=N.anIndexes[P]&&(K=N.anIndexes[P],st=z.splice(Math.floor(Math.random()*z.length),1)[0]),N.anIndexes[P]=st}s.yOffset=s.finalLineHeight||s.finalSize*1.2,s.ls=s.ls||0,s.ascent=T.ascent*s.finalSize/100},TextProperty.prototype.updateDocumentData=function(s,t){t=t===void 0?this.keysIndex:t;var e=this.copyData({},this.data.d.k[t].s);e=this.copyData(e,s),this.data.d.k[t].s=e,this.recalculate(t),this.setCurrentData(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(s){var t=this.data.d.k[s].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(s){this.canResize=s,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(s){this.minimumFontSize=Math.floor(s)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var s=Math.max,t=Math.min,e=Math.floor;function n(o,c){this._currentTextLength=-1,this.k=!1,this.data=c,this.elem=o,this.comp=o.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(o),this.s=PropertyFactory.getProp(o,c.s||{k:0},0,0,this),"e"in c?this.e=PropertyFactory.getProp(o,c.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(o,c.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(o,c.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(o,c.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(o,c.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(o,c.a,0,.01,this),this.dynamicProperties.length||this.getValue()}n.prototype={getMult:function(c){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var d=0,f=0,p=1,g=1;this.ne.v>0?d=this.ne.v/100:f=-this.ne.v/100,this.xe.v>0?p=1-this.xe.v/100:g=1+this.xe.v/100;var b=BezierFactory.getBezierEasing(d,f,p,g).get,x=0,A=this.finalS,_=this.finalE,R=this.data.sh;if(R===2)_===A?x=c>=_?1:0:x=s(0,t(.5/(_-A)+(c-A)/(_-A),1)),x=b(x);else if(R===3)_===A?x=c>=_?0:1:x=1-s(0,t(.5/(_-A)+(c-A)/(_-A),1)),x=b(x);else if(R===4)_===A?x=0:(x=s(0,t(.5/(_-A)+(c-A)/(_-A),1)),x<.5?x*=2:x=1-2*(x-.5)),x=b(x);else if(R===5){if(_===A)x=0;else{var P=_-A;c=t(s(0,c+.5-A),_-A);var E=-P/2+c,T=P/2;x=Math.sqrt(1-E*E/(T*T))}x=b(x)}else R===6?(_===A?x=0:(c=t(s(0,c+.5-A),_-A),x=(1+Math.cos(Math.PI+Math.PI*2*c/(_-A)))/2),x=b(x)):(c>=e(A)&&(c-A<0?x=s(0,t(t(_,1)-(A-c),1)):x=s(0,t(_-c,1))),x=b(x));if(this.sm.v!==100){var C=this.sm.v*.01;C===0&&(C=1e-8);var M=.5-C*.5;x<M?x=0:(x=(x-M)/C,x>1&&(x=1))}return x*this.a.v},getValue:function(c){this.iterateDynamicProperties(),this._mdf=c||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,c&&this.data.r===2&&(this.e.v=this._currentTextLength);var d=this.data.r===2?1:100/this.data.totalChars,f=this.o.v/d,p=this.s.v/d+f,g=this.e.v/d+f;if(p>g){var b=p;p=g,g=b}this.finalS=p,this.finalE=g}},extendPrototype([DynamicPropertyContainer],n);function i(o,c,d){return new n(o,c)}return{getTextSelectorProp:i}}();function TextAnimatorDataProperty(s,t,e){var n={propType:!1},i=PropertyFactory.getProp,o=t.a;this.a={r:o.r?i(s,o.r,0,degToRads,e):n,rx:o.rx?i(s,o.rx,0,degToRads,e):n,ry:o.ry?i(s,o.ry,0,degToRads,e):n,sk:o.sk?i(s,o.sk,0,degToRads,e):n,sa:o.sa?i(s,o.sa,0,degToRads,e):n,s:o.s?i(s,o.s,1,.01,e):n,a:o.a?i(s,o.a,1,0,e):n,o:o.o?i(s,o.o,0,.01,e):n,p:o.p?i(s,o.p,1,0,e):n,sw:o.sw?i(s,o.sw,0,0,e):n,sc:o.sc?i(s,o.sc,1,0,e):n,fc:o.fc?i(s,o.fc,1,0,e):n,fh:o.fh?i(s,o.fh,0,0,e):n,fs:o.fs?i(s,o.fs,0,.01,e):n,fb:o.fb?i(s,o.fb,0,.01,e):n,t:o.t?i(s,o.t,0,0,e):n},this.s=TextSelectorProp.getTextSelectorProp(s,t.s,e),this.s.t=t.s.t}function TextAnimatorProperty(s,t,e){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=s,this._renderType=t,this._elem=e,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(e)}TextAnimatorProperty.prototype.searchProperties=function(){var s,t=this._textData.a.length,e,n=PropertyFactory.getProp;for(s=0;s<t;s+=1)e=this._textData.a[s],this._animatorsData[s]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:n(this._elem,this._textData.p.a,0,0,this),f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:n(this._elem,this._textData.p.r,0,0,this),p:n(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(s,t){if(this.lettersChangedFlag=t,!(!this._mdf&&!this._isFirstFrame&&!t&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var e=this._moreOptions.alignment.v,n=this._animatorsData,i=this._textData,o=this.mHelper,c=this._renderType,d=this.renderedLetters.length,f,p,g,b,x=s.l,A,_,R,P,E,T,C,M,j,L,O,V,X,tt,Y;if(this._hasMaskedPath){if(Y=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Q=Y.v;this._pathData.r.v&&(Q=Q.reverse()),A={tLength:0,segments:[]},b=Q._length-1;var ct;for(V=0,g=0;g<b;g+=1)ct=bez.buildBezierData(Q.v[g],Q.v[g+1],[Q.o[g][0]-Q.v[g][0],Q.o[g][1]-Q.v[g][1]],[Q.i[g+1][0]-Q.v[g+1][0],Q.i[g+1][1]-Q.v[g+1][1]]),A.tLength+=ct.segmentLength,A.segments.push(ct),V+=ct.segmentLength;g=b,Y.v.c&&(ct=bez.buildBezierData(Q.v[g],Q.v[0],[Q.o[g][0]-Q.v[g][0],Q.o[g][1]-Q.v[g][1]],[Q.i[0][0]-Q.v[0][0],Q.i[0][1]-Q.v[0][1]]),A.tLength+=ct.segmentLength,A.segments.push(ct),V+=ct.segmentLength),this._pathData.pi=A}if(A=this._pathData.pi,_=this._pathData.f.v,C=0,T=1,P=0,E=!0,L=A.segments,_<0&&Y.v.c)for(A.tLength<Math.abs(_)&&(_=-Math.abs(_)%A.tLength),C=L.length-1,j=L[C].points,T=j.length-1;_<0;)_+=j[T].partialLength,T-=1,T<0&&(C-=1,j=L[C].points,T=j.length-1);j=L[C].points,M=j[T-1],R=j[T],O=R.partialLength}b=x.length,f=0,p=0;var nt=s.finalSize*1.2*.714,J=!0,D,U,N,I,B;I=n.length;var z,K=-1,st,ht,xt,mt=_,Rt=C,It=T,le=-1,Vt,ye,Re,jt,bt,Ee,xe,Mt,is="",gs=this.defaultPropsArray,Ke;if(s.j===2||s.j===1){var ee=0,Ls=0,Ge=s.j===2?-.5:-1,Je=0,Ds=!0;for(g=0;g<b;g+=1)if(x[g].n){for(ee&&(ee+=Ls);Je<g;)x[Je].animatorJustifyOffset=ee,Je+=1;ee=0,Ds=!0}else{for(N=0;N<I;N+=1)D=n[N].a,D.t.propType&&(Ds&&s.j===2&&(Ls+=D.t.v*Ge),U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),z.length?ee+=D.t.v*z[0]*Ge:ee+=D.t.v*z*Ge);Ds=!1}for(ee&&(ee+=Ls);Je<g;)x[Je].animatorJustifyOffset=ee,Je+=1}for(g=0;g<b;g+=1){if(o.reset(),Vt=1,x[g].n)f=0,p+=s.yOffset,p+=J?1:0,_=mt,J=!1,this._hasMaskedPath&&(C=Rt,T=It,j=L[C].points,M=j[T-1],R=j[T],O=R.partialLength,P=0),is="",Mt="",Ee="",Ke="",gs=this.defaultPropsArray;else{if(this._hasMaskedPath){if(le!==x[g].line){switch(s.j){case 1:_+=V-s.lineWidths[x[g].line];break;case 2:_+=(V-s.lineWidths[x[g].line])/2;break}le=x[g].line}K!==x[g].ind&&(x[K]&&(_+=x[K].extra),_+=x[g].an/2,K=x[g].ind),_+=e[0]*x[g].an*.005;var be=0;for(N=0;N<I;N+=1)D=n[N].a,D.p.propType&&(U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),z.length?be+=D.p.v[0]*z[0]:be+=D.p.v[0]*z),D.a.propType&&(U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),z.length?be+=D.a.v[0]*z[0]:be+=D.a.v[0]*z);for(E=!0,this._pathData.a.v&&(_=x[0].an*.5+(V-this._pathData.f.v-x[0].an*.5-x[x.length-1].an*.5)*K/(b-1),_+=this._pathData.f.v);E;)P+O>=_+be||!j?(X=(_+be-P)/R.partialLength,ht=M.point[0]+(R.point[0]-M.point[0])*X,xt=M.point[1]+(R.point[1]-M.point[1])*X,o.translate(-e[0]*x[g].an*.005,-(e[1]*nt)*.01),E=!1):j&&(P+=R.partialLength,T+=1,T>=j.length&&(T=0,C+=1,L[C]?j=L[C].points:Y.v.c?(T=0,C=0,j=L[C].points):(P-=R.partialLength,j=null)),j&&(M=R,R=j[T],O=R.partialLength));st=x[g].an/2-x[g].add,o.translate(-st,0,0)}else st=x[g].an/2-x[g].add,o.translate(-st,0,0),o.translate(-e[0]*x[g].an*.005,-e[1]*nt*.01,0);for(N=0;N<I;N+=1)D=n[N].a,D.t.propType&&(U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),(f!==0||s.j!==0)&&(this._hasMaskedPath?z.length?_+=D.t.v*z[0]:_+=D.t.v*z:z.length?f+=D.t.v*z[0]:f+=D.t.v*z));for(s.strokeWidthAnim&&(Re=s.sw||0),s.strokeColorAnim&&(s.sc?ye=[s.sc[0],s.sc[1],s.sc[2]]:ye=[0,0,0]),s.fillColorAnim&&s.fc&&(jt=[s.fc[0],s.fc[1],s.fc[2]]),N=0;N<I;N+=1)D=n[N].a,D.a.propType&&(U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),z.length?o.translate(-D.a.v[0]*z[0],-D.a.v[1]*z[1],D.a.v[2]*z[2]):o.translate(-D.a.v[0]*z,-D.a.v[1]*z,D.a.v[2]*z));for(N=0;N<I;N+=1)D=n[N].a,D.s.propType&&(U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),z.length?o.scale(1+(D.s.v[0]-1)*z[0],1+(D.s.v[1]-1)*z[1],1):o.scale(1+(D.s.v[0]-1)*z,1+(D.s.v[1]-1)*z,1));for(N=0;N<I;N+=1){if(D=n[N].a,U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),D.sk.propType&&(z.length?o.skewFromAxis(-D.sk.v*z[0],D.sa.v*z[1]):o.skewFromAxis(-D.sk.v*z,D.sa.v*z)),D.r.propType&&(z.length?o.rotateZ(-D.r.v*z[2]):o.rotateZ(-D.r.v*z)),D.ry.propType&&(z.length?o.rotateY(D.ry.v*z[1]):o.rotateY(D.ry.v*z)),D.rx.propType&&(z.length?o.rotateX(D.rx.v*z[0]):o.rotateX(D.rx.v*z)),D.o.propType&&(z.length?Vt+=(D.o.v*z[0]-Vt)*z[0]:Vt+=(D.o.v*z-Vt)*z),s.strokeWidthAnim&&D.sw.propType&&(z.length?Re+=D.sw.v*z[0]:Re+=D.sw.v*z),s.strokeColorAnim&&D.sc.propType)for(bt=0;bt<3;bt+=1)z.length?ye[bt]+=(D.sc.v[bt]-ye[bt])*z[0]:ye[bt]+=(D.sc.v[bt]-ye[bt])*z;if(s.fillColorAnim&&s.fc){if(D.fc.propType)for(bt=0;bt<3;bt+=1)z.length?jt[bt]+=(D.fc.v[bt]-jt[bt])*z[0]:jt[bt]+=(D.fc.v[bt]-jt[bt])*z;D.fh.propType&&(z.length?jt=addHueToRGB(jt,D.fh.v*z[0]):jt=addHueToRGB(jt,D.fh.v*z)),D.fs.propType&&(z.length?jt=addSaturationToRGB(jt,D.fs.v*z[0]):jt=addSaturationToRGB(jt,D.fs.v*z)),D.fb.propType&&(z.length?jt=addBrightnessToRGB(jt,D.fb.v*z[0]):jt=addBrightnessToRGB(jt,D.fb.v*z))}}for(N=0;N<I;N+=1)D=n[N].a,D.p.propType&&(U=n[N].s,z=U.getMult(x[g].anIndexes[N],i.a[N].s.totalChars),this._hasMaskedPath?z.length?o.translate(0,D.p.v[1]*z[0],-D.p.v[2]*z[1]):o.translate(0,D.p.v[1]*z,-D.p.v[2]*z):z.length?o.translate(D.p.v[0]*z[0],D.p.v[1]*z[1],-D.p.v[2]*z[2]):o.translate(D.p.v[0]*z,D.p.v[1]*z,-D.p.v[2]*z));if(s.strokeWidthAnim&&(Ee=Re<0?0:Re),s.strokeColorAnim&&(xe="rgb("+Math.round(ye[0]*255)+","+Math.round(ye[1]*255)+","+Math.round(ye[2]*255)+")"),s.fillColorAnim&&s.fc&&(Mt="rgb("+Math.round(jt[0]*255)+","+Math.round(jt[1]*255)+","+Math.round(jt[2]*255)+")"),this._hasMaskedPath){if(o.translate(0,-s.ls),o.translate(0,e[1]*nt*.01+p,0),this._pathData.p.v){tt=(R.point[1]-M.point[1])/(R.point[0]-M.point[0]);var ae=Math.atan(tt)*180/Math.PI;R.point[0]<M.point[0]&&(ae+=180),o.rotate(-ae*Math.PI/180)}o.translate(ht,xt,0),_-=e[0]*x[g].an*.005,x[g+1]&&K!==x[g+1].ind&&(_+=x[g].an/2,_+=s.tr*.001*s.finalSize)}else{switch(o.translate(f,p,0),s.ps&&o.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:o.translate(x[g].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[x[g].line]),0,0);break;case 2:o.translate(x[g].animatorJustifyOffset+s.justifyOffset+(s.boxWidth-s.lineWidths[x[g].line])/2,0,0);break}o.translate(0,-s.ls),o.translate(st,0,0),o.translate(e[0]*x[g].an*.005,e[1]*nt*.01,0),f+=x[g].l+s.tr*.001*s.finalSize}c==="html"?is=o.toCSS():c==="svg"?is=o.to2dCSS():gs=[o.props[0],o.props[1],o.props[2],o.props[3],o.props[4],o.props[5],o.props[6],o.props[7],o.props[8],o.props[9],o.props[10],o.props[11],o.props[12],o.props[13],o.props[14],o.props[15]],Ke=Vt}d<=g?(B=new LetterProps(Ke,Ee,xe,Mt,is,gs),this.renderedLetters.push(B),d+=1,this.lettersChangedFlag=!0):(B=this.renderedLetters[g],this.lettersChangedFlag=B.update(Ke,Ee,xe,Mt,is,gs)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(s,t,e){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(s,t,e),this.textProperty=new TextProperty(this,s.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(s.t,this.renderType,this),this.initTransform(s,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange)},ITextElement.prototype.createPathShape=function(s,t){var e,n=t.length,i,o="";for(e=0;e<n;e+=1)t[e].ty==="sh"&&(i=t[e].ks.k,o+=buildShapeString(i,i.i.length,!0,s));return o},ITextElement.prototype.updateDocumentData=function(s,t){this.textProperty.updateDocumentData(s,t)},ITextElement.prototype.canResizeFont=function(s){this.textProperty.canResizeFont(s)},ITextElement.prototype.setMinimumFontSize=function(s){this.textProperty.setMinimumFontSize(s)},ITextElement.prototype.applyTextPropertiesToMatrix=function(s,t,e,n,i){switch(s.ps&&t.translate(s.ps[0],s.ps[1]+s.ascent,0),t.translate(0,-s.ls,0),s.j){case 1:t.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[e]),0,0);break;case 2:t.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[e])/2,0,0);break}t.translate(n,i,0)},ITextElement.prototype.buildColor=function(s){return"rgb("+Math.round(s[0]*255)+","+Math.round(s[1]*255)+","+Math.round(s[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(s,t,e){this.textSpans=[],this.renderType="svg",this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(s){for(var t=0,e=s.length,n=[],i="";t<e;)s[t]==="\r"||s[t]===""?(n.push(i),i=""):i+=s[t],t+=1;return n.push(i),n},SVGTextLottieElement.prototype.buildShapeData=function(s,t){if(s.shapes&&s.shapes.length){var e=s.shapes[0];if(e.it){var n=e.it[e.it.length-1];n.s&&(n.s.k[0]=t,n.s.k[1]=t)}}return s},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var s,t,e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var n=this.globalData.fontManager.getFontByName(e.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var i=e.fWeight,o=e.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",e.t);var c=e.l||[],d=!!this.globalData.fontManager.chars;t=c.length;var f,p=this.mHelper,g="",b=this.data.singleShape,x=0,A=0,_=!0,R=e.tr*.001*e.finalSize;if(b&&!d&&!e.sz){var P=this.textContainer,E="start";switch(e.j){case 1:E="end";break;case 2:E="middle";break;default:E="start";break}P.setAttribute("text-anchor",E),P.setAttribute("letter-spacing",R);var T=this.buildTextContents(e.finalText);for(t=T.length,A=e.ps?e.ps[1]+e.ascent:0,s=0;s<t;s+=1)f=this.textSpans[s].span||createNS("tspan"),f.textContent=T[s],f.setAttribute("x",0),f.setAttribute("y",A),f.style.display="inherit",P.appendChild(f),this.textSpans[s]||(this.textSpans[s]={span:null,glyph:null}),this.textSpans[s].span=f,A+=e.finalLineHeight;this.layerElement.appendChild(P)}else{var C=this.textSpans.length,M;for(s=0;s<t;s+=1){if(this.textSpans[s]||(this.textSpans[s]={span:null,childSpan:null,glyph:null}),!d||!b||s===0){if(f=C>s?this.textSpans[s].span:createNS(d?"g":"text"),C<=s){if(f.setAttribute("stroke-linecap","butt"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit","4"),this.textSpans[s].span=f,d){var j=createNS("g");f.appendChild(j),this.textSpans[s].childSpan=j}this.textSpans[s].span=f,this.layerElement.appendChild(f)}f.style.display="inherit"}if(p.reset(),b&&(c[s].n&&(x=-R,A+=e.yOffset,A+=_?1:0,_=!1),this.applyTextPropertiesToMatrix(e,p,c[s].line,x,A),x+=c[s].l||0,x+=R),d){M=this.globalData.fontManager.getCharData(e.finalText[s],n.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);var L;if(M.t===1)L=new SVGCompElement(M.data,this.globalData,this);else{var O=emptyShapeData;M.data&&M.data.shapes&&(O=this.buildShapeData(M.data,e.finalSize)),L=new SVGShapeElement(O,this.globalData,this)}if(this.textSpans[s].glyph){var V=this.textSpans[s].glyph;this.textSpans[s].childSpan.removeChild(V.layerElement),V.destroy()}this.textSpans[s].glyph=L,L._debug=!0,L.prepareFrame(0),L.renderFrame(),this.textSpans[s].childSpan.appendChild(L.layerElement),M.t===1&&this.textSpans[s].childSpan.setAttribute("transform","scale("+e.finalSize/100+","+e.finalSize/100+")")}else b&&f.setAttribute("transform","translate("+p.props[12]+","+p.props[13]+")"),f.textContent=c[s].val,f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}b&&f&&f.setAttribute("d",g)}for(;s<this.textSpans.length;)this.textSpans[s].span.style.display="none",s+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var s=this.layerElement.getBBox();this.bbox={top:s.y,left:s.x,width:s.width,height:s.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var s,t=this.textSpans.length,e;for(this.renderedFrame=this.comp.renderedFrame,s=0;s<t;s+=1)e=this.textSpans[s].glyph,e&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var s,t,e=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;t=n.length;var i,o,c;for(s=0;s<t;s+=1)n[s].n||(i=e[s],o=this.textSpans[s].span,c=this.textSpans[s].glyph,c&&c.renderFrame(),i._mdf.m&&o.setAttribute("transform",i.m),i._mdf.o&&o.setAttribute("opacity",i.o),i._mdf.sw&&o.setAttribute("stroke-width",i.sw),i._mdf.sc&&o.setAttribute("stroke",i.sc),i._mdf.fc&&o.setAttribute("fill",i.fc))}};function ISolidElement(s,t,e){this.initElement(s,t,e)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var s=createNS("rect");s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.layerElement.appendChild(s)};function NullElement(s,t,e){this.initFrame(),this.initBaseData(s,t,e),this.initFrame(),this.initTransform(s,t,e),this.initHierarchy()}NullElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(s){return new NullElement(s,this.globalData,this)},SVGRendererBase.prototype.createShape=function(s){return new SVGShapeElement(s,this.globalData,this)},SVGRendererBase.prototype.createText=function(s){return new SVGTextLottieElement(s,this.globalData,this)},SVGRendererBase.prototype.createImage=function(s){return new IImageElement(s,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(s){return new ISolidElement(s,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(s){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+s.w+" "+s.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",s.w),this.svgElement.setAttribute("height",s.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(s,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=s;var e=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",s.w),n.setAttribute("height",s.h),n.setAttribute("x",0),n.setAttribute("y",0);var i=createElementID();e.setAttribute("id",i),e.appendChild(n),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+i+")"),t.appendChild(e),this.layers=s.layers,this.elements=createSizedArray(s.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var s,t=this.layers?this.layers.length:0;for(s=0;s<t;s+=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(s){var t=0,e=this.layers.length;for(t=0;t<e;t+=1)if(this.layers[t].ind===s)return t;return-1},SVGRendererBase.prototype.buildItem=function(s){var t=this.elements;if(!(t[s]||this.layers[s].ty===99)){t[s]=!0;var e=this.createItem(this.layers[s]);if(t[s]=e,getExpressionsPlugin()&&(this.layers[s].ty===0&&this.globalData.projectInterface.registerComposition(e),e.initExpressions()),this.appendElementInPos(e,s),this.layers[s].tt){var n="tp"in this.layers[s]?this.findIndexByInd(this.layers[s].tp):s-1;if(n===-1)return;if(!this.elements[n]||this.elements[n]===!0)this.buildItem(n),this.addPendingElement(e);else{var i=t[n],o=i.getMatte(this.layers[s].tt);e.setMatte(o)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();if(s.checkParenting(),s.data.tt)for(var t=0,e=this.elements.length;t<e;){if(this.elements[t]===s){var n="tp"in s.data?this.findIndexByInd(s.data.tp):t-1,i=this.elements[n],o=i.getMatte(this.layers[t].tt);s.setMatte(o);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(s){if(!(this.renderedFrame===s||this.destroyed)){s===null?s=this.renderedFrame:this.renderedFrame=s,this.globalData.frameNum=s,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=s,this.globalData._mdf=!1;var t,e=this.layers.length;for(this.completeLayers||this.checkLayers(s),t=e-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(s-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(s,t){var e=s.getBaseElement();if(e){for(var n=0,i;n<t;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement()&&(i=this.elements[n].getBaseElement()),n+=1;i?this.layerElement.insertBefore(e,i):this.layerElement.appendChild(e)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(s,t,e){this.initFrame(),this.initBaseData(s,t,e),this.initTransform(s,t,e),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!t.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(s){if(this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=s/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var e,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&(this.elements[e].prepareFrame(this.renderedFrame-this.layers[e].st),this.elements[e]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var s,t=this.layers.length;for(s=0;s<t;s+=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame()},ICompElement.prototype.setElements=function(s){this.elements=s},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var s,t=this.layers.length;for(s=0;s<t;s+=1)this.elements[s]&&this.elements[s].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(s,t,e){this.layers=s.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,t,e),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function SVGRenderer(s,t){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var e="";if(t&&t.title){var n=createNS("title"),i=createElementID();n.setAttribute("id",i),n.textContent=t.title,this.svgElement.appendChild(n),e+=i}if(t&&t.description){var o=createNS("desc"),c=createElementID();o.setAttribute("id",c),o.textContent=t.description,this.svgElement.appendChild(o),e+=" "+c}e&&this.svgElement.setAttribute("aria-labelledby",e);var d=createNS("defs");this.svgElement.appendChild(d);var f=createNS("g");this.svgElement.appendChild(f),this.layerElement=f,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&t.hideOnTransparent===!1),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:d,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(s){return new SVGCompElement(s,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,n=t.length,i="_";for(e=0;e<n;e+=1)i+=t[e].transform.key+"_";var o=this.sequences[i];return o||(o={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=o,this.sequenceList.push(o)),o},processSequence:function(t,e){for(var n=0,i=t.transforms.length,o=e;n<i&&!e;){if(t.transforms[n].transform.mProps._mdf){o=!0;break}n+=1}if(o)for(t.finalTransform.reset(),n=i-1;n>=0;n-=1)t.finalTransform.multiply(t.transforms[n].transform.mProps.v);t._mdf=o},processSequences:function(t){var e,n=this.sequenceList.length;for(e=0;e<n;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var t="__lottie_element_luma_buffer",e=null,n=null,i=null;function o(){var f=createNS("svg"),p=createNS("filter"),g=createNS("feColorMatrix");return p.setAttribute("id",t),g.setAttribute("type","matrix"),g.setAttribute("color-interpolation-filters","sRGB"),g.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),p.appendChild(g),f.appendChild(p),f.setAttribute("id",t+"_svg"),featureSupport.svgLumaHidden&&(f.style.display="none"),f}function c(){e||(i=o(),document.body.appendChild(i),e=createTag("canvas"),n=e.getContext("2d"),n.filter="url(#"+t+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}function d(f){return e||c(),e.width=f.width,e.height=f.height,n.filter="url(#"+t+")",e}return{load:c,get:d}};function createCanvas(s,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(s,t);var e=createTag("canvas");return e.width=s,e.height=t,e}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(s){var t,e=s.data.ef?s.data.ef.length:0;this.filters=[];var n;for(t=0;t<e;t+=1){n=null;var i=s.data.ef[t].ty;if(registeredEffects[i]){var o=registeredEffects[i].effect;n=new o(s.effectsManager.effectElements[t],s)}n&&this.filters.push(n)}this.filters.length&&s.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(s){var t,e=this.filters.length;for(t=0;t<e;t+=1)this.filters[t].renderFrame(s)},CVEffects.prototype.getEffects=function(s){var t,e=this.filters.length,n=[];for(t=0;t<e;t+=1)this.filters[t].type===s&&n.push(this.filters[t]);return n};function registerEffect(s,t){registeredEffects[s]={effect:t}}function CVMaskElement(s,t){this.data=s,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var e,n=this.masksProperties.length,i=!1;for(e=0;e<n;e+=1)this.masksProperties[e].mode!=="n"&&(i=!0),this.viewData[e]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[e],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var s=this.element.finalTransform.mat,t=this.element.canvasContext,e,n=this.masksProperties.length,i,o,c;for(t.beginPath(),e=0;e<n;e+=1)if(this.masksProperties[e].mode!=="n"){this.masksProperties[e].inv&&(t.moveTo(0,0),t.lineTo(this.element.globalData.compSize.w,0),t.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),t.lineTo(0,this.element.globalData.compSize.h),t.lineTo(0,0)),c=this.viewData[e].v,i=s.applyToPointArray(c.v[0][0],c.v[0][1],0),t.moveTo(i[0],i[1]);var d,f=c._length;for(d=1;d<f;d+=1)o=s.applyToTriplePoints(c.o[d-1],c.i[d],c.v[d]),t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);o=s.applyToTriplePoints(c.o[d-1],c.i[0],c.v[0]),t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}this.element.globalData.renderer.save(!0),t.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var t=this.globalData.canvasContext,e=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(e);var n=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(t){t.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var t=this.buffers[0],e=t.getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var t=this.buffers[1],e=t.getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var n=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(n.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var i=assetLoader.getLumaCanvas(this.canvasContext.canvas),o=i.getContext("2d");o.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(i,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(t,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(t){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!t)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var e=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(s,t,e,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;t.ty==="rc"?i=5:t.ty==="el"?i=6:t.ty==="sr"&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(s,t,i,s);var o,c=e.length,d;for(o=0;o<c;o+=1)e[o].closed||(d={transforms:n.addTransformSequence(e[o].transforms),trNodes:[]},this.styledShapes.push(d),e[o].elements.push(d))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(s,t,e){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(s,t){var e={data:s,type:s.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:s.hd===!0},n={};if(s.ty==="fl"||s.ty==="st"?(n.c=PropertyFactory.getProp(this,s.c,1,255,this),n.c.k||(e.co="rgb("+bmFloor(n.c.v[0])+","+bmFloor(n.c.v[1])+","+bmFloor(n.c.v[2])+")")):(s.ty==="gf"||s.ty==="gs")&&(n.s=PropertyFactory.getProp(this,s.s,1,null,this),n.e=PropertyFactory.getProp(this,s.e,1,null,this),n.h=PropertyFactory.getProp(this,s.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,s.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,s.g,this)),n.o=PropertyFactory.getProp(this,s.o,0,.01,this),s.ty==="st"||s.ty==="gs"){if(e.lc=lineCapEnum[s.lc||2],e.lj=lineJoinEnum[s.lj||2],s.lj==1&&(e.ml=s.ml),n.w=PropertyFactory.getProp(this,s.w,0,null,this),n.w.k||(e.wi=n.w.v),s.d){var i=new DashProperty(this,s.d,"canvas",this);n.d=i,n.d.k||(e.da=n.d.dashArray,e.do=n.d.dashoffset[0])}}else e.r=s.r===2?"evenodd":"nonzero";return this.stylesList.push(e),n.style=e,n},CVShapeElement.prototype.createGroupElement=function(){var s={it:[],prevViewData:[]};return s},CVShapeElement.prototype.createTransformElement=function(s){var t={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,s.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,s,this)}};return t},CVShapeElement.prototype.createShapeElement=function(s){var t=new CVShapeData(this,s,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var s,t=this.itemsData.length;for(s=0;s<t;s+=1)this.prevViewData[s]=this.itemsData[s];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,s=0;s<t;s+=1)this.dynamicProperties[s].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(s){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(s)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var s,t=this.stylesList.length;for(s=0;s<t;s+=1)this.stylesList[s].closed||this.stylesList[s].transforms.pop()},CVShapeElement.prototype.closeStyles=function(s){var t,e=s.length;for(t=0;t<e;t+=1)s[t].closed=!0},CVShapeElement.prototype.searchShapes=function(s,t,e,n,i){var o,c=s.length-1,d,f,p=[],g=[],b,x,A,_=[].concat(i);for(o=c;o>=0;o-=1){if(b=this.searchProcessedElement(s[o]),b?t[o]=e[b-1]:s[o]._shouldRender=n,s[o].ty==="fl"||s[o].ty==="st"||s[o].ty==="gf"||s[o].ty==="gs")b?t[o].style.closed=!1:t[o]=this.createStyleElement(s[o],_),p.push(t[o].style);else if(s[o].ty==="gr"){if(!b)t[o]=this.createGroupElement(s[o]);else for(f=t[o].it.length,d=0;d<f;d+=1)t[o].prevViewData[d]=t[o].it[d];this.searchShapes(s[o].it,t[o].it,t[o].prevViewData,n,_)}else s[o].ty==="tr"?(b||(A=this.createTransformElement(s[o]),t[o]=A),_.push(t[o]),this.addTransformToStyleList(t[o])):s[o].ty==="sh"||s[o].ty==="rc"||s[o].ty==="el"||s[o].ty==="sr"?b||(t[o]=this.createShapeElement(s[o])):s[o].ty==="tm"||s[o].ty==="rd"||s[o].ty==="pb"||s[o].ty==="zz"||s[o].ty==="op"?(b?(x=t[o],x.closed=!1):(x=ShapeModifiers.getModifier(s[o].ty),x.init(this,s[o]),t[o]=x,this.shapeModifiers.push(x)),g.push(x)):s[o].ty==="rp"&&(b?(x=t[o],x.closed=!0):(x=ShapeModifiers.getModifier(s[o].ty),t[o]=x,x.init(this,s,o,t),this.shapeModifiers.push(x),n=!1),g.push(x));this.addProcessedElement(s[o],o+1)}for(this.removeTransformFromStyleList(),this.closeStyles(p),c=g.length,o=0;o<c;o+=1)g[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(s,t){(s._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=s.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var s,t=this.stylesList.length,e,n,i,o,c,d,f=this.globalData.renderer,p=this.globalData.canvasContext,g,b;for(s=0;s<t;s+=1)if(b=this.stylesList[s],g=b.type,!((g==="st"||g==="gs")&&b.wi===0||!b.data._shouldRender||b.coOp===0||this.globalData.currentGlobalAlpha===0)){for(f.save(),c=b.elements,g==="st"||g==="gs"?(f.ctxStrokeStyle(g==="st"?b.co:b.grd),f.ctxLineWidth(b.wi),f.ctxLineCap(b.lc),f.ctxLineJoin(b.lj),f.ctxMiterLimit(b.ml||0)):f.ctxFillStyle(g==="fl"?b.co:b.grd),f.ctxOpacity(b.coOp),g!=="st"&&g!=="gs"&&p.beginPath(),f.ctxTransform(b.preTransforms.finalTransform.props),n=c.length,e=0;e<n;e+=1){for((g==="st"||g==="gs")&&(p.beginPath(),b.da&&(p.setLineDash(b.da),p.lineDashOffset=b.do)),d=c[e].trNodes,o=d.length,i=0;i<o;i+=1)d[i].t==="m"?p.moveTo(d[i].p[0],d[i].p[1]):d[i].t==="c"?p.bezierCurveTo(d[i].pts[0],d[i].pts[1],d[i].pts[2],d[i].pts[3],d[i].pts[4],d[i].pts[5]):p.closePath();(g==="st"||g==="gs")&&(f.ctxStroke(),b.da&&p.setLineDash(this.dashResetter))}g!=="st"&&g!=="gs"&&this.globalData.renderer.ctxFill(b.r),f.restore()}},CVShapeElement.prototype.renderShape=function(s,t,e,n){var i,o=t.length-1,c;for(c=s,i=o;i>=0;i-=1)t[i].ty==="tr"?(c=e[i].transform,this.renderShapeTransform(s,c)):t[i].ty==="sh"||t[i].ty==="el"||t[i].ty==="rc"||t[i].ty==="sr"?this.renderPath(t[i],e[i]):t[i].ty==="fl"?this.renderFill(t[i],e[i],c):t[i].ty==="st"?this.renderStroke(t[i],e[i],c):t[i].ty==="gf"||t[i].ty==="gs"?this.renderGradientFill(t[i],e[i],c):t[i].ty==="gr"?this.renderShape(c,t[i].it,e[i].it):t[i].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(s,t){if(this._isFirstFrame||t._mdf||s.transforms._mdf){var e=s.trNodes,n=t.paths,i,o,c,d=n._length;e.length=0;var f=s.transforms.finalTransform;for(c=0;c<d;c+=1){var p=n.shapes[c];if(p&&p.v){for(o=p._length,i=1;i<o;i+=1)i===1&&e.push({t:"m",p:f.applyToPointArray(p.v[0][0],p.v[0][1],0)}),e.push({t:"c",pts:f.applyToTriplePoints(p.o[i-1],p.i[i],p.v[i])});o===1&&e.push({t:"m",p:f.applyToPointArray(p.v[0][0],p.v[0][1],0)}),p.c&&o&&(e.push({t:"c",pts:f.applyToTriplePoints(p.o[i-1],p.i[0],p.v[0])}),e.push({t:"z"}))}}s.trNodes=e}},CVShapeElement.prototype.renderPath=function(s,t){if(s.hd!==!0&&s._shouldRender){var e,n=t.styledShapes.length;for(e=0;e<n;e+=1)this.renderStyledShape(t.styledShapes[e],t.sh)}},CVShapeElement.prototype.renderFill=function(s,t,e){var n=t.style;(t.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(n.coOp=t.o.v*e.opacity)},CVShapeElement.prototype.renderGradientFill=function(s,t,e){var n=t.style,i;if(!n.grd||t.g._mdf||t.s._mdf||t.e._mdf||s.t!==1&&(t.h._mdf||t.a._mdf)){var o=this.globalData.canvasContext,c=t.s.v,d=t.e.v;if(s.t===1)i=o.createLinearGradient(c[0],c[1],d[0],d[1]);else{var f=Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)),p=Math.atan2(d[1]-c[1],d[0]-c[0]),g=t.h.v;g>=1?g=.99:g<=-1&&(g=-.99);var b=f*g,x=Math.cos(p+t.a.v)*b+c[0],A=Math.sin(p+t.a.v)*b+c[1];i=o.createRadialGradient(x,A,0,c[0],c[1],f)}var _,R=s.g.p,P=t.g.c,E=1;for(_=0;_<R;_+=1)t.g._hasOpacity&&t.g._collapsable&&(E=t.g.o[_*2+1]),i.addColorStop(P[_*4]/100,"rgba("+P[_*4+1]+","+P[_*4+2]+","+P[_*4+3]+","+E+")");n.grd=i}n.coOp=t.o.v*e.opacity},CVShapeElement.prototype.renderStroke=function(s,t,e){var n=t.style,i=t.d;i&&(i._mdf||this._isFirstFrame)&&(n.da=i.dashArray,n.do=i.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(n.coOp=t.o.v*e.opacity),(t.w._mdf||this._isFirstFrame)&&(n.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(s,t,e){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var t=!1;s.fc?(t=!0,this.values.fill=this.buildColor(s.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var e=!1;s.sc&&(e=!0,this.values.stroke=this.buildColor(s.sc),this.values.sWidth=s.sw);var n=this.globalData.fontManager.getFontByName(s.f),i,o,c=s.l,d=this.mHelper;this.stroke=e,this.values.fValue=s.finalSize+"px "+this.globalData.fontManager.getFontByName(s.f).fFamily,o=s.finalText.length;var f,p,g,b,x,A,_,R,P,E,T=this.data.singleShape,C=s.tr*.001*s.finalSize,M=0,j=0,L=!0,O=0;for(i=0;i<o;i+=1){f=this.globalData.fontManager.getCharData(s.finalText[i],n.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),p=f&&f.data||{},d.reset(),T&&c[i].n&&(M=-C,j+=s.yOffset,j+=L?1:0,L=!1),x=p.shapes?p.shapes[0].it:[],_=x.length,d.scale(s.finalSize/100,s.finalSize/100),T&&this.applyTextPropertiesToMatrix(s,d,c[i].line,M,j),P=createSizedArray(_-1);var V=0;for(A=0;A<_;A+=1)if(x[A].ty==="sh"){for(b=x[A].ks.k.i.length,R=x[A].ks.k,E=[],g=1;g<b;g+=1)g===1&&E.push(d.applyToX(R.v[0][0],R.v[0][1],0),d.applyToY(R.v[0][0],R.v[0][1],0)),E.push(d.applyToX(R.o[g-1][0],R.o[g-1][1],0),d.applyToY(R.o[g-1][0],R.o[g-1][1],0),d.applyToX(R.i[g][0],R.i[g][1],0),d.applyToY(R.i[g][0],R.i[g][1],0),d.applyToX(R.v[g][0],R.v[g][1],0),d.applyToY(R.v[g][0],R.v[g][1],0));E.push(d.applyToX(R.o[g-1][0],R.o[g-1][1],0),d.applyToY(R.o[g-1][0],R.o[g-1][1],0),d.applyToX(R.i[0][0],R.i[0][1],0),d.applyToY(R.i[0][0],R.i[0][1],0),d.applyToX(R.v[0][0],R.v[0][1],0),d.applyToY(R.v[0][0],R.v[0][1],0)),P[V]=E,V+=1}T&&(M+=c[i].l,M+=C),this.textSpans[O]?this.textSpans[O].elem=P:this.textSpans[O]={elem:P},O+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var s=this.canvasContext;s.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var t,e,n,i,o,c,d=this.textAnimator.renderedLetters,f=this.textProperty.currentData.l;e=f.length;var p,g=null,b=null,x=null,A,_,R=this.globalData.renderer;for(t=0;t<e;t+=1)if(!f[t].n){if(p=d[t],p&&(R.save(),R.ctxTransform(p.p),R.ctxOpacity(p.o)),this.fill){for(p&&p.fc?g!==p.fc&&(R.ctxFillStyle(p.fc),g=p.fc):g!==this.values.fill&&(g=this.values.fill,R.ctxFillStyle(this.values.fill)),A=this.textSpans[t].elem,i=A.length,this.globalData.canvasContext.beginPath(),n=0;n<i;n+=1)for(_=A[n],c=_.length,this.globalData.canvasContext.moveTo(_[0],_[1]),o=2;o<c;o+=6)this.globalData.canvasContext.bezierCurveTo(_[o],_[o+1],_[o+2],_[o+3],_[o+4],_[o+5]);this.globalData.canvasContext.closePath(),R.ctxFill()}if(this.stroke){for(p&&p.sw?x!==p.sw&&(x=p.sw,R.ctxLineWidth(p.sw)):x!==this.values.sWidth&&(x=this.values.sWidth,R.ctxLineWidth(this.values.sWidth)),p&&p.sc?b!==p.sc&&(b=p.sc,R.ctxStrokeStyle(p.sc)):b!==this.values.stroke&&(b=this.values.stroke,R.ctxStrokeStyle(this.values.stroke)),A=this.textSpans[t].elem,i=A.length,this.globalData.canvasContext.beginPath(),n=0;n<i;n+=1)for(_=A[n],c=_.length,this.globalData.canvasContext.moveTo(_[0],_[1]),o=2;o<c;o+=6)this.globalData.canvasContext.bezierCurveTo(_[o],_[o+1],_[o+2],_[o+3],_[o+4],_[o+5]);this.globalData.canvasContext.closePath(),R.ctxStroke()}p&&this.globalData.renderer.restore()}};function CVImageElement(s,t,e){this.assetData=t.getAssetData(s.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var s=createTag("canvas");s.width=this.assetData.w,s.height=this.assetData.h;var t=s.getContext("2d"),e=this.img.width,n=this.img.height,i=e/n,o=this.assetData.w/this.assetData.h,c,d,f=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;i>o&&f==="xMidYMid slice"||i<o&&f!=="xMidYMid slice"?(d=n,c=d*o):(c=e,d=c/o),t.drawImage(this.img,(e-c)/2,(n-d)/2,c,d,0,0,this.assetData.w,this.assetData.h),this.img=s}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(s,t,e){this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(s){return new CVShapeElement(s,this.globalData,this)},CanvasRendererBase.prototype.createText=function(s){return new CVTextElement(s,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(s){return new CVImageElement(s,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(s){return new CVSolidElement(s,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(s){s[0]===1&&s[1]===0&&s[4]===0&&s[5]===1&&s[12]===0&&s[13]===0||this.canvasContext.transform(s[0],s[1],s[4],s[5],s[12],s[13])},CanvasRendererBase.prototype.ctxOpacity=function(s){this.canvasContext.globalAlpha*=s<0?0:s},CanvasRendererBase.prototype.ctxFillStyle=function(s){this.canvasContext.fillStyle=s},CanvasRendererBase.prototype.ctxStrokeStyle=function(s){this.canvasContext.strokeStyle=s},CanvasRendererBase.prototype.ctxLineWidth=function(s){this.canvasContext.lineWidth=s},CanvasRendererBase.prototype.ctxLineCap=function(s){this.canvasContext.lineCap=s},CanvasRendererBase.prototype.ctxLineJoin=function(s){this.canvasContext.lineJoin=s},CanvasRendererBase.prototype.ctxMiterLimit=function(s){this.canvasContext.miterLimit=s},CanvasRendererBase.prototype.ctxFill=function(s){this.canvasContext.fill(s)},CanvasRendererBase.prototype.ctxFillRect=function(s,t,e,n){this.canvasContext.fillRect(s,t,e,n)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(s){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}s&&(this.globalData.blendMode="source-over"),this.contextData.restore(s)},CanvasRendererBase.prototype.configAnimation=function(s){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var e="0px 0px 0px";t.transformOrigin=e,t.mozTransformOrigin=e,t.webkitTransformOrigin=e,t["-webkit-transform"]=e,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=s,this.layers=s.layers,this.transformCanvas={w:s.w,h:s.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(s,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(s.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(s,t){this.reset();var e,n;s?(e=s,n=t,this.canvasContext.canvas.width=e,this.canvasContext.canvas.height=n):(this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight):(e=this.canvasContext.canvas.width,n=this.canvasContext.canvas.height),this.canvasContext.canvas.width=e*this.renderConfig.dpr,this.canvasContext.canvas.height=n*this.renderConfig.dpr);var i,o;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var c=this.renderConfig.preserveAspectRatio.split(" "),d=c[1]||"meet",f=c[0]||"xMidYMid",p=f.substr(0,4),g=f.substr(4);i=e/n,o=this.transformCanvas.w/this.transformCanvas.h,o>i&&d==="meet"||o<i&&d==="slice"?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr)),p==="xMid"&&(o<i&&d==="meet"||o>i&&d==="slice")?this.transformCanvas.tx=(e-this.transformCanvas.w*(n/this.transformCanvas.h))/2*this.renderConfig.dpr:p==="xMax"&&(o<i&&d==="meet"||o>i&&d==="slice")?this.transformCanvas.tx=(e-this.transformCanvas.w*(n/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,g==="YMid"&&(o>i&&d==="meet"||o<i&&d==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:g==="YMax"&&(o>i&&d==="meet"||o<i&&d==="slice")?this.transformCanvas.ty=(n-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var s,t=this.layers?this.layers.length:0;for(s=t-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(s,t){if(!(this.renderedFrame===s&&this.renderConfig.clearCanvas===!0&&!t||this.destroyed||s===-1)){this.renderedFrame=s,this.globalData.frameNum=s-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=s;var e,n=this.layers.length;for(this.completeLayers||this.checkLayers(s),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(s-this.layers[e].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(s){var t=this.elements;if(!(t[s]||this.layers[s].ty===99)){var e=this.createItem(this.layers[s],this,this.globalData);t[s]=e,e.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var s,t=15;for(s=0;s<t;s+=1){var e=new CanvasContext;this.stack[s]=e}this._length=t,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var s=this._length*2,t=0;for(t=this._length;t<s;t+=1)this.stack[t]=new CanvasContext;this._length=s},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(s){this.cArrPos-=1;var t=this.stack[this.cArrPos],e=t.transform,n,i=this.cTr.props;for(n=0;n<16;n+=1)i[n]=e[n];if(s){this.nativeContext.restore();var o=this.stack[this.cArrPos+1];this.appliedFillStyle=o.fillStyle,this.appliedStrokeStyle=o.strokeStyle,this.appliedLineWidth=o.lineWidth,this.appliedLineCap=o.lineCap,this.appliedLineJoin=o.lineJoin,this.appliedMiterLimit=o.miterLimit}this.nativeContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),(s||t.opacity!==-1&&this.currentOpacity!==t.opacity)&&(this.nativeContext.globalAlpha=t.opacity,this.currentOpacity=t.opacity),this.currentFillStyle=t.fillStyle,this.currentStrokeStyle=t.strokeStyle,this.currentLineWidth=t.lineWidth,this.currentLineCap=t.lineCap,this.currentLineJoin=t.lineJoin,this.currentMiterLimit=t.miterLimit},CVContextData.prototype.save=function(s){s&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var e=this.stack[this.cArrPos],n;for(n=0;n<16;n+=1)e.transform[n]=t[n];this.cArrPos+=1;var i=this.stack[this.cArrPos];i.opacity=e.opacity,i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,i.lineWidth=e.lineWidth,i.lineCap=e.lineCap,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit},CVContextData.prototype.setOpacity=function(s){this.stack[this.cArrPos].opacity=s},CVContextData.prototype.setContext=function(s){this.nativeContext=s},CVContextData.prototype.fillStyle=function(s){this.stack[this.cArrPos].fillStyle!==s&&(this.currentFillStyle=s,this.stack[this.cArrPos].fillStyle=s)},CVContextData.prototype.strokeStyle=function(s){this.stack[this.cArrPos].strokeStyle!==s&&(this.currentStrokeStyle=s,this.stack[this.cArrPos].strokeStyle=s)},CVContextData.prototype.lineWidth=function(s){this.stack[this.cArrPos].lineWidth!==s&&(this.currentLineWidth=s,this.stack[this.cArrPos].lineWidth=s)},CVContextData.prototype.lineCap=function(s){this.stack[this.cArrPos].lineCap!==s&&(this.currentLineCap=s,this.stack[this.cArrPos].lineCap=s)},CVContextData.prototype.lineJoin=function(s){this.stack[this.cArrPos].lineJoin!==s&&(this.currentLineJoin=s,this.stack[this.cArrPos].lineJoin=s)},CVContextData.prototype.miterLimit=function(s){this.stack[this.cArrPos].miterLimit!==s&&(this.currentMiterLimit=s,this.stack[this.cArrPos].miterLimit=s)},CVContextData.prototype.transform=function(s){this.transformMat.cloneFromProps(s);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var e=t.props;this.nativeContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])},CVContextData.prototype.opacity=function(s){var t=this.stack[this.cArrPos].opacity;t*=s<0?0:s,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==s&&(this.nativeContext.globalAlpha=s,this.currentOpacity=s),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(s)},CVContextData.prototype.fillRect=function(s,t,e,n){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(s,t,e,n)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(s,t,e){this.completeLayers=!1,this.layers=s.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(s,t,e),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var s=this.canvasContext;s.beginPath(),s.moveTo(0,0),s.lineTo(this.data.w,0),s.lineTo(this.data.w,this.data.h),s.lineTo(0,this.data.h),s.lineTo(0,0),s.clip();var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var s,t=this.layers.length;for(s=t-1;s>=0;s-=1)this.elements[s]&&this.elements[s].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function CanvasRenderer(s,t){this.animationItem=s,this.renderConfig={clearCanvas:t&&t.clearCanvas!==void 0?t.clearCanvas:!0,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(s){return new CVCompElement(s,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(s,t,e){this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var s;this.data.hasMask?(s=createNS("rect"),s.setAttribute("width",this.data.sw),s.setAttribute("height",this.data.sh),s.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(s=createTag("div"),s.style.width=this.data.sw+"px",s.style.height=this.data.sh+"px",s.style.backgroundColor=this.data.sc),this.layerElement.appendChild(s)};function HShapeElement(s,t,e){this.shapes=[],this.shapesData=s.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(s,t,e),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var s;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),s=this.svgElement;else{s=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;s.setAttribute("width",t.w),s.setAttribute("height",t.h),s.appendChild(this.shapesContainer),this.layerElement.appendChild(s)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=s},HShapeElement.prototype.getTransformedPoint=function(s,t){var e,n=s.length;for(e=0;e<n;e+=1)t=s[e].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(s,t){var e=s.sh.v,n=s.transformers,i,o=e._length,c,d,f,p;if(!(o<=1)){for(i=0;i<o-1;i+=1)c=this.getTransformedPoint(n,e.v[i]),d=this.getTransformedPoint(n,e.o[i]),f=this.getTransformedPoint(n,e.i[i+1]),p=this.getTransformedPoint(n,e.v[i+1]),this.checkBounds(c,d,f,p,t);e.c&&(c=this.getTransformedPoint(n,e.v[i]),d=this.getTransformedPoint(n,e.o[i]),f=this.getTransformedPoint(n,e.i[0]),p=this.getTransformedPoint(n,e.v[0]),this.checkBounds(c,d,f,p,t))}},HShapeElement.prototype.checkBounds=function(s,t,e,n,i){this.getBoundsOfCurve(s,t,e,n);var o=this.shapeBoundingBox;i.x=bmMin(o.left,i.x),i.xMax=bmMax(o.right,i.xMax),i.y=bmMin(o.top,i.y),i.yMax=bmMax(o.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(s,t,e,n){for(var i=[[s[0],n[0]],[s[1],n[1]]],o,c,d,f,p,g,b,x=0;x<2;++x)c=6*s[x]-12*t[x]+6*e[x],o=-3*s[x]+9*t[x]-9*e[x]+3*n[x],d=3*t[x]-3*s[x],c|=0,o|=0,d|=0,o===0&&c===0||(o===0?(f=-d/c,f>0&&f<1&&i[x].push(this.calculateF(f,s,t,e,n,x))):(p=c*c-4*d*o,p>=0&&(g=(-c+bmSqrt(p))/(2*o),g>0&&g<1&&i[x].push(this.calculateF(g,s,t,e,n,x)),b=(-c-bmSqrt(p))/(2*o),b>0&&b<1&&i[x].push(this.calculateF(b,s,t,e,n,x)))));this.shapeBoundingBox.left=bmMin.apply(null,i[0]),this.shapeBoundingBox.top=bmMin.apply(null,i[1]),this.shapeBoundingBox.right=bmMax.apply(null,i[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,i[1])},HShapeElement.prototype.calculateF=function(s,t,e,n,i,o){return bmPow(1-s,3)*t[o]+3*bmPow(1-s,2)*s*e[o]+3*(1-s)*bmPow(s,2)*n[o]+bmPow(s,3)*i[o]},HShapeElement.prototype.calculateBoundingBox=function(s,t){var e,n=s.length;for(e=0;e<n;e+=1)s[e]&&s[e].sh?this.calculateShapeBoundingBox(s[e],t):s[e]&&s[e].it?this.calculateBoundingBox(s[e].it,t):s[e]&&s[e].style&&s[e].w&&this.expandStrokeBoundingBox(s[e].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(s,t){var e=0;if(s.keyframes){for(var n=0;n<s.keyframes.length;n+=1){var i=s.keyframes[n].s;i>e&&(e=i)}e*=s.mult}else e=s.v*s.mult;t.x-=e,t.xMax+=e,t.y-=e,t.yMax+=e},HShapeElement.prototype.currentBoxContains=function(s){return this.currentBBox.x<=s.x&&this.currentBBox.y<=s.y&&this.currentBBox.width+this.currentBBox.x>=s.x+s.width&&this.currentBBox.height+this.currentBBox.y>=s.y+s.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var s=this.tempBoundingBox,t=999999;if(s.x=t,s.xMax=-t,s.y=t,s.yMax=-t,this.calculateBoundingBox(this.itemsData,s),s.width=s.xMax<s.x?0:s.xMax-s.x,s.height=s.yMax<s.y?0:s.yMax-s.y,this.currentBoxContains(s))return;var e=!1;if(this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.shapeCont.setAttribute("width",s.width),e=!0),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.shapeCont.setAttribute("height",s.height),e=!0),e||this.currentBBox.x!==s.x||this.currentBBox.y!==s.y){this.currentBBox.w=s.width,this.currentBBox.h=s.height,this.currentBBox.x=s.x,this.currentBBox.y=s.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var n=this.shapeCont.style,i="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";n.transform=i,n.webkitTransform=i}}};function HTextElement(s,t,e){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var s=createNS("g");this.maskedElement.appendChild(s),this.innerElem=s}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s.l?s.l.length:0);var t=this.innerElem.style,e=s.fc?this.buildColor(s.fc):"rgba(0,0,0,0)";t.fill=e,t.color=e,s.sc&&(t.stroke=this.buildColor(s.sc),t.strokeWidth=s.sw+"px");var n=this.globalData.fontManager.getFontByName(s.f);if(!this.globalData.fontManager.chars)if(t.fontSize=s.finalSize+"px",t.lineHeight=s.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{t.fontFamily=n.fFamily;var i=s.fWeight,o=s.fStyle;t.fontStyle=o,t.fontWeight=i}var c,d,f=s.l;d=f.length;var p,g,b,x=this.mHelper,A,_="",R=0;for(c=0;c<d;c+=1){if(this.globalData.fontManager.chars?(this.textPaths[R]?p=this.textPaths[R]:(p=createNS("path"),p.setAttribute("stroke-linecap",lineCapEnum[1]),p.setAttribute("stroke-linejoin",lineJoinEnum[2]),p.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[R]?(g=this.textSpans[R],b=g.children[0]):(g=createTag("div"),g.style.lineHeight=0,b=createNS("svg"),b.appendChild(p),styleDiv(g)))):this.isMasked?p=this.textPaths[R]?this.textPaths[R]:createNS("text"):this.textSpans[R]?(g=this.textSpans[R],p=this.textPaths[R]):(g=createTag("span"),styleDiv(g),p=createTag("span"),styleDiv(p),g.appendChild(p)),this.globalData.fontManager.chars){var P=this.globalData.fontManager.getCharData(s.finalText[c],n.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),E;if(P?E=P.data:E=null,x.reset(),E&&E.shapes&&E.shapes.length&&(A=E.shapes[0].it,x.scale(s.finalSize/100,s.finalSize/100),_=this.createPathShape(x,A),p.setAttribute("d",_)),this.isMasked)this.innerElem.appendChild(p);else{if(this.innerElem.appendChild(g),E&&E.shapes){document.body.appendChild(b);var T=b.getBBox();b.setAttribute("width",T.width+2),b.setAttribute("height",T.height+2),b.setAttribute("viewBox",T.x-1+" "+(T.y-1)+" "+(T.width+2)+" "+(T.height+2));var C=b.style,M="translate("+(T.x-1)+"px,"+(T.y-1)+"px)";C.transform=M,C.webkitTransform=M,f[c].yOffset=T.y-1}else b.setAttribute("width",1),b.setAttribute("height",1);g.appendChild(b)}}else if(p.textContent=f[c].val,p.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(p);else{this.innerElem.appendChild(g);var j=p.style,L="translate3d(0,"+-s.finalSize/1.2+"px,0)";j.transform=L,j.webkitTransform=L}this.isMasked?this.textSpans[R]=p:this.textSpans[R]=g,this.textSpans[R].style.display="block",this.textPaths[R]=p,R+=1}for(;R<this.textSpans.length;)this.textSpans[R].style.display="none",R+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var s;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),s=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";s.transform=t,s.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var e,n,i=0,o=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;n=c.length;var d,f,p;for(e=0;e<n;e+=1)c[e].n?i+=1:(f=this.textSpans[e],p=this.textPaths[e],d=o[i],i+=1,d._mdf.m&&(this.isMasked?f.setAttribute("transform",d.m):(f.style.webkitTransform=d.m,f.style.transform=d.m)),f.style.opacity=d.o,d.sw&&d._mdf.sw&&p.setAttribute("stroke-width",d.sw),d.sc&&d._mdf.sc&&p.setAttribute("stroke",d.sc),d.fc&&d._mdf.fc&&(p.setAttribute("fill",d.fc),p.style.color=d.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var g=this.innerElem.getBBox();this.currentBBox.w!==g.width&&(this.currentBBox.w=g.width,this.svgElement.setAttribute("width",g.width)),this.currentBBox.h!==g.height&&(this.currentBBox.h=g.height,this.svgElement.setAttribute("height",g.height));var b=1;if(this.currentBBox.w!==g.width+b*2||this.currentBBox.h!==g.height+b*2||this.currentBBox.x!==g.x-b||this.currentBBox.y!==g.y-b){this.currentBBox.w=g.width+b*2,this.currentBBox.h=g.height+b*2,this.currentBBox.x=g.x-b,this.currentBBox.y=g.y-b,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),s=this.svgElement.style;var x="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=x,s.webkitTransform=x}}}};function HCameraElement(s,t,e){this.initFrame(),this.initBaseData(s,t,e),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,s.pe,0,0,this),s.ks.p.s?(this.px=n(this,s.ks.p.x,1,0,this),this.py=n(this,s.ks.p.y,1,0,this),this.pz=n(this,s.ks.p.z,1,0,this)):this.p=n(this,s.ks.p,1,0,this),s.ks.a&&(this.a=n(this,s.ks.a,1,0,this)),s.ks.or.k.length&&s.ks.or.k[0].to){var i,o=s.ks.or.k.length;for(i=0;i<o;i+=1)s.ks.or.k[i].to=null,s.ks.or.k[i].ti=null}this.or=n(this,s.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,s.ks.rx,0,degToRads,this),this.ry=n(this,s.ks.ry,0,degToRads,this),this.rz=n(this,s.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var s,t=this.comp.threeDElements.length,e,n,i;for(s=0;s<t;s+=1)if(e=this.comp.threeDElements[s],e.type==="3d"){n=e.perspectiveElem.style,i=e.container.style;var o=this.pe.v+"px",c="0px 0px 0px",d="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=o,n.webkitPerspective=o,i.transformOrigin=c,i.mozTransformOrigin=c,i.webkitTransformOrigin=c,n.transform=d,n.webkitTransform=d}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var s=this._isFirstFrame,t,e;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)s=this.hierarchy[t].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=this.hierarchy.length-1,t=e;t>=0;t-=1){var n=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-n.p.v[0],-n.p.v[1],n.p.v[2]),this.mat.rotateX(-n.or.v[0]).rotateY(-n.or.v[1]).rotateZ(n.or.v[2]),this.mat.rotateX(-n.rx.v).rotateY(-n.ry.v).rotateZ(n.rz.v),this.mat.scale(1/n.s.v[0],1/n.s.v[1],1/n.s.v[2]),this.mat.translate(n.a.v[0],n.a.v[1],n.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;this.p?i=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:i=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var o=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),c=[i[0]/o,i[1]/o,i[2]/o],d=Math.sqrt(c[2]*c[2]+c[0]*c[0]),f=Math.atan2(c[1],d),p=Math.atan2(c[0],-c[2]);this.mat.rotateY(p).rotateX(-f)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var g=!this._prevMat.equals(this.mat);if((g||this.pe._mdf)&&this.comp.threeDElements){e=this.comp.threeDElements.length;var b,x,A;for(t=0;t<e;t+=1)if(b=this.comp.threeDElements[t],b.type==="3d"){if(g){var _=this.mat.toCSS();A=b.container.style,A.transform=_,A.webkitTransform=_}this.pe._mdf&&(x=b.perspectiveElem.style,x.perspective=this.pe.v+"px",x.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(s){this.prepareProperties(s,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(s,t,e){this.assetData=t.getAssetData(s.refId),this.initElement(s,t,e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var s=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=s,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(s,t){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var s=this.pendingElements.pop();s.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(s,t){var e=s.getBaseElement();if(e){var n=this.layers[t];if(!n.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(e,t);else{for(var i=0,o,c,d;i<t;)this.elements[i]&&this.elements[i]!==!0&&this.elements[i].getBaseElement&&(c=this.elements[i],d=this.layers[i].ddd?this.getThreeDContainerByPos(i):c.getBaseElement(),o=d||o),i+=1;o?(!n.ddd||!this.supports3d)&&this.layerElement.insertBefore(e,o):(!n.ddd||!this.supports3d)&&this.layerElement.appendChild(e)}else this.addTo3dContainer(e,t)}},HybridRendererBase.prototype.createShape=function(s){return this.supports3d?new HShapeElement(s,this.globalData,this):new SVGShapeElement(s,this.globalData,this)},HybridRendererBase.prototype.createText=function(s){return this.supports3d?new HTextElement(s,this.globalData,this):new SVGTextLottieElement(s,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(s){return this.camera=new HCameraElement(s,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(s){return this.supports3d?new HImageElement(s,this.globalData,this):new IImageElement(s,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(s){return this.supports3d?new HSolidElement(s,this.globalData,this):new ISolidElement(s,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(s){for(var t=0,e=this.threeDElements.length;t<e;){if(this.threeDElements[t].startPos<=s&&this.threeDElements[t].endPos>=s)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(s,t){var e=createTag("div"),n,i;styleDiv(e);var o=createTag("div");if(styleDiv(o),t==="3d"){n=e.style,n.width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var c="50% 50%";n.webkitTransformOrigin=c,n.mozTransformOrigin=c,n.transformOrigin=c,i=o.style;var d="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.transform=d,i.webkitTransform=d}e.appendChild(o);var f={container:o,perspectiveElem:e,startPos:s,endPos:s,type:t};return this.threeDElements.push(f),f},HybridRendererBase.prototype.build3dContainers=function(){var s,t=this.layers.length,e,n="";for(s=0;s<t;s+=1)this.layers[s].ddd&&this.layers[s].ty!==3?(n!=="3d"&&(n="3d",e=this.createThreeDContainer(s,"3d")),e.endPos=Math.max(e.endPos,s)):(n!=="2d"&&(n="2d",e=this.createThreeDContainer(s,"2d")),e.endPos=Math.max(e.endPos,s));for(t=this.threeDElements.length,s=t-1;s>=0;s-=1)this.resizerElem.appendChild(this.threeDElements[s].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(s,t){for(var e=0,n=this.threeDElements.length;e<n;){if(t<=this.threeDElements[e].endPos){for(var i=this.threeDElements[e].startPos,o;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(o=this.elements[i].getBaseElement()),i+=1;o?this.threeDElements[e].container.insertBefore(s,o):this.threeDElements[e].container.appendChild(s);break}e+=1}},HybridRendererBase.prototype.configAnimation=function(s){var t=createTag("div"),e=this.animationItem.wrapper,n=t.style;n.width=s.w+"px",n.height=s.h+"px",this.resizerElem=t,styleDiv(t),n.transformStyle="flat",n.mozTransformStyle="flat",n.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),e.appendChild(t),n.overflow="hidden";var i=createNS("svg");i.setAttribute("width","1"),i.setAttribute("height","1"),styleDiv(i),this.resizerElem.appendChild(i);var o=createNS("defs");i.appendChild(o),this.data=s,this.setupGlobalData(s,i),this.globalData.defs=o,this.layers=s.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var s,t=this.layers?this.layers.length:0;for(s=0;s<t;s+=1)this.elements[s]&&this.elements[s].destroy&&this.elements[s].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var s=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,e=s/t,n=this.globalData.compSize.w/this.globalData.compSize.h,i,o,c,d;n>e?(i=s/this.globalData.compSize.w,o=s/this.globalData.compSize.w,c=0,d=(t-this.globalData.compSize.h*(s/this.globalData.compSize.w))/2):(i=t/this.globalData.compSize.h,o=t/this.globalData.compSize.h,c=(s-this.globalData.compSize.w*(t/this.globalData.compSize.h))/2,d=0);var f=this.resizerElem.style;f.webkitTransform="matrix3d("+i+",0,0,0,0,"+o+",0,0,0,0,1,0,"+c+","+d+",0,1)",f.transform=f.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var s=this.globalData.compSize.w,t=this.globalData.compSize.h,e,n=this.threeDElements.length;for(e=0;e<n;e+=1){var i=this.threeDElements[e].perspectiveElem.style;i.webkitPerspective=Math.sqrt(Math.pow(s,2)+Math.pow(t,2))+"px",i.perspective=i.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(s){var t,e=s.length,n=createTag("div");for(t=0;t<e;t+=1)if(s[t].xt){var i=this.createComp(s[t],n,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}};function HCompElement(s,t,e){this.layers=s.layers,this.supports3d=!s.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(s,t,e),this.tm=s.tm?PropertyFactory.getProp(this,s.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(s,t){for(var e=0,n;e<t;)this.elements[e]&&this.elements[e].getBaseElement&&(n=this.elements[e].getBaseElement()),e+=1;n?this.layerElement.insertBefore(s,n):this.layerElement.appendChild(s)},HCompElement.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};function HybridRenderer(s,t){this.animationItem=s,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(s){return this.supports3d?new HCompElement(s,this.globalData,this):new SVGCompElement(s,this.globalData,this)};var CompExpressionInterface=function(){return function(s){function t(e){for(var n=0,i=s.layers.length;n<i;){if(s.layers[n].nm===e||s.layers[n].ind===e)return s.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:s.data.nm}),t.layer=t,t.pixelAspect=1,t.height=s.data.h||s.globalData.compSize.h,t.width=s.data.w||s.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/s.globalData.frameRate,t.displayStartTime=0,t.numLayers=s.layers.length,t}}();function _typeof$2(s){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(s)}function seedRandom(s,t){var e=this,n=256,i=6,o=52,c="random",d=t.pow(n,i),f=t.pow(2,o),p=f*2,g=n-1,b;function x(C,M,j){var L=[];M=M===!0?{entropy:!0}:M||{};var O=P(R(M.entropy?[C,T(s)]:C===null?E():C,3),L),V=new A(L),X=function(){for(var Y=V.g(i),Q=d,ct=0;Y<f;)Y=(Y+ct)*n,Q*=n,ct=V.g(1);for(;Y>=p;)Y/=2,Q/=2,ct>>>=1;return(Y+ct)/Q};return X.int32=function(){return V.g(4)|0},X.quick=function(){return V.g(4)/4294967296},X.double=X,P(T(V.S),s),(M.pass||j||function(tt,Y,Q,ct){return ct&&(ct.S&&_(ct,V),tt.state=function(){return _(V,{})}),Q?(t[c]=tt,Y):tt})(X,O,"global"in M?M.global:this==t,M.state)}t["seed"+c]=x;function A(C){var M,j=C.length,L=this,O=0,V=L.i=L.j=0,X=L.S=[];for(j||(C=[j++]);O<n;)X[O]=O++;for(O=0;O<n;O++)X[O]=X[V=g&V+C[O%j]+(M=X[O])],X[V]=M;L.g=function(tt){for(var Y,Q=0,ct=L.i,nt=L.j,J=L.S;tt--;)Y=J[ct=g&ct+1],Q=Q*n+J[g&(J[ct]=J[nt=g&nt+Y])+(J[nt]=Y)];return L.i=ct,L.j=nt,Q}}function _(C,M){return M.i=C.i,M.j=C.j,M.S=C.S.slice(),M}function R(C,M){var j=[],L=_typeof$2(C),O;if(M&&L=="object")for(O in C)try{j.push(R(C[O],M-1))}catch{}return j.length?j:L=="string"?C:C+"\0"}function P(C,M){for(var j=C+"",L,O=0;O<j.length;)M[g&O]=g&(L^=M[g&O]*19)+j.charCodeAt(O++);return T(M)}function E(){try{var C=new Uint8Array(n);return(e.crypto||e.msCrypto).getRandomValues(C),T(C)}catch{var M=e.navigator,j=M&&M.plugins;return[+new Date,e,j,e.screen,T(s)]}}function T(C){return String.fromCharCode.apply(0,C)}P(t.random(),s)}function initialize$2(s){seedRandom([],s)}var propTypes={SHAPE:"shape"};function _typeof$1(s){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(s)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(s){return s.constructor===Array||s.constructor===Float32Array}function isNumerable(s,t){return s==="number"||t instanceof Number||s==="boolean"||s==="string"}function $bm_neg(s){var t=_typeof$1(s);if(t==="number"||s instanceof Number||t==="boolean")return-s;if($bm_isInstanceOfArray(s)){var e,n=s.length,i=[];for(e=0;e<n;e+=1)i[e]=-s[e];return i}return s.propType?s.v:-s}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(s,t){var e=_typeof$1(s),n=_typeof$1(t);if(isNumerable(e,s)&&isNumerable(n,t)||e==="string"||n==="string")return s+t;if($bm_isInstanceOfArray(s)&&isNumerable(n,t))return s=s.slice(0),s[0]+=t,s;if(isNumerable(e,s)&&$bm_isInstanceOfArray(t))return t=t.slice(0),t[0]=s+t[0],t;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(t)){for(var i=0,o=s.length,c=t.length,d=[];i<o||i<c;)(typeof s[i]=="number"||s[i]instanceof Number)&&(typeof t[i]=="number"||t[i]instanceof Number)?d[i]=s[i]+t[i]:d[i]=t[i]===void 0?s[i]:s[i]||t[i],i+=1;return d}return 0}var add=sum;function sub(s,t){var e=_typeof$1(s),n=_typeof$1(t);if(isNumerable(e,s)&&isNumerable(n,t))return e==="string"&&(s=parseInt(s,10)),n==="string"&&(t=parseInt(t,10)),s-t;if($bm_isInstanceOfArray(s)&&isNumerable(n,t))return s=s.slice(0),s[0]-=t,s;if(isNumerable(e,s)&&$bm_isInstanceOfArray(t))return t=t.slice(0),t[0]=s-t[0],t;if($bm_isInstanceOfArray(s)&&$bm_isInstanceOfArray(t)){for(var i=0,o=s.length,c=t.length,d=[];i<o||i<c;)(typeof s[i]=="number"||s[i]instanceof Number)&&(typeof t[i]=="number"||t[i]instanceof Number)?d[i]=s[i]-t[i]:d[i]=t[i]===void 0?s[i]:s[i]||t[i],i+=1;return d}return 0}function mul(s,t){var e=_typeof$1(s),n=_typeof$1(t),i;if(isNumerable(e,s)&&isNumerable(n,t))return s*t;var o,c;if($bm_isInstanceOfArray(s)&&isNumerable(n,t)){for(c=s.length,i=createTypedArray("float32",c),o=0;o<c;o+=1)i[o]=s[o]*t;return i}if(isNumerable(e,s)&&$bm_isInstanceOfArray(t)){for(c=t.length,i=createTypedArray("float32",c),o=0;o<c;o+=1)i[o]=s*t[o];return i}return 0}function div(s,t){var e=_typeof$1(s),n=_typeof$1(t),i;if(isNumerable(e,s)&&isNumerable(n,t))return s/t;var o,c;if($bm_isInstanceOfArray(s)&&isNumerable(n,t)){for(c=s.length,i=createTypedArray("float32",c),o=0;o<c;o+=1)i[o]=s[o]/t;return i}if(isNumerable(e,s)&&$bm_isInstanceOfArray(t)){for(c=t.length,i=createTypedArray("float32",c),o=0;o<c;o+=1)i[o]=s/t[o];return i}return 0}function mod(s,t){return typeof s=="string"&&(s=parseInt(s,10)),typeof t=="string"&&(t=parseInt(t,10)),s%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(s,t,e){if(t>e){var n=e;e=t,t=n}return Math.min(Math.max(s,t),e)}function radiansToDegrees(s){return s/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(s){return s*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(s,t){if(typeof s=="number"||s instanceof Number)return t=t||0,Math.abs(s-t);t||(t=helperLengthArray);var e,n=Math.min(s.length,t.length),i=0;for(e=0;e<n;e+=1)i+=Math.pow(t[e]-s[e],2);return Math.sqrt(i)}function normalize(s){return div(s,length(s))}function rgbToHsl(s){var t=s[0],e=s[1],n=s[2],i=Math.max(t,e,n),o=Math.min(t,e,n),c,d,f=(i+o)/2;if(i===o)c=0,d=0;else{var p=i-o;switch(d=f>.5?p/(2-i-o):p/(i+o),i){case t:c=(e-n)/p+(e<n?6:0);break;case e:c=(n-t)/p+2;break;case n:c=(t-e)/p+4;break}c/=6}return[c,d,f,s[3]]}function hue2rgb(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function hslToRgb(s){var t=s[0],e=s[1],n=s[2],i,o,c;if(e===0)i=n,c=n,o=n;else{var d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;i=hue2rgb(f,d,t+1/3),o=hue2rgb(f,d,t),c=hue2rgb(f,d,t-1/3)}return[i,o,c,s[3]]}function linear(s,t,e,n,i){if((n===void 0||i===void 0)&&(n=t,i=e,t=0,e=1),e<t){var o=e;e=t,t=o}if(s<=t)return n;if(s>=e)return i;var c=e===t?0:(s-t)/(e-t);if(!n.length)return n+(i-n)*c;var d,f=n.length,p=createTypedArray("float32",f);for(d=0;d<f;d+=1)p[d]=n[d]+(i[d]-n[d])*c;return p}function random(s,t){if(t===void 0&&(s===void 0?(s=0,t=1):(t=s,s=void 0)),t.length){var e,n=t.length;s||(s=createTypedArray("float32",n));var i=createTypedArray("float32",n),o=BMMath.random();for(e=0;e<n;e+=1)i[e]=s[e]+o*(t[e]-s[e]);return i}s===void 0&&(s=0);var c=BMMath.random();return s+c*(t-s)}function createPath(s,t,e,n){var i,o=s.length,c=shapePool.newElement();c.setPathData(!!n,o);var d=[0,0],f,p;for(i=0;i<o;i+=1)f=t&&t[i]?t[i]:d,p=e&&e[i]?e[i]:d,c.setTripleAt(s[i][0],s[i][1],p[0]+s[i][0],p[1]+s[i][1],f[0]+s[i][0],f[1]+s[i][1],i,!0);return c}function initiateExpression(elem,data,property){function noOp(s){return s}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function s(t,e){var n,i,o=this.pv.length?this.pv.length:1,c=createTypedArray("float32",o);t=5;var d=Math.floor(time*t);for(n=0,i=0;n<d;){for(i=0;i<o;i+=1)c[i]+=-e+e*2*BMMath.random();n+=1}var f=time*t,p=f-Math.floor(f),g=createTypedArray("float32",o);if(o>1){for(i=0;i<o;i+=1)g[i]=this.pv[i]+c[i]+(-e+e*2*BMMath.random())*p;return g}return this.pv+c[0]+(-e+e*2*BMMath.random())*p}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(s,t){return loopIn(s,t,!0)}function loopOutDuration(s,t){return loopOut(s,t,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(s,t){var e=[t[0]-s[0],t[1]-s[1],t[2]-s[2]],n=Math.atan2(e[0],Math.sqrt(e[1]*e[1]+e[2]*e[2]))/degToRads,i=-Math.atan2(e[1],e[2])/degToRads;return[i,n,0]}function easeOut(s,t,e,n,i){return applyEase(easeOutBez,s,t,e,n,i)}function easeIn(s,t,e,n,i){return applyEase(easeInBez,s,t,e,n,i)}function ease(s,t,e,n,i){return applyEase(easeInOutBez,s,t,e,n,i)}function applyEase(s,t,e,n,i,o){i===void 0?(i=e,o=n):t=(t-e)/(n-e),t>1?t=1:t<0&&(t=0);var c=s(t);if($bm_isInstanceOfArray(i)){var d,f=i.length,p=createTypedArray("float32",f);for(d=0;d<f;d+=1)p[d]=(o[d]-i[d])*c+i[d];return p}return(o-i)*c+i}function nearestKey(s){var t,e=data.k.length,n,i;if(!data.k.length||typeof data.k[0]=="number")n=0,i=0;else if(n=-1,s*=elem.comp.globalData.frameRate,s<data.k[0].t)n=1,i=data.k[0].t;else{for(t=0;t<e-1;t+=1)if(s===data.k[t].t){n=t+1,i=data.k[t].t;break}else if(s>data.k[t].t&&s<data.k[t+1].t){s-data.k[t].t>data.k[t+1].t-s?(n=t+2,i=data.k[t+1].t):(n=t+1,i=data.k[t].t);break}n===-1&&(n=t+1,i=data.k[t].t)}var o={};return o.index=n,o.time=i/elem.comp.globalData.frameRate,o}function key(s){var t,e,n;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+s);s-=1,t={time:data.k[s].t/elem.comp.globalData.frameRate,value:[]};var i=Object.prototype.hasOwnProperty.call(data.k[s],"s")?data.k[s].s:data.k[s-1].e;for(n=i.length,e=0;e<n;e+=1)t[e]=i[e],t.value[e]=i[e];return t}function framesToTime(s,t){return t||(t=elem.comp.globalData.frameRate),s/t}function timeToFrames(s,t){return!s&&s!==0&&(s=time),t||(t=elem.comp.globalData.frameRate),s*t}function seedRandom(s){BMMath.seedrandom(randSeed+s)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(s,t){return typeof value=="string"?t===void 0?value.substring(s):value.substring(s,t):""}function substr(s,t){return typeof value=="string"?t===void 0?value.substr(s):value.substr(s,t):""}function posterizeTime(s){time=s===0?0:Math.floor(time*s)/s,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(s){return value=s,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var s={};s.initExpressions=t,s.resetFrame=ExpressionManager.resetFrame;function t(e){var n=0,i=[];function o(){n+=1}function c(){n-=1,n===0&&f()}function d(p){i.indexOf(p)===-1&&i.push(p)}function f(){var p,g=i.length;for(p=0;p<g;p+=1)i[p].release();i.length=0}e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=o,e.renderer.globalData.popExpression=c,e.renderer.globalData.registerExpressionProperty=d}return s}(),MaskManagerInterface=function(){function s(e,n){this._mask=e,this._data=n}Object.defineProperty(s.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(s.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var t=function(n){var i=createSizedArray(n.viewData.length),o,c=n.viewData.length;for(o=0;o<c;o+=1)i[o]=new s(n.viewData[o],n.masksProperties[o]);var d=function(p){for(o=0;o<c;){if(n.masksProperties[o].nm===p)return i[o];o+=1}return null};return d};return t}(),ExpressionPropertyInterface=function(){var s={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function e(c,d,f){Object.defineProperty(c,"velocity",{get:function(){return d.getVelocityAtTime(d.comp.currentFrame)}}),c.numKeys=d.keyframes?d.keyframes.length:0,c.key=function(p){if(!c.numKeys)return 0;var g="";"s"in d.keyframes[p-1]?g=d.keyframes[p-1].s:"e"in d.keyframes[p-2]?g=d.keyframes[p-2].e:g=d.keyframes[p-2].s;var b=f==="unidimensional"?new Number(g):Object.assign({},g);return b.time=d.keyframes[p-1].t/d.elem.comp.globalData.frameRate,b.value=f==="unidimensional"?g[0]:g,b},c.valueAtTime=d.getValueAtTime,c.speedAtTime=d.getSpeedAtTime,c.velocityAtTime=d.getVelocityAtTime,c.propertyGroup=d.propertyGroup}function n(c){(!c||!("pv"in c))&&(c=s);var d=1/c.mult,f=c.pv*d,p=new Number(f);return p.value=f,e(p,c,"unidimensional"),function(){return c.k&&c.getValue(),f=c.v*d,p.value!==f&&(p=new Number(f),p.value=f,p[0]=f,e(p,c,"unidimensional")),p}}function i(c){(!c||!("pv"in c))&&(c=t);var d=1/c.mult,f=c.data&&c.data.l||c.pv.length,p=createTypedArray("float32",f),g=createTypedArray("float32",f);return p.value=g,e(p,c,"multidimensional"),function(){c.k&&c.getValue();for(var b=0;b<f;b+=1)g[b]=c.v[b]*d,p[b]=g[b];return p}}function o(){return s}return function(c){return c?c.propType==="unidimensional"?n(c):i(c):o}}(),TransformExpressionInterface=function(){return function(s){function t(c){switch(c){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(s.r||s.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(s.rz||s.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(s.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(s.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(s.s)});var e,n,i,o;return s.p?o=ExpressionPropertyInterface(s.p):(e=ExpressionPropertyInterface(s.px),n=ExpressionPropertyInterface(s.py),s.pz&&(i=ExpressionPropertyInterface(s.pz))),Object.defineProperty(t,"position",{get:function(){return s.p?o():[e(),n(),i?i():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(s.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(s.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(s.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(s.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(s.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(s.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(s.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(s.or)}),t}}(),LayerExpressionInterface=function(){function s(p){var g=new Matrix;if(p!==void 0){var b=this._elem.finalTransform.mProp.getValueAtTime(p);b.clone(g)}else{var x=this._elem.finalTransform.mProp;x.applyToMatrix(g)}return g}function t(p,g){var b=this.getMatrix(g);return b.props[12]=0,b.props[13]=0,b.props[14]=0,this.applyPoint(b,p)}function e(p,g){var b=this.getMatrix(g);return this.applyPoint(b,p)}function n(p,g){var b=this.getMatrix(g);return b.props[12]=0,b.props[13]=0,b.props[14]=0,this.invertPoint(b,p)}function i(p,g){var b=this.getMatrix(g);return this.invertPoint(b,p)}function o(p,g){if(this._elem.hierarchy&&this._elem.hierarchy.length){var b,x=this._elem.hierarchy.length;for(b=0;b<x;b+=1)this._elem.hierarchy[b].finalTransform.mProp.applyToMatrix(p)}return p.applyToPointArray(g[0],g[1],g[2]||0)}function c(p,g){if(this._elem.hierarchy&&this._elem.hierarchy.length){var b,x=this._elem.hierarchy.length;for(b=0;b<x;b+=1)this._elem.hierarchy[b].finalTransform.mProp.applyToMatrix(p)}return p.inversePoint(g)}function d(p){var g=new Matrix;if(g.reset(),this._elem.finalTransform.mProp.applyToMatrix(g),this._elem.hierarchy&&this._elem.hierarchy.length){var b,x=this._elem.hierarchy.length;for(b=0;b<x;b+=1)this._elem.hierarchy[b].finalTransform.mProp.applyToMatrix(g);return g.inversePoint(p)}return g.inversePoint(p)}function f(){return[1,1,1,1]}return function(p){var g;function b(R){A.mask=new MaskManagerInterface(R,p)}function x(R){A.effect=R}function A(R){switch(R){case"ADBE Root Vectors Group":case"Contents":case 2:return A.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return g;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return A.effect;case"ADBE Text Properties":return A.textInterface;default:return null}}A.getMatrix=s,A.invertPoint=c,A.applyPoint=o,A.toWorld=e,A.toWorldVec=t,A.fromWorld=i,A.fromWorldVec=n,A.toComp=e,A.fromComp=d,A.sampleImage=f,A.sourceRectAtTime=p.sourceRectAtTime.bind(p),A._elem=p,g=TransformExpressionInterface(p.finalTransform.mProp);var _=getDescriptor(g,"anchorPoint");return Object.defineProperties(A,{hasParent:{get:function(){return p.hierarchy.length}},parent:{get:function(){return p.hierarchy[0].layerInterface}},rotation:getDescriptor(g,"rotation"),scale:getDescriptor(g,"scale"),position:getDescriptor(g,"position"),opacity:getDescriptor(g,"opacity"),anchorPoint:_,anchor_point:_,transform:{get:function(){return g}},active:{get:function(){return p.isInRange}}}),A.startTime=p.data.st,A.index=p.data.ind,A.source=p.data.refId,A.height=p.data.ty===0?p.data.h:100,A.width=p.data.ty===0?p.data.w:100,A.inPoint=p.data.ip/p.comp.globalData.frameRate,A.outPoint=p.data.op/p.comp.globalData.frameRate,A._name=p.data.nm,A.registerMaskInterface=b,A.registerEffectsInterface=x,A}}(),propertyGroupFactory=function(){return function(s,t){return function(e){return e=e===void 0?1:e,e<=0?s:t(e-1)}}}(),PropertyInterface=function(){return function(s,t){var e={_name:s};function n(i){return i=i===void 0?1:i,i<=0?e:t(i-1)}return n}}(),EffectsExpressionInterface=function(){var s={createEffectsInterface:t};function t(i,o){if(i.effectsManager){var c=[],d=i.data.ef,f,p=i.effectsManager.effectElements.length;for(f=0;f<p;f+=1)c.push(e(d[f],i.effectsManager.effectElements[f],o,i));var g=i.data.ef||[],b=function(A){for(f=0,p=g.length;f<p;){if(A===g[f].nm||A===g[f].mn||A===g[f].ix)return c[f];f+=1}return null};return Object.defineProperty(b,"numProperties",{get:function(){return g.length}}),b}return null}function e(i,o,c,d){function f(A){for(var _=i.ef,R=0,P=_.length;R<P;){if(A===_[R].nm||A===_[R].mn||A===_[R].ix)return _[R].ty===5?g[R]:g[R]();R+=1}throw new Error}var p=propertyGroupFactory(f,c),g=[],b,x=i.ef.length;for(b=0;b<x;b+=1)i.ef[b].ty===5?g.push(e(i.ef[b],o.effectElements[b],o.effectElements[b].propertyGroup,d)):g.push(n(o.effectElements[b],i.ef[b].ty,d,p));return i.mn==="ADBE Color Control"&&Object.defineProperty(f,"color",{get:function(){return g[0]()}}),Object.defineProperties(f,{numProperties:{get:function(){return i.np}},_name:{value:i.nm},propertyGroup:{value:p}}),f.enabled=i.en!==0,f.active=f.enabled,f}function n(i,o,c,d){var f=ExpressionPropertyInterface(i.p);function p(){return o===10?c.comp.compInterface(i.p.v):f()}return i.p.setGroupProperty&&i.p.setGroupProperty(PropertyInterface("",d)),p}return s}(),ShapePathInterface=function(){return function(t,e,n){var i=e.sh;function o(d){return d==="Shape"||d==="shape"||d==="Path"||d==="path"||d==="ADBE Vector Shape"||d===2?o.path:null}var c=propertyGroupFactory(o,n);return i.setGroupProperty(PropertyInterface("Path",c)),Object.defineProperties(o,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:n}}),o}}(),ShapeExpressionInterface=function(){function s(_,R,P){var E=[],T,C=_?_.length:0;for(T=0;T<C;T+=1)_[T].ty==="gr"?E.push(e(_[T],R[T],P)):_[T].ty==="fl"?E.push(n(_[T],R[T],P)):_[T].ty==="st"?E.push(c(_[T],R[T],P)):_[T].ty==="tm"?E.push(d(_[T],R[T],P)):_[T].ty==="tr"||(_[T].ty==="el"?E.push(p(_[T],R[T],P)):_[T].ty==="sr"?E.push(g(_[T],R[T],P)):_[T].ty==="sh"?E.push(ShapePathInterface(_[T],R[T],P)):_[T].ty==="rc"?E.push(b(_[T],R[T],P)):_[T].ty==="rd"?E.push(x(_[T],R[T],P)):_[T].ty==="rp"?E.push(A(_[T],R[T],P)):_[T].ty==="gf"?E.push(i(_[T],R[T],P)):E.push(o(_[T],R[T])));return E}function t(_,R,P){var E,T=function(j){for(var L=0,O=E.length;L<O;){if(E[L]._name===j||E[L].mn===j||E[L].propertyIndex===j||E[L].ix===j||E[L].ind===j)return E[L];L+=1}return typeof j=="number"?E[j-1]:null};T.propertyGroup=propertyGroupFactory(T,P),E=s(_.it,R.it,T.propertyGroup),T.numProperties=E.length;var C=f(_.it[_.it.length-1],R.it[R.it.length-1],T.propertyGroup);return T.transform=C,T.propertyIndex=_.cix,T._name=_.nm,T}function e(_,R,P){var E=function(j){switch(j){case"ADBE Vectors Group":case"Contents":case 2:return E.content;default:return E.transform}};E.propertyGroup=propertyGroupFactory(E,P);var T=t(_,R,E.propertyGroup),C=f(_.it[_.it.length-1],R.it[R.it.length-1],E.propertyGroup);return E.content=T,E.transform=C,Object.defineProperty(E,"_name",{get:function(){return _.nm}}),E.numProperties=_.np,E.propertyIndex=_.ix,E.nm=_.nm,E.mn=_.mn,E}function n(_,R,P){function E(T){return T==="Color"||T==="color"?E.color:T==="Opacity"||T==="opacity"?E.opacity:null}return Object.defineProperties(E,{color:{get:ExpressionPropertyInterface(R.c)},opacity:{get:ExpressionPropertyInterface(R.o)},_name:{value:_.nm},mn:{value:_.mn}}),R.c.setGroupProperty(PropertyInterface("Color",P)),R.o.setGroupProperty(PropertyInterface("Opacity",P)),E}function i(_,R,P){function E(T){return T==="Start Point"||T==="start point"?E.startPoint:T==="End Point"||T==="end point"?E.endPoint:T==="Opacity"||T==="opacity"?E.opacity:null}return Object.defineProperties(E,{startPoint:{get:ExpressionPropertyInterface(R.s)},endPoint:{get:ExpressionPropertyInterface(R.e)},opacity:{get:ExpressionPropertyInterface(R.o)},type:{get:function(){return"a"}},_name:{value:_.nm},mn:{value:_.mn}}),R.s.setGroupProperty(PropertyInterface("Start Point",P)),R.e.setGroupProperty(PropertyInterface("End Point",P)),R.o.setGroupProperty(PropertyInterface("Opacity",P)),E}function o(){function _(){return null}return _}function c(_,R,P){var E=propertyGroupFactory(O,P),T=propertyGroupFactory(L,E);function C(V){Object.defineProperty(L,_.d[V].nm,{get:ExpressionPropertyInterface(R.d.dataProps[V].p)})}var M,j=_.d?_.d.length:0,L={};for(M=0;M<j;M+=1)C(M),R.d.dataProps[M].p.setGroupProperty(T);function O(V){return V==="Color"||V==="color"?O.color:V==="Opacity"||V==="opacity"?O.opacity:V==="Stroke Width"||V==="stroke width"?O.strokeWidth:null}return Object.defineProperties(O,{color:{get:ExpressionPropertyInterface(R.c)},opacity:{get:ExpressionPropertyInterface(R.o)},strokeWidth:{get:ExpressionPropertyInterface(R.w)},dash:{get:function(){return L}},_name:{value:_.nm},mn:{value:_.mn}}),R.c.setGroupProperty(PropertyInterface("Color",E)),R.o.setGroupProperty(PropertyInterface("Opacity",E)),R.w.setGroupProperty(PropertyInterface("Stroke Width",E)),O}function d(_,R,P){function E(C){return C===_.e.ix||C==="End"||C==="end"?E.end:C===_.s.ix?E.start:C===_.o.ix?E.offset:null}var T=propertyGroupFactory(E,P);return E.propertyIndex=_.ix,R.s.setGroupProperty(PropertyInterface("Start",T)),R.e.setGroupProperty(PropertyInterface("End",T)),R.o.setGroupProperty(PropertyInterface("Offset",T)),E.propertyIndex=_.ix,E.propertyGroup=P,Object.defineProperties(E,{start:{get:ExpressionPropertyInterface(R.s)},end:{get:ExpressionPropertyInterface(R.e)},offset:{get:ExpressionPropertyInterface(R.o)},_name:{value:_.nm}}),E.mn=_.mn,E}function f(_,R,P){function E(C){return _.a.ix===C||C==="Anchor Point"?E.anchorPoint:_.o.ix===C||C==="Opacity"?E.opacity:_.p.ix===C||C==="Position"?E.position:_.r.ix===C||C==="Rotation"||C==="ADBE Vector Rotation"?E.rotation:_.s.ix===C||C==="Scale"?E.scale:_.sk&&_.sk.ix===C||C==="Skew"?E.skew:_.sa&&_.sa.ix===C||C==="Skew Axis"?E.skewAxis:null}var T=propertyGroupFactory(E,P);return R.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",T)),R.transform.mProps.p.setGroupProperty(PropertyInterface("Position",T)),R.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",T)),R.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",T)),R.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",T)),R.transform.mProps.sk&&(R.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",T)),R.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",T))),R.transform.op.setGroupProperty(PropertyInterface("Opacity",T)),Object.defineProperties(E,{opacity:{get:ExpressionPropertyInterface(R.transform.mProps.o)},position:{get:ExpressionPropertyInterface(R.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(R.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(R.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(R.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(R.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(R.transform.mProps.sa)},_name:{value:_.nm}}),E.ty="tr",E.mn=_.mn,E.propertyGroup=P,E}function p(_,R,P){function E(M){return _.p.ix===M?E.position:_.s.ix===M?E.size:null}var T=propertyGroupFactory(E,P);E.propertyIndex=_.ix;var C=R.sh.ty==="tm"?R.sh.prop:R.sh;return C.s.setGroupProperty(PropertyInterface("Size",T)),C.p.setGroupProperty(PropertyInterface("Position",T)),Object.defineProperties(E,{size:{get:ExpressionPropertyInterface(C.s)},position:{get:ExpressionPropertyInterface(C.p)},_name:{value:_.nm}}),E.mn=_.mn,E}function g(_,R,P){function E(M){return _.p.ix===M?E.position:_.r.ix===M?E.rotation:_.pt.ix===M?E.points:_.or.ix===M||M==="ADBE Vector Star Outer Radius"?E.outerRadius:_.os.ix===M?E.outerRoundness:_.ir&&(_.ir.ix===M||M==="ADBE Vector Star Inner Radius")?E.innerRadius:_.is&&_.is.ix===M?E.innerRoundness:null}var T=propertyGroupFactory(E,P),C=R.sh.ty==="tm"?R.sh.prop:R.sh;return E.propertyIndex=_.ix,C.or.setGroupProperty(PropertyInterface("Outer Radius",T)),C.os.setGroupProperty(PropertyInterface("Outer Roundness",T)),C.pt.setGroupProperty(PropertyInterface("Points",T)),C.p.setGroupProperty(PropertyInterface("Position",T)),C.r.setGroupProperty(PropertyInterface("Rotation",T)),_.ir&&(C.ir.setGroupProperty(PropertyInterface("Inner Radius",T)),C.is.setGroupProperty(PropertyInterface("Inner Roundness",T))),Object.defineProperties(E,{position:{get:ExpressionPropertyInterface(C.p)},rotation:{get:ExpressionPropertyInterface(C.r)},points:{get:ExpressionPropertyInterface(C.pt)},outerRadius:{get:ExpressionPropertyInterface(C.or)},outerRoundness:{get:ExpressionPropertyInterface(C.os)},innerRadius:{get:ExpressionPropertyInterface(C.ir)},innerRoundness:{get:ExpressionPropertyInterface(C.is)},_name:{value:_.nm}}),E.mn=_.mn,E}function b(_,R,P){function E(M){return _.p.ix===M?E.position:_.r.ix===M?E.roundness:_.s.ix===M||M==="Size"||M==="ADBE Vector Rect Size"?E.size:null}var T=propertyGroupFactory(E,P),C=R.sh.ty==="tm"?R.sh.prop:R.sh;return E.propertyIndex=_.ix,C.p.setGroupProperty(PropertyInterface("Position",T)),C.s.setGroupProperty(PropertyInterface("Size",T)),C.r.setGroupProperty(PropertyInterface("Rotation",T)),Object.defineProperties(E,{position:{get:ExpressionPropertyInterface(C.p)},roundness:{get:ExpressionPropertyInterface(C.r)},size:{get:ExpressionPropertyInterface(C.s)},_name:{value:_.nm}}),E.mn=_.mn,E}function x(_,R,P){function E(M){return _.r.ix===M||M==="Round Corners 1"?E.radius:null}var T=propertyGroupFactory(E,P),C=R;return E.propertyIndex=_.ix,C.rd.setGroupProperty(PropertyInterface("Radius",T)),Object.defineProperties(E,{radius:{get:ExpressionPropertyInterface(C.rd)},_name:{value:_.nm}}),E.mn=_.mn,E}function A(_,R,P){function E(M){return _.c.ix===M||M==="Copies"?E.copies:_.o.ix===M||M==="Offset"?E.offset:null}var T=propertyGroupFactory(E,P),C=R;return E.propertyIndex=_.ix,C.c.setGroupProperty(PropertyInterface("Copies",T)),C.o.setGroupProperty(PropertyInterface("Offset",T)),Object.defineProperties(E,{copies:{get:ExpressionPropertyInterface(C.c)},offset:{get:ExpressionPropertyInterface(C.o)},_name:{value:_.nm}}),E.mn=_.mn,E}return function(_,R,P){var E;function T(M){if(typeof M=="number")return M=M===void 0?1:M,M===0?P:E[M-1];for(var j=0,L=E.length;j<L;){if(E[j]._name===M)return E[j];j+=1}return null}function C(){return P}return T.propertyGroup=propertyGroupFactory(T,C),E=s(_,R,T.propertyGroup),T.numProperties=E.length,T._name="Contents",T}}(),TextExpressionInterface=function(){return function(s){var t;function e(n){switch(n){case"ADBE Text Document":return e.sourceText;default:return null}}return Object.defineProperty(e,"sourceText",{get:function(){s.textProperty.getValue();var i=s.textProperty.currentData.t;return(!t||i!==t.value)&&(t=new String(i),t.value=i||new String(i),Object.defineProperty(t,"style",{get:function(){return{fillColor:s.textProperty.currentData.fc}}})),t}}),e}}();function _typeof(s){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(s)}var FootageInterface=function(){var s=function(n){var i="",o=n.getFootageData();function c(){return i="",o=n.getFootageData(),d}function d(f){if(o[f])return i=f,o=o[f],_typeof(o)==="object"?d:o;var p=f.indexOf(i);if(p!==-1){var g=parseInt(f.substr(p+i.length),10);return o=o[g],_typeof(o)==="object"?d:o}return""}return c},t=function(n){function i(o){return o==="Outline"?i.outlineInterface():null}return i._name="Outline",i.outlineInterface=s(n),i};return function(e){function n(i){return i==="Data"?n.dataInterface:null}return n._name="Data",n.dataInterface=t(e),n}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(s){return interfaces[s]||null}var expressionHelpers=function(){function s(c,d,f){d.x&&(f.k=!0,f.x=!0,f.initiateExpression=ExpressionManager.initiateExpression,f.effectsSequence.push(f.initiateExpression(c,d,f).bind(f)))}function t(c){return c*=this.elem.globalData.frameRate,c-=this.offsetTime,c!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<c?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(c,this._cachingAtTime),this._cachingAtTime.lastFrame=c),this._cachingAtTime.value}function e(c){var d=-.01,f=this.getValueAtTime(c),p=this.getValueAtTime(c+d),g=0;if(f.length){var b;for(b=0;b<f.length;b+=1)g+=Math.pow(p[b]-f[b],2);g=Math.sqrt(g)*100}else g=0;return g}function n(c){if(this.vel!==void 0)return this.vel;var d=-.001,f=this.getValueAtTime(c),p=this.getValueAtTime(c+d),g;if(f.length){g=createTypedArray("float32",f.length);var b;for(b=0;b<f.length;b+=1)g[b]=(p[b]-f[b])/d}else g=(p-f)/d;return g}function i(){return this.pv}function o(c){this.propertyGroup=c}return{searchExpressions:s,getSpeedAtTime:e,getVelocityAtTime:n,getValueAtTime:t,getStaticValueAtTime:i,setGroupProperty:o}}();function addPropertyDecorator(){function s(x,A,_){if(!this.k||!this.keyframes)return this.pv;x=x?x.toLowerCase():"";var R=this.comp.renderedFrame,P=this.keyframes,E=P[P.length-1].t;if(R<=E)return this.pv;var T,C;_?(A?T=Math.abs(E-this.elem.comp.globalData.frameRate*A):T=Math.max(0,E-this.elem.data.ip),C=E-T):((!A||A>P.length-1)&&(A=P.length-1),C=P[P.length-1-A].t,T=E-C);var M,j,L;if(x==="pingpong"){var O=Math.floor((R-C)/T);if(O%2!==0)return this.getValueAtTime((T-(R-C)%T+C)/this.comp.globalData.frameRate,0)}else if(x==="offset"){var V=this.getValueAtTime(C/this.comp.globalData.frameRate,0),X=this.getValueAtTime(E/this.comp.globalData.frameRate,0),tt=this.getValueAtTime(((R-C)%T+C)/this.comp.globalData.frameRate,0),Y=Math.floor((R-C)/T);if(this.pv.length){for(L=new Array(V.length),j=L.length,M=0;M<j;M+=1)L[M]=(X[M]-V[M])*Y+tt[M];return L}return(X-V)*Y+tt}else if(x==="continue"){var Q=this.getValueAtTime(E/this.comp.globalData.frameRate,0),ct=this.getValueAtTime((E-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(L=new Array(Q.length),j=L.length,M=0;M<j;M+=1)L[M]=Q[M]+(Q[M]-ct[M])*((R-E)/this.comp.globalData.frameRate)/5e-4;return L}return Q+(Q-ct)*((R-E)/.001)}return this.getValueAtTime(((R-C)%T+C)/this.comp.globalData.frameRate,0)}function t(x,A,_){if(!this.k)return this.pv;x=x?x.toLowerCase():"";var R=this.comp.renderedFrame,P=this.keyframes,E=P[0].t;if(R>=E)return this.pv;var T,C;_?(A?T=Math.abs(this.elem.comp.globalData.frameRate*A):T=Math.max(0,this.elem.data.op-E),C=E+T):((!A||A>P.length-1)&&(A=P.length-1),C=P[A].t,T=C-E);var M,j,L;if(x==="pingpong"){var O=Math.floor((E-R)/T);if(O%2===0)return this.getValueAtTime(((E-R)%T+E)/this.comp.globalData.frameRate,0)}else if(x==="offset"){var V=this.getValueAtTime(E/this.comp.globalData.frameRate,0),X=this.getValueAtTime(C/this.comp.globalData.frameRate,0),tt=this.getValueAtTime((T-(E-R)%T+E)/this.comp.globalData.frameRate,0),Y=Math.floor((E-R)/T)+1;if(this.pv.length){for(L=new Array(V.length),j=L.length,M=0;M<j;M+=1)L[M]=tt[M]-(X[M]-V[M])*Y;return L}return tt-(X-V)*Y}else if(x==="continue"){var Q=this.getValueAtTime(E/this.comp.globalData.frameRate,0),ct=this.getValueAtTime((E+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(L=new Array(Q.length),j=L.length,M=0;M<j;M+=1)L[M]=Q[M]+(Q[M]-ct[M])*(E-R)/.001;return L}return Q+(Q-ct)*(E-R)/.001}return this.getValueAtTime((T-((E-R)%T+E))/this.comp.globalData.frameRate,0)}function e(x,A){if(!this.k)return this.pv;if(x=(x||.4)*.5,A=Math.floor(A||5),A<=1)return this.pv;var _=this.comp.renderedFrame/this.comp.globalData.frameRate,R=_-x,P=_+x,E=A>1?(P-R)/(A-1):1,T=0,C=0,M;this.pv.length?M=createTypedArray("float32",this.pv.length):M=0;for(var j;T<A;){if(j=this.getValueAtTime(R+T*E),this.pv.length)for(C=0;C<this.pv.length;C+=1)M[C]+=j[C];else M+=j;T+=1}if(this.pv.length)for(C=0;C<this.pv.length;C+=1)M[C]/=A;else M/=A;return M}function n(x){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var A=this._transformCachingAtTime.v;if(A.cloneFromProps(this.pre.props),this.appliedTransformations<1){var _=this.a.getValueAtTime(x);A.translate(-_[0]*this.a.mult,-_[1]*this.a.mult,_[2]*this.a.mult)}if(this.appliedTransformations<2){var R=this.s.getValueAtTime(x);A.scale(R[0]*this.s.mult,R[1]*this.s.mult,R[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var P=this.sk.getValueAtTime(x),E=this.sa.getValueAtTime(x);A.skewFromAxis(-P*this.sk.mult,E*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var T=this.r.getValueAtTime(x);A.rotate(-T*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var C=this.rz.getValueAtTime(x),M=this.ry.getValueAtTime(x),j=this.rx.getValueAtTime(x),L=this.or.getValueAtTime(x);A.rotateZ(-C*this.rz.mult).rotateY(M*this.ry.mult).rotateX(j*this.rx.mult).rotateZ(-L[2]*this.or.mult).rotateY(L[1]*this.or.mult).rotateX(L[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var O=this.px.getValueAtTime(x),V=this.py.getValueAtTime(x);if(this.data.p.z){var X=this.pz.getValueAtTime(x);A.translate(O*this.px.mult,V*this.py.mult,-X*this.pz.mult)}else A.translate(O*this.px.mult,V*this.py.mult,0)}else{var tt=this.p.getValueAtTime(x);A.translate(tt[0]*this.p.mult,tt[1]*this.p.mult,-tt[2]*this.p.mult)}return A}function i(){return this.v.clone(new Matrix)}var o=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(x,A,_){var R=o(x,A,_);return R.dynamicProperties.length?R.getValueAtTime=n.bind(R):R.getValueAtTime=i.bind(R),R.setGroupProperty=expressionHelpers.setGroupProperty,R};var c=PropertyFactory.getProp;PropertyFactory.getProp=function(x,A,_,R,P){var E=c(x,A,_,R,P);E.kf?E.getValueAtTime=expressionHelpers.getValueAtTime.bind(E):E.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(E),E.setGroupProperty=expressionHelpers.setGroupProperty,E.loopOut=s,E.loopIn=t,E.smooth=e,E.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(E),E.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(E),E.numKeys=A.a===1?A.k.length:0,E.propertyIndex=A.ix;var T=0;return _!==0&&(T=createTypedArray("float32",A.a===1?A.k[0].s.length:A.k.length)),E._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:T},expressionHelpers.searchExpressions(x,A,E),E.k&&P.addDynamicProperty(E),E};function d(x){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),x*=this.elem.globalData.frameRate,x-=this.offsetTime,x!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<x?this._caching.lastIndex:0,this._cachingAtTime.lastTime=x,this.interpolateShape(x,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var f=ShapePropertyFactory.getConstructorFunction(),p=ShapePropertyFactory.getKeyframedConstructorFunction();function g(){}g.prototype={vertices:function(A,_){this.k&&this.getValue();var R=this.v;_!==void 0&&(R=this.getValueAtTime(_,0));var P,E=R._length,T=R[A],C=R.v,M=createSizedArray(E);for(P=0;P<E;P+=1)A==="i"||A==="o"?M[P]=[T[P][0]-C[P][0],T[P][1]-C[P][1]]:M[P]=[T[P][0],T[P][1]];return M},points:function(A){return this.vertices("v",A)},inTangents:function(A){return this.vertices("i",A)},outTangents:function(A){return this.vertices("o",A)},isClosed:function(){return this.v.c},pointOnPath:function(A,_){var R=this.v;_!==void 0&&(R=this.getValueAtTime(_,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(R));for(var P=this._segmentsLength,E=P.lengths,T=P.totalLength*A,C=0,M=E.length,j=0,L;C<M;){if(j+E[C].addedLength>T){var O=C,V=R.c&&C===M-1?0:C+1,X=(T-j)/E[C].addedLength;L=bez.getPointInSegment(R.v[O],R.v[V],R.o[O],R.i[V],X,E[C]);break}else j+=E[C].addedLength;C+=1}return L||(L=R.c?[R.v[0][0],R.v[0][1]]:[R.v[R._length-1][0],R.v[R._length-1][1]]),L},vectorOnPath:function(A,_,R){A==1?A=this.v.c:A==0&&(A=.999);var P=this.pointOnPath(A,_),E=this.pointOnPath(A+.001,_),T=E[0]-P[0],C=E[1]-P[1],M=Math.sqrt(Math.pow(T,2)+Math.pow(C,2));if(M===0)return[0,0];var j=R==="tangent"?[T/M,C/M]:[-C/M,T/M];return j},tangentOnPath:function(A,_){return this.vectorOnPath(A,_,"tangent")},normalOnPath:function(A,_){return this.vectorOnPath(A,_,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([g],f),extendPrototype([g],p),p.prototype.getValueAtTime=d,p.prototype.initiateExpression=ExpressionManager.initiateExpression;var b=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(x,A,_,R,P){var E=b(x,A,_,R,P);return E.propertyIndex=A.ix,E.lock=!1,_===3?expressionHelpers.searchExpressions(x,A.pt,E):_===4&&expressionHelpers.searchExpressions(x,A.ks,E),E.k&&x.addDynamicProperty(E),E}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function s(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(t,e){var n=this.calculateExpression(e);if(t.t!==n){var i={};return this.copyData(i,t),i.t=n.toString(),i.__complete=!1,i}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=s}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function s(t,e){var n=createNS("feMerge");n.setAttribute("result",t);var i,o;for(o=0;o<e.length;o+=1)i=createNS("feMergeNode"),i.setAttribute("in",e[o]),n.appendChild(i),n.appendChild(i);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(s,t,e,n,i){this.filterManager=t;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=o,o.setAttribute("result",n+"_tint_1"),s.appendChild(o),o=createNS("feColorMatrix"),o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result",n+"_tint_2"),s.appendChild(o),this.matrixFilter=o;var c=this.createMergeNode(n,[i,n+"_tint_1",n+"_tint_2"]);s.appendChild(c)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+n+" 0"),this.matrixFilter.setAttribute("values",e[0]-t[0]+" 0 0 0 "+t[0]+" "+(e[1]-t[1])+" 0 0 0 "+t[1]+" "+(e[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}};function SVGFillFilter(s,t,e,n){this.filterManager=t;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result",n),s.appendChild(i),this.matrixFilter=i}SVGFillFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,e=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+e+" 0")}};function SVGStrokeEffect(s,t,e){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var s=this.elem.layerElement.children||this.elem.layerElement.childNodes,t,e,n,i;for(this.filterManager.effectElements[1].p.v===1?(i=this.elem.maskManager.masksProperties.length,n=0):(n=this.filterManager.effectElements[0].p.v-1,i=n+1),e=createNS("g"),e.setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1),n;n<i;n+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:n});if(this.filterManager.effectElements[10].p.v===3){var o=createNS("mask"),c=createElementID();o.setAttribute("id",c),o.setAttribute("mask-type","alpha"),o.appendChild(e),this.elem.globalData.defs.appendChild(o);var d=createNS("g");for(d.setAttribute("mask","url("+getLocationHref()+"#"+c+")");s[0];)d.appendChild(s[0]);this.elem.layerElement.appendChild(d),this.masker=o,e.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(s=this.elem.layerElement.children||this.elem.layerElement.childNodes;s.length;)this.elem.layerElement.removeChild(s[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(s){this.initialized||this.initialize();var t,e=this.paths.length,n,i;for(t=0;t<e;t+=1)if(this.paths[t].m!==-1&&(n=this.elem.maskManager.viewData[this.paths[t].m],i=this.paths[t].p,(s||this.filterManager._mdf||n.prop._mdf)&&i.setAttribute("d",n.lastPath),s||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var o;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var c=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,d=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,f=i.getTotalLength();o="0 0 0 "+f*c+" ";var p=f*(d-c),g=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,b=Math.floor(p/g),x;for(x=0;x<b;x+=1)o+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";o+="0 "+f*10+" 0 0"}else o="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;i.setAttribute("stroke-dasharray",o)}if((s||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(s||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(s||this.filterManager.effectElements[3].p._mdf)){var A=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(A[0]*255)+","+bmFloor(A[1]*255)+","+bmFloor(A[2]*255)+")")}};function SVGTritoneFilter(s,t,e,n){this.filterManager=t;var i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.appendChild(i);var o=createNS("feComponentTransfer");o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("result",n),this.matrixFilter=o;var c=createNS("feFuncR");c.setAttribute("type","table"),o.appendChild(c),this.feFuncR=c;var d=createNS("feFuncG");d.setAttribute("type","table"),o.appendChild(d),this.feFuncG=d;var f=createNS("feFuncB");f.setAttribute("type","table"),o.appendChild(f),this.feFuncB=f,s.appendChild(o)}SVGTritoneFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,i=n[0]+" "+e[0]+" "+t[0],o=n[1]+" "+e[1]+" "+t[1],c=n[2]+" "+e[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",c)}};function SVGProLevelsFilter(s,t,e,n){this.filterManager=t;var i=this.filterManager.effectElements,o=createNS("feComponentTransfer");(i[10].p.k||i[10].p.v!==0||i[11].p.k||i[11].p.v!==1||i[12].p.k||i[12].p.v!==1||i[13].p.k||i[13].p.v!==0||i[14].p.k||i[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",o)),(i[17].p.k||i[17].p.v!==0||i[18].p.k||i[18].p.v!==1||i[19].p.k||i[19].p.v!==1||i[20].p.k||i[20].p.v!==0||i[21].p.k||i[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",o)),(i[24].p.k||i[24].p.v!==0||i[25].p.k||i[25].p.v!==1||i[26].p.k||i[26].p.v!==1||i[27].p.k||i[27].p.v!==0||i[28].p.k||i[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",o)),(i[31].p.k||i[31].p.v!==0||i[32].p.k||i[32].p.v!==1||i[33].p.k||i[33].p.v!==1||i[34].p.k||i[34].p.v!==0||i[35].p.k||i[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",o)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(o.setAttribute("color-interpolation-filters","sRGB"),s.appendChild(o)),(i[3].p.k||i[3].p.v!==0||i[4].p.k||i[4].p.v!==1||i[5].p.k||i[5].p.v!==1||i[6].p.k||i[6].p.v!==0||i[7].p.k||i[7].p.v!==1)&&(o=createNS("feComponentTransfer"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("result",n),s.appendChild(o),this.feFuncRComposed=this.createFeFunc("feFuncR",o),this.feFuncGComposed=this.createFeFunc("feFuncG",o),this.feFuncBComposed=this.createFeFunc("feFuncB",o))}SVGProLevelsFilter.prototype.createFeFunc=function(s,t){var e=createNS(s);return e.setAttribute("type","table"),t.appendChild(e),e},SVGProLevelsFilter.prototype.getTableValue=function(s,t,e,n,i){for(var o=0,c=256,d,f=Math.min(s,t),p=Math.max(s,t),g=Array.call(null,{length:c}),b,x=0,A=i-n,_=t-s;o<=256;)d=o/256,d<=f?b=_<0?i:n:d>=p?b=_<0?n:i:b=n+A*Math.pow((d-s)/_,1/e),g[x]=b,x+=1,o+=256/(c-1);return g.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var t,e=this.filterManager.effectElements;this.feFuncRComposed&&(s||e[3].p._mdf||e[4].p._mdf||e[5].p._mdf||e[6].p._mdf||e[7].p._mdf)&&(t=this.getTableValue(e[3].p.v,e[4].p.v,e[5].p.v,e[6].p.v,e[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(s||e[10].p._mdf||e[11].p._mdf||e[12].p._mdf||e[13].p._mdf||e[14].p._mdf)&&(t=this.getTableValue(e[10].p.v,e[11].p.v,e[12].p.v,e[13].p.v,e[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(s||e[17].p._mdf||e[18].p._mdf||e[19].p._mdf||e[20].p._mdf||e[21].p._mdf)&&(t=this.getTableValue(e[17].p.v,e[18].p.v,e[19].p.v,e[20].p.v,e[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(s||e[24].p._mdf||e[25].p._mdf||e[26].p._mdf||e[27].p._mdf||e[28].p._mdf)&&(t=this.getTableValue(e[24].p.v,e[25].p.v,e[26].p.v,e[27].p.v,e[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(s||e[31].p._mdf||e[32].p._mdf||e[33].p._mdf||e[34].p._mdf||e[35].p._mdf)&&(t=this.getTableValue(e[31].p.v,e[32].p.v,e[33].p.v,e[34].p.v,e[35].p.v),this.feFuncA.setAttribute("tableValues",t))}};function SVGDropShadowEffect(s,t,e,n,i){var o=t.container.globalData.renderConfig.filterSize,c=t.data.fs||o;s.setAttribute("x",c.x||o.x),s.setAttribute("y",c.y||o.y),s.setAttribute("width",c.width||o.width),s.setAttribute("height",c.height||o.height),this.filterManager=t;var d=createNS("feGaussianBlur");d.setAttribute("in","SourceAlpha"),d.setAttribute("result",n+"_drop_shadow_1"),d.setAttribute("stdDeviation","0"),this.feGaussianBlur=d,s.appendChild(d);var f=createNS("feOffset");f.setAttribute("dx","25"),f.setAttribute("dy","0"),f.setAttribute("in",n+"_drop_shadow_1"),f.setAttribute("result",n+"_drop_shadow_2"),this.feOffset=f,s.appendChild(f);var p=createNS("feFlood");p.setAttribute("flood-color","#00ff00"),p.setAttribute("flood-opacity","1"),p.setAttribute("result",n+"_drop_shadow_3"),this.feFlood=p,s.appendChild(p);var g=createNS("feComposite");g.setAttribute("in",n+"_drop_shadow_3"),g.setAttribute("in2",n+"_drop_shadow_2"),g.setAttribute("operator","in"),g.setAttribute("result",n+"_drop_shadow_4"),s.appendChild(g);var b=this.createMergeNode(n,[n+"_drop_shadow_4",i]);s.appendChild(b)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){if((s||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),s||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(t[0]*255),Math.round(t[1]*255),Math.round(t[2]*255)))}if((s||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),s||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var e=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=e*Math.cos(n),o=e*Math.sin(n);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(s,t,e){this.initialized=!1,this.filterManager=t,this.filterElem=s,this.elem=e,e.matteElement=createNS("g"),e.matteElement.appendChild(e.layerElement),e.matteElement.appendChild(e.transformedElement),e.baseElement=e.matteElement}SVGMatte3Effect.prototype.findSymbol=function(s){for(var t=0,e=_svgMatteSymbols.length;t<e;){if(_svgMatteSymbols[t]===s)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(s,t){var e=s.layerElement.parentNode;if(e){for(var n=e.children,i=0,o=n.length;i<o&&n[i]!==s.layerElement;)i+=1;var c;i<=o-2&&(c=n[i+1]);var d=createNS("use");d.setAttribute("href","#"+t),c?e.insertBefore(d,c):e.appendChild(d)}},SVGMatte3Effect.prototype.setElementAsMask=function(s,t){if(!this.findSymbol(t)){var e=createElementID(),n=createNS("mask");n.setAttribute("id",t.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var i=s.globalData.defs;i.appendChild(n);var o=createNS("symbol");o.setAttribute("id",e),this.replaceInParent(t,e),o.appendChild(t.layerElement),i.appendChild(o);var c=createNS("use");c.setAttribute("href","#"+e),n.appendChild(c),t.data.hd=!1,t.show()}s.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var s=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,e=0,n=t.length;e<n;)t[e]&&t[e].data.ind===s&&this.setElementAsMask(this.elem,t[e]),e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(s,t,e,n){s.setAttribute("x","-100%"),s.setAttribute("y","-100%"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),this.filterManager=t;var i=createNS("feGaussianBlur");i.setAttribute("result",n),s.appendChild(i),this.feGaussianBlur=i}SVGGaussianBlurEffect.prototype.renderFrame=function(s){if(s||this.filterManager._mdf){var t=.3,e=this.filterManager.effectElements[0].p.v*t,n=this.filterManager.effectElements[1].p.v,i=n==3?0:e,o=n==2?0:e;this.feGaussianBlur.setAttribute("stdDeviation",i+" "+o);var c=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",c)}};function TransformEffect(){}TransformEffect.prototype.init=function(s){this.effectsManager=s,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(s){if(this._opMdf=!1,this._mdf=!1,s||this.effectsManager._mdf){var t=this.effectsManager.effectElements,e=t[0].p.v,n=t[1].p.v,i=t[2].p.v===1,o=t[3].p.v,c=i?o:t[4].p.v,d=t[5].p.v,f=t[6].p.v,p=t[7].p.v;this.matrix.reset(),this.matrix.translate(-e[0],-e[1],e[2]),this.matrix.scale(c*.01,o*.01,1),this.matrix.rotate(-p*degToRads),this.matrix.skewFromAxis(-d*degToRads,(f+90)*degToRads),this.matrix.translate(n[0],n[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(s,t){this.init(t)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(s){this.init(s)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$2,lottie$2.exports)),lottie$2.exports}var lottieExports=requireLottie();const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray$1(s,t){(t==null||t>s.length)&&(t=s.length);for(var e=0,n=Array(t);e<t;e++)n[e]=s[e];return n}function _arrayWithHoles(s){if(Array.isArray(s))return s}function _defineProperty$1(s,t,e){return(t=_toPropertyKey(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function _iterableToArrayLimit(s,t){var e=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(e!=null){var n,i,o,c,d=[],f=!0,p=!1;try{if(o=(e=e.call(s)).next,t!==0)for(;!(f=(n=o.call(e)).done)&&(d.push(n.value),d.length!==t);f=!0);}catch(g){p=!0,i=g}finally{try{if(!f&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(p)throw i}}return d}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$2(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,n)}return e}function _objectSpread2(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$2(Object(e),!0).forEach(function(n){_defineProperty$1(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys$2(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function _objectWithoutProperties$1(s,t){if(s==null)return{};var e,n,i=_objectWithoutPropertiesLoose$1(s,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(n=0;n<o.length;n++)e=o[n],t.includes(e)||{}.propertyIsEnumerable.call(s,e)&&(i[e]=s[e])}return i}function _objectWithoutPropertiesLoose$1(s,t){if(s==null)return{};var e={};for(var n in s)if({}.hasOwnProperty.call(s,n)){if(t.includes(n))continue;e[n]=s[n]}return e}function _slicedToArray(s,t){return _arrayWithHoles(s)||_iterableToArrayLimit(s,t)||_unsupportedIterableToArray$1(s,t)||_nonIterableRest()}function _toPrimitive(s,t){if(typeof s!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function _toPropertyKey(s){var t=_toPrimitive(s,"string");return typeof t=="symbol"?t:t+""}function _unsupportedIterableToArray$1(s,t){if(s){if(typeof s=="string")return _arrayLikeToArray$1(s,t);var e={}.toString.call(s).slice(8,-1);return e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set"?Array.from(s):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray$1(s,t):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function s(t,e){var n=t.animationData,i=t.loop,o=t.autoplay,c=t.initialSegment,d=t.onComplete,f=t.onLoopComplete,p=t.onEnterFrame,g=t.onSegmentStart,b=t.onConfigReady,x=t.onDataReady,A=t.onDataFailed,_=t.onLoadedImages,R=t.onDOMLoaded,P=t.onDestroy;t.lottieRef,t.renderer,t.name,t.assetsPath,t.rendererSettings;var E=_objectWithoutProperties$1(t,_excluded$1),T=reactExports.useState(!1),C=_slicedToArray(T,2),M=C[0],j=C[1],L=reactExports.useRef(),O=reactExports.useRef(null),V=function(){var K;(K=L.current)===null||K===void 0||K.play()},X=function(){var K;(K=L.current)===null||K===void 0||K.stop()},tt=function(){var K;(K=L.current)===null||K===void 0||K.pause()},Y=function(K){var st;(st=L.current)===null||st===void 0||st.setSpeed(K)},Q=function(K,st){var ht;(ht=L.current)===null||ht===void 0||ht.goToAndPlay(K,st)},ct=function(K,st){var ht;(ht=L.current)===null||ht===void 0||ht.goToAndStop(K,st)},nt=function(K){var st;(st=L.current)===null||st===void 0||st.setDirection(K)},J=function(K,st){var ht;(ht=L.current)===null||ht===void 0||ht.playSegments(K,st)},D=function(K){var st;(st=L.current)===null||st===void 0||st.setSubframe(K)},U=function(K){var st;return(st=L.current)===null||st===void 0?void 0:st.getDuration(K)},N=function(){var K;(K=L.current)===null||K===void 0||K.destroy(),L.current=void 0},I=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},st;if(O.current){(st=L.current)===null||st===void 0||st.destroy();var ht=_objectSpread2(_objectSpread2(_objectSpread2({},t),K),{},{container:O.current});return L.current=lottie.loadAnimation(ht),j(!!L.current),function(){var xt;(xt=L.current)===null||xt===void 0||xt.destroy(),L.current=void 0}}};reactExports.useEffect(function(){var z=I();return function(){return z==null?void 0:z()}},[n,i]),reactExports.useEffect(function(){L.current&&(L.current.autoplay=!!o)},[o]),reactExports.useEffect(function(){if(L.current){if(!c){L.current.resetSegments(!0);return}!Array.isArray(c)||!c.length||((L.current.currentRawFrame<c[0]||L.current.currentRawFrame>c[1])&&(L.current.currentRawFrame=c[0]),L.current.setSegment(c[0],c[1]))}},[c]),reactExports.useEffect(function(){var z=[{name:"complete",handler:d},{name:"loopComplete",handler:f},{name:"enterFrame",handler:p},{name:"segmentStart",handler:g},{name:"config_ready",handler:b},{name:"data_ready",handler:x},{name:"data_failed",handler:A},{name:"loaded_images",handler:_},{name:"DOMLoaded",handler:R},{name:"destroy",handler:P}],K=z.filter(function(ht){return ht.handler!=null});if(K.length){var st=K.map(function(ht){var xt;return(xt=L.current)===null||xt===void 0||xt.addEventListener(ht.name,ht.handler),function(){var mt;(mt=L.current)===null||mt===void 0||mt.removeEventListener(ht.name,ht.handler)}});return function(){st.forEach(function(ht){return ht()})}}},[d,f,p,g,b,x,A,_,R,P]);var B=React.createElement("div",_objectSpread2({style:e,ref:O},E));return{View:B,play:V,stop:X,pause:tt,setSpeed:Y,goToAndStop:ct,goToAndPlay:Q,setDirection:nt,playSegments:J,setSubframe:D,getDuration:U,destroy:N,animationContainerRef:O,animationLoaded:M,animationItem:L.current}};function getContainerVisibility(s){var t=s.getBoundingClientRect(),e=t.top,n=t.height,i=window.innerHeight-e,o=window.innerHeight+n;return i/o}function getContainerCursorPosition(s,t,e){var n=s.getBoundingClientRect(),i=n.top,o=n.left,c=n.width,d=n.height,f=(t-o)/c,p=(e-i)/d;return{x:f,y:p}}var useInitInteractivity=function s(t){var e=t.wrapperRef,n=t.animationItem,i=t.mode,o=t.actions;reactExports.useEffect(function(){var c=e.current;if(!(!c||!n||!o.length)){n.stop();var d=function(){var g=null,b=function(){var A=getContainerVisibility(c),_=o.find(function(P){var E=P.visibility;return E&&A>=E[0]&&A<=E[1]});if(_){if(_.type==="seek"&&_.visibility&&_.frames.length===2){var R=_.frames[0]+Math.ceil((A-_.visibility[0])/(_.visibility[1]-_.visibility[0])*_.frames[1]);//! goToAndStop must be relative to the start of the current segment
n.goToAndStop(R-n.firstFrame-1,!0)}_.type==="loop"&&(g===null||g!==_.frames||n.isPaused)&&(n.playSegments(_.frames,!0),g=_.frames),_.type==="play"&&n.isPaused&&(n.resetSegments(!0),n.play()),_.type==="stop"&&n.goToAndStop(_.frames[0]-n.firstFrame-1,!0)}};return document.addEventListener("scroll",b),function(){document.removeEventListener("scroll",b)}},f=function(){var g=function(_,R){var P=_,E=R;if(P!==-1&&E!==-1){var T=getContainerCursorPosition(c,P,E);P=T.x,E=T.y}var C=o.find(function(L){var O=L.position;return O&&Array.isArray(O.x)&&Array.isArray(O.y)?P>=O.x[0]&&P<=O.x[1]&&E>=O.y[0]&&E<=O.y[1]:O&&!Number.isNaN(O.x)&&!Number.isNaN(O.y)?P===O.x&&E===O.y:!1});if(C){if(C.type==="seek"&&C.position&&Array.isArray(C.position.x)&&Array.isArray(C.position.y)&&C.frames.length===2){var M=(P-C.position.x[0])/(C.position.x[1]-C.position.x[0]),j=(E-C.position.y[0])/(C.position.y[1]-C.position.y[0]);n.playSegments(C.frames,!0),n.goToAndStop(Math.ceil((M+j)/2*(C.frames[1]-C.frames[0])),!0)}C.type==="loop"&&n.playSegments(C.frames,!0),C.type==="play"&&(n.isPaused&&n.resetSegments(!1),n.playSegments(C.frames)),C.type==="stop"&&n.goToAndStop(C.frames[0],!0)}},b=function(_){g(_.clientX,_.clientY)},x=function(){g(-1,-1)};return c.addEventListener("mousemove",b),c.addEventListener("mouseout",x),function(){c.removeEventListener("mousemove",b),c.removeEventListener("mouseout",x)}};switch(i){case"scroll":return d();case"cursor":return f()}}},[i,n])},useLottieInteractivity=function s(t){var e=t.actions,n=t.mode,i=t.lottieObj,o=i.animationItem,c=i.View,d=i.animationContainerRef;return useInitInteractivity({actions:e,animationItem:o,mode:n,wrapperRef:d}),c},_excluded$2=["style","interactivity"],Lottie=function s(t){var e,n,i,o=t.style,c=t.interactivity,d=_objectWithoutProperties$1(t,_excluded$2),f=useLottie(d,o),p=f.View,g=f.play,b=f.stop,x=f.pause,A=f.setSpeed,_=f.goToAndStop,R=f.goToAndPlay,P=f.setDirection,E=f.playSegments,T=f.setSubframe,C=f.getDuration,M=f.destroy,j=f.animationContainerRef,L=f.animationLoaded,O=f.animationItem;return reactExports.useEffect(function(){t.lottieRef&&(t.lottieRef.current={play:g,stop:b,pause:x,setSpeed:A,goToAndPlay:R,goToAndStop:_,setDirection:P,playSegments:E,setSubframe:T,getDuration:C,destroy:M,animationContainerRef:j,animationLoaded:L,animationItem:O})},[(e=t.lottieRef)===null||e===void 0?void 0:e.current]),useLottieInteractivity({lottieObj:{View:p,play:g,stop:b,pause:x,setSpeed:A,goToAndStop:_,goToAndPlay:R,setDirection:P,playSegments:E,setSubframe:T,getDuration:C,destroy:M,animationContainerRef:j,animationLoaded:L,animationItem:O},actions:(n=c==null?void 0:c.actions)!==null&&n!==void 0?n:[],mode:(i=c==null?void 0:c.mode)!==null&&i!==void 0?i:"scroll"})};const nm="Main Scene",ddd=0,h=500,w=500,meta={g:"@lottiefiles/creator 1.46.1"},layers=[{ty:0,nm:"Precomp Layer shapes",sr:1,st:0,op:72,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[540,540]},s:{a:0,k:[47,47]},sk:{a:0,k:0},p:{a:0,k:[253.79999999999998,253.79999999999998]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},w:1080,h:1080,refId:"precomp_shapes_3f99eb94-986a-4f77-9c6b-a681464cfbac",ind:1},{ty:4,nm:"Progress Bar",sr:1,st:0,op:125,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[250,250]},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{s:[360],t:50}]},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"sh",bm:0,hd:!1,nm:"Progress Bar",d:1,ks:{a:0,k:{c:!0,i:[[-87.47614999999999,0],[0,-87.47614999999999],[87.47614999999999,0],[0,87.47614999999999]],o:[[87.47614999999999,0],[0,87.47614999999999],[-87.47614999999999,0],[0,-87.47614999999999]],v:[[0,-158.5],[158.5,0],[0,158.5],[-158.5,0]]}}},{ty:"st",bm:0,hd:!1,nm:"Stroke",lc:2,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:32},c:{a:0,k:[.5294,.2745,1]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Path",e:{a:0,k:6},o:{a:0,k:0},s:{a:0,k:22},m:1}],ind:2},{ty:4,nm:"Progress Bar",sr:1,st:0,op:125,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[250,250]},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{s:[360],t:50}]},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"sh",bm:0,hd:!1,nm:"Progress Bar",d:1,ks:{a:0,k:{c:!0,i:[[-87.47614999999999,0],[0,-87.47614999999999],[87.47614999999999,0],[0,87.47614999999999]],o:[[87.47614999999999,0],[0,87.47614999999999],[-87.47614999999999,0],[0,-87.47614999999999]],v:[[0,-158.5],[158.5,0],[0,158.5],[-158.5,0]]}}},{ty:"st",bm:0,hd:!1,nm:"Stroke",lc:2,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:32},c:{a:0,k:[.7294,.6078,.9882]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Path",e:{a:0,k:0},o:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[22],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:25},{s:[22],t:50}]},s:{a:0,k:16},m:1}],ind:3},{ty:4,nm:"Progress Track",sr:1,st:0,op:125,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[250,250]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"sh",bm:0,hd:!1,nm:"Progress Track",d:1,ks:{a:0,k:{c:!0,i:[[-87.47614999999999,0],[0,-87.47614999999999],[87.47614999999999,0],[0,87.47614999999999]],o:[[87.47614999999999,0],[0,87.47614999999999],[-87.47614999999999,0],[0,-87.47614999999999]],v:[[0,-158.5],[158.5,0],[0,158.5],[-158.5,0]]}}},{ty:"st",bm:0,hd:!1,nm:"Stroke",lc:2,lj:2,ml:1,o:{a:0,k:100},w:{a:0,k:32},c:{a:0,k:[.8392,.9961,.9451]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Path",e:{a:0,k:100},o:{a:0,k:0},s:{a:0,k:0},m:1}],ind:4}],v="5.7.0",fr=25,op=50,ip=0,assets=[{nm:"shapes",id:"precomp_shapes_3f99eb94-986a-4f77-9c6b-a681464cfbac",fr:25,layers:[{ty:4,nm:"Shape Layer 4",sr:1,st:9,op:81,ip:9,hd:!1,ln:"21",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[39,29,0]},s:{a:0,k:[20,20,95.238]},sk:{a:0,k:0},p:{a:0,k:[540,540]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"gr",bm:0,hd:!1,nm:"Ellipse 1",it:[{ty:"el",bm:0,hd:!1,nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0]},s:{a:0,k:[558,558]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Paths 1",e:{a:1,k:[{o:{x:.333,y:0},i:{x:0,y:1},s:[0],t:12},{s:[100],t:24}]},o:{a:0,k:0},s:{a:1,k:[{o:{x:.302,y:0},i:{x:.036,y:1},s:[0],t:42},{s:[100],t:54}]},m:1},{ty:"st",bm:0,hd:!1,nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100},w:{a:0,k:58},c:{a:0,k:[.3373,.0784,.8235]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[78,78]},sk:{a:0,k:0},p:{a:0,k:[39,29]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:1},{ty:4,nm:"Shape Layer 3",sr:1,st:9,op:81,ip:9,hd:!1,ln:"18",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[39,29,0]},s:{a:0,k:[46,46,102.222]},sk:{a:0,k:0},p:{a:0,k:[540,540]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"gr",bm:0,hd:!1,nm:"Ellipse 1",it:[{ty:"el",bm:0,hd:!1,nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0]},s:{a:0,k:[558,558]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Paths 1",e:{a:1,k:[{o:{x:.333,y:0},i:{x:0,y:1},s:[0],t:9},{s:[100],t:21}]},o:{a:0,k:0},s:{a:1,k:[{o:{x:.302,y:0},i:{x:.036,y:1},s:[0],t:39},{s:[100],t:52}]},m:1},{ty:"st",bm:0,hd:!1,nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100},w:{a:0,k:58},c:{a:0,k:[.3373,.0784,.8235]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[78,78]},sk:{a:0,k:0},p:{a:0,k:[39,29]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:2},{ty:4,nm:"Shape Layer 2",sr:1,st:4,op:76,ip:4,hd:!1,ln:"17",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[39,29,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[540,540]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"gr",bm:0,hd:!1,nm:"Ellipse 1",it:[{ty:"el",bm:0,hd:!1,nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0]},s:{a:0,k:[558,558]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Paths 1",e:{a:1,k:[{o:{x:.333,y:0},i:{x:0,y:1},s:[0],t:4},{s:[100],t:16}]},o:{a:0,k:0},s:{a:1,k:[{o:{x:.302,y:0},i:{x:.036,y:1},s:[0],t:36},{s:[100],t:50}]},m:1},{ty:"st",bm:0,hd:!1,nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100},w:{a:0,k:95},c:{a:0,k:[.5294,.2745,1]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[78,78]},sk:{a:0,k:0},p:{a:0,k:[39,29]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",bm:0,hd:!1,nm:"Group 1",it:[{ty:"tm",bm:0,hd:!1,nm:"Trim Paths 1",e:{a:0,k:100},o:{a:0,k:0},s:{a:0,k:0},m:1},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:3},{ty:4,nm:"Shape Layer 1",sr:1,st:0,op:72,ip:0,hd:!1,ln:"16",ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[39,29,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[540,540]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}},shapes:[{ty:"gr",bm:0,hd:!1,nm:"Ellipse 1",it:[{ty:"el",bm:0,hd:!1,nm:"Ellipse Path 1",d:1,p:{a:0,k:[0,0]},s:{a:0,k:[558,558]}},{ty:"tm",bm:0,hd:!1,nm:"Trim Paths 1",e:{a:1,k:[{o:{x:.333,y:0},i:{x:0,y:1},s:[0],t:0},{s:[100],t:12}]},o:{a:0,k:0},s:{a:1,k:[{o:{x:.302,y:0},i:{x:.036,y:1},s:[0],t:33},{s:[100],t:46}]},m:1},{ty:"st",bm:0,hd:!1,nm:"Stroke 1",lc:1,lj:1,ml:4,o:{a:0,k:100},w:{a:0,k:144},c:{a:0,k:[.3373,.0784,.8235]}},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[78,78]},sk:{a:0,k:0},p:{a:0,k:[39,29]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]},{ty:"gr",bm:0,hd:!1,nm:"Group 1",it:[{ty:"tm",bm:0,hd:!1,nm:"Trim Paths 1",e:{a:0,k:100},o:{a:0,k:0},s:{a:0,k:100},m:1},{ty:"tr",a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},p:{a:0,k:[0,0]},r:{a:0,k:0},sa:{a:0,k:0},o:{a:0,k:100}}]}],ind:4}]}],loadingAnimation={nm,ddd,h,w,meta,layers,v,fr,op,ip,assets};function LoadingSpinner({size:s=180}){return jsxRuntimeExports.jsx("div",{className:"d-flex align-items-center justify-content-center py-5",children:jsxRuntimeExports.jsx("div",{style:{width:s,height:s},children:jsxRuntimeExports.jsx(Lottie,{animationData:loadingAnimation,loop:!0})})})}function Dashboard({onLogout:s}){const[t,e]=reactExports.useState(!1),[n,i]=reactExports.useState(!1),[o,c]=reactExports.useState(null),[d,f]=reactExports.useState(()=>document.body.classList.contains("dark")?"dark":"light"),[p,g]=reactExports.useState(null),[b,x]=reactExports.useState([]),[A,_]=reactExports.useState([]),[R,P]=reactExports.useState([]),[E,T]=reactExports.useState(!1);useNavigate();const[C,M]=reactExports.useState(!0),[j,L]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{try{const{data:tt}=await api.get("/users/getMe");c(tt)}catch(tt){console.error("Не удалось получить профиль",tt)}finally{L(!0),setTimeout(()=>M(!1),500)}})()},[]),reactExports.useEffect(()=>{document.body.classList.toggle("dark",d==="dark"),document.body.classList.toggle("light",d!=="dark")},[d]),reactExports.useEffect(()=>{if(!o)return;(async()=>{try{const[{data:tt},{data:Y},{data:Q}]=await Promise.all([api.get("/documents",{params:{type:"lastupdate"}}),api.get("/activity",{params:{top:10}}),api.get("/rooms/last-active",{params:{top:10}})]);tt.sort((ct,nt)=>new Date(nt.createdAt)-new Date(ct.createdAt)),_(tt.slice(0,10)),x(Q),g(Q[0]??null)}catch(tt){console.error("Не удалось загрузить дашборд",tt)}finally{M(!1)}})()},[o]),reactExports.useEffect(()=>{api.get("/activity/dashboard?top=10").then(X=>{Array.isArray(X.data)&&P(X.data)})},[]);const O=d==="dark"?"bg-dark bg-gradient text-light":"bg-white text-dark";function V(X){const{type:tt,meta:Y,createdAt:Q}=X;switch(new Date(Q).toLocaleString(),tt){case"CreatedDocument":return`📄 Добавлен документ «${(Y==null?void 0:Y.Name)??"(без названия)"}».`;case"UpdatedDocument":return`✏️ Обновлён документ «${(Y==null?void 0:Y.Name)??"(без названия)"}» v${Y==null?void 0:Y.Version}-${(Y==null?void 0:Y.ForkPath)||"0"}.`;case"DeletedDocument":return`🗑️ Удалён документ «${(Y==null?void 0:Y.Name)??"(без названия)"}».`;case"ArchivedDocument":return`📦 Архивирован документ ${Y==null?void 0:Y.Name} v${Y==null?void 0:Y.Version}-${(Y==null?void 0:Y.ForkPath)||"0"}.`;case"RenamedDocument":return`🔖 Переименован документ: «${Y==null?void 0:Y.OldName}» → «${Y==null?void 0:Y.NewName}».`;case"IssuedToken":return`🔑 Выдан доступ к документу «${Y==null?void 0:Y.Name}».`;case"UpdatedToken":return`🔐 Обновлён доступ к документу «${Y==null?void 0:Y.Name}».`;case"RevokedToken":return`🚫 Отозван доступ к документу «${Y==null?void 0:Y.Name}».`;case"CreatedRoom":return`🆕 Создана комната «${(Y==null?void 0:Y.RoomTitle)??"(без названия)"}».`;case"InvitedToRoom":return`✉️ Приглашение в комнату «${(Y==null?void 0:Y.RoomTitle)??"(без названия)"}» от ${Y==null?void 0:Y.UserName}.`;case"AcceptedRoom":return`✅ Приглашение для ${Y==null?void 0:Y.UserName} в комнату принято.`;case"DeclinedRoom":return`🚫 Приглашение для ${Y==null?void 0:Y.UserName} в комнату отклонено.`;case"RevokedRoom":return`🚫 Отозван доступ к комнате «${Y==null?void 0:Y.RoomTitle}».`;case"UpdatedRoomAccess":return`🔧 Изменён уровень доступа в комнате «${(Y==null?void 0:Y.RoomTitle)??"(без названия)"}».`;case"DeletedRoom":return`❌ Удалена комната «${(Y==null?void 0:Y.RoomTitle)??"(без названия)"}» с ${(Y==null?void 0:Y.Count)??"0"} документами.`;case"InvitedToContacts":return`👤 Запрос на добавление в контакты от ${Y==null?void 0:Y.UserName}.`;case"AcceptedContact":return`✅ Ваш запрос принял ${Y==null?void 0:Y.UserName}.`;case"DeclinedContact":return`🚫 Ваш запрос отклонил ${Y==null?void 0:Y.UserName}.`;default:return"ℹ️ Неизвестная активность"}}return C?jsxRuntimeExports.jsx("div",{className:`fade-screen ${j?"fade-out":""} ${d==="dark"?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:400})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("nav",{className:"navbar navbar-expand-lg shadow-sm",style:{background:d==="dark"?"linear-gradient(90deg, #2c2c2c, #1a1a1a)":"#fff"},children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("img",{src:"/logo-small.png",alt:"Logo",height:38,className:"me-3"}),jsxRuntimeExports.jsxs("div",{className:"ms-auto d-flex align-items-center gap-3",children:[o?jsxRuntimeExports.jsx("span",{className:"fw-medium me-2",children:`Здравствуйте, ${o.name}`}):jsxRuntimeExports.jsx("span",{className:"text-muted me-2",children:"Загрузка профиля…"}),jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Профиль",onClick:()=>e(!0),style:{color:d==="dark"?"#ccc":"#333"},children:jsxRuntimeExports.jsx(FaUserCircle,{size:24})}),jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Контакты",style:{color:d==="dark"?"#ccc":"#333"},onClick:()=>i(!0),children:jsxRuntimeExports.jsx(FaAddressBook,{size:22})}),jsxRuntimeExports.jsx(Notifications,{theme:d,isOpen:E,onToggle:()=>T(X=>!X),onActivitiesRead:X=>P(tt=>tt.map(Y=>X.includes(Y.id)?{...Y,isRead:!0}:Y))}),jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>f(d==="dark"?"light":"dark"),style:{color:d==="dark"?"#ccc":"#333"},children:d==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})}),jsxRuntimeExports.jsxs("button",{className:`btn btn-${d==="dark"?"secondary":"outline-secondary"} btn-sm ms-2`,title:"Выйти",onClick:s,children:[jsxRuntimeExports.jsx(FaSignOutAlt,{size:18,className:"me-1"}),"Выйти"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"container py-4",children:jsxRuntimeExports.jsxs("div",{className:"row g-4",children:[jsxRuntimeExports.jsx("div",{className:"col-md-3",children:jsxRuntimeExports.jsxs("div",{className:`card shadow h-100 ${O}`,children:[jsxRuntimeExports.jsx("div",{className:"card-header bg-transparent d-flex align-items-center justify-content-between",children:jsxRuntimeExports.jsxs("div",{className:"d-flex gap-2",children:[jsxRuntimeExports.jsxs(Link,{to:"/room-manager",className:"btn btn-primary btn-sm",children:[jsxRuntimeExports.jsx(FaFolderOpen,{className:"me-1"})," Мои комнаты"]}),jsxRuntimeExports.jsxs(Link,{to:"/rooms/create",className:"btn btn-success btn-sm",children:[jsxRuntimeExports.jsx(FaPlus,{className:"me-1"})," Комната"]})]})}),jsxRuntimeExports.jsxs("ul",{className:"list-group list-group-flush",children:[b.length===0&&jsxRuntimeExports.jsx("li",{className:"list-group-item text-muted text-center",children:"Нет активных комнат"}),b.map(X=>jsxRuntimeExports.jsxs("li",{className:`list-group-item ${(p==null?void 0:p.id)===X.id?"active":""}`,style:{cursor:"pointer"},onClick:()=>g(X),children:[jsxRuntimeExports.jsx(FaFolder,{className:"me-2"}),X.title]},X.id))]})]})}),jsxRuntimeExports.jsx("div",{className:"col-md-5",children:jsxRuntimeExports.jsxs("div",{className:`card shadow h-100 ${O}`,children:[jsxRuntimeExports.jsxs("div",{className:"card-header bg-transparent d-flex align-items-center justify-content-between",children:[jsxRuntimeExports.jsx("div",{className:"card-header bg-transparent fw-bold",children:"Последние активности"}),jsxRuntimeExports.jsxs(Link,{to:"/activities",className:"btn btn-primary btn-sm",title:"История моих действий",children:[jsxRuntimeExports.jsx(FaHistory,{className:"me-1"})," Мои активности"]})]}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[R.length>0?R.map(X=>jsxRuntimeExports.jsx("div",{},X.id)):jsxRuntimeExports.jsx("div",{className:"text-center text-muted",children:"Нет активности"}),jsxRuntimeExports.jsx("ul",{className:"list-group list-group-flush",children:R.map(X=>jsxRuntimeExports.jsx("li",{className:"list-group-item",children:jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:V(X)}),jsxRuntimeExports.jsx("span",{className:"text-muted small",children:new Date(X.createdAt).toLocaleDateString()})]})},X.id))})]})]})}),jsxRuntimeExports.jsx("div",{className:"col-md-4",children:jsxRuntimeExports.jsxs("div",{className:`card shadow h-100 ${O}`,children:[jsxRuntimeExports.jsxs("div",{className:"card-header bg-transparent d-flex justify-content-between align-items-center",children:[jsxRuntimeExports.jsx("span",{className:"fw-bold",children:"Последние документы"}),jsxRuntimeExports.jsxs(Link,{to:"/documents",className:"btn btn-primary btn-sm",title:"Менеджер файлов",children:[jsxRuntimeExports.jsx(FaFolder,{className:"me-1"})," Мои документы"]})]}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[A.length===0&&jsxRuntimeExports.jsx("li",{className:"list-group-item text-muted text-center",children:"Нет документов"}),jsxRuntimeExports.jsx("ul",{className:"list-group list-group-flush",children:A.map(X=>{var tt;return jsxRuntimeExports.jsxs("li",{className:"list-group-item",children:[jsxRuntimeExports.jsx("div",{className:"fw-medium",children:X.name}),jsxRuntimeExports.jsxs("div",{className:"small text-muted",children:[((tt=X.room)==null?void 0:tt.title)||"-"," | Изменён:"," ",new Date(X.createdAt).toLocaleDateString()]})]},X.id)})})]})]})})]})}),jsxRuntimeExports.jsxs("footer",{className:`text-center py-3 mt-4 ${d==="dark"?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO. Все права защищены."]}),o&&t&&jsxRuntimeExports.jsx(ProfileModal,{show:t,onClose:()=>e(!1),user:o,theme:d,onUpdateUser:X=>{c(tt=>({...tt,...X})),e(!1)}}),jsxRuntimeExports.jsx(ContactsModal,{show:n,onClose:()=>i(!1),theme:d})]})}function NotFound(){return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100 text-center p-3",children:[jsxRuntimeExports.jsx("img",{src:"/404notfound.png",alt:"404 Not Found",style:{maxWidth:400,width:"100%"},className:"mb-4"}),jsxRuntimeExports.jsx("h1",{className:"display-5 fw-bold",children:"Страница не найдена"}),jsxRuntimeExports.jsx("p",{className:"lead mb-4",children:"Упс… кажется, такой страницы не существует."}),jsxRuntimeExports.jsx(Link,{to:"/",className:"btn btn-primary",children:"Вернуться на главную"})]})}function Forbidden(){return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100 text-center p-3",children:[jsxRuntimeExports.jsx("img",{src:"/403forbidden.png",alt:"403 Forbidden",style:{maxWidth:400,width:"100%"},className:"mb-4"}),jsxRuntimeExports.jsx("h1",{className:"display-6 fw-bold",children:"Доступ запрещён"}),jsxRuntimeExports.jsx("p",{className:"lead mb-4",children:"У вас нет прав для просмотра этой страницы."}),jsxRuntimeExports.jsx(Link,{to:"/",className:"btn btn-primary",children:"На главную"})]})}function ForgotPasswordPage(){const s=useNavigate(),[t,e]=reactExports.useState(()=>localStorage.getItem("theme")||"light"),[n,i]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,f]=reactExports.useState(""),[p,g]=reactExports.useState(!1),b=async x=>{var A,_,R,P;if(x.preventDefault(),c(""),f(""),!n.trim()){c("Введите email");return}g(!0);try{await api.post("/password/forgot",{email:n}),f("Если email зарегистрирован, на него будет отправлено письмо со ссылкой для сброса пароля.")}catch(E){console.error(E),c(((_=(A=E.response)==null?void 0:A.data)==null?void 0:_.error)||((P=(R=E.response)==null?void 0:R.data)==null?void 0:P.message)||"Ошибка при отправке письма")}g(!1)};return jsxRuntimeExports.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[jsxRuntimeExports.jsx("nav",{className:"navbar navbar-expand-lg shadow-sm",style:{background:t==="dark"?"linear-gradient(90deg, #2c2c2c, #1a1a1a)":"#fff"},children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link d-flex align-items-center p-0",onClick:()=>s(-1),children:[jsxRuntimeExports.jsx(FaArrowLeft,{size:24,className:t==="dark"?"text-light":"text-dark"}),jsxRuntimeExports.jsx("span",{className:`ms-2 fw-bold ${t==="dark"?"text-light":"text-dark"}`,children:"Восстановление пароля"})]}),jsxRuntimeExports.jsx("div",{className:"ms-auto",children:jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>e(t==="dark"?"light":"dark"),style:{color:t==="dark"?"#ccc":"#333"},children:t==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})})})]})}),jsxRuntimeExports.jsx("div",{className:"container my-4 flex-fill d-flex justify-content-center",children:jsxRuntimeExports.jsxs("div",{className:`card w-100 ${t==="dark"?"bg-secondary text-light":""}`,style:{maxWidth:500},children:[jsxRuntimeExports.jsx("div",{className:`card-header ${t==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("h5",{className:"mb-0",children:"Запросить сброс пароля"})}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[o&&jsxRuntimeExports.jsx("div",{className:"alert alert-danger",children:o}),d&&jsxRuntimeExports.jsx("div",{className:"alert alert-info",children:d}),jsxRuntimeExports.jsxs("form",{onSubmit:b,autoComplete:"off",children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"email",id:"forgotEmail",className:"form-control",placeholder:"Email",value:n,onChange:x=>i(x.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"forgotEmail",children:"Email"})]}),jsxRuntimeExports.jsxs("button",{className:"btn btn-primary w-100",type:"submit",disabled:p,children:[p&&jsxRuntimeExports.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),p?"Отправляем...":"Отправить письмо"]})]})]})]})}),jsxRuntimeExports.jsxs("footer",{className:`py-3 text-center ${t==="dark"?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO"]})]})}function ResetPassword(){const s=useNavigate(),[t]=useSearchParams(),e=t.get("token"),n=t.get("userId"),[i,o]=reactExports.useState(localStorage.getItem("theme")||"light"),c=i==="dark";reactExports.useEffect(()=>(document.body.classList.add(i==="dark"?"dark":"light"),document.body.classList.remove(i==="dark"?"light":"dark"),()=>{document.body.classList.remove("dark","light")}),[i]);const[d,f]=reactExports.useState(""),[p,g]=reactExports.useState(""),[b,x]=reactExports.useState(!1),[A,_]=reactExports.useState(!1),[R,P]=reactExports.useState(""),[E,T]=reactExports.useState(""),[C,M]=reactExports.useState(!1),j=async L=>{var O,V;if(L.preventDefault(),T(""),P(""),!d||!p)return T("Заполните все поля");if(d!==p)return T("Пароли не совпадают");try{M(!0),await api.post("/password/reset",{userId:n,token:e,newPassword:d,confirmPassword:p}),P("Пароль успешно сброшен! Теперь вы можете войти с новым паролем.")}catch(X){T(((V=(O=X.response)==null?void 0:O.data)==null?void 0:V.error)||"Ошибка сброса пароля")}finally{M(!1)}};return jsxRuntimeExports.jsxs("div",{className:"min-vh-100 d-flex flex-column justify-content-center",style:{backgroundColor:c?"#121212":"#f8f9fa"},children:[jsxRuntimeExports.jsx("nav",{className:`navbar navbar-expand-lg shadow-sm ${c?"bg-dark text-light":"bg-light text-dark"}`,children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link d-flex align-items-center p-0",onClick:()=>s("/"),children:[jsxRuntimeExports.jsx(FaArrowLeft,{size:24,className:c?"text-light":"text-dark"}),jsxRuntimeExports.jsx("span",{className:`ms-2 fw-bold ${c?"text-light":"text-dark"}`,children:"Сброс пароля"})]}),jsxRuntimeExports.jsx("div",{className:"ms-auto",children:jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>{const L=c?"light":"dark";o(L),localStorage.setItem("theme",L)},style:{color:c?"#ccc":"#333"},children:c?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})})})]})}),jsxRuntimeExports.jsx("div",{className:"container my-4 flex-fill d-flex justify-content-center",children:jsxRuntimeExports.jsxs("div",{className:`card w-100 ${c?"bg-dark text-light border-secondary":""}`,style:{maxWidth:500},children:[jsxRuntimeExports.jsx("div",{className:`card-header ${c?"bg-secondary text-light":""}`,children:jsxRuntimeExports.jsx("h5",{className:"mb-0",children:"Введите новый пароль"})}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[E&&jsxRuntimeExports.jsx("div",{className:"alert alert-danger",children:E}),R&&jsxRuntimeExports.jsx("div",{className:"alert alert-success",children:R}),jsxRuntimeExports.jsxs("form",{onSubmit:j,children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3 position-relative",children:[jsxRuntimeExports.jsx("input",{type:b?"text":"password",id:"newPwd",className:"form-control",style:c?{backgroundColor:"#3a3a3a",color:"#eee",border:"1px solid #555"}:{},placeholder:"Новый пароль",value:d,onChange:L=>f(L.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"newPwd",children:"Новый пароль"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>x(!b),className:"btn btn-sm position-absolute top-50 end-0 translate-middle-y me-2",style:{zIndex:2},children:b?jsxRuntimeExports.jsx(FaEyeSlash,{}):jsxRuntimeExports.jsx(FaEye,{})})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3 position-relative",children:[jsxRuntimeExports.jsx("input",{type:A?"text":"password",id:"confirmPwd",className:"form-control",style:c?{backgroundColor:"#3a3a3a",color:"#eee",border:"1px solid #555"}:{},placeholder:"Подтвердите пароль",value:p,onChange:L=>g(L.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"confirmPwd",children:"Подтвердите пароль"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>_(!A),className:"btn btn-sm position-absolute top-50 end-0 translate-middle-y me-2",style:{zIndex:2},children:A?jsxRuntimeExports.jsx(FaEyeSlash,{}):jsxRuntimeExports.jsx(FaEye,{})})]}),jsxRuntimeExports.jsxs("button",{className:"btn btn-primary w-100",type:"submit",disabled:C,children:[C&&jsxRuntimeExports.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),C?"Сохраняем...":"Сбросить пароль"]})]})]})]})}),jsxRuntimeExports.jsxs("footer",{className:`py-3 text-center ${c?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO"]})]})}const scriptRel="modulepreload",assetsURL=function(s){return"/"+s},seen={},__vitePreload=function s(t,e,n){let i=Promise.resolve();if(e&&e.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(e.map(p=>{if(p=assetsURL(p),p in seen)return;seen[p]=!0;const g=p.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":scriptRel,g||(x.as="script"),x.crossOrigin="",x.href=p,f&&x.setAttribute("nonce",f),document.head.appendChild(x),g)return new Promise((A,_)=>{x.addEventListener("load",A),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})};var __webpack_require__={};__webpack_require__.d=(s,t)=>{for(var e in t)__webpack_require__.o(t,e)&&!__webpack_require__.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};__webpack_require__.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var __webpack_exports__=globalThis.pdfjsLib={};__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorParamsType:()=>AnnotationEditorParamsType,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer$1,AnnotationMode:()=>AnnotationMode,ColorPicker:()=>ColorPicker,DOMSVGFactory:()=>DOMSVGFactory,DrawLayer:()=>DrawLayer,FeatureTest:()=>util_FeatureTest,GlobalWorkerOptions:()=>GlobalWorkerOptions,ImageKind:()=>util_ImageKind,InvalidPDFException:()=>InvalidPDFException,MissingPDFException:()=>MissingPDFException,OPS:()=>OPS,OutputScale:()=>OutputScale,PDFDataRangeTransport:()=>PDFDataRangeTransport$1,PDFDateString:()=>PDFDateString,PDFWorker:()=>PDFWorker,PasswordResponses:()=>PasswordResponses$1,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,TextLayer:()=>TextLayer$1,UnexpectedResponseException:()=>UnexpectedResponseException,Util:()=>Util,VerbosityLevel:()=>VerbosityLevel,XfaLayer:()=>XfaLayer,build:()=>build,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getDocument:()=>getDocument,getFilenameFromUrl:()=>getFilenameFromUrl,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,getXfaPageViewport:()=>getXfaPageViewport,isDataScheme:()=>isDataScheme,isPdfFile:()=>isPdfFile,noContextMenu:()=>noContextMenu,normalizeUnicode:()=>normalizeUnicode,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,version:()=>version});const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IDENTITY_MATRIX=[1,0,0,1,0,0],FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],MAX_IMAGE_SIZE_TO_CACHE=1e7,LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(s){Number.isInteger(s)&&(verbosity=s)}function getVerbosityLevel(){return verbosity}function info(s){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${s}`)}function warn(s){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${s}`)}function unreachable(s){throw new Error(s)}function assert(s,t){s||unreachable(t)}function _isValidProtocol(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=stringToUTF8String(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(_isValidProtocol(n))return n}catch{}return null}function shadow(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const BaseException=function s(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class PasswordException extends BaseException{constructor(t,e){super(t,"PasswordException"),this.code=e}}class UnknownErrorException extends BaseException{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class InvalidPDFException extends BaseException{constructor(t){super(t,"InvalidPDFException")}}class MissingPDFException extends BaseException{constructor(t){super(t,"MissingPDFException")}}class UnexpectedResponseException extends BaseException{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class FormatError extends BaseException{constructor(t){super(t,"FormatError")}}class AbortException extends BaseException{constructor(t){super(t,"AbortException")}}function bytesToString(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&unreachable("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const o=Math.min(i+e,t),c=s.subarray(i,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function stringToBytes(s){typeof s!="string"&&unreachable("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function string32(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function objectFromMap(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function isLittleEndian(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?shadow(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):shadow(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return shadow(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var sa,Gf,Dg;class Util{static makeHexColor(t,e,n){return`#${hexNumbers[t]}${hexNumbers[e]}${hexNumbers[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,o]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],o[0],c[0]),Math.min(n[1],i[1],o[1],c[1]),Math.max(n[0],i[0],o[0],c[0]),Math.max(n[1],i[1],o[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],d=(n+c)/2,f=Math.sqrt((n+c)**2-4*(n*c-o*i))/2,p=d+f||1,g=d-f||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,i,c]}static bezierBoundingBox(t,e,n,i,o,c,d,f,p){return p?(p[0]=Math.min(p[0],t,d),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,d),p[3]=Math.max(p[3],e,f)):p=[Math.min(t,d),Math.min(e,f),Math.max(t,d),Math.max(e,f)],$(this,sa,Dg).call(this,t,n,o,d,e,i,c,f,3*(-t+3*(n-o)+d),6*(t-2*n+o),3*(n-t),p),$(this,sa,Dg).call(this,t,n,o,d,e,i,c,f,3*(-e+3*(i-c)+f),6*(e-2*i+c),3*(i-e),p),p}}sa=new WeakSet,Gf=function(t,e,n,i,o,c,d,f,p,g){if(p<=0||p>=1)return;const b=1-p,x=p*p,A=x*p,_=b*(b*(b*t+3*p*e)+3*x*n)+A*i,R=b*(b*(b*o+3*p*c)+3*x*d)+A*f;g[0]=Math.min(g[0],_),g[1]=Math.min(g[1],R),g[2]=Math.max(g[2],_),g[3]=Math.max(g[3],R)},Dg=function(t,e,n,i,o,c,d,f,p,g,b,x){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&$(this,sa,Gf).call(this,t,e,n,i,o,c,d,f,-b/g,x);return}const A=g**2-4*b*p;if(A<0)return;const _=Math.sqrt(A),R=2*p;$(this,sa,Gf).call(this,t,e,n,i,o,c,d,f,(-g+_)/R,x),$(this,sa,Gf).call(this,t,e,n,i,o,c,d,f,(-g-_)/R,x)},q(Util,sa);function stringToUTF8String(s){return decodeURIComponent(escape(s))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(s){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]])),s.replaceAll(NormalizeRegex,(t,e,n)=>e?e.normalize("NFKC"):NormalizationMap.get(n))}function getUuid(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return bytesToString(s)}const AnnotationPrefix="pdfjs_internal_id_",FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function toBase64Util(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(bytesToString(s))}const SVG_NS="http://www.w3.org/2000/svg",Do=class Do{};Jt(Do,"CSS",96),Jt(Do,"PDF",72),Jt(Do,"PDF_TO_CSS_UNITS",Do.CSS/Do.PDF);let PixelsPerInch=Do;async function fetchData(s,t="text"){if(isValidFetchUrl(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class PageViewport{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=o;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,b,x;switch(n%=360,n<0&&(n+=360),n){case 180:p=-1,g=0,b=0,x=1;break;case 90:p=0,g=1,b=1,x=0;break;case 270:p=0,g=-1,b=-1,x=0;break;case 0:p=1,g=0,b=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(b=-b,x=-x);let A,_,R,P;p===0?(A=Math.abs(f-t[1])*e+i,_=Math.abs(d-t[0])*e+o,R=(t[3]-t[1])*e,P=(t[2]-t[0])*e):(A=Math.abs(d-t[0])*e+i,_=Math.abs(f-t[1])*e+o,R=(t[2]-t[0])*e,P=(t[3]-t[1])*e),this.transform=[p*e,g*e,b*e,x*e,A-p*e*d-b*e*f,_-g*e*d-x*e*f],this.width=R,this.height=P}get rawDims(){const{viewBox:t}=this;return shadow(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(t,e){return Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Util.applyTransform([t[0],t[1]],this.transform),n=Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return Util.applyInverseTransform([t,e],this.transform)}}class RenderingCancelledException extends BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function isDataScheme(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function isPdfFile(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function getFilenameFromUrl(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(s,t="document.pdf"){if(typeof s!="string")return t;if(isDataScheme(s))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let o=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class StatTimer{constructor(){Jt(this,"started",Object.create(null));Jt(this,"times",[])}time(t){t in this.started&&warn(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||warn(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-i}ms
`);return t.join("")}}function isValidFetchUrl(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function noContextMenu(s){s.preventDefault()}function deprecated(s){console.log("Deprecated API usage: "+s)}var wh;class PDFDateString{static toDateObject(t){if(!t||typeof t!="string")return null;y(this,wh)||H(this,wh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=y(this,wh).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,p==="-"?(c+=g,d+=b):p==="+"&&(c-=g,d-=b),new Date(Date.UTC(n,i,o,c,d,f))}}wh=new WeakMap,q(PDFDateString,wh);function getXfaPageViewport(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new PageViewport({viewBox:o,scale:t,rotation:e})}function getRGB(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(warn(`Not a valid color format: "${s}"`),[0,0,0])}function getColorValues(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,getRGB(n))}t.remove()}function getCurrentTransform(s){const{a:t,b:e,c:n,d:i,e:o,f:c}=s.getTransform();return[t,e,n,i,o,c]}function getCurrentTransformInverse(s){const{a:t,b:e,c:n,d:i,e:o,f:c}=s.getTransform().invertSelf();return[t,e,n,i,o,c]}function setLayerDimensions(s,t,e=!1,n=!0){if(t instanceof PageViewport){const{pageWidth:i,pageHeight:o}=t.rawDims,{style:c}=s,d=util_FeatureTest.isCSSRoundSupported,f=`var(--scale-factor) * ${i}px`,p=`var(--scale-factor) * ${o}px`,g=d?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,b=d?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!e||t.rotation%180===0?(c.width=g,c.height=b):(c.width=b,c.height=g)}n&&s.setAttribute("data-main-rotation",t.rotation)}class OutputScale{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Na,Oo,Ei,Io,Th,Ch,Sp,rb,xn,ab,lb,qf,cb,Fg;const Pr=class Pr{constructor(t){q(this,xn);q(this,Na,null);q(this,Oo,null);q(this,Ei);q(this,Io,null);q(this,Th,null);H(this,Ei,t),y(Pr,Ch)||H(Pr,Ch,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=H(this,Na,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=y(this,Ei)._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.addEventListener("pointerdown",$(Pr,Sp,rb),{signal:e});const n=H(this,Io,document.createElement("div"));n.className="buttons",t.append(n);const i=y(this,Ei).toolbarPosition;if(i){const{style:o}=t,c=y(this,Ei)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return $(this,xn,cb).call(this),t}get div(){return y(this,Na)}hide(){var t;y(this,Na).classList.add("hidden"),(t=y(this,Oo))==null||t.hideDropdown()}show(){var t;y(this,Na).classList.remove("hidden"),(t=y(this,Th))==null||t.shown()}async addAltText(t){const e=await t.render();$(this,xn,qf).call(this,e),y(this,Io).prepend(e,y(this,xn,Fg)),H(this,Th,t)}addColorPicker(t){H(this,Oo,t);const e=t.renderButton();$(this,xn,qf).call(this,e),y(this,Io).prepend(e,y(this,xn,Fg))}remove(){var t;y(this,Na).remove(),(t=y(this,Oo))==null||t.destroy(),H(this,Oo,null)}};Na=new WeakMap,Oo=new WeakMap,Ei=new WeakMap,Io=new WeakMap,Th=new WeakMap,Ch=new WeakMap,Sp=new WeakSet,rb=function(t){t.stopPropagation()},xn=new WeakSet,ab=function(t){y(this,Ei)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},lb=function(t){y(this,Ei)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},qf=function(t){const e=y(this,Ei)._uiManager._signal;t.addEventListener("focusin",$(this,xn,ab).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",$(this,xn,lb).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",noContextMenu,{signal:e})},cb=function(){const{editorType:t,_uiManager:e}=y(this,Ei),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",y(Pr,Ch)[t]),$(this,xn,qf).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),y(this,Io).append(n)},Fg=function(){const t=document.createElement("div");return t.className="divider",t},q(Pr,Sp),q(Pr,Ch,null);let EditorToolbar=Pr;var kh,Bo,Ho,ao,ub,hb,db;class HighlightToolbar{constructor(t){q(this,ao);q(this,kh,null);q(this,Bo,null);q(this,Ho);H(this,Ho,t)}show(t,e,n){const[i,o]=$(this,ao,hb).call(this,e,n),{style:c}=y(this,Bo)||H(this,Bo,$(this,ao,ub).call(this));t.append(y(this,Bo)),c.insetInlineEnd=`${100*i}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){y(this,Bo).remove()}}kh=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,ao=new WeakSet,ub=function(){const t=H(this,Bo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",noContextMenu,{signal:y(this,Ho)._signal});const e=H(this,kh,document.createElement("div"));return e.className="buttons",t.append(e),$(this,ao,db).call(this),t},hb=function(t,e){let n=0,i=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const d=o.x+(e?o.width:0);if(c>n){i=d,n=c;continue}e?d>i&&(i=d):d<i&&(i=d)}return[e?1-i:i,n]},db=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=y(this,Ho)._signal;t.addEventListener("contextmenu",noContextMenu,{signal:n}),t.addEventListener("click",()=>{y(this,Ho).highlightSelection("floating_button")},{signal:n}),y(this,kh).append(t)};function bindEvents(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}function opacityToHex(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}var _p;class IdManager{constructor(){q(this,_p,0)}get id(){return`${AnnotationEditorPrefix}${gn(this,_p)._++}`}}_p=new WeakMap;var Ec,Ph,an,Sc,Xf;const jy=class jy{constructor(){q(this,Sc);q(this,Ec,getUuid());q(this,Ph,0);q(this,an,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:o}=t;return $(this,Sc,Xf).call(this,`${e}_${n}_${i}_${o}`,t)}async getFromUrl(t){return $(this,Sc,Xf).call(this,t,t)}async getFromBlob(t,e){const n=await e;return $(this,Sc,Xf).call(this,t,n)}async getFromId(t){y(this,an)||H(this,an,new Map);const e=y(this,an).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){y(this,an)||H(this,an,new Map);let n=y(this,an).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${y(this,Ec)}_${gn(this,Ph)._++}`,refCounter:1,isSvg:!1},y(this,an).set(t,n),y(this,an).set(n.id,n),n}getSvgUrl(t){const e=y(this,an).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;y(this,an)||H(this,an,new Map);const e=y(this,an).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${y(this,Ec)}_`)}};Ec=new WeakMap,Ph=new WeakMap,an=new WeakMap,Sc=new WeakSet,Xf=async function(t,e){y(this,an)||H(this,an,new Map);let n=y(this,an).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${y(this,Ec)}_${gn(this,Ph)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await fetchData(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const o=jy._isSVGFittingCanvas,c=new FileReader,d=new Image,f=new Promise((p,g)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,p()},c.onload=async()=>{const b=n.svgUrl=c.result;d.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},d.onerror=c.onerror=g});c.readAsDataURL(i),await f}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){console.error(i),n=null}return y(this,an).set(t,n),n&&y(this,an).set(n.id,n),n};let ImageManager=jy;var Hs,La,Mh,zs;class CommandManager{constructor(t=128){q(this,Hs,[]);q(this,La,!1);q(this,Mh);q(this,zs,-1);H(this,Mh,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:d=!1}){if(i&&t(),y(this,La))return;const f={cmd:t,undo:e,post:n,type:o};if(y(this,zs)===-1){y(this,Hs).length>0&&(y(this,Hs).length=0),H(this,zs,0),y(this,Hs).push(f);return}if(c&&y(this,Hs)[y(this,zs)].type===o){d&&(f.undo=y(this,Hs)[y(this,zs)].undo),y(this,Hs)[y(this,zs)]=f;return}const p=y(this,zs)+1;p===y(this,Mh)?y(this,Hs).splice(0,1):(H(this,zs,p),p<y(this,Hs).length&&y(this,Hs).splice(p)),y(this,Hs).push(f)}undo(){if(y(this,zs)===-1)return;H(this,La,!0);const{undo:t,post:e}=y(this,Hs)[y(this,zs)];t(),e==null||e(),H(this,La,!1),H(this,zs,y(this,zs)-1)}redo(){if(y(this,zs)<y(this,Hs).length-1){H(this,zs,y(this,zs)+1),H(this,La,!0);const{cmd:t,post:e}=y(this,Hs)[y(this,zs)];t(),e==null||e(),H(this,La,!1)}}hasSomethingToUndo(){return y(this,zs)!==-1}hasSomethingToRedo(){return y(this,zs)<y(this,Hs).length-1}destroy(){H(this,Hs,null)}}Hs=new WeakMap,La=new WeakMap,Mh=new WeakMap,zs=new WeakMap;var Ap,fb;class KeyboardManager{constructor(t){q(this,Ap);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=util_FeatureTest.platform;for(const[n,i,o={}]of t)for(const c of n){const d=c.startsWith("mac+");e&&d?(this.callbacks.set(c.slice(4),{callback:i,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!d&&(this.callbacks.set(c,{callback:i,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get($(this,Ap,fb).call(this,e));if(!n)return;const{callback:i,options:{bubbles:o=!1,args:c=[],checker:d=null}}=n;d&&!d(t,e)||(i.bind(t,...c,e)(),o||(e.stopPropagation(),e.preventDefault()))}}Ap=new WeakSet,fb=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Rp=class Rp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(t),shadow(this,"_colors",t)}convert(t){const e=getRGB(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((o,c)=>o===e[c]))return Rp._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Util.makeHexColor(...e):t}};Jt(Rp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=Rp;var _c,In,Ps,Zs,Ac,jr,Rc,Si,Da,wc,zo,Wi,_i,Uo,jh,Nh,Tc,Lh,Ki,Fa,Cc,Oa,Zi,wp,Ia,Dh,Ba,Vo,Fh,Oh,Us,Ie,Nr,$o,Ih,Bh,Ha,Qi,Lr,Hh,ri,Ct,Yf,Og,pb,mb,Wf,gb,yb,vb,Ig,xb,Bg,Hg,bb,yn,Ma,Eb,Sb,zg,_b,hh,Ug;const bc=class bc{constructor(t,e,n,i,o,c,d,f,p,g,b){q(this,Ct);q(this,_c,new AbortController);q(this,In,null);q(this,Ps,new Map);q(this,Zs,new Map);q(this,Ac,null);q(this,jr,null);q(this,Rc,null);q(this,Si,new CommandManager);q(this,Da,null);q(this,wc,0);q(this,zo,new Set);q(this,Wi,null);q(this,_i,null);q(this,Uo,new Set);q(this,jh,!1);q(this,Nh,!1);q(this,Tc,!1);q(this,Lh,null);q(this,Ki,null);q(this,Fa,null);q(this,Cc,null);q(this,Oa,!1);q(this,Zi,null);q(this,wp,new IdManager);q(this,Ia,!1);q(this,Dh,!1);q(this,Ba,null);q(this,Vo,null);q(this,Fh,null);q(this,Oh,null);q(this,Us,AnnotationEditorType.NONE);q(this,Ie,new Set);q(this,Nr,null);q(this,$o,null);q(this,Ih,null);q(this,Bh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});q(this,Ha,[0,0]);q(this,Qi,null);q(this,Lr,null);q(this,Hh,null);q(this,ri,null);const x=this._signal=y(this,_c).signal;H(this,Lr,t),H(this,Hh,e),H(this,Ac,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:x}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),i._on("setpreference",this.onSetPreference.bind(this),{signal:x}),i._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:x}),$(this,Ct,gb).call(this),$(this,Ct,bb).call(this),$(this,Ct,Ig).call(this),H(this,jr,o.annotationStorage),H(this,Lh,o.filterFactory),H(this,$o,c),H(this,Cc,d||null),H(this,jh,f),H(this,Nh,p),H(this,Tc,g),H(this,Oh,b||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=bc.prototype,e=c=>y(c,Lr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:d})=>!(d instanceof HTMLButtonElement)&&y(c,Lr).contains(d)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:d})=>!(d instanceof HTMLButtonElement)&&y(c,Lr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,i;(t=y(this,ri))==null||t.resolve(),H(this,ri,null),(e=y(this,_c))==null||e.abort(),H(this,_c,null),this._signal=null;for(const o of y(this,Zs).values())o.destroy();y(this,Zs).clear(),y(this,Ps).clear(),y(this,Uo).clear(),H(this,In,null),y(this,Ie).clear(),y(this,Si).destroy(),(n=y(this,Ac))==null||n.destroy(),(i=y(this,Zi))==null||i.hide(),H(this,Zi,null),y(this,Ki)&&(clearTimeout(y(this,Ki)),H(this,Ki,null)),y(this,Qi)&&(clearTimeout(y(this,Qi)),H(this,Qi,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return y(this,Oh)}get useNewAltTextFlow(){return y(this,Nh)}get useNewAltTextWhenAddingImage(){return y(this,Tc)}get hcmFilter(){return shadow(this,"hcmFilter",y(this,$o)?y(this,Lh).addHCMFilter(y(this,$o).foreground,y(this,$o).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(y(this,Lr)).direction)}get highlightColors(){return shadow(this,"highlightColors",y(this,Cc)?new Map(y(this,Cc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){H(this,Fh,t)}editAltText(t,e=!1){var n;(n=y(this,Ac))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":H(this,Tc,e);break}}onPageChanging({pageNumber:t}){H(this,wc,t-1)}focusMainContainer(){y(this,Lr).focus()}findParent(t,e){for(const n of y(this,Zs).values()){const{x:i,y:o,width:c,height:d}=n.div.getBoundingClientRect();if(t>=i&&t<=i+c&&e>=o&&e<=o+d)return n}return null}disableUserSelect(t=!1){y(this,Hh).classList.toggle("noUserSelect",t)}addShouldRescale(t){y(this,Uo).add(t)}removeShouldRescale(t){y(this,Uo).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*PixelsPerInch.PDF_TO_CSS_UNITS;for(const e of y(this,Uo))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:c}=e,d=e.toString(),p=$(this,Ct,Yf).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;e.empty();const b=$(this,Ct,Og).call(this,p),x=y(this,Us)===AnnotationEditorType.NONE,A=()=>{b==null||b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:c,text:d}),x&&this.showAllEditors("highlight",!0,!0)};if(x){this.switchToMode(AnnotationEditorType.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&y(this,jr)&&!y(this,jr).has(t.id)&&y(this,jr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,y(this,Oa)&&(H(this,Oa,!1),$(this,Ct,Wf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of y(this,Ie))if(e.div.contains(t)){H(this,Vo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!y(this,Vo))return;const[t,e]=y(this,Vo);H(this,Vo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){$(this,Ct,Ig).call(this),$(this,Ct,Bg).call(this)}removeEditListeners(){$(this,Ct,xb).call(this),$(this,Ct,Hg).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of y(this,_i))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of y(this,_i))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=y(this,In))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of y(this,Ie)){const o=i.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of y(this,_i))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){warn(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const f of n){const p=await i.deserialize(f);if(!p)return;o.push(p)}const c=()=>{for(const f of o)$(this,Ct,zg).call(this,f);$(this,Ct,Ug).call(this,o)},d=()=>{for(const f of o)f.remove()};this.addCommands({cmd:c,undo:d,mustExec:!0})}catch(o){warn(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),y(this,Us)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&bc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,y(this,Oa)&&(H(this,Oa,!1),$(this,Ct,Wf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?($(this,Ct,yb).call(this),$(this,Ct,Bg).call(this),$(this,Ct,yn).call(this,{isEditing:y(this,Us)!==AnnotationEditorType.NONE,isEmpty:$(this,Ct,hh).call(this),hasSomethingToUndo:y(this,Si).hasSomethingToUndo(),hasSomethingToRedo:y(this,Si).hasSomethingToRedo(),hasSelectedEditor:!1})):($(this,Ct,vb).call(this),$(this,Ct,Hg).call(this),$(this,Ct,yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!y(this,_i)){H(this,_i,t);for(const e of y(this,_i))$(this,Ct,Ma).call(this,e.defaultPropertiesToUpdate)}}getId(){return y(this,wp).id}get currentLayer(){return y(this,Zs).get(y(this,wc))}getLayer(t){return y(this,Zs).get(t)}get currentPageIndex(){return y(this,wc)}addLayer(t){y(this,Zs).set(t.pageIndex,t),y(this,Ia)?t.enable():t.disable()}removeLayer(t){y(this,Zs).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(y(this,Us)!==t&&!(y(this,ri)&&(await y(this,ri).promise,!y(this,ri)))){if(H(this,ri,Promise.withResolvers()),H(this,Us,t),t===AnnotationEditorType.NONE){this.setEditingState(!1),$(this,Ct,Sb).call(this),y(this,ri).resolve();return}this.setEditingState(!0),await $(this,Ct,Eb).call(this),this.unselectAll();for(const i of y(this,Zs).values())i.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),y(this,ri).resolve();return}for(const i of y(this,Ps).values())i.annotationElementId===e?(this.setSelected(i),i.enterInEditMode()):i.unselect();y(this,ri).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==y(this,Us)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(y(this,_i)){switch(t){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(n=y(this,Fh))==null||n.updateColor(e);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(y(this,Ih)||H(this,Ih,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of y(this,Ie))i.updateParams(t,e);for(const i of y(this,_i))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of y(this,Ps).values())c.editorType===t&&c.show(e);(((o=y(this,Ih))==null?void 0:o.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==e&&$(this,Ct,Ma).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(y(this,Dh)!==t){H(this,Dh,t);for(const e of y(this,Zs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of y(this,Ps).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return y(this,Ps).get(t)}addEditor(t){y(this,Ps).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(y(this,Ki)&&clearTimeout(y(this,Ki)),H(this,Ki,setTimeout(()=>{this.focusMainContainer(),H(this,Ki,null)},0))),y(this,Ps).delete(t.id),this.unselect(t),(!t.annotationElementId||!y(this,zo).has(t.annotationElementId))&&((e=y(this,jr))==null||e.remove(t.id))}addDeletedAnnotationElement(t){y(this,zo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return y(this,zo).has(t)}removeDeletedAnnotationElement(t){y(this,zo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){y(this,In)!==t&&(H(this,In,t),t&&$(this,Ct,Ma).call(this,t.propertiesToUpdate))}updateUI(t){y(this,Ct,_b)===t&&$(this,Ct,Ma).call(this,t.propertiesToUpdate)}toggleSelected(t){if(y(this,Ie).has(t)){y(this,Ie).delete(t),t.unselect(),$(this,Ct,yn).call(this,{hasSelectedEditor:this.hasSelection});return}y(this,Ie).add(t),t.select(),$(this,Ct,Ma).call(this,t.propertiesToUpdate),$(this,Ct,yn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of y(this,Ie))e!==t&&e.unselect();y(this,Ie).clear(),y(this,Ie).add(t),t.select(),$(this,Ct,Ma).call(this,t.propertiesToUpdate),$(this,Ct,yn).call(this,{hasSelectedEditor:!0})}isSelected(t){return y(this,Ie).has(t)}get firstSelectedEditor(){return y(this,Ie).values().next().value}unselect(t){t.unselect(),y(this,Ie).delete(t),$(this,Ct,yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return y(this,Ie).size!==0}get isEnterHandled(){return y(this,Ie).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){y(this,Si).undo(),$(this,Ct,yn).call(this,{hasSomethingToUndo:y(this,Si).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:$(this,Ct,hh).call(this)})}redo(){y(this,Si).redo(),$(this,Ct,yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,Si).hasSomethingToRedo(),isEmpty:$(this,Ct,hh).call(this)})}addCommands(t){y(this,Si).add(t),$(this,Ct,yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:$(this,Ct,hh).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...y(this,Ie)],e=()=>{for(const i of t)i.remove()},n=()=>{for(const i of t)$(this,Ct,zg).call(this,i)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=y(this,In))==null||t.commitOrRemove()}hasSomethingToControl(){return y(this,In)||this.hasSelection}selectAll(){for(const t of y(this,Ie))t.commit();$(this,Ct,Ug).call(this,y(this,Ps).values())}unselectAll(){if(!(y(this,In)&&(y(this,In).commitOrRemove(),y(this,Us)!==AnnotationEditorType.NONE))&&this.hasSelection){for(const t of y(this,Ie))t.unselect();y(this,Ie).clear(),$(this,Ct,yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;y(this,Ha)[0]+=t,y(this,Ha)[1]+=e;const[i,o]=y(this,Ha),c=[...y(this,Ie)],d=1e3;y(this,Qi)&&clearTimeout(y(this,Qi)),H(this,Qi,setTimeout(()=>{H(this,Qi,null),y(this,Ha)[0]=y(this,Ha)[1]=0,this.addCommands({cmd:()=>{for(const f of c)y(this,Ps).has(f.id)&&f.translateInPage(i,o)},undo:()=>{for(const f of c)y(this,Ps).has(f.id)&&f.translateInPage(-i,-o)},mustExec:!1})},d));for(const f of c)f.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),H(this,Wi,new Map);for(const t of y(this,Ie))y(this,Wi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!y(this,Wi))return!1;this.disableUserSelect(!1);const t=y(this,Wi);H(this,Wi,null);let e=!1;for(const[{x:i,y:o,pageIndex:c},d]of t)d.newX=i,d.newY=o,d.newPageIndex=c,e||(e=i!==d.savedX||o!==d.savedY||c!==d.savedPageIndex);if(!e)return!1;const n=(i,o,c,d)=>{if(y(this,Ps).has(i.id)){const f=y(this,Zs).get(d);f?i._setParentAndPosition(f,o,c):(i.pageIndex=d,i.x=o,i.y=c)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:c,newPageIndex:d}]of t)n(i,o,c,d)},undo:()=>{for(const[i,{savedX:o,savedY:c,savedPageIndex:d}]of t)n(i,o,c,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(y(this,Wi))for(const n of y(this,Wi).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||y(this,Ie).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return y(this,In)===t}getActive(){return y(this,In)}getMode(){return y(this,Us)}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:i,width:o,height:c}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(p,g,b,x)=>({x:(g-i)/c,y:1-(p+b-n)/o,width:x/c,height:b/o});break;case"180":d=(p,g,b,x)=>({x:1-(p+b-n)/o,y:1-(g+x-i)/c,width:b/o,height:x/c});break;case"270":d=(p,g,b,x)=>({x:1-(g+x-i)/c,y:(p-n)/o,width:x/c,height:b/o});break;default:d=(p,g,b,x)=>({x:(p-n)/o,y:(g-i)/c,width:b/o,height:x/c});break}const f=[];for(let p=0,g=e.rangeCount;p<g;p++){const b=e.getRangeAt(p);if(!b.collapsed)for(const{x,y:A,width:_,height:R}of b.getClientRects())_===0||R===0||f.push(d(x,A,_,R))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(y(this,Rc)||H(this,Rc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=y(this,Rc))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=y(this,Rc))==null?void 0:i.get(t.data.id);if(!e)return;const n=y(this,jr).getRawValue(e);n&&(y(this,Us)===AnnotationEditorType.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};_c=new WeakMap,In=new WeakMap,Ps=new WeakMap,Zs=new WeakMap,Ac=new WeakMap,jr=new WeakMap,Rc=new WeakMap,Si=new WeakMap,Da=new WeakMap,wc=new WeakMap,zo=new WeakMap,Wi=new WeakMap,_i=new WeakMap,Uo=new WeakMap,jh=new WeakMap,Nh=new WeakMap,Tc=new WeakMap,Lh=new WeakMap,Ki=new WeakMap,Fa=new WeakMap,Cc=new WeakMap,Oa=new WeakMap,Zi=new WeakMap,wp=new WeakMap,Ia=new WeakMap,Dh=new WeakMap,Ba=new WeakMap,Vo=new WeakMap,Fh=new WeakMap,Oh=new WeakMap,Us=new WeakMap,Ie=new WeakMap,Nr=new WeakMap,$o=new WeakMap,Ih=new WeakMap,Bh=new WeakMap,Ha=new WeakMap,Qi=new WeakMap,Lr=new WeakMap,Hh=new WeakMap,ri=new WeakMap,Ct=new WeakSet,Yf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Og=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of y(this,Zs).values())if(n.hasTextLayer(t))return n;return null},pb=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=$(this,Ct,Yf).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(y(this,Zi)||H(this,Zi,new HighlightToolbar(this)),y(this,Zi).show(n,i,this.direction==="ltr"))},mb=function(){var o,c,d;const t=document.getSelection();if(!t||t.isCollapsed){y(this,Nr)&&((o=y(this,Zi))==null||o.hide(),H(this,Nr,null),$(this,Ct,yn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===y(this,Nr))return;const i=$(this,Ct,Yf).call(this,t).closest(".textLayer");if(!i){y(this,Nr)&&((c=y(this,Zi))==null||c.hide(),H(this,Nr,null),$(this,Ct,yn).call(this,{hasSelectedText:!1}));return}if((d=y(this,Zi))==null||d.hide(),H(this,Nr,e),$(this,Ct,yn).call(this,{hasSelectedText:!0}),!(y(this,Us)!==AnnotationEditorType.HIGHLIGHT&&y(this,Us)!==AnnotationEditorType.NONE)&&(y(this,Us)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),H(this,Oa,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=y(this,Us)===AnnotationEditorType.HIGHLIGHT?$(this,Ct,Og).call(this,i):null;f==null||f.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),b=x=>{x.type==="pointerup"&&x.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),x.type==="pointerup"&&$(this,Ct,Wf).call(this,"main_toolbar"))};window.addEventListener("pointerup",b,{signal:g}),window.addEventListener("blur",b,{signal:g})}},Wf=function(t=""){y(this,Us)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(t):y(this,jh)&&$(this,Ct,pb).call(this)},gb=function(){document.addEventListener("selectionchange",$(this,Ct,mb).bind(this),{signal:this._signal})},yb=function(){if(y(this,Fa))return;H(this,Fa,new AbortController);const t=this.combinedSignal(y(this,Fa));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},vb=function(){var t;(t=y(this,Fa))==null||t.abort(),H(this,Fa,null)},Ig=function(){if(y(this,Ba))return;H(this,Ba,new AbortController);const t=this.combinedSignal(y(this,Ba));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},xb=function(){var t;(t=y(this,Ba))==null||t.abort(),H(this,Ba,null)},Bg=function(){if(y(this,Da))return;H(this,Da,new AbortController);const t=this.combinedSignal(y(this,Da));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Hg=function(){var t;(t=y(this,Da))==null||t.abort(),H(this,Da,null)},bb=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},yn=function(t){Object.entries(t).some(([n,i])=>y(this,Bh)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,Bh),t)}),y(this,Us)===AnnotationEditorType.HIGHLIGHT&&t.hasSelectedEditor===!1&&$(this,Ct,Ma).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Ma=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Eb=async function(){if(!y(this,Ia)){H(this,Ia,!0);const t=[];for(const e of y(this,Zs).values())t.push(e.enable());await Promise.all(t);for(const e of y(this,Ps).values())e.enable()}},Sb=function(){if(this.unselectAll(),y(this,Ia)){H(this,Ia,!1);for(const t of y(this,Zs).values())t.disable();for(const t of y(this,Ps).values())t.disable()}},zg=function(t){const e=y(this,Zs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},_b=function(){let t=null;for(t of y(this,Ie));return t},hh=function(){if(y(this,Ps).size===0)return!0;if(y(this,Ps).size===1)for(const t of y(this,Ps).values())return t.isEmpty();return!1},Ug=function(t){for(const e of y(this,Ie))e.unselect();y(this,Ie).clear();for(const e of t)e.isEmpty()||(y(this,Ie).add(e),e.select());$(this,Ct,yn).call(this,{hasSelectedEditor:this.hasSelection})},Jt(bc,"TRANSLATE_SMALL",1),Jt(bc,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=bc;var Vs,Ji,Ai,kc,tr,Bn,Pc,er,wn,Dr,Go,sr,za,Li,dh,Kf;const vn=class vn{constructor(t){q(this,Li);q(this,Vs,null);q(this,Ji,!1);q(this,Ai,null);q(this,kc,null);q(this,tr,null);q(this,Bn,null);q(this,Pc,!1);q(this,er,null);q(this,wn,null);q(this,Dr,null);q(this,Go,null);q(this,sr,!1);H(this,wn,t),H(this,sr,t._uiManager.useNewAltTextFlow),y(vn,za)||H(vn,za,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){vn._l10n??(vn._l10n=t)}async render(){const t=H(this,Ai,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=H(this,kc,document.createElement("span"));t.append(e),y(this,sr)?(t.classList.add("new"),t.setAttribute("data-l10n-id",y(vn,za).missing),e.setAttribute("data-l10n-id",y(vn,za)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=y(this,wn)._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),y(this,wn)._uiManager.editAltText(y(this,wn)),y(this,sr)&&y(this,wn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:y(this,Li,dh)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(H(this,Pc,!0),i(o))},{signal:n}),await $(this,Li,Kf).call(this),t}finish(){y(this,Ai)&&(y(this,Ai).focus({focusVisible:y(this,Pc)}),H(this,Pc,!1))}isEmpty(){return y(this,sr)?y(this,Vs)===null:!y(this,Vs)&&!y(this,Ji)}hasData(){return y(this,sr)?y(this,Vs)!==null||!!y(this,Dr):this.isEmpty()}get guessedText(){return y(this,Dr)}async setGuessedText(t){y(this,Vs)===null&&(H(this,Dr,t),H(this,Go,await vn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),$(this,Li,Kf).call(this))}toggleAltTextBadge(t=!1){var e;if(!y(this,sr)||y(this,Vs)){(e=y(this,er))==null||e.remove(),H(this,er,null);return}if(!y(this,er)){const n=H(this,er,document.createElement("div"));n.className="noAltTextBadge",y(this,wn).div.append(n)}y(this,er).classList.toggle("hidden",!t)}serialize(t){let e=y(this,Vs);return!t&&y(this,Dr)===e&&(e=y(this,Go)),{altText:e,decorative:y(this,Ji),guessedText:y(this,Dr),textWithDisclaimer:y(this,Go)}}get data(){return{altText:y(this,Vs),decorative:y(this,Ji)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(H(this,Dr,n),H(this,Go,i)),!(y(this,Vs)===t&&y(this,Ji)===e)&&(o||(H(this,Vs,t),H(this,Ji,e)),$(this,Li,Kf).call(this))}toggle(t=!1){y(this,Ai)&&(!t&&y(this,Bn)&&(clearTimeout(y(this,Bn)),H(this,Bn,null)),y(this,Ai).disabled=!t)}shown(){y(this,wn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:y(this,Li,dh)}})}destroy(){var t,e;(t=y(this,Ai))==null||t.remove(),H(this,Ai,null),H(this,kc,null),H(this,tr,null),(e=y(this,er))==null||e.remove(),H(this,er,null)}};Vs=new WeakMap,Ji=new WeakMap,Ai=new WeakMap,kc=new WeakMap,tr=new WeakMap,Bn=new WeakMap,Pc=new WeakMap,er=new WeakMap,wn=new WeakMap,Dr=new WeakMap,Go=new WeakMap,sr=new WeakMap,za=new WeakMap,Li=new WeakSet,dh=function(){return y(this,Vs)&&"added"||y(this,Vs)===null&&this.guessedText&&"review"||"missing"},Kf=async function(){var i,o,c;const t=y(this,Ai);if(!t)return;if(y(this,sr)){if(t.classList.toggle("done",!!y(this,Vs)),t.setAttribute("data-l10n-id",y(vn,za)[y(this,Li,dh)]),(i=y(this,kc))==null||i.setAttribute("data-l10n-id",y(vn,za)[`${y(this,Li,dh)}-label`]),!y(this,Vs)){(o=y(this,tr))==null||o.remove();return}}else{if(!y(this,Vs)&&!y(this,Ji)){t.classList.remove("done"),(c=y(this,tr))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=y(this,tr);if(!e){H(this,tr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${y(this,wn).id}`;const d=100,f=y(this,wn)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(y(this,Bn)),H(this,Bn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{H(this,Bn,setTimeout(()=>{H(this,Bn,null),y(this,tr).classList.add("show"),y(this,wn)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;y(this,Bn)&&(clearTimeout(y(this,Bn)),H(this,Bn,null)),(p=y(this,tr))==null||p.classList.remove("show")},{signal:f})}y(this,Ji)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=y(this,Vs)),e.parentNode||t.append(e);const n=y(this,wn).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},q(vn,za,null),Jt(vn,"_l10n",null);let AltText=vn;var qo,Ri,cs,Mc,Xo,Qs,Yo,Ua,zh,Wo,Va,Uh,Ko,Fr,nr,jc,Nc,ai,Vh,Tp,oe,Vg,$h,$g,Gg,Ab,Rb,qg,Xg,Yg,wb,Wg,Tb,Cb,kb,Kg,fh;const Le=class Le{constructor(t){q(this,oe);q(this,qo,null);q(this,Ri,null);q(this,cs,null);q(this,Mc,!1);q(this,Xo,!1);q(this,Qs,null);q(this,Yo,null);q(this,Ua,null);q(this,zh,"");q(this,Wo,!1);q(this,Va,null);q(this,Uh,!1);q(this,Ko,!1);q(this,Fr,!1);q(this,nr,null);q(this,jc,0);q(this,Nc,0);q(this,ai,null);Jt(this,"_editToolbar",null);Jt(this,"_initialOptions",Object.create(null));Jt(this,"_initialData",null);Jt(this,"_isVisible",!0);Jt(this,"_uiManager",null);Jt(this,"_focusEventsAllowed",!0);q(this,Vh,!1);q(this,Tp,Le._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,c];const[d,f]=this.parentDimensions;this.x=t.x/d,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Le.prototype._resizeWithKeyboard,e=AnnotationEditorUIManager.TRANSLATE_SMALL,n=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new FakeEditor({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Le._l10n??(Le._l10n=t),Le._l10nResizer||(Le._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Le._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Le._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return y(this,Vh)}set _isDraggable(t){var e;H(this,Vh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=y(this,Tp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):$(this,oe,fh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(y(this,Wo)?H(this,Wo,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[o,c]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/o,this.y=(e+i)/c,this.fixAndSetPosition()}translate(t,e){$(this,oe,Vg).call(this,this.parentDimensions,t,e)}translateInPage(t,e){y(this,Va)||H(this,Va,[this.x,this.y]),$(this,oe,Vg).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){y(this,Va)||H(this,Va,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[d,f]=this.getBaseTranslation();o+=d,c+=f,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!y(this,Va)&&(y(this,Va)[0]!==this.x||y(this,Va)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Le,i=n/t,o=n/e;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:i,y:o,width:c,height:d}=this;if(c*=e,d*=n,i*=e,o*=n,this._mustFixPosition)switch(t){case 0:i=Math.max(0,Math.min(e-c,i)),o=Math.max(0,Math.min(n-d,o));break;case 90:i=Math.max(0,Math.min(e-d,i)),o=Math.min(n,Math.max(c,o));break;case 180:i=Math.min(e,Math.max(c,i)),o=Math.min(n,Math.max(d,o));break;case 270:i=Math.min(e,Math.max(d,i)),o=Math.max(0,Math.min(n-c,o));break}this.x=i/=e,this.y=o/=n;const[f,p]=this.getBaseTranslation();i+=f,o+=p;const{style:g}=this.div;g.left=`${(100*i).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return $(n=Le,$h,$g).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return $(n=Le,$h,$g).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,y(this,Xo)||(this.div.style.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),o=!y(this,Xo)&&e.endsWith("%");if(i&&o)return;const[c,d]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!y(this,Xo)&&!o&&(t.height=`${(100*parseFloat(e)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=y(this,cs))==null||t.finish()}async addEditToolbar(){return this._editToolbar||y(this,Ko)?this._editToolbar:(this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render()),y(this,cs)&&await this._editToolbar.addAltText(y(this,cs)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=y(this,cs))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){y(this,cs)||(AltText.initialize(Le._l10n),H(this,cs,new AltText(this)),y(this,qo)&&(y(this,cs).data=y(this,qo),H(this,qo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=y(this,cs))==null?void 0:t.data}set altTextData(t){y(this,cs)&&(y(this,cs).data=t)}get guessedAltText(){var t;return(t=y(this,cs))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=y(this,cs))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=y(this,cs))==null?void 0:e.serialize(t)}hasAltText(){return!!y(this,cs)&&!y(this,cs).isEmpty()}hasAltTextData(){var t;return((t=y(this,cs))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=y(this,Mc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),$(this,oe,Wg).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),bindEvents(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(H(this,Wo,!0),this._isDraggable){$(this,oe,wb).call(this,t);return}$(this,oe,Yg).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){y(this,nr)&&clearTimeout(y(this,nr)),H(this,nr,setTimeout(()=>{var t;H(this,nr,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const i=this.parentScale,[o,c]=this.pageDimensions,[d,f]=this.pageTranslation,p=t/i,g=e/i,b=this.x*o,x=this.y*c,A=this.width*o,_=this.height*c;switch(n){case 0:return[b+p+d,c-x-g-_+f,b+p+A+d,c-x-g+f];case 90:return[b+g+d,c-x+p+f,b+g+_+d,c-x+p+A+f];case 180:return[b-p-A+d,c-x+g+f,b-p+d,c-x+g+_+f];case 270:return[b-g-_+d,c-x-p-A+f,b-g+d,c-x-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,o,c]=t,d=o-n,f=c-i;switch(this.rotation){case 0:return[n,e-c,d,f];case 90:return[n,e-i,f,d];case 180:return[o,e-i,d,f];case 270:return[o,e-c,f,d];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){H(this,Ko,!0)}disableEditMode(){H(this,Ko,!1)}isInEditMode(){return y(this,Ko)}shouldGetKeyboardEvents(){return y(this,Fr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){$(this,oe,Wg).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){unreachable("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,H(i,qo,t.accessibilityData);const[o,c]=i.pageDimensions,[d,f,p,g]=i.getRectInCurrentCoords(t.rect,c);return i.x=d/o,i.y=f/c,i.width=p/o,i.height=g/c,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=y(this,Ua))==null||t.abort(),H(this,Ua,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),y(this,nr)&&(clearTimeout(y(this,nr)),H(this,nr,null)),$(this,oe,fh).call(this),this.removeEditToolbar(),y(this,ai)){for(const e of y(this,ai).values())clearTimeout(e);H(this,ai,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&($(this,oe,Ab).call(this),y(this,Qs).classList.remove("hidden"),bindEvents(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),H(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=y(this,Qs).children;if(!y(this,Ri)){H(this,Ri,Array.from(e));const c=$(this,oe,Tb).bind(this),d=$(this,oe,Cb).bind(this),f=this._uiManager._signal;for(const p of y(this,Ri)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:f}),p.addEventListener("blur",d,{signal:f}),p.addEventListener("focus",$(this,oe,kb).bind(this,g),{signal:f}),p.setAttribute("data-l10n-id",Le._l10nResizer[g])}}const n=y(this,Ri)[0];let i=0;for(const c of e){if(c===n)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(y(this,Ri).length/4);if(o!==i){if(o<i)for(let d=0;d<i-o;d++)y(this,Qs).append(y(this,Qs).firstChild);else if(o>i)for(let d=0;d<o-i;d++)y(this,Qs).firstChild.before(y(this,Qs).lastChild);let c=0;for(const d of e){const p=y(this,Ri)[c++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Le._l10nResizer[p])}}$(this,oe,Kg).call(this,0),H(this,Fr,!0),y(this,Qs).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){y(this,Fr)&&$(this,oe,Xg).call(this,y(this,zh),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){$(this,oe,fh).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,o;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=y(this,cs))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,i,o;(t=y(this,Qs))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(o=y(this,cs))==null||o.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return y(this,Uh)}set isEditing(t){H(this,Uh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){H(this,Xo,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){y(this,ai)||H(this,ai,new Map);const{action:n}=t;let i=y(this,ai).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),y(this,ai).delete(n),y(this,ai).size===0&&H(this,ai,null)},Le._telemetryTimeout),y(this,ai).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),H(this,Mc,!1)}disable(){this.div&&(this.div.tabIndex=-1),H(this,Mc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};qo=new WeakMap,Ri=new WeakMap,cs=new WeakMap,Mc=new WeakMap,Xo=new WeakMap,Qs=new WeakMap,Yo=new WeakMap,Ua=new WeakMap,zh=new WeakMap,Wo=new WeakMap,Va=new WeakMap,Uh=new WeakMap,Ko=new WeakMap,Fr=new WeakMap,nr=new WeakMap,jc=new WeakMap,Nc=new WeakMap,ai=new WeakMap,Vh=new WeakMap,Tp=new WeakMap,oe=new WeakSet,Vg=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this.fixAndSetPosition()},$h=new WeakSet,$g=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Gg=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Ab=function(){if(y(this,Qs))return;H(this,Qs,document.createElement("div")),y(this,Qs).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");y(this,Qs).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",$(this,oe,Rb).bind(this,n),{signal:e}),i.addEventListener("contextmenu",noContextMenu,{signal:e}),i.tabIndex=-1}this.div.prepend(y(this,Qs))},Rb=function(t,e){var _;e.preventDefault();const{isMac:n}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&n)return;(_=y(this,cs))==null||_.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",$(this,oe,Xg).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",noContextMenu,{signal:c});const d=this.x,f=this.y,p=this.width,g=this.height,b=this.parent.div.style.cursor,x=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const A=()=>{var R;o.abort(),this.parent.togglePointerEvents(!0),(R=y(this,cs))==null||R.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=b,this.div.style.cursor=x,$(this,oe,qg).call(this,d,f,p,g)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},qg=function(t,e,n,i){const o=this.x,c=this.y,d=this.width,f=this.height;o===t&&c===e&&d===n&&f===i||this.addCommands({cmd:()=>{this.width=d,this.height=f,this.x=o,this.y=c;const[p,g]=this.parentDimensions;this.setDims(p*d,g*f),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=t,this.y=e;const[p,g]=this.parentDimensions;this.setDims(p*n,g*i),this.fixAndSetPosition()},mustExec:!0})},Xg=function(t,e){const[n,i]=this.parentDimensions,o=this.x,c=this.y,d=this.width,f=this.height,p=Le.MIN_SIZE/n,g=Le.MIN_SIZE/i,b=U=>Math.round(U*1e4)/1e4,x=$(this,oe,Gg).call(this,this.rotation),A=(U,N)=>[x[0]*U+x[2]*N,x[1]*U+x[3]*N],_=$(this,oe,Gg).call(this,360-this.rotation),R=(U,N)=>[_[0]*U+_[2]*N,_[1]*U+_[3]*N];let P,E,T=!1,C=!1;switch(t){case"topLeft":T=!0,P=(U,N)=>[0,0],E=(U,N)=>[U,N];break;case"topMiddle":P=(U,N)=>[U/2,0],E=(U,N)=>[U/2,N];break;case"topRight":T=!0,P=(U,N)=>[U,0],E=(U,N)=>[0,N];break;case"middleRight":C=!0,P=(U,N)=>[U,N/2],E=(U,N)=>[0,N/2];break;case"bottomRight":T=!0,P=(U,N)=>[U,N],E=(U,N)=>[0,0];break;case"bottomMiddle":P=(U,N)=>[U/2,N],E=(U,N)=>[U/2,0];break;case"bottomLeft":T=!0,P=(U,N)=>[0,N],E=(U,N)=>[U,0];break;case"middleLeft":C=!0,P=(U,N)=>[0,N/2],E=(U,N)=>[U,N/2];break}const M=P(d,f),j=E(d,f);let L=A(...j);const O=b(o+L[0]),V=b(c+L[1]);let X=1,tt=1,[Y,Q]=this.screenToPageTranslation(e.movementX,e.movementY);if([Y,Q]=R(Y/n,Q/i),T){const U=Math.hypot(d,f);X=tt=Math.max(Math.min(Math.hypot(j[0]-M[0]-Y,j[1]-M[1]-Q)/U,1/d,1/f),p/d,g/f)}else C?X=Math.max(p,Math.min(1,Math.abs(j[0]-M[0]-Y)))/d:tt=Math.max(g,Math.min(1,Math.abs(j[1]-M[1]-Q)))/f;const ct=b(d*X),nt=b(f*tt);L=A(...E(ct,nt));const J=O-L[0],D=V-L[1];this.width=ct,this.height=nt,this.x=J,this.y=D,this.setDims(n*ct,i*nt),this.fixAndSetPosition()},Yg=function(t){const{isMac:e}=util_FeatureTest.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},wb=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,i=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),H(this,jc,t.clientX),H(this,Nc,t.clientY);const c=d=>{const{clientX:f,clientY:p}=d,[g,b]=this.screenToPageTranslation(f-y(this,jc),p-y(this,Nc));H(this,jc,f),H(this,Nc,p),this._uiManager.dragSelectedEditors(g,b)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:i})}const o=()=>{n.abort(),e&&this.div.classList.remove("moving"),H(this,Wo,!1),this._uiManager.endDragSession()||$(this,oe,Yg).call(this,t)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})},Wg=function(){if(y(this,Ua)||!this.div)return;H(this,Ua,new AbortController);const t=this._uiManager.combinedSignal(y(this,Ua));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Tb=function(t){Le._resizerKeyboardManager.exec(this,t)},Cb=function(t){var e;y(this,Fr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==y(this,Qs)&&$(this,oe,fh).call(this)},kb=function(t){H(this,zh,y(this,Fr)?t:"")},Kg=function(t){if(y(this,Ri))for(const e of y(this,Ri))e.tabIndex=t},fh=function(){if(H(this,Fr,!1),$(this,oe,Kg).call(this,-1),y(this,Yo)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=y(this,Yo);$(this,oe,qg).call(this,t,e,n,i),H(this,Yo,null)}},q(Le,$h),Jt(Le,"_l10n",null),Jt(Le,"_l10nResizer",null),Jt(Le,"_borderLineWidth",-1),Jt(Le,"_colorManager",new ColorManager),Jt(Le,"_zIndex",1),Jt(Le,"_telemetryTimeout",1e3);let AnnotationEditor=Le;class FakeEditor extends AnnotationEditor{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(t){this.h1=t?t&4294967295:SEED,this.h2=t?t&4294967295:SEED}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let R=0,P=t.length;R<P;R++){const E=t.charCodeAt(R);E<=255?e[n++]=E:(e[n++]=E>>>8,e[n++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,o=n-i*4,c=new Uint32Array(e.buffer,0,i);let d=0,f=0,p=this.h1,g=this.h2;const b=3432918353,x=461845907,A=b&MASK_LOW,_=x&MASK_LOW;for(let R=0;R<i;R++)R&1?(d=c[R],d=d*b&MASK_HIGH|d*A&MASK_LOW,d=d<<15|d>>>17,d=d*x&MASK_HIGH|d*_&MASK_LOW,p^=d,p=p<<13|p>>>19,p=p*5+3864292196):(f=c[R],f=f*b&MASK_HIGH|f*A&MASK_LOW,f=f<<15|f>>>17,f=f*x&MASK_HIGH|f*_&MASK_LOW,g^=f,g=g<<13|g>>>19,g=g*5+3864292196);switch(d=0,o){case 3:d^=e[i*4+2]<<16;case 2:d^=e[i*4+1]<<8;case 1:d^=e[i*4],d=d*b&MASK_HIGH|d*A&MASK_LOW,d=d<<15|d>>>17,d=d*x&MASK_HIGH|d*_&MASK_LOW,i&1?p^=d:g^=d}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&MASK_HIGH|t*36045&MASK_LOW,e=e*4283543511&MASK_HIGH|((e<<16|t>>>16)*2950163797&MASK_HIGH)>>>16,t^=e>>>1,t=t*444984403&MASK_HIGH|t*60499&MASK_LOW,e=e*3301882366&MASK_HIGH|((e<<16|t>>>16)*3120437893&MASK_HIGH)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var Zo,Qo,$s,Cp,Pb;class AnnotationStorage{constructor(){q(this,Cp);q(this,Zo,!1);q(this,Qo,null);q(this,$s,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=y(this,$s).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return y(this,$s).get(t)}remove(t){if(y(this,$s).delete(t),y(this,$s).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of y(this,$s).values())if(e instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=y(this,$s).get(t);let i=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(i=!0,n[o]=c);else i=!0,y(this,$s).set(t,e);i&&$(this,Cp,Pb).call(this),e instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return y(this,$s).has(t)}getAll(){return y(this,$s).size>0?objectFromMap(y(this,$s)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return y(this,$s).size}resetModified(){y(this,Zo)&&(H(this,Zo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(y(this,$s).size===0)return SerializableEmpty;const t=new Map,e=new MurmurHash3_64,n=[],i=Object.create(null);let o=!1;for(const[c,d]of y(this,$s)){const f=d instanceof AnnotationEditor?d.serialize(!1,i):d;f&&(t.set(c,f),e.update(`${c}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:SerializableEmpty}get editorStats(){let t=null;const e=new Map;for(const n of y(this,$s).values()){if(!(n instanceof AnnotationEditor))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:o}=i;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const c=t[o]||(t[o]=new Map);for(const[d,f]of Object.entries(i)){if(d==="type")continue;let p=c.get(d);p||(p=new Map,c.set(d,p));const g=p.get(f)??0;p.set(f,g+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){H(this,Qo,null)}get modifiedIds(){if(y(this,Qo))return y(this,Qo);const t=[];for(const e of y(this,$s).values())!(e instanceof AnnotationEditor)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return H(this,Qo,{ids:new Set(t),hash:t.join(",")})}}Zo=new WeakMap,Qo=new WeakMap,$s=new WeakMap,Cp=new WeakSet,Pb=function(){y(this,Zo)||(H(this,Zo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Gh;class PrintAnnotationStorage extends AnnotationStorage{constructor(e){super();q(this,Gh);const{map:n,hash:i,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);H(this,Gh,{map:c,hash:i,transfer:o})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return y(this,Gh)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}Gh=new WeakMap;var Lc;class FontLoader{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){q(this,Lc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),y(this,Lc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||y(this,Lc).has(t.loadedName))){if(assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:o}=t,c=new FontFace(n,i,o);this.addNativeFontFace(c);try{await c.load(),y(this,Lc).add(n),e==null||e(t)}catch{warn(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw warn(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return shadow(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),shadow(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(assert(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(M,j){return M.charCodeAt(j)<<24|M.charCodeAt(j+1)<<16|M.charCodeAt(j+2)<<8|M.charCodeAt(j+3)&255}function i(M,j,L,O){const V=M.substring(0,j),X=M.substring(j+L);return V+O+X}let o,c;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let p=0;function g(M,j){if(++p>30){warn("Load test font never loaded."),j();return}if(f.font="30px "+M,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(g.bind(null,M,j))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=i(x,976,b.length,b);const _=16,R=1482184792;let P=n(x,_);for(o=0,c=b.length-3;o<c;o+=4)P=P-R+n(b,o)|0;o<b.length&&(P=P-R+n(b+"XXX",o)|0),x=i(x,_,4,string32(P));const E=`url(data:font/opentype;base64,${btoa(x)});`,T=`@font-face {font-family:"${b}";src:${E}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const M of[t.loadedName,b]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=M,C.append(j)}this._document.body.append(C),g(b,()=>{C.remove(),e.complete()})}}Lc=new WeakMap;class FontFaceObject{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(o){warn(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(o,c){};const i=[];for(let o=0,c=n.length;o<c;)switch(n[o++]){case FontRenderOps.BEZIER_CURVE_TO:{const[d,f,p,g,b,x]=n.slice(o,o+6);i.push(A=>A.bezierCurveTo(d,f,p,g,b,x)),o+=6}break;case FontRenderOps.MOVE_TO:{const[d,f]=n.slice(o,o+2);i.push(p=>p.moveTo(d,f)),o+=2}break;case FontRenderOps.LINE_TO:{const[d,f]=n.slice(o,o+2);i.push(p=>p.lineTo(d,f)),o+=2}break;case FontRenderOps.QUADRATIC_CURVE_TO:{const[d,f,p,g]=n.slice(o,o+4);i.push(b=>b.quadraticCurveTo(d,f,p,g)),o+=4}break;case FontRenderOps.RESTORE:i.push(d=>d.restore());break;case FontRenderOps.SAVE:i.push(d=>d.save());break;case FontRenderOps.SCALE:assert(i.length===2,"Scale command is only valid at the third position.");break;case FontRenderOps.TRANSFORM:{const[d,f,p,g,b,x]=n.slice(o,o+6);i.push(A=>A.transform(d,f,p,g,b,x)),o+=6}break;case FontRenderOps.TRANSLATE:{const[d,f]=n.slice(o,o+2);i.push(p=>p.translate(d,f)),o+=2}break}return this.compiledGlyphs[e]=function(c,d){i[0](c),i[1](c),c.scale(d,-d);for(let f=2,p=i.length;f<p;f++)i[f](c)}}}var qh;class BaseCanvasFactory{constructor({enableHWA:t=!1}){q(this,qh,!1);H(this,qh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!y(this,qh)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){unreachable("Abstract method `_createCanvas` called.")}}qh=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){const e=await fetchData(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):stringToBytes(e)}}class BaseFilterFactory{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,o){return"none"}destroy(t=!1){}}var Jo,tl,ir,Or,on,kp,el,Nt,rn,fc,pc,Zf,mc,Mb,Zg,gc,ph,mh,Qg,gh;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:e,ownerDocument:n=globalThis.document}){super();q(this,Nt);q(this,Jo);q(this,tl);q(this,ir);q(this,Or);q(this,on);q(this,kp);q(this,el,0);H(this,Or,e),H(this,on,n)}addFilter(e){if(!e)return"none";let n=y(this,Nt,rn).get(e);if(n)return n;const[i,o,c]=$(this,Nt,Zf).call(this,e),d=e.length===1?i:`${i}${o}${c}`;if(n=y(this,Nt,rn).get(d),n)return y(this,Nt,rn).set(e,n),n;const f=`g_${y(this,Or)}_transfer_map_${gn(this,el)._++}`,p=$(this,Nt,mc).call(this,f);y(this,Nt,rn).set(e,p),y(this,Nt,rn).set(d,p);const g=$(this,Nt,gc).call(this,f);return $(this,Nt,mh).call(this,i,o,c,g),p}addHCMFilter(e,n){var _;const i=`${e}-${n}`,o="base";let c=y(this,Nt,fc).get(o);if((c==null?void 0:c.key)===i||(c?((_=c.filter)==null||_.remove(),c.key=i,c.url="none",c.filter=null):(c={key:i,url:"none",filter:null},y(this,Nt,fc).set(o,c)),!e||!n))return c.url;const d=$(this,Nt,gh).call(this,e);e=Util.makeHexColor(...d);const f=$(this,Nt,gh).call(this,n);if(n=Util.makeHexColor(...f),y(this,Nt,pc).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const p=new Array(256);for(let R=0;R<=255;R++){const P=R/255;p[R]=P<=.03928?P/12.92:((P+.055)/1.055)**2.4}const g=p.join(","),b=`g_${y(this,Or)}_hcm_filter`,x=c.filter=$(this,Nt,gc).call(this,b);$(this,Nt,mh).call(this,g,g,g,x),$(this,Nt,Zg).call(this,x);const A=(R,P)=>{const E=d[R]/255,T=f[R]/255,C=new Array(P+1);for(let M=0;M<=P;M++)C[M]=E+M/P*(T-E);return C.join(",")};return $(this,Nt,mh).call(this,A(0,5),A(1,5),A(2,5),x),c.url=$(this,Nt,mc).call(this,b),c.url}addAlphaFilter(e){let n=y(this,Nt,rn).get(e);if(n)return n;const[i]=$(this,Nt,Zf).call(this,[e]),o=`alpha_${i}`;if(n=y(this,Nt,rn).get(o),n)return y(this,Nt,rn).set(e,n),n;const c=`g_${y(this,Or)}_alpha_map_${gn(this,el)._++}`,d=$(this,Nt,mc).call(this,c);y(this,Nt,rn).set(e,d),y(this,Nt,rn).set(o,d);const f=$(this,Nt,gc).call(this,c);return $(this,Nt,Qg).call(this,i,f),d}addLuminosityFilter(e){let n=y(this,Nt,rn).get(e||"luminosity");if(n)return n;let i,o;if(e?([i]=$(this,Nt,Zf).call(this,[e]),o=`luminosity_${i}`):o="luminosity",n=y(this,Nt,rn).get(o),n)return y(this,Nt,rn).set(e,n),n;const c=`g_${y(this,Or)}_luminosity_map_${gn(this,el)._++}`,d=$(this,Nt,mc).call(this,c);y(this,Nt,rn).set(e,d),y(this,Nt,rn).set(o,d);const f=$(this,Nt,gc).call(this,c);return $(this,Nt,Mb).call(this,f),e&&$(this,Nt,Qg).call(this,i,f),d}addHighlightHCMFilter(e,n,i,o,c){var T;const d=`${n}-${i}-${o}-${c}`;let f=y(this,Nt,fc).get(e);if((f==null?void 0:f.key)===d||(f?((T=f.filter)==null||T.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},y(this,Nt,fc).set(e,f)),!n||!i))return f.url;const[p,g]=[n,i].map($(this,Nt,gh).bind(this));let b=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),x=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[A,_]=[o,c].map($(this,Nt,gh).bind(this));x<b&&([b,x,A,_]=[x,b,_,A]),y(this,Nt,pc).style.color="";const R=(C,M,j)=>{const L=new Array(256),O=(x-b)/j,V=C/255,X=(M-C)/(255*j);let tt=0;for(let Y=0;Y<=j;Y++){const Q=Math.round(b+Y*O),ct=V+Y*X;for(let nt=tt;nt<=Q;nt++)L[nt]=ct;tt=Q+1}for(let Y=tt;Y<256;Y++)L[Y]=L[tt-1];return L.join(",")},P=`g_${y(this,Or)}_hcm_${e}_filter`,E=f.filter=$(this,Nt,gc).call(this,P);return $(this,Nt,Zg).call(this,E),$(this,Nt,mh).call(this,R(A[0],_[0],5),R(A[1],_[1],5),R(A[2],_[2],5),E),f.url=$(this,Nt,mc).call(this,P),f.url}destroy(e=!1){e&&y(this,Nt,fc).size!==0||(y(this,ir)&&(y(this,ir).parentNode.parentNode.remove(),H(this,ir,null)),y(this,tl)&&(y(this,tl).clear(),H(this,tl,null)),H(this,el,0))}}Jo=new WeakMap,tl=new WeakMap,ir=new WeakMap,Or=new WeakMap,on=new WeakMap,kp=new WeakMap,el=new WeakMap,Nt=new WeakSet,rn=function(){return y(this,tl)||H(this,tl,new Map)},fc=function(){return y(this,kp)||H(this,kp,new Map)},pc=function(){if(!y(this,ir)){const e=y(this,on).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=y(this,on).createElementNS(SVG_NS,"svg");i.setAttribute("width",0),i.setAttribute("height",0),H(this,ir,y(this,on).createElementNS(SVG_NS,"defs")),e.append(i),i.append(y(this,ir)),y(this,on).body.append(e)}return y(this,ir)},Zf=function(e){if(e.length===1){const p=e[0],g=new Array(256);for(let x=0;x<256;x++)g[x]=p[x]/255;const b=g.join(",");return[b,b,b]}const[n,i,o]=e,c=new Array(256),d=new Array(256),f=new Array(256);for(let p=0;p<256;p++)c[p]=n[p]/255,d[p]=i[p]/255,f[p]=o[p]/255;return[c.join(","),d.join(","),f.join(",")]},mc=function(e){if(y(this,Jo)===void 0){H(this,Jo,"");const n=y(this,on).URL;n!==y(this,on).baseURI&&(isDataScheme(n)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):H(this,Jo,n.split("#",1)[0]))}return`url(${y(this,Jo)}#${e})`},Mb=function(e){const n=y(this,on).createElementNS(SVG_NS,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Zg=function(e){const n=y(this,on).createElementNS(SVG_NS,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},gc=function(e){const n=y(this,on).createElementNS(SVG_NS,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),y(this,Nt,pc).append(n),n},ph=function(e,n,i){const o=y(this,on).createElementNS(SVG_NS,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),e.append(o)},mh=function(e,n,i,o){const c=y(this,on).createElementNS(SVG_NS,"feComponentTransfer");o.append(c),$(this,Nt,ph).call(this,c,"feFuncR",e),$(this,Nt,ph).call(this,c,"feFuncG",n),$(this,Nt,ph).call(this,c,"feFuncB",i)},Qg=function(e,n){const i=y(this,on).createElementNS(SVG_NS,"feComponentTransfer");n.append(i),$(this,Nt,ph).call(this,i,"feFuncA",e)},gh=function(e){return y(this,Nt,pc).style.color=e,getRGB(getComputedStyle(y(this,Nt,pc)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){const e=await fetchData(t,"arraybuffer");return new Uint8Array(e)}}if(isNodeJS){var packageCapability=Promise.withResolvers(),packageMap=null;(async()=>{const t=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:e,https:n,url:i,canvas:o,path2d:c}))})().then(t=>{packageMap=t,packageCapability.resolve()},t=>{warn(`loadPackages: ${t}`),packageMap=new Map,packageCapability.resolve()})}class NodePackages{static get promise(){return packageCapability.promise}static get(t){return packageMap==null?void 0:packageMap.get(t)}}async function node_utils_fetchData(s){const e=await NodePackages.get("fs").promises.readFile(s);return new Uint8Array(e)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(t,e){return NodePackages.get("canvas").createCanvas(t,e)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){return node_utils_fetchData(t)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class BaseShadingPattern{getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let o;if(i===PathType.STROKE||i===PathType.FILL){const c=e.current.getClippedPathBoundingBox(i,getCurrentTransform(t))||[0,0,0,0],d=Math.ceil(c[2]-c[0])||1,f=Math.ceil(c[3]-c[1])||1,p=e.cachedCanvases.getCanvas("pattern",d,f),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),n=Util.transform(n,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),applyBoundingBox(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const b=new DOMMatrix(n);o.setTransform(b)}else applyBoundingBox(t,this._bbox),o=this._createGradient(t);return o}}function drawTriangle(s,t,e,n,i,o,c,d){const f=t.coords,p=t.colors,g=s.data,b=s.width*4;let x;f[e+1]>f[n+1]&&(x=e,e=n,n=x,x=o,o=c,c=x),f[n+1]>f[i+1]&&(x=n,n=i,i=x,x=c,c=d,d=x),f[e+1]>f[n+1]&&(x=e,e=n,n=x,x=o,o=c,c=x);const A=(f[e]+t.offsetX)*t.scaleX,_=(f[e+1]+t.offsetY)*t.scaleY,R=(f[n]+t.offsetX)*t.scaleX,P=(f[n+1]+t.offsetY)*t.scaleY,E=(f[i]+t.offsetX)*t.scaleX,T=(f[i+1]+t.offsetY)*t.scaleY;if(_>=T)return;const C=p[o],M=p[o+1],j=p[o+2],L=p[c],O=p[c+1],V=p[c+2],X=p[d],tt=p[d+1],Y=p[d+2],Q=Math.round(_),ct=Math.round(T);let nt,J,D,U,N,I,B,z;for(let K=Q;K<=ct;K++){if(K<P){const Rt=K<_?0:(_-K)/(_-P);nt=A-(A-R)*Rt,J=C-(C-L)*Rt,D=M-(M-O)*Rt,U=j-(j-V)*Rt}else{let Rt;K>T?Rt=1:P===T?Rt=0:Rt=(P-K)/(P-T),nt=R-(R-E)*Rt,J=L-(L-X)*Rt,D=O-(O-tt)*Rt,U=V-(V-Y)*Rt}let st;K<_?st=0:K>T?st=1:st=(_-K)/(_-T),N=A-(A-E)*st,I=C-(C-X)*st,B=M-(M-tt)*st,z=j-(j-Y)*st;const ht=Math.round(Math.min(nt,N)),xt=Math.round(Math.max(nt,N));let mt=b*K+ht*4;for(let Rt=ht;Rt<=xt;Rt++)st=(nt-Rt)/(nt-N),st<0?st=0:st>1&&(st=1),g[mt++]=J-(J-I)*st|0,g[mt++]=D-(D-B)*st|0,g[mt++]=U-(U-z)*st|0,g[mt++]=255}}function drawFigure(s,t,e){const n=t.coords,i=t.colors;let o,c;switch(t.type){case"lattice":const d=t.verticesPerRow,f=Math.floor(n.length/d)-1,p=d-1;for(o=0;o<f;o++){let g=o*d;for(let b=0;b<p;b++,g++)drawTriangle(s,e,n[g],n[g+1],n[g+d],i[g],i[g+1],i[g+d]),drawTriangle(s,e,n[g+d+1],n[g+1],n[g+d],i[g+d+1],i[g+1],i[g+d])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)drawTriangle(s,e,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-d,g=Math.ceil(this._bounds[3])-f,b=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=p/b,_=g/x,R={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/A,scaleY:1/_},P=b+2*2,E=x+2*2,T=n.getCanvas("mesh",P,E),C=T.context,M=C.createImageData(b,x);if(e){const L=M.data;for(let O=0,V=L.length;O<V;O+=4)L[O]=e[0],L[O+1]=e[1],L[O+2]=e[2],L[O+3]=255}for(const L of this._figures)drawFigure(M,L,R);return C.putImageData(M,2,2),{canvas:T.canvas,offsetX:d-2*A,offsetY:f-2*_,scaleX:A,scaleY:_}}getPattern(t,e,n,i){applyBoundingBox(t,this._bbox);let o;if(i===PathType.SHADING)o=Util.singularValueDecompose2dScale(getCurrentTransform(t));else if(o=Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){const d=Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*d[0],o[1]*d[1]]}const c=this._createMeshCanvas(o,i===PathType.SHADING?null:this._background,e.cachedCanvases);return i!==PathType.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(s){switch(s[0]){case"RadialAxial":return new RadialAxialShadingPattern(s);case"Mesh":return new MeshShadingPattern(s);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${s[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},Pp=class Pp{constructor(t,e,n,i,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=o}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:o,color:c,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),info("TilingType: "+o);const g=e[0],b=e[1],x=e[2],A=e[3],_=x-g,R=A-b,P=Util.singularValueDecompose2dScale(this.matrix),E=Util.singularValueDecompose2dScale(this.baseTransform),T=P[0]*E[0],C=P[1]*E[1];let M=_,j=R,L=!1,O=!1;const V=Math.ceil(f*T),X=Math.ceil(p*C),tt=Math.ceil(_*T),Y=Math.ceil(R*C);V>=tt?M=f:L=!0,X>=Y?j=p:O=!0;const Q=this.getSizeAndScale(M,this.ctx.canvas.width,T),ct=this.getSizeAndScale(j,this.ctx.canvas.height,C),nt=t.cachedCanvases.getCanvas("pattern",Q.size,ct.size),J=nt.context,D=d.createCanvasGraphics(J);if(D.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(D,i,c),J.translate(-Q.scale*g,-ct.scale*b),D.transform(Q.scale,0,0,ct.scale,0,0),J.save(),this.clipBbox(D,g,b,x,A),D.baseTransform=getCurrentTransform(D.ctx),D.executeOperatorList(n),D.endDrawing(),J.restore(),L||O){const U=nt.canvas;L&&(M=f),O&&(j=p);const N=this.getSizeAndScale(M,this.ctx.canvas.width,T),I=this.getSizeAndScale(j,this.ctx.canvas.height,C),B=N.size,z=I.size,K=t.cachedCanvases.getCanvas("pattern-workaround",B,z),st=K.context,ht=L?Math.floor(_/f):0,xt=O?Math.floor(R/p):0;for(let mt=0;mt<=ht;mt++)for(let Rt=0;Rt<=xt;Rt++)st.drawImage(U,B*mt,z*Rt,B,z,0,0,B,z);return{canvas:K.canvas,scaleX:N.scale,scaleY:I.scale,offsetX:g,offsetY:b}}return{canvas:nt.canvas,scaleX:Q.scale,scaleY:ct.scale,offsetX:g,offsetY:b}}getSizeAndScale(t,e,n){const i=Math.max(Pp.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=i?o=i:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,i,o){const c=i-e,d=o-n;t.ctx.rect(e,n,c,d),t.current.updateRectMinMax(getCurrentTransform(t.ctx),[e,n,i,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,o=t.current;switch(e){case PaintType.COLORED:const c=this.ctx;i.fillStyle=c.fillStyle,i.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case PaintType.UNCOLORED:const d=Util.makeHexColor(n[0],n[1],n[2]);i.fillStyle=d,i.strokeStyle=d,o.fillColor=d,o.strokeColor=d;break;default:throw new FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let o=n;i!==PathType.SHADING&&(o=Util.transform(o,e.baseTransform),this.matrix&&(o=Util.transform(o,this.matrix)));const c=this.createPatternCanvas(e);let d=new DOMMatrix(o);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const f=t.createPattern(c.canvas,"repeat");return f.setTransform(d),f}};Jt(Pp,"MAX_PATTERN_SIZE",3e3);let TilingPattern=Pp;function convertBlackAndWhiteToRGBA({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const d=util_FeatureTest.isLittleEndian?4278190080:255,[f,p]=c?[o,d]:[d,o],g=n>>3,b=n&7,x=s.length;e=new Uint32Array(e.buffer);let A=0;for(let _=0;_<i;_++){for(const P=t+g;t<P;t++){const E=t<x?s[t]:255;e[A++]=E&128?p:f,e[A++]=E&64?p:f,e[A++]=E&32?p:f,e[A++]=E&16?p:f,e[A++]=E&8?p:f,e[A++]=E&4?p:f,e[A++]=E&2?p:f,e[A++]=E&1?p:f}if(b===0)continue;const R=t<x?s[t++]:255;for(let P=0;P<b;P++)e[A++]=R&1<<7-P?p:f}return{srcPos:t,destPos:A}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},s.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},s.transform=function(n,i,o,c,d,f){t.transform(n,i,o,c,d,f),this.__originalTransform(n,i,o,c,d,f)},s.setTransform=function(n,i,o,c,d,f){t.setTransform(n,i,o,c,d,f),this.__originalSetTransform(n,i,o,c,d,f)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,o,c,d){t.bezierCurveTo(e,n,i,o,c,d),this.__originalBezierCurveTo(e,n,i,o,c,d)},s.rect=function(e,n,i,o){t.rect(e,n,i,o),this.__originalRect(e,n,i,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function drawImageAtIntegerCoords(s,t,e,n,i,o,c,d,f,p){const[g,b,x,A,_,R]=getCurrentTransform(s);if(b===0&&x===0){const T=c*g+_,C=Math.round(T),M=d*A+R,j=Math.round(M),L=(c+f)*g+_,O=Math.abs(Math.round(L)-C)||1,V=(d+p)*A+R,X=Math.abs(Math.round(V)-j)||1;return s.setTransform(Math.sign(g),0,0,Math.sign(A),C,j),s.drawImage(t,e,n,i,o,0,0,O,X),s.setTransform(g,b,x,A,_,R),[O,X]}if(g===0&&A===0){const T=d*x+_,C=Math.round(T),M=c*b+R,j=Math.round(M),L=(d+p)*x+_,O=Math.abs(Math.round(L)-C)||1,V=(c+f)*b+R,X=Math.abs(Math.round(V)-j)||1;return s.setTransform(0,Math.sign(b),Math.sign(x),0,C,j),s.drawImage(t,e,n,i,o,0,0,X,O),s.setTransform(g,b,x,A,_,R),[X,O]}s.drawImage(t,e,n,i,o,c,d,f,p);const P=Math.hypot(g,b),E=Math.hypot(x,A);return[P*f,E*p]}function compileType3Glyph(s){const{width:t,height:e}=s;if(t>MAX_SIZE_TO_COMPILE||e>MAX_SIZE_TO_COMPILE)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(e+1)),d,f,p;const g=t+7&-8;let b=new Uint8Array(g*e),x=0;for(const E of s.data){let T=128;for(;T>0;)b[x++]=E&T?0:255,T>>=1}let A=0;for(x=0,b[x]!==0&&(c[0]=1,++A),f=1;f<t;f++)b[x]!==b[x+1]&&(c[f]=b[x]?2:1,++A),x++;for(b[x]!==0&&(c[f]=2,++A),d=1;d<e;d++){x=d*g,p=d*o,b[x-g]!==b[x]&&(c[p]=b[x]?1:8,++A);let E=(b[x]?4:0)+(b[x-g]?8:0);for(f=1;f<t;f++)E=(E>>2)+(b[x+1]?4:0)+(b[x-g+1]?8:0),i[E]&&(c[p+f]=i[E],++A),x++;if(b[x-g]!==b[x]&&(c[p+f]=b[x]?2:4,++A),A>n)return null}for(x=g*(e-1),p=d*o,b[x]!==0&&(c[p]=8,++A),f=1;f<t;f++)b[x]!==b[x+1]&&(c[p+f]=b[x]?4:8,++A),x++;if(b[x]!==0&&(c[p+f]=4,++A),A>n)return null;const _=new Int32Array([0,o,-1,0,-o,0,0,0,1]),R=new Path2D;for(d=0;A&&d<=e;d++){let E=d*o;const T=E+t;for(;E<T&&!c[E];)E++;if(E===T)continue;R.moveTo(E%o,d);const C=E;let M=c[E];do{const j=_[M];do E+=j;while(!c[E]);const L=c[E];L!==5&&L!==10?(M=L,c[E]=0):(M=L&51*M>>4,c[E]&=M>>2|M<<2),R.lineTo(E%o,E/o|0),c[E]||--A}while(C!==E);--d}return b=null,c=null,function(E){E.save(),E.scale(1/t,-1/e),E.translate(0,-e),E.fill(R),E.beginPath(),E.restore()}}class CanvasExtraState{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=Util.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=Util.applyTransform(e,t),i=Util.applyTransform(e.slice(2),t),o=Util.applyTransform([e[0],e[3]],t),c=Util.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],o[0],c[0]),this.minY=Math.min(this.minY,n[1],i[1],o[1],c[1]),this.maxX=Math.max(this.maxX,n[0],i[0],o[0],c[0]),this.maxY=Math.max(this.maxY,n[1],i[1],o[1],c[1])}updateScalingPathMinMax(t,e){Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,o,c,d,f,p,g){const b=Util.bezierBoundingBox(e,n,i,o,c,d,f,p,g);g||this.updateRectMinMax(t,b)}getPathBoundingBox(t=PathType.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===PathType.STROKE){e||unreachable("Stroke bounding box must include transform.");const i=Util.singularValueDecompose2dScale(e),o=i[0]*this.lineWidth/2,c=i[1]*this.lineWidth/2;n[0]-=o,n[1]-=c,n[2]+=o,n[3]+=c}return n}updateClipFromPath(){const t=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=PathType.FILL,e=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function putBinaryImageData(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%FULL_CHUNK_HEIGHT,o=(e-i)/FULL_CHUNK_HEIGHT,c=i===0?o:o+1,d=s.createImageData(n,FULL_CHUNK_HEIGHT);let f=0,p;const g=t.data,b=d.data;let x,A,_,R;if(t.kind===util_ImageKind.GRAYSCALE_1BPP){const P=g.byteLength,E=new Uint32Array(b.buffer,0,b.byteLength>>2),T=E.length,C=n+7>>3,M=4294967295,j=util_FeatureTest.isLittleEndian?4278190080:255;for(x=0;x<c;x++){for(_=x<o?FULL_CHUNK_HEIGHT:i,p=0,A=0;A<_;A++){const L=P-f;let O=0;const V=L>C?n:L*8-7,X=V&-8;let tt=0,Y=0;for(;O<X;O+=8)Y=g[f++],E[p++]=Y&128?M:j,E[p++]=Y&64?M:j,E[p++]=Y&32?M:j,E[p++]=Y&16?M:j,E[p++]=Y&8?M:j,E[p++]=Y&4?M:j,E[p++]=Y&2?M:j,E[p++]=Y&1?M:j;for(;O<V;O++)tt===0&&(Y=g[f++],tt=128),E[p++]=Y&tt?M:j,tt>>=1}for(;p<T;)E[p++]=0;s.putImageData(d,0,x*FULL_CHUNK_HEIGHT)}}else if(t.kind===util_ImageKind.RGBA_32BPP){for(A=0,R=n*FULL_CHUNK_HEIGHT*4,x=0;x<o;x++)b.set(g.subarray(f,f+R)),f+=R,s.putImageData(d,0,A),A+=FULL_CHUNK_HEIGHT;x<c&&(R=n*i*4,b.set(g.subarray(f,f+R)),s.putImageData(d,0,A))}else if(t.kind===util_ImageKind.RGB_24BPP)for(_=FULL_CHUNK_HEIGHT,R=n*_,x=0;x<c;x++){for(x>=o&&(_=i,R=n*_),p=0,A=R;A--;)b[p++]=g[f++],b[p++]=g[f++],b[p++]=g[f++],b[p++]=255;s.putImageData(d,0,x*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${t.kind}`)}function putBinaryImageMask(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%FULL_CHUNK_HEIGHT,o=(e-i)/FULL_CHUNK_HEIGHT,c=i===0?o:o+1,d=s.createImageData(n,FULL_CHUNK_HEIGHT);let f=0;const p=t.data,g=d.data;for(let b=0;b<c;b++){const x=b<o?FULL_CHUNK_HEIGHT:i;({srcPos:f}=convertBlackAndWhiteToRGBA({src:p,srcPos:f,dest:g,width:n,height:x,nonBlackColor:0})),s.putImageData(d,0,b*FULL_CHUNK_HEIGHT)}}function copyCtxState(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function resetCtxToDefault(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!isNodeJS){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function getImageSmoothingEnabled(s,t){if(t)return!0;const e=Util.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var oo,Jg,ty;const Ny=class Ny{constructor(t,e,n,i,o,{optionalContentConfig:c,markedContentStack:d=null},f,p){q(this,oo);this.ctx=t,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=c,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=d,n){const f=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(t,e,n,i){const o=t.argsArray,c=t.fnArray;let d=e||0;const f=o.length;if(f===d)return d;const p=f-d>EXECUTION_STEPS&&typeof n=="function",g=p?Date.now()+EXECUTION_TIME:0;let b=0;const x=this.commonObjs,A=this.objs;let _;for(;;){if(i!==void 0&&d===i.nextBreakPoint)return i.breakIt(d,n),d;if(_=c[d],_!==OPS.dependency)this[_].apply(this,o[d]);else for(const R of o[d]){const P=R.startsWith("g_")?x:A;if(!P.has(R))return P.get(R,n),d}if(d++,d===f)return d;if(p&&++b>EXECUTION_STEPS){if(Date.now()>g)return n(),d;b=0}}}endDrawing(){$(this,oo,Jg).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),$(this,oo,ty).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),d=n,f=i,p="prescale1",g,b;for(;o>2&&d>1||c>2&&f>1;){let x=d,A=f;o>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),o/=d/x),c>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,c/=f/A),g=this.cachedCanvases.getCanvas(p,x,A),b=g.context,b.clearRect(0,0,x,A),b.drawImage(t,0,0,d,f,0,0,x,A),t=g.canvas,d=x,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,o=this.current.fillColor,c=this.current.patternFill,d=getCurrentTransform(e);let f,p,g,b;if((t.bitmap||t.data)&&t.count>1){const V=t.bitmap||t.data.buffer;p=JSON.stringify(c?d:[d.slice(0,4),o]),f=this._cachedBitmapsMap.get(V),f||(f=new Map,this._cachedBitmapsMap.set(V,f));const X=f.get(p);if(X&&!c){const tt=Math.round(Math.min(d[0],d[2])+d[4]),Y=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:X,offsetX:tt,offsetY:Y}}g=X}g||(b=this.cachedCanvases.getCanvas("maskCanvas",n,i),putBinaryImageMask(b.context,t));let x=Util.transform(d,[1/n,0,0,-1/i,0,0]);x=Util.transform(x,[1,0,0,1,0,-i]);const[A,_,R,P]=Util.getAxialAlignedBoundingBox([0,0,n,i],x),E=Math.round(R-A)||1,T=Math.round(P-_)||1,C=this.cachedCanvases.getCanvas("fillCanvas",E,T),M=C.context,j=A,L=_;M.translate(-j,-L),M.transform(...x),g||(g=this._scaleImage(b.canvas,getCurrentTransformInverse(M)),g=g.img,f&&c&&f.set(p,g)),M.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(M),t.interpolate),drawImageAtIntegerCoords(M,g,0,0,g.width,g.height,0,0,n,i),M.globalCompositeOperation="source-in";const O=Util.transform(getCurrentTransformInverse(M),[1,0,0,1,-j,-L]);return M.fillStyle=c?o.getPattern(e,this,O,PathType.FILL):o,M.fillRect(0,0,n,i),f&&!c&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,C.canvas)),{canvas:C.canvas,offsetX:Math.round(j),offsetY:Math.round(L)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=LINE_CAP_STYLES[t]}setLineJoin(t){this.ctx.lineJoin=LINE_JOIN_STYLES[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const o=this.ctx;o.setTransform(...getCurrentTransform(this.suspendedCtx)),copyCtxState(this.suspendedCtx,o),mirrorContextOperations(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const o=i[0],c=i[1],d=i[2]-o,f=i[3]-c;d===0||f===0||(this.genericComposeSMask(e.context,n,d,f,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,o,c,d,f,p,g,b){let x=t.canvas,A=f-g,_=p-b;if(c){const P=Util.makeHexColor(...c);if(A<0||_<0||A+n>x.width||_+i>x.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,i),T=E.context;T.drawImage(x,-A,-_),T.globalCompositeOperation="destination-atop",T.fillStyle=P,T.fillRect(0,0,n,i),T.globalCompositeOperation="source-over",x=E.canvas,A=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(A,_,n,i),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=P,t.fillRect(A,_,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const R=new Path2D;R.rect(f,p,n,i),e.clip(R),e.globalCompositeOperation="destination-in",e.drawImage(x,A,_,n,i,f,p,n,i),e.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,o,c){this.ctx.transform(t,e,n,i,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,o=this.current;let c=o.x,d=o.y,f,p;const g=getCurrentTransform(i),b=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,x=b?n.slice(0):null;for(let A=0,_=0,R=t.length;A<R;A++)switch(t[A]|0){case OPS.rectangle:c=e[_++],d=e[_++];const P=e[_++],E=e[_++],T=c+P,C=d+E;i.moveTo(c,d),P===0||E===0?i.lineTo(T,C):(i.lineTo(T,d),i.lineTo(T,C),i.lineTo(c,C)),b||o.updateRectMinMax(g,[c,d,T,C]),i.closePath();break;case OPS.moveTo:c=e[_++],d=e[_++],i.moveTo(c,d),b||o.updatePathMinMax(g,c,d);break;case OPS.lineTo:c=e[_++],d=e[_++],i.lineTo(c,d),b||o.updatePathMinMax(g,c,d);break;case OPS.curveTo:f=c,p=d,c=e[_+4],d=e[_+5],i.bezierCurveTo(e[_],e[_+1],e[_+2],e[_+3],c,d),o.updateCurvePathMinMax(g,f,p,e[_],e[_+1],e[_+2],e[_+3],c,d,x),_+=6;break;case OPS.curveTo2:f=c,p=d,i.bezierCurveTo(c,d,e[_],e[_+1],e[_+2],e[_+3]),o.updateCurvePathMinMax(g,f,p,c,d,e[_],e[_+1],e[_+2],e[_+3],x),c=e[_+2],d=e[_+3],_+=4;break;case OPS.curveTo3:f=c,p=d,c=e[_+2],d=e[_+3],i.bezierCurveTo(e[_],e[_+1],c,d,c,d),o.updateCurvePathMinMax(g,f,p,e[_],e[_+1],c,d,c,d,x),_+=4;break;case OPS.closePath:i.closePath();break}b&&o.updateScalingPathMinMax(g,x),o.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,getCurrentTransformInverse(e),PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let o=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,getCurrentTransformInverse(e),PathType.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||FONT_IDENTITY_MATRIX,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let d="normal";n.black?d="900":n.bold&&(d="bold");const f=n.italic?"italic":"normal";let p=e;e<MIN_FONT_SIZE?p=MIN_FONT_SIZE:e>MAX_FONT_SIZE&&(p=MAX_FONT_SIZE),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${d} ${p}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,o,c){this.current.textMatrix=[t,e,n,i,o,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i){const o=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,g=f&TextRenderingMode.FILL_STROKE_MASK,b=!!(f&TextRenderingMode.ADD_TO_PATH_FLAG),x=c.patternFill&&!d.missingFile;let A;(d.disableFontFace||b||x)&&(A=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||x?(o.save(),o.translate(e,n),o.beginPath(),A(o,p),i&&o.setTransform(...i),(g===TextRenderingMode.FILL||g===TextRenderingMode.FILL_STROKE)&&o.fill(),(g===TextRenderingMode.STROKE||g===TextRenderingMode.FILL_STROKE)&&o.stroke(),o.restore()):((g===TextRenderingMode.FILL||g===TextRenderingMode.FILL_STROKE)&&o.fillText(t,e,n),(g===TextRenderingMode.STROKE||g===TextRenderingMode.FILL_STROKE)&&o.strokeText(t,e,n)),b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(o),x:e,y:n,fontSize:p,addToPath:A})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return shadow(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const o=this.ctx,c=e.fontSizeScale,d=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,g=e.textHScale*p,b=t.length,x=n.vertical,A=x?1:-1,_=n.defaultVMetrics,R=i*e.fontMatrix[0],P=e.textRenderingMode===TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(g,-1):o.scale(g,1);let E;if(e.patternFill){o.save();const L=e.fillColor.getPattern(o,this,getCurrentTransformInverse(o),PathType.FILL);E=getCurrentTransform(o),o.restore(),o.fillStyle=L}let T=e.lineWidth;const C=e.textMatrixScale;if(C===0||T===0){const L=e.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(L===TextRenderingMode.STROKE||L===TextRenderingMode.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=C;if(c!==1&&(o.scale(c,c),T/=c),o.lineWidth=T,n.isInvalidPDFjsFont){const L=[];let O=0;for(const V of t)L.push(V.unicode),O+=V.width;o.fillText(L.join(""),0,0),e.x+=O*R*g,o.restore(),this.compose();return}let M=0,j;for(j=0;j<b;++j){const L=t[j];if(typeof L=="number"){M+=A*L*i/1e3;continue}let O=!1;const V=(L.isSpace?f:0)+d,X=L.fontChar,tt=L.accent;let Y,Q,ct=L.width;if(x){const J=L.vmetric||_,D=-(L.vmetric?J[1]:ct*.5)*R,U=J[2]*R;ct=J?-J[0]:ct,Y=D/c,Q=(M+U)/c}else Y=M/c,Q=0;if(n.remeasure&&ct>0){const J=o.measureText(X).width*1e3/i*c;if(ct<J&&this.isFontSubpixelAAEnabled){const D=ct/J;O=!0,o.save(),o.scale(D,1),Y/=D}else ct!==J&&(Y+=(ct-J)/2e3*i/c)}if(this.contentVisible&&(L.isInFont||n.missingFile)){if(P&&!tt)o.fillText(X,Y,Q);else if(this.paintChar(X,Y,Q,E),tt){const J=Y+i*tt.offset.x/c,D=Q-i*tt.offset.y/c;this.paintChar(tt.fontChar,J,D,E)}}const nt=x?ct*R-V*p:ct*R+V*p;M+=nt,O&&o.restore()}x?e.y-=M:e.x+=M*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,o=n.fontSize,c=n.fontDirection,d=i.vertical?1:-1,f=n.charSpacing,p=n.wordSpacing,g=n.textHScale*c,b=n.fontMatrix||FONT_IDENTITY_MATRIX,x=t.length,A=n.textRenderingMode===TextRenderingMode.INVISIBLE;let _,R,P,E;if(!(A||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(g,c),_=0;_<x;++_){if(R=t[_],typeof R=="number"){E=d*R*o/1e3,this.ctx.translate(E,0),n.x+=E*g;continue}const T=(R.isSpace?p:0)+f,C=i.charProcOperatorList[R.operatorListId];if(!C){warn(`Type3 character "${R.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=R,this.save(),e.scale(o,o),e.transform(...b),this.executeOperatorList(C),this.restore()),P=Util.applyTransform([R.width,0],b)[0]*o+T,e.translate(P,0),n.x+=P*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,o,c){this.ctx.rect(n,i,o-n,c-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||getCurrentTransform(this.ctx),o={createCanvasGraphics:c=>new Ny(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new TilingPattern(t,n,this.ctx,o,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Util.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Util.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=getShadingPattern(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,getCurrentTransformInverse(e),PathType.SHADING);const i=getCurrentTransformInverse(e);if(i){const{width:o,height:c}=e.canvas,[d,f,p,g]=Util.getAxialAlignedBoundingBox([0,0,o,c],i);this.ctx.fillRect(d,f,p-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=getCurrentTransform(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(getCurrentTransform(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||info("TODO: Support non-isolated groups."),t.knockout&&warn("Knockout groups not supported.");const n=getCurrentTransform(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Util.getAxialAlignedBoundingBox(t.bbox,getCurrentTransform(e));const o=[0,0,e.canvas.width,e.canvas.height];i=Util.intersect(i,o)||[0,0,0,0];const c=Math.floor(i[0]),d=Math.floor(i[1]),f=Math.max(Math.ceil(i[2])-c,1),p=Math.max(Math.ceil(i[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(g,f,p),x=b.context;x.translate(-c,-d),x.transform(...n),t.smask?this.smaskStack.push({canvas:b.canvas,context:x,offsetX:c,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,d),e.save()),copyCtxState(e,x),this.ctx=x,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const o=Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,i,o){if($(this,oo,Jg).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],d=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=d;const[f,p]=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),{viewportScale:g}=this,b=Math.ceil(c*this.outputScaleX*g),x=Math.ceil(d*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(b,x);const{canvas:A,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(t,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,d*p),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],c,d),this.ctx.clip(),this.ctx.beginPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),$(this,oo,ty).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=compileType3Glyph(t)),i.compiled)){i.compiled(n);return}const o=this._createMaskCanvas(t),c=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(c,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const d=this.ctx;d.save();const f=getCurrentTransform(d);d.transform(e,n,i,o,0,0);const p=this._createMaskCanvas(t);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let g=0,b=c.length;g<b;g+=2){const x=Util.transform(f,[e,n,i,o,c[g],c[g+1]]),[A,_]=Util.applyTransform([0,0],x);d.drawImage(p.canvas,A,_)}d.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const o of t){const{data:c,width:d,height:f,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=g.context;b.save();const x=this.getObject(c,o);putBinaryImageMask(b,x),b.globalCompositeOperation="source-in",b.fillStyle=i?n.getPattern(b,this,getCurrentTransformInverse(e),PathType.FILL):n,b.fillRect(0,0,d,f),b.restore(),e.save(),e.transform(...p),e.scale(1,-1),drawImageAtIntegerCoords(e,g.canvas,0,0,d,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){warn("Dependent image isn't ready yet");return}const c=o.width,d=o.height,f=[];for(let p=0,g=i.length;p<g;p+=2)f.push({transform:[e,0,0,n,i[p],i[p+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,i),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!isNodeJS){const{filter:d}=i;d!=="none"&&d!==""&&(i.filter="none")}i.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,n).context;putBinaryImageData(f,t),o=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(o,getCurrentTransformInverse(i));i.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(i),t.interpolate),drawImageAtIntegerCoords(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const o=t.width,c=t.height,f=this.cachedCanvases.getCanvas("inlineImage",o,c).context;putBinaryImageData(f,t),i=this.applyTransferMapsToCanvas(f)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),drawImageAtIntegerCoords(n,i,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===EO_CLIP?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=getCurrentTransform(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:o}=this.ctx.getTransform();let c,d;if(n===0&&i===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)c=d=1/f;else{const g=f*t;c=d=g<1?1/g:1}else if(t===0)c=1/f,d=1/p;else{const g=f*t,b=p*t;c=g<1?1/g:1,d=b<1?1/b:1}}else{const f=Math.abs(e*o-n*i),p=Math.hypot(e,n),g=Math.hypot(i,o);if(t===0)c=g/f,d=p/f;else{const b=t*f;c=g>b?g/b:1,d=p>b?p/b:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,o]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&o===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(i,o),c.length>0){const d=Math.max(i,o);e.setLineDash(c.map(f=>f/d)),e.lineDashOffset/=d}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};oo=new WeakSet,Jg=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ty=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let CanvasGraphics=Ny;for(const s in OPS)CanvasGraphics.prototype[s]!==void 0&&(CanvasGraphics.prototype[OPS[s]]=CanvasGraphics.prototype[s]);var Xh,Yh;class GlobalWorkerOptions{static get workerPort(){return y(this,Xh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");H(this,Xh,t)}static get workerSrc(){return y(this,Yh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");H(this,Yh,t)}}Xh=new WeakMap,Yh=new WeakMap,q(GlobalWorkerOptions,Xh,null),q(GlobalWorkerOptions,Yh,"");const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(s){switch(s instanceof Error||typeof s=="object"&&s!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new AbortException(s.message);case"MissingPDFException":return new MissingPDFException(s.message);case"PasswordException":return new PasswordException(s.message,s.code);case"UnexpectedResponseException":return new UnexpectedResponseException(s.message,s.status);case"UnknownErrorException":return new UnknownErrorException(s.message,s.details);default:return new UnknownErrorException(s.message,s.toString())}}var Dc,di,jb,Nb,Lb,Qf;class MessageHandler{constructor(t,e,n){q(this,di);q(this,Dc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",$(this,di,jb).bind(this),{signal:y(this,Dc).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,i){const o=this.streamId++,c=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:c,targetName:d,action:t,streamId:o,data:e,desiredSize:p.desiredSize},i),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,f.postMessage({sourceName:c,targetName:d,stream:StreamKind.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{assert(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:c,targetName:d,stream:StreamKind.CANCEL,streamId:o,reason:wrapReason(p)}),g.promise}},n)}destroy(){var t;(t=y(this,Dc))==null||t.abort(),H(this,Dc,null)}}Dc=new WeakMap,di=new WeakSet,jb=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){$(this,di,Lb).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===CallbackKind.DATA)i.resolve(t.data);else if(t.callback===CallbackKind.ERROR)i.reject(wrapReason(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,o=this.comObj;new Promise(function(c){c(e(t.data))}).then(function(c){o.postMessage({sourceName:n,targetName:i,callback:CallbackKind.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:i,callback:CallbackKind.ERROR,callbackId:t.callbackId,reason:wrapReason(c)})});return}if(t.streamId){$(this,di,Nb).call(this,t);return}e(t.data)},Nb=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,o=this.comObj,c=this,d=this.actionHandler[t.action],f={enqueue(p,g=1,b){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=g,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:StreamKind.ENQUEUE,streamId:e,chunk:p},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:StreamKind.CLOSE,streamId:e}),delete c.streamSinks[e])},error(p){assert(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:StreamKind.ERROR,streamId:e,reason:wrapReason(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,new Promise(function(p){p(d(t.data,f))}).then(function(){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.START_COMPLETE,streamId:e,reason:wrapReason(p)})})},Lb=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,o=this.comObj,c=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case StreamKind.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(wrapReason(t.reason));break;case StreamKind.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(wrapReason(t.reason));break;case StreamKind.PULL:if(!d){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,new Promise(function(f){var p;f((p=d.onPull)==null?void 0:p.call(d))}).then(function(){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.PULL_COMPLETE,streamId:e,reason:wrapReason(f)})});break;case StreamKind.ENQUEUE:if(assert(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case StreamKind.CLOSE:if(assert(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),$(this,di,Qf).call(this,c,e);break;case StreamKind.ERROR:assert(c,"error should have stream controller"),c.controller.error(wrapReason(t.reason)),$(this,di,Qf).call(this,c,e);break;case StreamKind.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(wrapReason(t.reason)),$(this,di,Qf).call(this,c,e);break;case StreamKind.CANCEL:if(!d)break;new Promise(function(f){var p;f((p=d.onCancel)==null?void 0:p.call(d,wrapReason(t.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:StreamKind.CANCEL_COMPLETE,streamId:e,reason:wrapReason(f)})}),d.sinkCapability.reject(wrapReason(t.reason)),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Qf=async function(t,e){var n,i,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var sl,Wh;class Metadata{constructor({parsedData:t,rawData:e}){q(this,sl);q(this,Wh);H(this,sl,t),H(this,Wh,e)}getRaw(){return y(this,Wh)}get(t){return y(this,sl).get(t)??null}getAll(){return objectFromMap(y(this,sl))}has(t){return y(this,sl).has(t)}}sl=new WeakMap,Wh=new WeakMap;const INTERNAL=Symbol("INTERNAL");var Kh,Zh,Qh,Fc;class OptionalContentGroup{constructor(t,{name:e,intent:n,usage:i,rbGroups:o}){q(this,Kh,!1);q(this,Zh,!1);q(this,Qh,!1);q(this,Fc,!0);H(this,Kh,!!(t&RenderingIntentFlag.DISPLAY)),H(this,Zh,!!(t&RenderingIntentFlag.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(y(this,Qh))return y(this,Fc);if(!y(this,Fc))return!1;const{print:t,view:e}=this.usage;return y(this,Kh)?(e==null?void 0:e.viewState)!=="OFF":y(this,Zh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==INTERNAL&&unreachable("Internal method `_setVisible` called."),H(this,Qh,n),H(this,Fc,e)}}Kh=new WeakMap,Zh=new WeakMap,Qh=new WeakMap,Fc=new WeakMap;var $a,Be,Oc,Ic,Jh,ey;class OptionalContentConfig{constructor(t,e=RenderingIntentFlag.DISPLAY){q(this,Jh);q(this,$a,null);q(this,Be,new Map);q(this,Oc,null);q(this,Ic,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,H(this,Ic,t.order);for(const n of t.groups)y(this,Be).set(n.id,new OptionalContentGroup(e,n));if(t.baseState==="OFF")for(const n of y(this,Be).values())n._setVisible(INTERNAL,!1);for(const n of t.on)y(this,Be).get(n)._setVisible(INTERNAL,!0);for(const n of t.off)y(this,Be).get(n)._setVisible(INTERNAL,!1);H(this,Oc,this.getHash())}}isVisible(t){if(y(this,Be).size===0)return!0;if(!t)return info("Optional content group not defined."),!0;if(t.type==="OCG")return y(this,Be).has(t.id)?y(this,Be).get(t.id).visible:(warn(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return $(this,Jh,ey).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!y(this,Be).has(e))return warn(`Optional content group not found: ${e}`),!0;if(y(this,Be).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!y(this,Be).has(e))return warn(`Optional content group not found: ${e}`),!0;if(!y(this,Be).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!y(this,Be).has(e))return warn(`Optional content group not found: ${e}`),!0;if(!y(this,Be).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!y(this,Be).has(e))return warn(`Optional content group not found: ${e}`),!0;if(y(this,Be).get(e).visible)return!1}return!0}return warn(`Unknown optional content policy ${t.policy}.`),!0}return warn(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const i=y(this,Be).get(t);if(!i){warn(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const c of i.rbGroups)for(const d of c)d!==t&&((o=y(this,Be).get(d))==null||o._setVisible(INTERNAL,!1,!0));i._setVisible(INTERNAL,!!e,!0),H(this,$a,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const o=y(this,Be).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!o.visible,e);break}}H(this,$a,null)}get hasInitialVisibility(){return y(this,Oc)===null||this.getHash()===y(this,Oc)}getOrder(){return y(this,Be).size?y(this,Ic)?y(this,Ic).slice():[...y(this,Be).keys()]:null}getGroups(){return y(this,Be).size>0?objectFromMap(y(this,Be)):null}getGroup(t){return y(this,Be).get(t)||null}getHash(){if(y(this,$a)!==null)return y(this,$a);const t=new MurmurHash3_64;for(const[e,n]of y(this,Be))t.update(`${e}:${n.visible}`);return H(this,$a,t.hexdigest())}}$a=new WeakMap,Be=new WeakMap,Oc=new WeakMap,Ic=new WeakMap,Jh=new WeakSet,ey=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const o=t[i];let c;if(Array.isArray(o))c=$(this,Jh,ey).call(this,o);else if(y(this,Be).has(o))c=y(this,Be).get(o).visible;else return warn(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class PDFDataTransportStream{constructor(t,{disableRange:e=!1,disableStream:n=!1}){assert(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:c,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=d,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});assert(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||o.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new PDFDataTransportStreamRangeReader(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=isPdfFile(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let g=d(e);return g=unescape(g),g=f(g),g=p(g),o(g)}if(e=c(s),e){const g=p(e);return o(g)}if(e=n("filename","i").exec(s),e){e=e[1];let g=d(e);return g=p(g),o(g)}function n(g,b){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function i(g,b){if(g){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const x=new TextDecoder(g,{fatal:!0}),A=stringToBytes(b);b=x.decode(A),t=!1}catch{}}return b}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=i("utf-8",g),t&&(g=i("iso-8859-1",g))),g}function c(g){const b=[];let x;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=A.exec(g))!==null;){let[,R,P,E]=x;if(R=parseInt(R,10),R in b){if(R===0)break;continue}b[R]=[P,E]}const _=[];for(let R=0;R<b.length&&R in b;++R){let[P,E]=b[R];E=d(E),P&&(E=unescape(E),R===0&&(E=f(E))),_.push(E)}return _.join("")}function d(g){if(g.startsWith('"')){const b=g.slice(1).split('\\"');for(let x=0;x<b.length;++x){const A=b[x].indexOf('"');A!==-1&&(b[x]=b[x].slice(0,A),b.length=x+1),b[x]=b[x].replaceAll(/\\(.)/g,"$1")}g=b.join('"')}return g}function f(g){const b=g.indexOf("'");if(b===-1)return g;const x=g.slice(0,b),_=g.slice(b+1).replace(/^[^']*'/,"");return i(x,_)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,x,A,_){if(A==="q"||A==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,P){return String.fromCharCode(parseInt(P,16))}),i(x,_);try{_=atob(_)}catch{}return i(x,_)})}return""}function createHeaders(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function validateRangeRequestCapabilities({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function extractFilenameFromHeader(s){const t=s.get("Content-Disposition");if(t){let e=getFilenameFromContentDispositionHeader(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(isPdfFile(e))return e}return null}function createResponseStatusError(s,t){return s===404||s===0&&t.startsWith("file:")?new MissingPDFException('Missing PDF "'+t+'".'):new UnexpectedResponseException(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function validateResponseStatus(s){return s===200||s===206}function createFetchOptions(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(warn(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class PDFFetchStream{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new PDFFetchStreamRangeReader(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class PDFFetchStreamReader{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,createFetchOptions(n,this._withCredentials,this._abortController)).then(o=>{if(!validateResponseStatus(o.status))throw createResponseStatusError(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:d,suggestedLength:f}=validateRangeRequestCapabilities({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=extractFilenameFromHeader(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const c=i.url;fetch(c,createFetchOptions(o,this._withCredentials,this._abortController)).then(d=>{if(!validateResponseStatus(d.status))throw createResponseStatusError(d.status,c);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:getArrayBuffer(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(s){const t=s.response;return typeof t!="string"?t:stringToBytes(t).buffer}class NetworkManager{constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=createHeaders(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const o in n)i[o]=n[o];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,c]of this.headers)e.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=PARTIAL_CONTENT_RESPONSE):i.expectedStatus=OK_RESPONSE,e.responseType="arraybuffer",t.onError&&(e.onerror=function(o){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){var f,p,g;const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){(f=n.onError)==null||f.call(n,i.status);return}const o=i.status||OK_RESPONSE;if(!(o===OK_RESPONSE&&n.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&o!==n.expectedStatus){(p=n.onError)==null||p.call(n,i.status);return}const d=network_getArrayBuffer(i);if(o===PARTIAL_CONTENT_RESPONSE){const b=i.getResponseHeader("Content-Range"),x=/bytes (\d+)-(\d+)\/(\d+)/.exec(b);n.onDone({begin:parseInt(x[1],10),chunk:d})}else d?n.onDone({begin:0,chunk:d}):(g=n.onError)==null||g.call(n,i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class PDFNetworkStream{constructor(t){this._source=t,this._manager=new NetworkManager(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new PDFNetworkStreamRangeRequestReader(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class PDFNetworkStreamFullRequestReader{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]})),{allowRangeRequests:i,suggestedLength:o}=validateRangeRequestCapabilities({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=extractFilenameFromHeader(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=createResponseStatusError(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=createResponseStatusError(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(s){if(urlRegex.test(s))return new URL(s);const t=NodePackages.get("url");return new URL(t.pathToFileURL(s))}function createRequest(s,t,e){return s.protocol==="http:"?NodePackages.get("http").request(s,{headers:t},e):NodePackages.get("https").request(s,{headers:t},e)}class PDFNodeStream{constructor(t){this.source=t,this.url=parseUrlOrPath(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,t,e):new PDFNodeStreamRangeReader(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class BaseFullReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(t){super(t);const e=Object.fromEntries(t.headers),n=i=>{if(i.statusCode===404){const f=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(i);const o=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:d}=validateRangeRequestCapabilities({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=extractFilenameFromHeader(o)};this._request=createRequest(this._url,e,n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(t,e,n){super(t);const i=Object.fromEntries(t.headers);i.Range=`bytes=${e}-${n-1}`;const o=c=>{if(c.statusCode===404){const d=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d;return}this._setReadableStream(c)};this._request=createRequest(this._url,i,o),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(t){super(t);const e=NodePackages.get("fs");e.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new MissingPDFException(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(t,e,n){super(t);const i=NodePackages.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:e,end:n-1}))}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8;var sb,Ga,Tn,td,ed,nl,Ir,sd,nd,il,Bc,Hc,qa,zc,id,Uc,rl,rd,ad,ms,al,ol,od,Xa,Vc,ia,Db,Fb,sy,Xn,Jf,ny,Ob,Ib;let TextLayer$1=(ms=class{constructor({textContentSource:t,container:e,viewport:n}){q(this,ia);q(this,Ga,Promise.withResolvers());q(this,Tn,null);q(this,td,!1);q(this,ed,!!((sb=globalThis.FontInspector)!=null&&sb.enabled));q(this,nl,null);q(this,Ir,null);q(this,sd,0);q(this,nd,0);q(this,il,null);q(this,Bc,null);q(this,Hc,0);q(this,qa,0);q(this,zc,Object.create(null));q(this,id,[]);q(this,Uc,null);q(this,rl,[]);q(this,rd,new WeakMap);q(this,ad,null);var f;if(t instanceof ReadableStream)H(this,Uc,t);else if(typeof t=="object")H(this,Uc,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');H(this,Tn,H(this,Bc,e)),H(this,qa,n.scale*(globalThis.devicePixelRatio||1)),H(this,Hc,n.rotation),H(this,Ir,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:o,pageX:c,pageY:d}=n.rawDims;H(this,ad,[1,0,0,-1,-c,d+o]),H(this,nd,i),H(this,sd,o),$(f=ms,Xn,Ob).call(f),setLayerDimensions(e,n),y(this,Ga).promise.finally(()=>{y(ms,Vc).delete(this),H(this,Ir,null),H(this,zc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{y(this,il).read().then(({value:e,done:n})=>{if(n){y(this,Ga).resolve();return}y(this,nl)??H(this,nl,e.lang),Object.assign(y(this,zc),e.styles),$(this,ia,Db).call(this,e.items),t()},y(this,Ga).reject)};return H(this,il,y(this,Uc).getReader()),y(ms,Vc).add(this),t(),y(this,Ga).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==y(this,Hc)&&(e==null||e(),H(this,Hc,i),setLayerDimensions(y(this,Bc),{rotation:i})),n!==y(this,qa)){e==null||e(),H(this,qa,n);const c={div:null,properties:null,ctx:$(o=ms,Xn,Jf).call(o,y(this,nl))};for(const d of y(this,rl))c.properties=y(this,rd).get(d),c.div=d,$(this,ia,sy).call(this,c)}}cancel(){var e;const t=new AbortException("TextLayer task cancelled.");(e=y(this,il))==null||e.cancel(t).catch(()=>{}),H(this,il,null),y(this,Ga).reject(t)}get textDivs(){return y(this,rl)}get textContentItemsStr(){return y(this,id)}static cleanup(){if(!(y(this,Vc).size>0)){y(this,al).clear();for(const{canvas:t}of y(this,ol).values())t.remove();y(this,ol).clear()}}},Ga=new WeakMap,Tn=new WeakMap,td=new WeakMap,ed=new WeakMap,nl=new WeakMap,Ir=new WeakMap,sd=new WeakMap,nd=new WeakMap,il=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,qa=new WeakMap,zc=new WeakMap,id=new WeakMap,Uc=new WeakMap,rl=new WeakMap,rd=new WeakMap,ad=new WeakMap,al=new WeakMap,ol=new WeakMap,od=new WeakMap,Xa=new WeakMap,Vc=new WeakMap,ia=new WeakSet,Db=function(t){var i,o;if(y(this,td))return;(o=y(this,Ir)).ctx??(o.ctx=$(i=ms,Xn,Jf).call(i,y(this,nl)));const e=y(this,rl),n=y(this,id);for(const c of t){if(e.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),H(this,td,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const d=y(this,Tn);H(this,Tn,document.createElement("span")),y(this,Tn).classList.add("markedContent"),c.id!==null&&y(this,Tn).setAttribute("id",`${c.id}`),d.append(y(this,Tn))}else c.type==="endMarkedContent"&&H(this,Tn,y(this,Tn).parentNode);continue}n.push(c.str),$(this,ia,Fb).call(this,c)}},Fb=function(t){var R;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};y(this,rl).push(e);const i=Util.transform(y(this,ad),t.transform);let o=Math.atan2(i[1],i[0]);const c=y(this,zc)[t.fontName];c.vertical&&(o+=Math.PI/2);let d=y(this,ed)&&c.fontSubstitution||c.fontFamily;d=ms.fontFamilyMap.get(d)||d;const f=Math.hypot(i[2],i[3]),p=f*$(R=ms,Xn,Ib).call(R,d,y(this,nl));let g,b;o===0?(g=i[4],b=i[5]-p):(g=i[4]+p*Math.sin(o),b=i[5]-p*Math.cos(o));const x="calc(var(--scale-factor)*",A=e.style;y(this,Tn)===y(this,Bc)?(A.left=`${(100*g/y(this,nd)).toFixed(2)}%`,A.top=`${(100*b/y(this,sd)).toFixed(2)}%`):(A.left=`${x}${g.toFixed(2)}px)`,A.top=`${x}${b.toFixed(2)}px)`),A.fontSize=`${x}${(y(ms,Xa)*f).toFixed(2)}px)`,A.fontFamily=d,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,y(this,ed)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const P=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);P!==E&&Math.max(P,E)/Math.min(P,E)>1.5&&(_=!0)}if(_&&(n.canvasWidth=c.vertical?t.height:t.width),y(this,rd).set(e,n),y(this,Ir).div=e,y(this,Ir).properties=n,$(this,ia,sy).call(this,y(this,Ir)),n.hasText&&y(this,Tn).append(e),n.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),y(this,Tn).append(P)}},sy=function(t){var d;const{div:e,properties:n,ctx:i}=t,{style:o}=e;let c="";if(y(ms,Xa)>1&&(c=`scale(${1/y(ms,Xa)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=o,{canvasWidth:p,fontSize:g}=n;$(d=ms,Xn,ny).call(d,i,g*y(this,qa),f);const{width:b}=i.measureText(e.textContent);b>0&&(c=`scaleX(${p*y(this,qa)/b}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(o.transform=c)},Xn=new WeakSet,Jf=function(t=null){let e=y(this,ol).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),y(this,ol).set(t,e),y(this,od).set(e,{size:0,family:""})}return e},ny=function(t,e,n){const i=y(this,od).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},Ob=function(){if(y(this,Xa)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),H(this,Xa,t.getBoundingClientRect().height),t.remove()},Ib=function(t,e){const n=y(this,al).get(t);if(n)return n;const i=$(this,Xn,Jf).call(this,e);i.canvas.width=i.canvas.height=DEFAULT_FONT_SIZE,$(this,Xn,ny).call(this,i,DEFAULT_FONT_SIZE,t);const o=i.measureText("");let c=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);if(c){const g=c/(c+d);return y(this,al).set(t,g),i.canvas.width=i.canvas.height=0,g}i.strokeStyle="red",i.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),i.strokeText("g",0,0);let f=i.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;d=0;for(let g=f.length-1-3;g>=0;g-=4)if(f[g]>0){d=Math.ceil(g/4/DEFAULT_FONT_SIZE);break}i.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),i.strokeText("A",0,DEFAULT_FONT_SIZE),f=i.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,c=0;for(let g=0,b=f.length;g<b;g+=4)if(f[g]>0){c=DEFAULT_FONT_SIZE-Math.floor(g/4/DEFAULT_FONT_SIZE);break}i.canvas.width=i.canvas.height=0;const p=c?c/(c+d):DEFAULT_FONT_ASCENT;return y(this,al).set(t,p),p},q(ms,Xn),q(ms,al,new Map),q(ms,ol,new Map),q(ms,od,new WeakMap),q(ms,Xa,null),q(ms,Vc,new Set),ms);class XfaText{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(o){var f;if(!o)return;let c=null;const d=o.name;if(d==="#text")c=o.value;else if(XfaText.shouldBuildText(d))(f=o==null?void 0:o.attributes)!=null&&f.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const p of o.children)i(p)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory,DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory,DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory,DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new PDFDocumentLoadingTask,{docId:e}=t,n=s.url?getUrlProp(s.url):null,i=s.data?getDataProp(s.data):null,o=s.httpHeaders||null,c=s.withCredentials===!0,d=s.password??null,f=s.range instanceof PDFDataRangeTransport$1?s.range:null,p=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let g=s.worker instanceof PDFWorker?s.worker:null;const b=s.verbosity,x=typeof s.docBaseUrl=="string"&&!isDataScheme(s.docBaseUrl)?s.docBaseUrl:null,A=typeof s.cMapUrl=="string"?s.cMapUrl:null,_=s.cMapPacked!==!1,R=s.CMapReaderFactory||DefaultCMapReaderFactory,P=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,E=s.StandardFontDataFactory||DefaultStandardFontDataFactory,T=s.stopAtErrors!==!0,C=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,M=s.isEvalSupported!==!1,j=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!isNodeJS,L=typeof s.isChrome=="boolean"?s.isChrome:!util_FeatureTest.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),O=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,V=typeof s.disableFontFace=="boolean"?s.disableFontFace:isNodeJS,X=s.fontExtraProperties===!0,tt=s.enableXfa===!0,Y=s.ownerDocument||globalThis.document,Q=s.disableRange===!0,ct=s.disableStream===!0,nt=s.disableAutoFetch===!0,J=s.pdfBug===!0,D=s.CanvasFactory||DefaultCanvasFactory,U=s.FilterFactory||DefaultFilterFactory,N=s.enableHWA===!0,I=f?f.length:s.length??NaN,B=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!isNodeJS&&!V,z=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:R===DOMCMapReaderFactory&&E===DOMStandardFontDataFactory&&A&&P&&isValidFetchUrl(A,document.baseURI)&&isValidFetchUrl(P,document.baseURI);s.canvasFactory&&deprecated("`canvasFactory`-instance option, please use `CanvasFactory` instead."),s.filterFactory&&deprecated("`filterFactory`-instance option, please use `FilterFactory` instead.");const K=null;setVerbosityLevel(b);const st={canvasFactory:new D({ownerDocument:Y,enableHWA:N}),filterFactory:new U({docId:e,ownerDocument:Y}),cMapReaderFactory:z?null:new R({baseUrl:A,isCompressed:_}),standardFontDataFactory:z?null:new E({baseUrl:P})};if(!g){const mt={verbosity:b,port:GlobalWorkerOptions.workerPort};g=mt.port?PDFWorker.fromPort(mt):new PDFWorker(mt),t._worker=g}const ht={docId:e,apiVersion:"4.8.69",data:i,password:d,disableAutoFetch:nt,rangeChunkSize:p,length:I,docBaseUrl:x,enableXfa:tt,evaluatorOptions:{maxImageSize:C,disableFontFace:V,ignoreErrors:T,isEvalSupported:M,isOffscreenCanvasSupported:j,isChrome:L,canvasMaxAreaInBytes:O,fontExtraProperties:X,useSystemFonts:B,cMapUrl:z?A:null,standardFontDataUrl:z?P:null}},xt={disableFontFace:V,fontExtraProperties:X,ownerDocument:Y,pdfBug:J,styleElement:K,loadingParams:{disableAutoFetch:nt,enableXfa:tt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const mt=g.messageHandler.sendWithPromise("GetDocRequest",ht,i?[i.buffer]:null);let Rt;if(f)Rt=new PDFDataTransportStream(f,{disableRange:Q,disableStream:ct});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let It;isNodeJS?It=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&isValidFetchUrl(n)?PDFFetchStream:PDFNodeStream:It=isValidFetchUrl(n)?PDFFetchStream:PDFNetworkStream,Rt=new It({url:n,length:I,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:Q,disableStream:ct})}return mt.then(It=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const le=new MessageHandler(e,It,g.port),Vt=new WorkerTransport(le,t,Rt,xt,st);t._transport=Vt,le.send("Ready",null)})}).catch(t._capability.reject),t}function getUrlProp(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(isNodeJS&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(s){if(isNodeJS&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return stringToBytes(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function isRefProxy(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var Mp;const jp=class jp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${gn(jp,Mp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Mp=new WeakMap,q(jp,Mp,0);let PDFDocumentLoadingTask=jp,PDFDataRangeTransport$1=class{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ya,Br,ui,yc,tp;class PDFPageProxy{constructor(t,e,n,i=!1){q(this,ui);q(this,Ya,null);q(this,Br,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=AnnotationMode.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:b=!1}){var M,j;(M=this._stats)==null||M.time("Overall");const x=this._transport.getRenderingIntent(n,i,g,b),{renderingIntent:A,cacheKey:_}=x;H(this,Br,!1),$(this,ui,tp).call(this),d||(d=this._transport.getOptionalContentConfig(A));let R=this._intentStates.get(_);R||(R=Object.create(null),this._intentStates.set(_,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const P=!!(A&RenderingIntentFlag.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(x));const E=L=>{var O;R.renderTasks.delete(T),(this._maybeCleanupAfterRender||P)&&H(this,Br,!0),$(this,ui,yc).call(this,!P),L?(T.capability.reject(L),this._abortOperatorList({intentState:R,reason:L instanceof Error?L:new Error(L)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(O=globalThis.Stats)!=null&&O.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new InternalRenderTask({callback:E,params:{canvasContext:t,viewport:e,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:p});(R.renderTasks||(R.renderTasks=new Set)).add(T);const C=T.task;return Promise.all([R.displayReadyCapability.promise,d]).then(([L,O])=>{var V;if(this.destroyed){E();return}if((V=this._stats)==null||V.time("Rendering"),!(O.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:L,optionalContentConfig:O}),T.operatorListChanged()}).catch(E),C}getOperatorList({intent:t="display",annotationMode:e=AnnotationMode.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var p;function o(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(f))}const c=this._transport.getRenderingIntent(t,e,n,i,!0);let d=this._intentStates.get(c.cacheKey);d||(d=Object.create(null),this._intentStates.set(c.cacheKey,d));let f;return d.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(f),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(c)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>XfaText.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function o(){c.read().then(function({value:f,done:p}){if(p){n(d);return}d.lang??(d.lang=f.lang),Object.assign(d.styles,f.styles),d.items.push(...f.items),o()},i)}const c=e.getReader(),d={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),H(this,Br,!1),$(this,ui,tp).call(this),Promise.all(t)}cleanup(t=!1){H(this,Br,!0);const e=$(this,ui,yc).call(this,!1);return t&&e&&this._stats&&(this._stats=new StatTimer),e}_startRenderPage(t,e){var i,o;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&$(this,ui,yc).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:o,transfer:c}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:i},c).getReader(),p=this._intentStates.get(e);p.streamReader=f;const g=()=>{f.read().then(({value:b,done:x})=>{if(x){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,p),g())},b=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const x of p.renderTasks)x.operatorListChanged();$(this,ui,yc).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(b);else if(p.opListReadCapability)p.opListReadCapability.reject(b);else throw b}})};g()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new AbortException(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Ya=new WeakMap,Br=new WeakMap,ui=new WeakSet,yc=function(t=!1){if($(this,ui,tp).call(this),!y(this,Br)||this.destroyed)return!1;if(t)return H(this,Ya,setTimeout(()=>{H(this,Ya,null),$(this,ui,yc).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),H(this,Br,!1),!0},tp=function(){y(this,Ya)&&(clearTimeout(y(this,Ya)),H(this,Ya,null))};var Hr,Np;class LoopbackPort{constructor(){q(this,Hr,new Map);q(this,Np,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};y(this,Np).then(()=>{for(const[i]of y(this,Hr))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);i=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}y(this,Hr).set(e,i)}removeEventListener(t,e){const n=y(this,Hr).get(e);n==null||n(),y(this,Hr).delete(e)}terminate(){for(const[,t]of y(this,Hr))t==null||t();y(this,Hr).clear()}}Hr=new WeakMap,Np=new WeakMap;var Lp,ll,cl,$c,ep,Gc,sp;const ns=class ns{constructor({name:t=null,port:e=null,verbosity:n=getVerbosityLevel()}={}){q(this,$c);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=y(ns,cl))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(y(ns,cl)||H(ns,cl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return isNodeJS?Promise.all([NodePackages.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),$(this,$c,ep).call(this)}_initialize(){if(y(ns,ll)||y(ns,Gc,sp)){this._setupFakeWorker();return}let{workerSrc:t}=ns;try{ns._isSameOrigin(window.location.href,t)||(t=ns._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new MessageHandler("main","worker",e),i=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:o.signal}),n.on("test",d=>{if(o.abort(),this.destroyed||!d){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,$(this,$c,ep).call(this)}),n.on("ready",d=>{if(o.abort(),this.destroyed){i();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};c();return}catch{info("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){y(ns,ll)||(warn("Setting up fake worker."),H(ns,ll,!0)),ns._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const n=`fake${gn(ns,Lp)._++}`,i=new MessageHandler(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new MessageHandler(n,n+"_worker",e),$(this,$c,ep).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=y(ns,cl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=y(this,cl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ns(t)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>y(this,Gc,sp)?y(this,Gc,sp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Lp=new WeakMap,ll=new WeakMap,cl=new WeakMap,$c=new WeakSet,ep=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Gc=new WeakSet,sp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},q(ns,Gc),q(ns,Lp,0),q(ns,ll,!1),q(ns,cl),isNodeJS&&(H(ns,ll,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),ns._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},ns._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let PDFWorker=ns;var zr,rr,qc,Xc,ar,ul,yh;class WorkerTransport{constructor(t,e,n,i,o){q(this,ul);q(this,zr,new Map);q(this,rr,new Map);q(this,qc,new Map);q(this,Xc,new Map);q(this,ar,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(t,e=AnnotationMode.ENABLE,n=null,i=!1,o=!1){let c=RenderingIntentFlag.DISPLAY,d=SerializableEmpty;switch(t){case"any":c=RenderingIntentFlag.ANY;break;case"display":break;case"print":c=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${t}`)}const f=c&RenderingIntentFlag.PRINT&&n instanceof PrintAnnotationStorage?n:this.annotationStorage;switch(e){case AnnotationMode.DISABLE:c+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:c+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:c+=RenderingIntentFlag.ANNOTATIONS_STORAGE,d=f.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(c+=RenderingIntentFlag.IS_EDITING),o&&(c+=RenderingIntentFlag.OPLIST);const{ids:p,hash:g}=f.modifiedIds,b=[c,d.hash,g];return{renderingIntent:c,cacheKey:b.join("_"),annotationStorageSerializable:d,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=y(this,ar))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of y(this,rr).values())t.push(i._destroy());y(this,rr).clear(),y(this,qc).clear(),y(this,Xc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i;this.commonObjs.clear(),this.fontLoader.clear(),y(this,zr).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){i.close();return}assert(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:c}=this._fullReader;return(!i||!o)&&(this._lastProgress&&((d=e.onProgress)==null||d.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(n,i)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:c,done:d}){if(d){i.close();return}assert(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{i.error(c)})},i.onCancel=c=>{o.cancel(c),i.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(n,this))}),t.on("DocException",function(n){let i;switch(n.name){case"PasswordException":i=new PasswordException(n.message,n.code);break;case"InvalidPDFException":i=new InvalidPDFException(n.message);break;case"MissingPDFException":i=new MissingPDFException(n.message);break;case"UnexpectedResponseException":i=new UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":i=new UnknownErrorException(n.message,n.details);break;default:unreachable("DocException - expected a valid Error.")}e._capability.reject(i)}),t.on("PasswordRequest",n=>{if(H(this,ar,Promise.withResolvers()),e.onPassword){const i=o=>{o instanceof Error?y(this,ar).reject(o):y(this,ar).resolve({password:o})};try{e.onPassword(i,n.code)}catch(o){y(this,ar).reject(o)}}else y(this,ar).reject(new PasswordException(n.message,n.code));return y(this,ar).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;y(this,rr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:d,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in o){const A=o.error;warn(`Error during font loading: ${A}`),this.commonObjs.resolve(n,A);break}const g=p&&((c=globalThis.FontInspector)!=null&&c.enabled)?(A,_)=>globalThis.FontInspector.fontAdded(A,_):null,b=new FontFaceObject(o,{disableFontFace:d,inspectFont:g});this.fontLoader.bind(b).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f&&b.data&&(b.data=null),this.commonObjs.resolve(n,b)});break;case"CopyLocalImage":const{imageRef:x}=o;assert(x,"The imageRef must be defined.");for(const A of y(this,rr).values())for(const[,_]of A.objs)if((_==null?void 0:_.ref)===x)return _.dataLen?(this.commonObjs.resolve(n,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,o,c])=>{var f;if(this.destroyed)return;const d=y(this,rr).get(i);if(!d.objs.has(n)){if(d._intentStates.size===0){(f=c==null?void 0:c.bitmap)==null||f.close();return}switch(o){case"Image":d.objs.resolve(n,c),(c==null?void 0:c.dataLen)>MAX_IMAGE_SIZE_TO_CACHE&&(d._maybeCleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=y(this,qc).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&y(this,Xc).set(o.refStr,t);const c=new PDFPageProxy(e,o,this,this._params.pdfBug);return y(this,rr).set(e,c),c});return y(this,qc).set(e,i),i}getPageIndex(t){return isRefProxy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return $(this,ul,yh).call(this,"GetFieldObjects")}hasJSActions(){return $(this,ul,yh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return $(this,ul,yh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return $(this,ul,yh).call(this,"GetOptionalContentConfig").then(e=>new OptionalContentConfig(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=y(this,zr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var o,c;return{info:i[0],metadata:i[1]?new Metadata(i[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return y(this,zr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of y(this,rr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),y(this,zr).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(t){if(!isRefProxy(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return y(this,Xc).get(e)??null}}zr=new WeakMap,rr=new WeakMap,qc=new WeakMap,Xc=new WeakMap,ar=new WeakMap,ul=new WeakSet,yh=function(t,e=null){const n=y(this,zr).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return y(this,zr).set(t,i),i};const INITIAL_DATA=Symbol("INITIAL_DATA");var wi,ld,iy;class PDFObjects{constructor(){q(this,ld);q(this,wi,Object.create(null))}get(t,e=null){if(e){const i=$(this,ld,iy).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=y(this,wi)[t];if(!n||n.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=y(this,wi)[t];return!!e&&e.data!==INITIAL_DATA}resolve(t,e=null){const n=$(this,ld,iy).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in y(this,wi)){const{data:n}=y(this,wi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}H(this,wi,Object.create(null))}*[Symbol.iterator](){for(const t in y(this,wi)){const{data:e}=y(this,wi)[t];e!==INITIAL_DATA&&(yield[t,e])}}}wi=new WeakMap,ld=new WeakSet,iy=function(t){var e;return(e=y(this,wi))[t]||(e[t]={...Promise.withResolvers(),data:INITIAL_DATA})};var Wa;class RenderTask{constructor(t){q(this,Wa,null);H(this,Wa,t),this.onContinue=null}get promise(){return y(this,Wa).capability.promise}cancel(t=0){y(this,Wa).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=y(this,Wa).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=y(this,Wa);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Wa=new WeakMap;var Ka,hl;const Fo=class Fo{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:c,pageIndex:d,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:b=!1,pageColors:x=null}){q(this,Ka,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=b,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(y(Fo,hl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");y(Fo,hl).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:o,background:c}=this.params;this.gfx=new CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:i,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),y(this,Ka)&&(window.cancelAnimationFrame(y(this,Ka)),H(this,Ka,null)),y(Fo,hl).delete(this._canvas),this.callback(t||new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?H(this,Ka,window.requestAnimationFrame(()=>{H(this,Ka,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),y(Fo,hl).delete(this._canvas),this.callback())))}};Ka=new WeakMap,hl=new WeakMap,q(Fo,hl,new WeakSet);let InternalRenderTask=Fo;const version="4.8.69",build="3634dab10";function makeColorComp(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function scaleAndClamp(s){return Math.max(0,Math.min(255,255*s))}class ColorConverters{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=scaleAndClamp(t),[t,t,t]}static G_HTML([t]){const e=makeColorComp(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(scaleAndClamp)}static RGB_HTML(t){return`#${t.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[scaleAndClamp(1-Math.min(1,t+i)),scaleAndClamp(1-Math.min(1,n+i)),scaleAndClamp(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,o=1-e,c=1-n,d=Math.min(i,o,c);return["CMYK",i,o,c,d]}}class BaseSVGFactory{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(t){return document.createElementNS(SVG_NS,t)}}class XfaLayer{static setupStorage(t,e,n,i,o){const c=i.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",d=>{i.setValue(e,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",d=>{i.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",d=>{i.setValue(e,{value:d.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const d of n.children)d.attributes.value===c.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const f=d.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;i.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:o}){const{attributes:c}=e,d=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${i}`);for(const[f,p]of Object.entries(c))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!d||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}d&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var b,x;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,o=t.intent||"display",c=document.createElement(i.name);i.attributes&&this.setAttributes({html:c,element:i,intent:o,linkService:n});const d=o!=="richText",f=t.div;if(f.append(c),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=A}d&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(i.children.length===0){if(i.value){const A=document.createTextNode(i.value);c.append(A),d&&XfaText.shouldBuildText(i.name)&&p.push(A)}return{textDivs:p}}const g=[[i,-1,c]];for(;g.length>0;){const[A,_,R]=g.at(-1);if(_+1===A.children.length){g.pop();continue}const P=A.children[++g.at(-1)[1]];if(P===null)continue;const{name:E}=P;if(E==="#text"){const C=document.createTextNode(P.value);p.push(C),R.append(C);continue}const T=(b=P==null?void 0:P.attributes)!=null&&b.xmlns?document.createElementNS(P.attributes.xmlns,E):document.createElement(E);if(R.append(T),P.attributes&&this.setAttributes({html:T,element:P,storage:e,intent:o,linkService:n}),((x=P.children)==null?void 0:x.length)>0)g.push([P,-1,T]);else if(P.value){const C=document.createTextNode(P.value);d&&XfaText.shouldBuildText(E)&&p.push(C),T.append(C)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(t);case AnnotationType.TEXT:return new TextAnnotationElement(t);case AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t);case"Sig":return new SignatureWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case AnnotationType.POPUP:return new PopupAnnotationElement(t);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case AnnotationType.LINE:return new LineAnnotationElement(t);case AnnotationType.SQUARE:return new SquareAnnotationElement(t);case AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case AnnotationType.CARET:return new CaretAnnotationElement(t);case AnnotationType.INK:return new InkAnnotationElement(t);case AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case AnnotationType.STAMP:return new StampAnnotationElement(t);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}var dl,Yc,Wc,cd,ry;const Ly=class Ly{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){q(this,cd);q(this,dl,null);q(this,Yc,!1);q(this,Wc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ly._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;y(this,dl)||H(this,dl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&$(this,cd,ry).call(this,e),(n=y(this,Wc))==null||n.popup.updateEdited(t)}resetEdited(){var t;y(this,dl)&&($(this,cd,ry).call(this,y(this,dl).rect),(t=y(this,Wc))==null||t.popup.resetEdited(),H(this,dl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof WidgetAnnotationElement||(o.tabIndex=DEFAULT_TAB_INDEX);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof PopupAnnotationElement){const{rotation:R}=e;return!e.hasOwnCanvas&&R!==0&&this.setRotation(R,o),o}const{width:d,height:f}=getRectDims(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const R=e.borderStyle.horizontalCornerRadius,P=e.borderStyle.verticalCornerRadius;if(R>0||P>0){const T=`calc(${R}px * var(--scale-factor)) / calc(${P}px * var(--scale-factor))`;c.borderRadius=T}else if(this instanceof RadioButtonWidgetAnnotationElement){const T=`calc(${d}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;c.borderRadius=T}switch(e.borderStyle.style){case AnnotationBorderStyleType.SOLID:c.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:c.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:c.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(H(this,Yc,!0),c.borderColor=Util.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const p=Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:b,pageX:x,pageY:A}=i.rawDims;c.left=`${100*(p[0]-x)/g}%`,c.top=`${100*(p[1]-A)/b}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(c.width=`${100*d/g}%`,c.height=`${100*f/b}%`):this.setRotation(_,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:c}=getRectDims(this.data.rect);let d,f;t%180===0?(d=100*o/n,f=100*c/i):(d=100*c/n,f=100*o/i),e.style.width=`${d}%`,e.style.height=`${f}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const o=i.detail[e],c=o[0],d=o.slice(1);i.target.style[n]=ColorConverters[`${c}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:ColorConverters[`${c}_rgb`](d)})};return shadow(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const o=t[i]||n[i];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,o]of Object.entries(e)){const c=n[i];if(c){const d={detail:{[i]:o},target:t};c(d),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,o]=this.data.rect.map(R=>Math.fround(R));if(t.length===8){const[R,P,E,T]=t.subarray(2,6);if(i===R&&o===P&&e===E&&n===T)return}const{style:c}=this.container;let d;if(y(this,Yc)){const{borderColor:R,borderWidth:P}=c;c.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${R}" stroke-width="${P}">`],this.container.classList.add("hasBorder")}const f=i-e,p=o-n,{svgFactory:g}=this,b=g.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0);const x=g.createElement("defs");b.append(x);const A=g.createElement("clipPath"),_=`clippath_${this.data.id}`;A.setAttribute("id",_),A.setAttribute("clipPathUnits","objectBoundingBox"),x.append(A);for(let R=2,P=t.length;R<P;R+=8){const E=t[R],T=t[R+1],C=t[R+2],M=t[R+3],j=g.createElement("rect"),L=(C-e)/f,O=(o-T)/p,V=(E-C)/f,X=(T-M)/p;j.setAttribute("x",L),j.setAttribute("y",O),j.setAttribute("width",V),j.setAttribute("height",X),A.append(j),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${O}" width="${V}" height="${X}"/>`)}y(this,Yc)&&(d.push("</g></svg>')"),c.backgroundImage=d.join("")),this.container.append(b),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,e=H(this,Wc,new PopupAnnotationElement({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:o,id:c,exportValues:d}of i){if(o===-1||c===e)continue;const f=typeof d=="string"?d:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!GetElementsByNameSet.has(p)){warn(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:f,domElement:p})}return n}for(const i of document.getElementsByName(t)){const{exportValue:o}=i,c=i.getAttribute("data-element-id");c!==e&&GetElementsByNameSet.has(i)&&n.push({id:c,exportValue:o,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};dl=new WeakMap,Yc=new WeakMap,Wc=new WeakMap,cd=new WeakSet,ry=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:d,pageY:f}}}}=this;n==null||n.splice(0,4,...t);const{width:p,height:g}=getRectDims(t);e.left=`${100*(t[0]-d)/o}%`,e.top=`${100*(c-t[3]+f)/c}%`,i===0?(e.width=`${100*p/o}%`,e.height=`${100*g/c}%`):this.setRotation(i)};let AnnotationElement=Ly;var qn,Mo,Bb,Hb;class LinkAnnotationElement extends AnnotationElement{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});q(this,qn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(i,e.action),o=!0):e.attachment?($(this,qn,Bb).call(this,i,e.attachment,e.attachmentDest),o=!0):e.setOCGState?($(this,qn,Hb).call(this,i,e.setOCGState),o=!0):e.dest?(this._bindLink(i,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),o=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&$(this,qn,Mo).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),$(this,qn,Mo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=i.get(o);c&&(e[c]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),$(this,qn,Mo).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),$(this,qn,Mo).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var b;i==null||i();const{fields:o,refs:c,include:d}=n,f=[];if(o.length!==0||c.length!==0){const x=new Set(c);for(const A of o){const _=this._fieldObjects[A]||[];for(const{id:R}of _)x.add(R)}for(const A of Object.values(this._fieldObjects))for(const _ of A)x.has(_.id)===d&&f.push(_)}else for(const x of Object.values(this._fieldObjects))f.push(...x);const p=this.annotationStorage,g=[];for(const x of f){const{id:A}=x;switch(g.push(A),x.type){case"text":{const R=x.defaultValue||"";p.setValue(A,{value:R});break}case"checkbox":case"radiobutton":{const R=x.defaultValue===x.exportValues;p.setValue(A,{value:R});break}case"combobox":case"listbox":{const R=x.defaultValue||"";p.setValue(A,{value:R});break}default:continue}const _=document.querySelector(`[data-element-id="${A}"]`);if(_){if(!GetElementsByNameSet.has(_)){warn(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}qn=new WeakSet,Mo=function(){this.container.setAttribute("data-internal-link","")},Bb=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},$(this,qn,Mo).call(this)},Hb=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),$(this,qn,Mo).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return util_FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,o){n.includes("mouse")?t.addEventListener(n,c=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var d;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(c)}}))})}_setEventListeners(t,e,n,i){var o,c,d;for(const[f,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,i),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,o=t.style;let c;const d=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d),g=Math.round(p/(LINE_FACTOR*i))||1,b=p/g;c=Math.min(i,f(b/LINE_FACTOR))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d);c=Math.min(i,f(p/LINE_FACTOR))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=Util.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[i]:n})}render(){var i,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let d=c.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&d.length>f&&(d=d.slice(0,f));let p=c.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:d,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",p??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),GetElementsByNameSet.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",x=>{t.setValue(e,{value:x.target.value}),this.setPropertyOnSiblings(n,"value",x.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",x=>{const A=this.data.defaultFieldValue??"";n.value=g.userValue=A,g.formattedValue=null});let b=x=>{const{formattedValue:A}=g;A!=null&&(x.target.value=A),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{var R;if(g.focused)return;const{target:_}=A;g.userValue&&(_.value=g.userValue),g.lastCommittedValue=_.value,g.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const _={value(R){g.userValue=R.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),R.target.value=g.userValue},formattedValue(R){const{formattedValue:P}=R.detail;g.formattedValue=P,P!=null&&R.target!==document.activeElement&&(R.target.value=P),t.setValue(e,{formattedValue:P})},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var C;const{charLimit:P}=R.detail,{target:E}=R;if(P===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",P);let T=g.userValue;!T||T.length<=P||(T=T.slice(0,P),E.value=g.userValue=T,t.setValue(e,{value:T}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(_,A)}),n.addEventListener("keydown",A=>{var P;g.commitKey=1;let _=-1;if(A.key==="Escape"?_=0:A.key==="Enter"&&!this.data.multiLine?_=2:A.key==="Tab"&&(g.commitKey=3),_===-1)return;const{value:R}=A.target;g.lastCommittedValue!==R&&(g.lastCommittedValue=R,g.userValue=R,(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:_,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const x=b;b=null,n.addEventListener("blur",A=>{var R,P;if(!g.focused||!A.relatedTarget)return;(R=this.data.actions)!=null&&R.Blur||(g.focused=!1);const{value:_}=A.target;g.userValue=_,g.lastCommittedValue!==_&&((P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:g.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),x(A)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",A=>{var j;g.lastCommittedValue=null;const{data:_,target:R}=A,{value:P,selectionStart:E,selectionEnd:T}=R;let C=E,M=T;switch(A.inputType){case"deleteWordBackward":{const L=P.substring(0,E).match(/\w*[^\w]*$/);L&&(C-=L[0].length);break}case"deleteWordForward":{const L=P.substring(E).match(/^[^\w]*\w*/);L&&(M+=L[0].length);break}case"deleteContentBackward":E===T&&(C-=1);break;case"deleteContentForward":E===T&&(M+=1);break}A.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,change:_||"",willCommit:!1,selStart:C,selEnd:M}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return GetElementsByNameSet.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=DEFAULT_TAB_INDEX,o.addEventListener("change",c=>{const{name:d,checked:f}=c.target;for(const p of this._getElementsByName(d,n)){const g=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(n,{value:f})}),o.addEventListener("resetform",c=>{const d=e.defaultFieldValue||"Off";c.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const d={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(GetElementsByNameSet.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=DEFAULT_TAB_INDEX,o.addEventListener("change",c=>{const{name:d,checked:f}=c.target;for(const p of this._getElementsByName(d,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),o.addEventListener("resetform",c=>{const d=e.defaultFieldValue;c.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",d=>{const f={value:p=>{const g=c===p.detail.value;for(const b of this._getElementsByName(p.target.name)){const x=g&&b.id===n;b.domElement&&(b.domElement.checked=x),t.setValue(b.id,{value:x})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");GetElementsByNameSet.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=DEFAULT_TAB_INDEX;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",g=>{const b=this.data.defaultFieldValue;for(const x of i.options)x.selected=x.value===b});for(const g of this.data.options){const b=document.createElement("option");b.textContent=g.displayValue,b.value=g.exportValue,n.value.includes(g.exportValue)&&(b.setAttribute("selected",!0),o=!1),i.append(b)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),i.prepend(g),c=()=>{g.remove(),i.removeEventListener("input",c),c=null},i.addEventListener("input",c)}const d=g=>{const b=g?"value":"textContent",{options:x,multiple:A}=i;return A?Array.prototype.filter.call(x,_=>_.selected).map(_=>_[b]):x.selectedIndex===-1?null:x[x.selectedIndex][b]};let f=d(!1);const p=g=>{const b=g.target.options;return Array.prototype.map.call(b,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",g=>{const b={value(x){c==null||c();const A=x.detail.value,_=new Set(Array.isArray(A)?A:[A]);for(const R of i.options)R.selected=_.has(R.value);t.setValue(e,{value:d(!0)}),f=d(!1)},multipleSelection(x){i.multiple=!0},remove(x){const A=i.options,_=x.detail.remove;A[_].selected=!1,i.remove(_),A.length>0&&Array.prototype.findIndex.call(A,P=>P.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:d(!0),items:p(x)}),f=d(!1)},clear(x){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),f=d(!1)},insert(x){const{index:A,displayValue:_,exportValue:R}=x.detail.insert,P=i.children[A],E=document.createElement("option");E.textContent=_,E.value=R,P?P.before(E):i.append(E),t.setValue(e,{value:d(!0),items:p(x)}),f=d(!1)},items(x){const{items:A}=x.detail;for(;i.length!==0;)i.remove(0);for(const _ of A){const{displayValue:R,exportValue:P}=_,E=document.createElement("option");E.textContent=R,E.value=P,i.append(E)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:d(!0),items:p(x)}),f=d(!1)},indices(x){const A=new Set(x.detail.indices);for(const _ of x.target.options)_.selected=A.has(_.index);t.setValue(e,{value:d(!0)}),f=d(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(b,g)}),i.addEventListener("input",g=>{var A;const b=d(!0),x=d(!1);t.setValue(e,{value:b}),g.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:x,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):i.addEventListener("input",function(g){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:AnnotationElement._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${AnnotationPrefix}${n}`).join(",")),this.container}}var Kc,Dp,Fp,Zc,fl,ps,Ur,Qc,ud,hd,Jc,Vr,Ti,$r,dd,Gr,fd,pl,ml,$e,np,ay,zb,Ub,Vb,$b,rp,ap,oy;class PopupElement{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:o,contentsObj:c,richText:d,parent:f,rect:p,parentRect:g,open:b}){q(this,$e);q(this,Kc,$(this,$e,Vb).bind(this));q(this,Dp,$(this,$e,oy).bind(this));q(this,Fp,$(this,$e,ap).bind(this));q(this,Zc,$(this,$e,rp).bind(this));q(this,fl,null);q(this,ps,null);q(this,Ur,null);q(this,Qc,null);q(this,ud,null);q(this,hd,null);q(this,Jc,null);q(this,Vr,!1);q(this,Ti,null);q(this,$r,null);q(this,dd,null);q(this,Gr,null);q(this,fd,null);q(this,pl,null);q(this,ml,!1);var x;H(this,ps,t),H(this,fd,i),H(this,Ur,c),H(this,Gr,d),H(this,hd,f),H(this,fl,e),H(this,dd,p),H(this,Jc,g),H(this,ud,n),H(this,Qc,PDFDateString.toDateObject(o)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",y(this,Zc)),A.addEventListener("mouseenter",y(this,Fp)),A.addEventListener("mouseleave",y(this,Dp)),A.classList.add("popupTriggerArea");for(const A of n)(x=A.container)==null||x.addEventListener("keydown",y(this,Kc));y(this,ps).hidden=!0,b&&$(this,$e,rp).call(this)}render(){if(y(this,Ti))return;const t=H(this,Ti,document.createElement("div"));if(t.className="popup",y(this,fl)){const o=t.style.outlineColor=Util.makeHexColor(...y(this,fl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=Util.makeHexColor(...y(this,fl).map(d=>Math.floor(.7*(255-d)+d)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=y(this,fd),t.append(e),y(this,Qc)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:y(this,Qc).valueOf()})),e.append(o)}const i=y(this,$e,np);if(i)XfaLayer.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(y(this,Ur));t.append(o)}y(this,ps).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let o=0,c=i.length;o<c;++o){const d=i[o];n.append(document.createTextNode(d)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;y(this,pl)||H(this,pl,{contentsObj:y(this,Ur),richText:y(this,Gr)}),t&&H(this,$r,null),e&&(H(this,Gr,$(this,$e,Ub).call(this,e)),H(this,Ur,null)),(n=y(this,Ti))==null||n.remove(),H(this,Ti,null)}resetEdited(){var t;y(this,pl)&&({contentsObj:gn(this,Ur)._,richText:gn(this,Gr)._}=y(this,pl),H(this,pl,null),(t=y(this,Ti))==null||t.remove(),H(this,Ti,null),H(this,$r,null))}forceHide(){H(this,ml,this.isVisible),y(this,ml)&&(y(this,ps).hidden=!0)}maybeShow(){y(this,ml)&&(y(this,Ti)||$(this,$e,ap).call(this),H(this,ml,!1),y(this,ps).hidden=!1)}get isVisible(){return y(this,ps).hidden===!1}}Kc=new WeakMap,Dp=new WeakMap,Fp=new WeakMap,Zc=new WeakMap,fl=new WeakMap,ps=new WeakMap,Ur=new WeakMap,Qc=new WeakMap,ud=new WeakMap,hd=new WeakMap,Jc=new WeakMap,Vr=new WeakMap,Ti=new WeakMap,$r=new WeakMap,dd=new WeakMap,Gr=new WeakMap,fd=new WeakMap,pl=new WeakMap,ml=new WeakMap,$e=new WeakSet,np=function(){const t=y(this,Gr),e=y(this,Ur);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&y(this,Gr).html||null},ay=function(){var t,e,n;return((n=(e=(t=y(this,$e,np))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},zb=function(){var t,e,n;return((n=(e=(t=y(this,$e,np))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},Ub=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:y(this,$e,zb),fontSize:y(this,$e,ay)?`calc(${y(this,$e,ay)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:i});return n},Vb=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&y(this,Vr))&&$(this,$e,rp).call(this)},$b=function(){if(y(this,$r)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:o}}}=y(this,hd);let c=!!y(this,Jc),d=c?y(this,Jc):y(this,dd);for(const _ of y(this,ud))if(!d||Util.intersect(_.data.rect,d)!==null){d=_.data.rect,c=!0;break}const f=Util.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),g=c?d[2]-d[0]+5:0,b=f[0]+g,x=f[1];H(this,$r,[100*(b-i)/e,100*(x-o)/n]);const{style:A}=y(this,ps);A.left=`${y(this,$r)[0]}%`,A.top=`${y(this,$r)[1]}%`},rp=function(){H(this,Vr,!y(this,Vr)),y(this,Vr)?($(this,$e,ap).call(this),y(this,ps).addEventListener("click",y(this,Zc)),y(this,ps).addEventListener("keydown",y(this,Kc))):($(this,$e,oy).call(this),y(this,ps).removeEventListener("click",y(this,Zc)),y(this,ps).removeEventListener("keydown",y(this,Kc)))},ap=function(){y(this,Ti)||this.render(),this.isVisible?y(this,Vr)&&y(this,ps).classList.add("focused"):($(this,$e,$b).call(this),y(this,ps).hidden=!1,y(this,ps).style.zIndex=parseInt(y(this,ps).style.zIndex)+1e3)},oy=function(){y(this,ps).classList.remove("focused"),!(y(this,Vr)||!this.isVisible)&&(y(this,ps).hidden=!0,y(this,ps).style.zIndex=parseInt(y(this,ps).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pd;class LineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});q(this,pd,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:i}=getRectDims(e.rect),o=this.svgFactory.create(n,i,!0),c=H(this,pd,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,pd)}addHighlightArea(){this.container.classList.add("highlightArea")}}pd=new WeakMap;var md;class SquareAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});q(this,md,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:i}=getRectDims(e.rect),o=this.svgFactory.create(n,i,!0),c=e.borderStyle.width,d=H(this,md,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",c/2),d.setAttribute("y",c/2),d.setAttribute("width",n-c),d.setAttribute("height",i-c),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,md)}addHighlightArea(){this.container.classList.add("highlightArea")}}md=new WeakMap;var gd;class CircleAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});q(this,gd,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:i}=getRectDims(e.rect),o=this.svgFactory.create(n,i,!0),c=e.borderStyle.width,d=H(this,gd,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",i/2),d.setAttribute("rx",n/2-c/2),d.setAttribute("ry",i/2-c/2),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,gd)}addHighlightArea(){this.container.classList.add("highlightArea")}}gd=new WeakMap;var yd;class PolylineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});q(this,yd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:o}}=this;if(!n)return this.container;const{width:c,height:d}=getRectDims(e),f=this.svgFactory.create(c,d,!0);let p=[];for(let b=0,x=n.length;b<x;b+=2){const A=n[b]-e[0],_=e[3]-n[b+1];p.push(`${A},${_}`)}p=p.join(" ");const g=H(this,yd,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),f.append(g),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return y(this,yd)}addHighlightArea(){this.container.classList.add("highlightArea")}}yd=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var vd;class InkAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});q(this,vd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:i,popupRef:o}}=this,{width:c,height:d}=getRectDims(e),f=this.svgFactory.create(c,d,!0);for(const p of n){let g=[];for(let x=0,A=p.length;x<A;x+=2){const _=p[x]-e[0],R=e[3]-p[x+1];g.push(`${_},${R}`)}g=g.join(" ");const b=this.svgFactory.createElement(this.svgElementName);y(this,vd).push(b),b.setAttribute("points",g),b.setAttribute("stroke-width",i.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),f.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return y(this,vd)}addHighlightArea(){this.container.classList.add("highlightArea")}}vd=new WeakMap;class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xd,bd,ly;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(e){var i;super(e,{isRenderable:!0});q(this,bd);q(this,xd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",$(this,bd,ly).bind(this)),H(this,xd,i);const{isMac:o}=util_FeatureTest.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&$(this,bd,ly).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return y(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap,bd=new WeakSet,ly=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Ed,gl,yl,Sd,Nl,Gb,cy,nb;let AnnotationLayer$1=(nb=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:c,structTreeLayer:d}){q(this,Nl);q(this,Ed,null);q(this,gl,null);q(this,yl,new Map);q(this,Sd,null);this.div=t,H(this,Ed,e),H(this,gl,n),H(this,Sd,d||null),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return y(this,yl).size>0}async render(t){var c;const{annotations:e}=t,n=this.div;setLayerDimensions(n,this.viewport);const i=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:t.annotationStorage||new AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===AnnotationType.POPUP;if(f){const b=i.get(d.id);if(!b)continue;o.elements=b}else{const{width:b,height:x}=getRectDims(d.rect);if(b<=0||x<=0)continue}o.data=d;const p=AnnotationElementFactory.create(o);if(!p.isRenderable)continue;if(!f&&d.popupRef){const b=i.get(d.popupRef);b?b.push(p):i.set(d.popupRef,[p])}const g=p.render();d.hidden&&(g.style.visibility="hidden"),await $(this,Nl,Gb).call(this,g,d.id),p._isEditable&&(y(this,yl).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}$(this,Nl,cy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,setLayerDimensions(e,{rotation:t.rotation}),$(this,Nl,cy).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(y(this,yl).values())}getEditableAnnotation(t){return y(this,yl).get(t)}},Ed=new WeakMap,gl=new WeakMap,yl=new WeakMap,Sd=new WeakMap,Nl=new WeakSet,Gb=async function(t,e){var c,d;const n=t.firstChild||t,i=n.id=`${AnnotationPrefix}${e}`,o=await((c=y(this,Sd))==null?void 0:c.getAriaAttributes(i));if(o)for(const[f,p]of o)n.setAttribute(f,p);this.div.append(t),(d=y(this,Ed))==null||d.moveElementInDOM(this.div,t,n,!1)},cy=function(){if(!y(this,gl))return;const t=this.div;for(const[e,n]of y(this,gl)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n)}y(this,gl).clear()},nb);const EOL_PATTERN=/\r\n?|\n/g;var Ci,Hn,_d,vl,zn,Rs,qb,Xb,Yb,lp,na,cp,up,Wb,uy,Kb;const We=class We extends AnnotationEditor{constructor(e){super({...e,name:"freeTextEditor"});q(this,Rs);q(this,Ci);q(this,Hn,"");q(this,_d,`${this.id}-editor`);q(this,vl,null);q(this,zn);H(this,Ci,e.color||We._defaultColor||AnnotationEditor._defaultLineColor),H(this,zn,e.fontSize||We._defaultFontSize)}static get _keyboardManager(){const e=We.prototype,n=c=>c.isEmpty(),i=AnnotationEditorUIManager.TRANSLATE_SMALL,o=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){AnnotationEditor.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:We._defaultFontSize=n;break;case AnnotationEditorParamsType.FREETEXT_COLOR:We._defaultColor=n;break}}updateParams(e,n){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:$(this,Rs,qb).call(this,n);break;case AnnotationEditorParamsType.FREETEXT_COLOR:$(this,Rs,Xb).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,We._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,We._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,y(this,zn)],[AnnotationEditorParamsType.FREETEXT_COLOR,y(this,Ci)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-We._internalPadding*e,-(We._internalPadding+y(this,zn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),H(this,vl,new AbortController);const e=this._uiManager.combinedSignal(y(this,vl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",y(this,_d)),this._isDraggable=!0,(e=y(this,vl))==null||e.abort(),H(this,vl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=y(this,Hn),n=H(this,Hn,$(this,Rs,Yb).call(this).trimEnd());if(e===n)return;const i=o=>{if(H(this,Hn,o),!o){this.remove();return}$(this,Rs,up).call(this),this._uiManager.rebuild(this),$(this,Rs,lp).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),$(this,Rs,lp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){We._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",y(this,_d)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${y(this,zn)}px * var(--scale-factor))`,i.color=y(this,Ci),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[g,b]=this.pageDimensions,[x,A]=this.pageTranslation;let _,R;switch(this.rotation){case 0:_=e+(d[0]-x)/g,R=n+this.height-(d[1]-A)/b;break;case 90:_=e+(d[0]-x)/g,R=n-(d[1]-A)/b,[f,p]=[p,-f];break;case 180:_=e-this.width+(d[0]-x)/g,R=n-(d[1]-A)/b,[f,p]=[-f,-p];break;case 270:_=e+(d[0]-x-this.height*b)/g,R=n+(d[1]-A-this.width*g)/b,[f,p]=[-p,f];break}this.setAt(_*o,R*c,f,p)}else this.setAt(e*o,n*c,this.width*o,this.height*c);$(this,Rs,up).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,R,P;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const o=$(_=We,na,uy).call(_,n.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const d=c.getRangeAt(0);if(!o.includes(`
`)){d.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:f,startOffset:p}=d,g=[],b=[];if(f.nodeType===Node.TEXT_NODE){const E=f.parentElement;if(b.push(f.nodeValue.slice(p).replaceAll(EOL_PATTERN,"")),E!==this.editorDiv){let T=g;for(const C of this.editorDiv.childNodes){if(C===E){T=b;continue}T.push($(R=We,na,cp).call(R,C))}}g.push(f.nodeValue.slice(0,p).replaceAll(EOL_PATTERN,""))}else if(f===this.editorDiv){let E=g,T=0;for(const C of this.editorDiv.childNodes)T++===p&&(E=b),E.push($(P=We,na,cp).call(P,C))}H(this,Hn,`${g.join(`
`)}${o}${b.join(`
`)}`),$(this,Rs,up).call(this);const x=new Range;let A=g.reduce((E,T)=>E+T.length,0);for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const T=E.nodeValue.length;if(A<=T){x.setStart(E,A),x.setEnd(E,A);break}A-=T}c.removeAllRanges(),c.addRange(x)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var d;let o=null;if(e instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:g,rotation:b,id:x,popupRef:A},textContent:_,textPosition:R,parent:{page:{pageNumber:P}}}=e;if(!_||_.length===0)return null;o=e={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(p),fontSize:f,value:_.join(`
`),position:R,pageIndex:P-1,rect:g.slice(0),rotation:b,id:x,deleted:!1,popupRef:A}}const c=await super.deserialize(e,n,i);return H(c,zn,e.fontSize),H(c,Ci,Util.makeHexColor(...e.color)),H(c,Hn,$(d=We,na,uy).call(d,e.value)),c.annotationElementId=e.id||null,c._initialData=o,c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=We._internalPadding*this.parentScale,i=this.getRect(n,n),o=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:y(this,Ci)),c={annotationType:AnnotationEditorType.FREETEXT,color:o,fontSize:y(this,zn),value:$(this,Rs,Wb).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!$(this,Rs,Kb).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${y(this,zn)}px * var(--scale-factor))`,i.color=y(this,Ci),n.replaceChildren();for(const c of y(this,Hn).split(`
`)){const d=document.createElement("div");d.append(c?document.createTextNode(c):document.createElement("br")),n.append(d)}const o=We._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:y(this,Hn)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ci=new WeakMap,Hn=new WeakMap,_d=new WeakMap,vl=new WeakMap,zn=new WeakMap,Rs=new WeakSet,qb=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-y(this,zn))*this.parentScale),H(this,zn,o),$(this,Rs,lp).call(this)},i=y(this,zn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Xb=function(e){const n=o=>{H(this,Ci,this.editorDiv.style.color=o)},i=y(this,Ci);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Yb=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push($(i=We,na,cp).call(i,o)),n=o);return e.join(`
`)},lp=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,d=c.style.display,f=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),i=c.getBoundingClientRect(),c.remove(),c.style.display=d,c.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},na=new WeakSet,cp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(EOL_PATTERN,"")},up=function(){if(this.editorDiv.replaceChildren(),!!y(this,Hn))for(const e of y(this,Hn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},Wb=function(){return y(this,Hn).replaceAll(" "," ")},uy=function(e){return e.replaceAll(" "," ")},Kb=function(e){const{value:n,fontSize:i,color:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((d,f)=>d!==o[f])||e.pageIndex!==c},q(We,na),Jt(We,"_freeTextDefaultContent",""),Jt(We,"_internalPadding",0),Jt(We,"_defaultColor",null),Jt(We,"_defaultFontSize",10),Jt(We,"_type","freetext"),Jt(We,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=We;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(t,e){unreachable("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){unreachable("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){unreachable("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Un,ki,tu,eu,or,de,xl,bl,Ad,Rd,su,nu,Za,wd,Op,Ip,Ns,vh,Zb,Qb,Jb,tE,eE,sE;const Mr=class Mr{constructor({x:t,y:e},n,i,o,c,d=0){q(this,Ns);q(this,Un);q(this,ki,[]);q(this,tu);q(this,eu);q(this,or,[]);q(this,de,new Float64Array(18));q(this,xl);q(this,bl);q(this,Ad);q(this,Rd);q(this,su);q(this,nu);q(this,Za,[]);H(this,Un,n),H(this,nu,o*i),H(this,eu,c),y(this,de).set([NaN,NaN,NaN,NaN,t,e],6),H(this,tu,d),H(this,Rd,y(Mr,wd)*i),H(this,Ad,y(Mr,Ip)*i),H(this,su,i),y(this,Za).push(t,e)}isEmpty(){return isNaN(y(this,de)[8])}add({x:t,y:e}){var X;H(this,xl,t),H(this,bl,e);const[n,i,o,c]=y(this,Un);let[d,f,p,g]=y(this,de).subarray(8,12);const b=t-p,x=e-g,A=Math.hypot(b,x);if(A<y(this,Ad))return!1;const _=A-y(this,Rd),R=_/A,P=R*b,E=R*x;let T=d,C=f;d=p,f=g,p+=P,g+=E,(X=y(this,Za))==null||X.push(t,e);const M=-E/_,j=P/_,L=M*y(this,nu),O=j*y(this,nu);return y(this,de).set(y(this,de).subarray(2,8),0),y(this,de).set([p+L,g+O],4),y(this,de).set(y(this,de).subarray(14,18),12),y(this,de).set([p-L,g-O],16),isNaN(y(this,de)[6])?(y(this,or).length===0&&(y(this,de).set([d+L,f+O],2),y(this,or).push(NaN,NaN,NaN,NaN,(d+L-n)/o,(f+O-i)/c),y(this,de).set([d-L,f-O],14),y(this,ki).push(NaN,NaN,NaN,NaN,(d-L-n)/o,(f-O-i)/c)),y(this,de).set([T,C,d,f,p,g],6),!this.isEmpty()):(y(this,de).set([T,C,d,f,p,g],6),Math.abs(Math.atan2(C-f,T-d)-Math.atan2(E,P))<Math.PI/2?([d,f,p,g]=y(this,de).subarray(2,6),y(this,or).push(NaN,NaN,NaN,NaN,((d+p)/2-n)/o,((f+g)/2-i)/c),[d,f,T,C]=y(this,de).subarray(14,18),y(this,ki).push(NaN,NaN,NaN,NaN,((T+d)/2-n)/o,((C+f)/2-i)/c),!0):([T,C,d,f,p,g]=y(this,de).subarray(0,6),y(this,or).push(((T+5*d)/6-n)/o,((C+5*f)/6-i)/c,((5*d+p)/6-n)/o,((5*f+g)/6-i)/c,((d+p)/2-n)/o,((f+g)/2-i)/c),[p,g,d,f,T,C]=y(this,de).subarray(12,18),y(this,ki).push(((T+5*d)/6-n)/o,((C+5*f)/6-i)/c,((5*d+p)/6-n)/o,((5*f+g)/6-i)/c,((d+p)/2-n)/o,((f+g)/2-i)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=y(this,or),e=y(this,ki);if(isNaN(y(this,de)[6])&&!this.isEmpty())return $(this,Ns,Zb).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);$(this,Ns,Jb).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return $(this,Ns,Qb).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,o,c){return new FreeDrawOutline(t,e,n,i,o,c)}getOutlines(){var b;const t=y(this,or),e=y(this,ki),n=y(this,de),[i,o,c,d]=y(this,Un),f=new Float64Array((((b=y(this,Za))==null?void 0:b.length)??0)+2);for(let x=0,A=f.length-2;x<A;x+=2)f[x]=(y(this,Za)[x]-i)/c,f[x+1]=(y(this,Za)[x+1]-o)/d;if(f[f.length-2]=(y(this,xl)-i)/c,f[f.length-1]=(y(this,bl)-o)/d,isNaN(n[6])&&!this.isEmpty())return $(this,Ns,tE).call(this,f);const p=new Float64Array(y(this,or).length+24+y(this,ki).length);let g=t.length;for(let x=0;x<g;x+=2){if(isNaN(t[x])){p[x]=p[x+1]=NaN;continue}p[x]=t[x],p[x+1]=t[x+1]}g=$(this,Ns,sE).call(this,p,g);for(let x=e.length-6;x>=6;x-=6)for(let A=0;A<6;A+=2){if(isNaN(e[x+A])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=e[x+A],p[g+1]=e[x+A+1],g+=2}return $(this,Ns,eE).call(this,p,g),this.newFreeDrawOutline(p,f,y(this,Un),y(this,su),y(this,tu),y(this,eu))}};Un=new WeakMap,ki=new WeakMap,tu=new WeakMap,eu=new WeakMap,or=new WeakMap,de=new WeakMap,xl=new WeakMap,bl=new WeakMap,Ad=new WeakMap,Rd=new WeakMap,su=new WeakMap,nu=new WeakMap,Za=new WeakMap,wd=new WeakMap,Op=new WeakMap,Ip=new WeakMap,Ns=new WeakSet,vh=function(){const t=y(this,de).subarray(4,6),e=y(this,de).subarray(16,18),[n,i,o,c]=y(this,Un);return[(y(this,xl)+(t[0]-e[0])/2-n)/o,(y(this,bl)+(t[1]-e[1])/2-i)/c,(y(this,xl)+(e[0]-t[0])/2-n)/o,(y(this,bl)+(e[1]-t[1])/2-i)/c]},Zb=function(){const[t,e,n,i]=y(this,Un),[o,c,d,f]=$(this,Ns,vh).call(this);return`M${(y(this,de)[2]-t)/n} ${(y(this,de)[3]-e)/i} L${(y(this,de)[4]-t)/n} ${(y(this,de)[5]-e)/i} L${o} ${c} L${d} ${f} L${(y(this,de)[16]-t)/n} ${(y(this,de)[17]-e)/i} L${(y(this,de)[14]-t)/n} ${(y(this,de)[15]-e)/i} Z`},Qb=function(t){const e=y(this,ki);t.push(`L${e[4]} ${e[5]} Z`)},Jb=function(t){const[e,n,i,o]=y(this,Un),c=y(this,de).subarray(4,6),d=y(this,de).subarray(16,18),[f,p,g,b]=$(this,Ns,vh).call(this);t.push(`L${(c[0]-e)/i} ${(c[1]-n)/o} L${f} ${p} L${g} ${b} L${(d[0]-e)/i} ${(d[1]-n)/o}`)},tE=function(t){const e=y(this,de),[n,i,o,c]=y(this,Un),[d,f,p,g]=$(this,Ns,vh).call(this),b=new Float64Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-i)/c,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-i)/c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-i)/c,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-i)/c],0),this.newFreeDrawOutline(b,t,y(this,Un),y(this,su),y(this,tu),y(this,eu))},eE=function(t,e){const n=y(this,ki);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},sE=function(t,e){const n=y(this,de).subarray(4,6),i=y(this,de).subarray(16,18),[o,c,d,f]=y(this,Un),[p,g,b,x]=$(this,Ns,vh).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/d,(n[1]-c)/f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,b,x,NaN,NaN,NaN,NaN,(i[0]-o)/d,(i[1]-c)/f],e),e+=24},q(Mr,wd,8),q(Mr,Op,2),q(Mr,Ip,y(Mr,wd)+y(Mr,Op));let FreeDrawOutliner=Mr;var iu,El,qr,Td,Vn,Cd,Es,kn,xh,bh,nE;class FreeDrawOutline extends Outline{constructor(e,n,i,o,c,d){super();q(this,kn);q(this,iu);q(this,El,null);q(this,qr);q(this,Td);q(this,Vn);q(this,Cd);q(this,Es);H(this,Es,e),H(this,Vn,n),H(this,iu,i),H(this,Cd,o),H(this,qr,c),H(this,Td,d),$(this,kn,nE).call(this,d);const{x:f,y:p,width:g,height:b}=y(this,El);for(let x=0,A=e.length;x<A;x+=2)e[x]=(e[x]-f)/g,e[x+1]=(e[x+1]-p)/b;for(let x=0,A=n.length;x<A;x+=2)n[x]=(n[x]-f)/g,n[x+1]=(n[x+1]-p)/b}toSVGPath(){const e=[`M${y(this,Es)[4]} ${y(this,Es)[5]}`];for(let n=6,i=y(this,Es).length;n<i;n+=6){if(isNaN(y(this,Es)[n])){e.push(`L${y(this,Es)[n+4]} ${y(this,Es)[n+5]}`);continue}e.push(`C${y(this,Es)[n]} ${y(this,Es)[n+1]} ${y(this,Es)[n+2]} ${y(this,Es)[n+3]} ${y(this,Es)[n+4]} ${y(this,Es)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,o],c){const d=i-e,f=o-n;let p,g;switch(c){case 0:p=$(this,kn,xh).call(this,y(this,Es),e,o,d,-f),g=$(this,kn,xh).call(this,y(this,Vn),e,o,d,-f);break;case 90:p=$(this,kn,bh).call(this,y(this,Es),e,n,d,f),g=$(this,kn,bh).call(this,y(this,Vn),e,n,d,f);break;case 180:p=$(this,kn,xh).call(this,y(this,Es),i,n,-d,f),g=$(this,kn,xh).call(this,y(this,Vn),i,n,-d,f);break;case 270:p=$(this,kn,bh).call(this,y(this,Es),i,o,-d,-f),g=$(this,kn,bh).call(this,y(this,Vn),i,o,-d,-f);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return y(this,El)}newOutliner(e,n,i,o,c,d=0){return new FreeDrawOutliner(e,n,i,o,c,d)}getNewOutline(e,n){const{x:i,y:o,width:c,height:d}=y(this,El),[f,p,g,b]=y(this,iu),x=c*g,A=d*b,_=i*g+f,R=o*b+p,P=this.newOutliner({x:y(this,Vn)[0]*x+_,y:y(this,Vn)[1]*A+R},y(this,iu),y(this,Cd),e,y(this,Td),n??y(this,qr));for(let E=2;E<y(this,Vn).length;E+=2)P.add({x:y(this,Vn)[E]*x+_,y:y(this,Vn)[E+1]*A+R});return P.getOutlines()}get mustRemoveSelfIntersections(){return!0}}iu=new WeakMap,El=new WeakMap,qr=new WeakMap,Td=new WeakMap,Vn=new WeakMap,Cd=new WeakMap,Es=new WeakMap,kn=new WeakSet,xh=function(e,n,i,o,c){const d=new Float64Array(e.length);for(let f=0,p=e.length;f<p;f+=2)d[f]=n+e[f]*o,d[f+1]=i+e[f+1]*c;return d},bh=function(e,n,i,o,c){const d=new Float64Array(e.length);for(let f=0,p=e.length;f<p;f+=2)d[f]=n+e[f+1]*o,d[f+1]=i+e[f]*c;return d},nE=function(e){const n=y(this,Es);let i=n[4],o=n[5],c=i,d=o,f=i,p=o,g=i,b=o;const x=e?Math.max:Math.min;for(let E=6,T=n.length;E<T;E+=6){if(isNaN(n[E]))c=Math.min(c,n[E+4]),d=Math.min(d,n[E+5]),f=Math.max(f,n[E+4]),p=Math.max(p,n[E+5]),b<n[E+5]?(g=n[E+4],b=n[E+5]):b===n[E+5]&&(g=x(g,n[E+4]));else{const C=Util.bezierBoundingBox(i,o,...n.slice(E,E+6));c=Math.min(c,C[0]),d=Math.min(d,C[1]),f=Math.max(f,C[2]),p=Math.max(p,C[3]),b<C[3]?(g=C[2],b=C[3]):b===C[3]&&(g=x(g,C[2]))}i=n[E+4],o=n[E+5]}const A=c-y(this,qr),_=d-y(this,qr),R=f-c+2*y(this,qr),P=p-d+2*y(this,qr);H(this,El,{x:A,y:_,width:R,height:P,lastPoint:[g,b]})};var kd,Qa,Pi,bn,iE,hp,rE,aE,hy;class HighlightOutliner{constructor(t,e=0,n=0,i=!0){q(this,bn);q(this,kd);q(this,Qa,[]);q(this,Pi,[]);let o=1/0,c=-1/0,d=1/0,f=-1/0;const p=10**-4;for(const{x:P,y:E,width:T,height:C}of t){const M=Math.floor((P-e)/p)*p,j=Math.ceil((P+T+e)/p)*p,L=Math.floor((E-e)/p)*p,O=Math.ceil((E+C+e)/p)*p,V=[M,L,O,!0],X=[j,L,O,!1];y(this,Qa).push(V,X),o=Math.min(o,M),c=Math.max(c,j),d=Math.min(d,L),f=Math.max(f,O)}const g=c-o+2*n,b=f-d+2*n,x=o-n,A=d-n,_=y(this,Qa).at(i?-1:-2),R=[_[0],_[2]];for(const P of y(this,Qa)){const[E,T,C]=P;P[0]=(E-x)/g,P[1]=(T-A)/b,P[2]=(C-A)/b}H(this,kd,{x,y:A,width:g,height:b,lastPoint:R})}getOutlines(){y(this,Qa).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of y(this,Qa))e[3]?(t.push(...$(this,bn,hy).call(this,e)),$(this,bn,rE).call(this,e)):($(this,bn,aE).call(this,e),t.push(...$(this,bn,hy).call(this,e)));return $(this,bn,iE).call(this,t)}}kd=new WeakMap,Qa=new WeakMap,Pi=new WeakMap,bn=new WeakSet,iE=function(t){const e=[],n=new Set;for(const c of t){const[d,f,p]=c;e.push([d,f,c],[d,p,c])}e.sort((c,d)=>c[1]-d[1]||c[0]-d[0]);for(let c=0,d=e.length;c<d;c+=2){const f=e[c][2],p=e[c+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const i=[];let o;for(;n.size>0;){const c=n.values().next().value;let[d,f,p,g,b]=c;n.delete(c);let x=d,A=f;for(o=[d,p],i.push(o);;){let _;if(n.has(g))_=g;else if(n.has(b))_=b;else break;n.delete(_),[d,f,p,g,b]=_,x!==d&&(o.push(x,A,d,A===f?f:p),x=d),A=A===f?p:f}o.push(x,A)}return new HighlightOutline(i,y(this,kd))},hp=function(t){const e=y(this,Pi);let n=0,i=e.length-1;for(;n<=i;){const o=n+i>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:i=o-1}return i+1},rE=function([,t,e]){const n=$(this,bn,hp).call(this,t);y(this,Pi).splice(n,0,[t,e])},aE=function([,t,e]){const n=$(this,bn,hp).call(this,t);for(let i=n;i<y(this,Pi).length;i++){const[o,c]=y(this,Pi)[i];if(o!==t)break;if(o===t&&c===e){y(this,Pi).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[o,c]=y(this,Pi)[i];if(o!==t)break;if(o===t&&c===e){y(this,Pi).splice(i,1);return}}},hy=function(t){const[e,n,i]=t,o=[[e,n,i]],c=$(this,bn,hp).call(this,i);for(let d=0;d<c;d++){const[f,p]=y(this,Pi)[d];for(let g=0,b=o.length;g<b;g++){const[,x,A]=o[g];if(!(p<=x||A<=f)){if(x>=f){if(A>p)o[g][1]=p;else{if(b===1)return[];o.splice(g,1),g--,b--}continue}o[g][2]=f,A>p&&o.push([e,p,A])}}}return o};var Pd,ru;class HighlightOutline extends Outline{constructor(e,n){super();q(this,Pd);q(this,ru);H(this,ru,e),H(this,Pd,n)}toSVGPath(){const e=[];for(const n of y(this,ru)){let[i,o]=n;e.push(`M${i} ${o}`);for(let c=2;c<n.length;c+=2){const d=n[c],f=n[c+1];d===i?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${d}`),i=d)}e.push("Z")}return e.join(" ")}serialize([e,n,i,o],c){const d=[],f=i-e,p=o-n;for(const g of y(this,ru)){const b=new Array(g.length);for(let x=0;x<g.length;x+=2)b[x]=e+g[x]*f,b[x+1]=o-g[x+1]*p;d.push(b)}return d}get box(){return y(this,Pd)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Pd=new WeakMap,ru=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(t,e,n,i,o,c){return new FreeHighlightOutline(t,e,n,i,o,c)}get classNamesForDrawing(){return["highlight","free"]}}class FreeHighlightOutline extends FreeDrawOutline{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,i,o,c=0){return new FreeHighlightOutliner(t,e,n,i,o,c)}}var Mi,Sl,au,Ms,Md,ou,jd,Nd,Ja,ji,lu,Ld,Ve,dy,fy,py,jo,oE,ja;const Rn=class Rn{constructor({editor:t=null,uiManager:e=null}){q(this,Ve);q(this,Mi,null);q(this,Sl,null);q(this,au);q(this,Ms,null);q(this,Md,!1);q(this,ou,!1);q(this,jd,null);q(this,Nd);q(this,Ja,null);q(this,ji,null);q(this,lu);var n;t?(H(this,ou,!1),H(this,lu,AnnotationEditorParamsType.HIGHLIGHT_COLOR),H(this,jd,t)):(H(this,ou,!0),H(this,lu,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),H(this,ji,(t==null?void 0:t._uiManager)||e),H(this,Nd,y(this,ji)._eventBus),H(this,au,(t==null?void 0:t.color)||((n=y(this,ji))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),y(Rn,Ld)||H(Rn,Ld,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],Rn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Rn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Rn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Rn.prototype._moveToPrevious],[["Home","mac+Home"],Rn.prototype._moveToBeginning],[["End","mac+End"],Rn.prototype._moveToEnd]]))}renderButton(){const t=H(this,Mi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=y(this,ji)._signal;t.addEventListener("click",$(this,Ve,jo).bind(this),{signal:e}),t.addEventListener("keydown",$(this,Ve,py).bind(this),{signal:e});const n=H(this,Sl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=y(this,au),t.append(n),t}renderMainDropdown(){const t=H(this,Ms,$(this,Ve,dy).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===y(this,Mi)){$(this,Ve,jo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&$(this,Ve,fy).call(this,e,t)}_moveToNext(t){var e,n;if(!y(this,Ve,ja)){$(this,Ve,jo).call(this,t);return}if(t.target===y(this,Mi)){(e=y(this,Ms).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=y(this,Ms))==null?void 0:e.firstChild)||t.target===y(this,Mi)){y(this,Ve,ja)&&this._hideDropdownFromKeyboard();return}y(this,Ve,ja)||$(this,Ve,jo).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!y(this,Ve,ja)){$(this,Ve,jo).call(this,t);return}(e=y(this,Ms).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!y(this,Ve,ja)){$(this,Ve,jo).call(this,t);return}(e=y(this,Ms).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=y(this,Ms))==null||t.classList.add("hidden"),(e=y(this,Ja))==null||e.abort(),H(this,Ja,null)}_hideDropdownFromKeyboard(){var t;if(!y(this,ou)){if(!y(this,Ve,ja)){(t=y(this,jd))==null||t.unselect();return}this.hideDropdown(),y(this,Mi).focus({preventScroll:!0,focusVisible:y(this,Md)})}}updateColor(t){if(y(this,Sl)&&(y(this,Sl).style.backgroundColor=t),!y(this,Ms))return;const e=y(this,ji).highlightColors.values();for(const n of y(this,Ms).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=y(this,Mi))==null||t.remove(),H(this,Mi,null),H(this,Sl,null),(e=y(this,Ms))==null||e.remove(),H(this,Ms,null)}};Mi=new WeakMap,Sl=new WeakMap,au=new WeakMap,Ms=new WeakMap,Md=new WeakMap,ou=new WeakMap,jd=new WeakMap,Nd=new WeakMap,Ja=new WeakMap,ji=new WeakMap,lu=new WeakMap,Ld=new WeakMap,Ve=new WeakSet,dy=function(){const t=document.createElement("div"),e=y(this,ji)._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of y(this,ji).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",y(Rn,Ld)[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=i,o.setAttribute("aria-selected",i===y(this,au)),o.addEventListener("click",$(this,Ve,fy).bind(this,i),{signal:e}),t.append(o)}return t.addEventListener("keydown",$(this,Ve,py).bind(this),{signal:e}),t},fy=function(t,e){e.stopPropagation(),y(this,Nd).dispatch("switchannotationeditorparams",{source:this,type:y(this,lu),value:t})},py=function(t){Rn._keyboardManager.exec(this,t)},jo=function(t){if(y(this,Ve,ja)){this.hideDropdown();return}if(H(this,Md,t.detail===0),y(this,Ja)||(H(this,Ja,new AbortController),window.addEventListener("pointerdown",$(this,Ve,oE).bind(this),{signal:y(this,ji).combinedSignal(y(this,Ja))})),y(this,Ms)){y(this,Ms).classList.remove("hidden");return}const e=H(this,Ms,$(this,Ve,dy).call(this));y(this,Mi).append(e)},oE=function(t){var e;(e=y(this,Ms))!=null&&e.contains(t.target)||this.hideDropdown()},ja=function(){return y(this,Ms)&&!y(this,Ms).classList.contains("hidden")},q(Rn,Ld,null);let ColorPicker=Rn;var cu,Dd,Xr,_l,uu,oi,Fd,Od,Al,Ni,ln,Cn,hu,Yr,js,du,li,Id,re,my,dp,lE,cE,uE,gy,No,hi,vc,hE,fp,Eh,dE,fE,pE,mE,gE;const Ne=class Ne extends AnnotationEditor{constructor(e){super({...e,name:"highlightEditor"});q(this,re);q(this,cu,null);q(this,Dd,0);q(this,Xr);q(this,_l,null);q(this,uu,null);q(this,oi,null);q(this,Fd,null);q(this,Od,0);q(this,Al,null);q(this,Ni,null);q(this,ln,null);q(this,Cn,!1);q(this,hu,null);q(this,Yr);q(this,js,null);q(this,du,"");q(this,li);q(this,Id,"");this.color=e.color||Ne._defaultColor,H(this,li,e.thickness||Ne._defaultThickness),H(this,Yr,e.opacity||Ne._defaultOpacity),H(this,Xr,e.boxes||null),H(this,Id,e.methodOfCreation||""),H(this,du,e.text||""),this._isDraggable=!1,e.highlightId>-1?(H(this,Cn,!0),$(this,re,dp).call(this,e),$(this,re,No).call(this)):y(this,Xr)&&(H(this,cu,e.anchorNode),H(this,Dd,e.anchorOffset),H(this,Fd,e.focusNode),H(this,Od,e.focusOffset),$(this,re,my).call(this),$(this,re,No).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Ne.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:y(this,Cn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:y(this,li),methodOfCreation:y(this,Id)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;AnnotationEditor.initialize(e,n),Ne._defaultColor||(Ne._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:Ne._defaultColor=n;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Ne._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return y(this,hu)}updateParams(e,n){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:$(this,re,lE).call(this,n);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:$(this,re,cE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,Ne._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Ne._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Ne._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,y(this,li)||Ne._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,y(this,Cn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(H(this,uu,new ColorPicker({editor:this})),e.addColorPicker(y(this,uu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition($(this,re,Eh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,$(this,re,Eh).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){$(this,re,gy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,re,No).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?$(this,re,gy).call(this):e&&($(this,re,No).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,d;const{drawLayer:n}=this.parent;let i;y(this,Cn)?(e=(e-this.rotation+360)%360,i=$(o=Ne,hi,vc).call(o,y(this,Ni).box,e)):i=$(c=Ne,hi,vc).call(c,this,e),n.rotate(y(this,ln),e),n.rotate(y(this,js),e),n.updateBox(y(this,ln),i),n.updateBox(y(this,js),$(d=Ne,hi,vc).call(d,y(this,oi).box,e))}render(){if(this.div)return this.div;const e=super.render();y(this,du)&&(e.setAttribute("aria-label",y(this,du)),e.setAttribute("role","mark")),y(this,Cn)?e.classList.add("free"):this.div.addEventListener("keydown",$(this,re,hE).bind(this),{signal:this._uiManager._signal});const n=H(this,Al,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=y(this,_l);const[i,o]=this.parentDimensions;return this.setDims(this.width*i,this.height*o),bindEvents(this,y(this,Al),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(y(this,js),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(y(this,js),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:$(this,re,fp).call(this,!0);break;case 1:case 3:$(this,re,fp).call(this,!1);break}}select(){var e,n;super.select(),y(this,js)&&((e=this.parent)==null||e.drawLayer.removeClass(y(this,js),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(y(this,js),"selected"))}unselect(){var e;super.unselect(),y(this,js)&&((e=this.parent)==null||e.drawLayer.removeClass(y(this,js),"selected"),y(this,Cn)||$(this,re,fp).call(this,!1))}get _mustFixPosition(){return!y(this,Cn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(y(this,ln),e),this.parent.drawLayer.show(y(this,js),e))}static startHighlighting(e,n,{target:i,x:o,y:c}){const{x:d,y:f,width:p,height:g}=i.getBoundingClientRect(),b=new AbortController,x=e.combinedSignal(b),A=R=>{R.preventDefault(),R.stopPropagation()},_=R=>{b.abort(),$(this,hi,mE).call(this,e,R)};window.addEventListener("blur",_,{signal:x}),window.addEventListener("pointerup",_,{signal:x}),window.addEventListener("pointerdown",A,{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",noContextMenu,{signal:x}),i.addEventListener("pointermove",$(this,hi,pE).bind(this,e),{signal:x}),this._freeHighlight=new FreeHighlightOutliner({x:o,y:c},[d,f,p,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,n,i){var R,P,E,T;let o=null;if(e instanceof HighlightAnnotationElement){const{data:{quadPoints:C,rect:M,rotation:j,id:L,color:O,opacity:V,popupRef:X},parent:{page:{pageNumber:tt}}}=e;o=e={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(O),opacity:V,quadPoints:C,boxes:null,pageIndex:tt-1,rect:M.slice(0),rotation:j,id:L,deleted:!1,popupRef:X}}else if(e instanceof InkAnnotationElement){const{data:{inkLists:C,rect:M,rotation:j,id:L,color:O,borderStyle:{rawWidth:V},popupRef:X},parent:{page:{pageNumber:tt}}}=e;o=e={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(O),thickness:V,inkLists:C,boxes:null,pageIndex:tt-1,rect:M.slice(0),rotation:j,id:L,deleted:!1,popupRef:X}}const{color:c,quadPoints:d,inkLists:f,opacity:p}=e,g=await super.deserialize(e,n,i);g.color=Util.makeHexColor(...c),H(g,Yr,p||1),f&&H(g,li,e.thickness),g.annotationElementId=e.id||null,g._initialData=o;const[b,x]=g.pageDimensions,[A,_]=g.pageTranslation;if(d){const C=H(g,Xr,[]);for(let M=0;M<d.length;M+=8)C.push({x:(d[M]-A)/b,y:1-(d[M+1]-_)/x,width:(d[M+2]-d[M])/b,height:(d[M+1]-d[M+5])/x});$(R=g,re,my).call(R),$(P=g,re,No).call(P),g.rotate(g.rotation)}else if(f){H(g,Cn,!0);const C=f[0],M={x:C[0]-A,y:x-(C[1]-_)},j=new FreeHighlightOutliner(M,[0,0,b,x],1,y(g,li)/2,!0,.001);for(let V=0,X=C.length;V<X;V+=2)M.x=C[V]-A,M.y=x-(C[V+1]-_),j.add(M);const{id:L,clipPathId:O}=n.drawLayer.draw(j,g.color,g._defaultOpacity,!0);$(E=g,re,dp).call(E,{highlightOutlines:j.getOutlines(),highlightId:L,clipPathId:O}),$(T=g,re,No).call(T)}return g}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=AnnotationEditor._colorManager.convert(this.color),o={annotationType:AnnotationEditorType.HIGHLIGHT,color:i,opacity:y(this,Yr),thickness:y(this,li),quadPoints:$(this,re,dE).call(this),outlines:$(this,re,fE).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:$(this,re,Eh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!$(this,re,gE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};cu=new WeakMap,Dd=new WeakMap,Xr=new WeakMap,_l=new WeakMap,uu=new WeakMap,oi=new WeakMap,Fd=new WeakMap,Od=new WeakMap,Al=new WeakMap,Ni=new WeakMap,ln=new WeakMap,Cn=new WeakMap,hu=new WeakMap,Yr=new WeakMap,js=new WeakMap,du=new WeakMap,li=new WeakMap,Id=new WeakMap,re=new WeakSet,my=function(){const e=new HighlightOutliner(y(this,Xr),.001);H(this,Ni,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=y(this,Ni).box;const n=new HighlightOutliner(y(this,Xr),.0025,.001,this._uiManager.direction==="ltr");H(this,oi,n.getOutlines());const{lastPoint:i}=y(this,oi).box;H(this,hu,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},dp=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var b,x;if(H(this,Ni,e),H(this,oi,e.getNewOutline(y(this,li)/2+1.5,.0025)),n>=0)H(this,ln,n),H(this,_l,i),this.parent.drawLayer.finalizeLine(n,e),H(this,js,this.parent.drawLayer.drawOutline(y(this,oi)));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(y(this,ln),e),this.parent.drawLayer.updateBox(y(this,ln),$(b=Ne,hi,vc).call(b,y(this,Ni).box,(A-this.rotation+360)%360)),this.parent.drawLayer.updateLine(y(this,js),y(this,oi)),this.parent.drawLayer.updateBox(y(this,js),$(x=Ne,hi,vc).call(x,y(this,oi).box,A))}const{x:c,y:d,width:f,height:p}=e.box;switch(this.rotation){case 0:this.x=c,this.y=d,this.width=f,this.height=p;break;case 90:{const[A,_]=this.parentDimensions;this.x=d,this.y=1-c,this.width=f*_/A,this.height=p*A/_;break}case 180:this.x=1-c,this.y=1-d,this.width=f,this.height=p;break;case 270:{const[A,_]=this.parentDimensions;this.x=1-d,this.y=c,this.width=f*_/A,this.height=p*A/_;break}}const{lastPoint:g}=y(this,oi).box;H(this,hu,[(g[0]-c)/f,(g[1]-d)/p])},lE=function(e){const n=(c,d)=>{var f,p,g;this.color=c,(f=this.parent)==null||f.drawLayer.changeColor(y(this,ln),c),(p=y(this,uu))==null||p.updateColor(c),H(this,Yr,d),(g=this.parent)==null||g.drawLayer.changeOpacity(y(this,ln),d)},i=this.color,o=y(this,Yr);this.addCommands({cmd:n.bind(this,e,Ne._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},cE=function(e){const n=y(this,li),i=o=>{H(this,li,o),$(this,re,uE).call(this,o)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},uE=function(e){if(!y(this,Cn))return;$(this,re,dp).call(this,{highlightOutlines:y(this,Ni).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},gy=function(){y(this,ln)===null||!this.parent||(this.parent.drawLayer.remove(y(this,ln)),H(this,ln,null),this.parent.drawLayer.remove(y(this,js)),H(this,js,null))},No=function(e=this.parent){y(this,ln)===null&&({id:gn(this,ln)._,clipPathId:gn(this,_l)._}=e.drawLayer.draw(y(this,Ni),this.color,y(this,Yr)),H(this,js,e.drawLayer.drawOutline(y(this,oi))),y(this,Al)&&(y(this,Al).style.clipPath=y(this,_l)))},hi=new WeakSet,vc=function({x:e,y:n,width:i,height:o},c){switch(c){case 90:return{x:1-n-o,y:e,width:o,height:i};case 180:return{x:1-e-i,y:1-n-o,width:i,height:o};case 270:return{x:n,y:1-e-i,width:o,height:i}}return{x:e,y:n,width:i,height:o}},hE=function(e){Ne._keyboardManager.exec(this,e)},fp=function(e){if(!y(this,cu))return;const n=window.getSelection();e?n.setPosition(y(this,cu),y(this,Dd)):n.setPosition(y(this,Fd),y(this,Od))},Eh=function(){return y(this,Cn)?this.rotation:0},dE=function(){if(y(this,Cn))return null;const[e,n]=this.pageDimensions,[i,o]=this.pageTranslation,c=y(this,Xr),d=new Float32Array(c.length*8);let f=0;for(const{x:p,y:g,width:b,height:x}of c){const A=p*e+i,_=(1-g-x)*n+o;d[f]=d[f+4]=A,d[f+1]=d[f+3]=_,d[f+2]=d[f+6]=A+b*e,d[f+5]=d[f+7]=_+x*n,f+=8}return d},fE=function(e){return y(this,Ni).serialize(e,$(this,re,Eh).call(this))},pE=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},mE=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},gE=function(e){const{color:n}=this._initialData;return e.color.some((i,o)=>i!==n[o])},q(Ne,hi),Jt(Ne,"_defaultColor",null),Jt(Ne,"_defaultOpacity",1),Jt(Ne,"_defaultThickness",12),Jt(Ne,"_type","highlight"),Jt(Ne,"_editorType",AnnotationEditorType.HIGHLIGHT),Jt(Ne,"_freeHighlightId",-1),Jt(Ne,"_freeHighlight",null),Jt(Ne,"_freeHighlightClipId","");let HighlightEditor=Ne;var Rl,wl,lr,Wr,ci,Tl,Cl,kl,Kr,fu,Pl,Ml,to,At,yE,vE,xE,bE,yy,EE,vy,SE,_E,AE,RE,wE,Lo,xy,by,Ey,pp,mp,xc,Sy,gp,ra,TE,_y,CE,kE,Ay,yp,Sh;const ls=class ls extends AnnotationEditor{constructor(e){super({...e,name:"inkEditor"});q(this,At);q(this,Rl,0);q(this,wl,0);q(this,lr,null);q(this,Wr,new Path2D);q(this,ci,!1);q(this,Tl,null);q(this,Cl,!1);q(this,kl,!1);q(this,Kr,null);q(this,fu,null);q(this,Pl,0);q(this,Ml,0);q(this,to,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){AnnotationEditor.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case AnnotationEditorParamsType.INK_THICKNESS:ls._defaultThickness=n;break;case AnnotationEditorParamsType.INK_COLOR:ls._defaultColor=n;break;case AnnotationEditorParamsType.INK_OPACITY:ls._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case AnnotationEditorParamsType.INK_THICKNESS:$(this,At,yE).call(this,n);break;case AnnotationEditorParamsType.INK_COLOR:$(this,At,vE).call(this,n);break;case AnnotationEditorParamsType.INK_OPACITY:$(this,At,xE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,ls._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,ls._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(ls._defaultOpacity*100)]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ls._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||ls._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ls._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||($(this,At,pp).call(this),$(this,At,mp).call(this)),this.isAttachedToDOM||(this.parent.add(this),$(this,At,xc).call(this)),$(this,At,Sh).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,y(this,lr)&&(clearTimeout(y(this,lr)),H(this,lr,null)),(e=y(this,Kr))==null||e.disconnect(),H(this,Kr,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,i=this.width*e,o=this.height*n;this.setDimensions(i,o)}enableEditMode(){y(this,ci)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,$(this,At,xy).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),$(this,At,by).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){y(this,ci)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),H(this,ci,!0),this.div.classList.add("disabled"),$(this,At,Sh).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||y(this,ci)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),$(this,At,EE).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),$(this,At,vy).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),$(this,At,Ey).call(this,e)}canvasPointerleave(e){$(this,At,Ey).call(this,e)}get isResizable(){return!this.isEmpty()&&y(this,ci)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,o,c,d]=$(this,At,bE).call(this);if(this.setAt(i,o,0,0),this.setDims(c,d),$(this,At,pp).call(this),this.width){const[f,p]=this.parentDimensions;this.setAspectRatio(this.width*f,this.height*p),this.setAt(e*f,n*p,this.width*f,this.height*p),H(this,kl,!0),$(this,At,xc).call(this),this.setDims(this.width*f,this.height*p),$(this,At,Lo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return $(this,At,mp).call(this),this.div}setDimensions(e,n){const i=Math.round(e),o=Math.round(n);if(y(this,Pl)===i&&y(this,Ml)===o)return;H(this,Pl,i),H(this,Ml,o),this.canvas.style.visibility="hidden";const[c,d]=this.parentDimensions;this.width=e/c,this.height=n/d,this.fixAndSetPosition(),y(this,ci)&&$(this,At,Sy).call(this,e,n),$(this,At,xc).call(this),$(this,At,Lo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,n,i){var P,E,T;if(e instanceof InkAnnotationElement)return null;const o=await super.deserialize(e,n,i);o.thickness=e.thickness,o.color=Util.makeHexColor(...e.color),o.opacity=e.opacity;const[c,d]=o.pageDimensions,f=o.width*c,p=o.height*d,g=o.parentScale,b=e.thickness/2;H(o,ci,!0),H(o,Pl,Math.round(f)),H(o,Ml,Math.round(p));const{paths:x,rect:A,rotation:_}=e;for(let{bezier:C}of x){C=$(P=ls,ra,CE).call(P,C,A,_);const M=[];o.paths.push(M);let j=g*(C[0]-b),L=g*(C[1]-b);for(let V=2,X=C.length;V<X;V+=6){const tt=g*(C[V]-b),Y=g*(C[V+1]-b),Q=g*(C[V+2]-b),ct=g*(C[V+3]-b),nt=g*(C[V+4]-b),J=g*(C[V+5]-b);M.push([[j,L],[tt,Y],[Q,ct],[nt,J]]),j=nt,L=J}const O=$(this,ra,TE).call(this,M);o.bezierPath2D.push(O)}const R=$(E=o,At,Ay).call(E);return H(o,wl,Math.max(AnnotationEditor.MIN_SIZE,R[2]-R[0])),H(o,Rl,Math.max(AnnotationEditor.MIN_SIZE,R[3]-R[1])),$(T=o,At,Sy).call(T,f,p),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:AnnotationEditorType.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:$(this,At,kE).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Rl=new WeakMap,wl=new WeakMap,lr=new WeakMap,Wr=new WeakMap,ci=new WeakMap,Tl=new WeakMap,Cl=new WeakMap,kl=new WeakMap,Kr=new WeakMap,fu=new WeakMap,Pl=new WeakMap,Ml=new WeakMap,to=new WeakMap,At=new WeakSet,yE=function(e){const n=o=>{this.thickness=o,$(this,At,Sh).call(this)},i=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},vE=function(e){const n=o=>{this.color=o,$(this,At,Lo).call(this)},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xE=function(e){const n=o=>{this.opacity=o,$(this,At,Lo).call(this)};e/=100;const i=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},bE=function(){const{parentRotation:e,parentDimensions:[n,i]}=this;switch(e){case 90:return[0,i,i,n];case 180:return[n,i,n,i];case 270:return[n,0,i,n];default:return[0,0,n,i]}},yy=function(){const{ctx:e,color:n,opacity:i,thickness:o,parentScale:c,scaleFactor:d}=this;e.lineWidth=o*c/d,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${opacityToHex(i)}`},EE=function(e,n){this.canvas.addEventListener("contextmenu",noContextMenu,{signal:this._uiManager._signal}),$(this,At,by).call(this),H(this,Tl,new AbortController);const i=this._uiManager.combinedSignal(y(this,Tl));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,y(this,kl)||(H(this,kl,!0),$(this,At,xc).call(this),this.thickness||(this.thickness=ls._defaultThickness),this.color||(this.color=ls._defaultColor||AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ls._defaultOpacity)),this.currentPath.push([e,n]),H(this,Cl,!1),$(this,At,yy).call(this),H(this,to,()=>{$(this,At,AE).call(this),y(this,to)&&window.requestAnimationFrame(y(this,to))}),window.requestAnimationFrame(y(this,to))},vy=function(e,n){const[i,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&n===o)return;const c=this.currentPath;let d=y(this,Wr);if(c.push([e,n]),H(this,Cl,!0),c.length<=2){d.moveTo(...c[0]),d.lineTo(e,n);return}c.length===3&&(H(this,Wr,d=new Path2D),d.moveTo(...c[0])),$(this,At,RE).call(this,d,...c.at(-3),...c.at(-2),e,n)},SE=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);y(this,Wr).lineTo(...e)},_E=function(e,n){H(this,to,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),$(this,At,vy).call(this,e,n),$(this,At,SE).call(this);let i;if(this.currentPath.length!==1)i=$(this,At,wE).call(this);else{const p=[e,n];i=[[p,p.slice(),p.slice(),p]]}const o=y(this,Wr),c=this.currentPath;this.currentPath=[],H(this,Wr,new Path2D);const d=()=>{this.allRawPaths.push(c),this.paths.push(i),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},f=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||($(this,At,pp).call(this),$(this,At,mp).call(this)),$(this,At,Sh).call(this))};this.addCommands({cmd:d,undo:f,mustExec:!0})},AE=function(){if(!y(this,Cl))return;H(this,Cl,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),i=n.map(d=>d[0]),o=n.map(d=>d[1]);Math.min(...i)-e,Math.max(...i)+e,Math.min(...o)-e,Math.max(...o)+e;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const d of this.bezierPath2D)c.stroke(d);c.stroke(y(this,Wr)),c.restore()},RE=function(e,n,i,o,c,d,f){const p=(n+o)/2,g=(i+c)/2,b=(o+d)/2,x=(c+f)/2;e.bezierCurveTo(p+2*(o-p)/3,g+2*(c-g)/3,b+2*(o-b)/3,x+2*(c-x)/3,b,x)},wE=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let i,[o,c]=e[0];for(i=1;i<e.length-2;i++){const[A,_]=e[i],[R,P]=e[i+1],E=(A+R)/2,T=(_+P)/2,C=[o+2*(A-o)/3,c+2*(_-c)/3],M=[E+2*(A-E)/3,T+2*(_-T)/3];n.push([[o,c],C,M,[E,T]]),[o,c]=[E,T]}const[d,f]=e[i],[p,g]=e[i+1],b=[o+2*(d-o)/3,c+2*(f-c)/3],x=[p+2*(d-p)/3,g+2*(f-g)/3];return n.push([[o,c],b,x,[p,g]]),n},Lo=function(){if(this.isEmpty()){$(this,At,gp).call(this);return}$(this,At,yy).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),$(this,At,gp).call(this);for(const i of this.bezierPath2D)n.stroke(i)},xy=function(){if(y(this,fu))return;H(this,fu,new AbortController);const e=this._uiManager.combinedSignal(y(this,fu));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},by=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},Ey=function(e){var n;(n=y(this,Tl))==null||n.abort(),H(this,Tl,null),$(this,At,xy).call(this),y(this,lr)&&clearTimeout(y(this,lr)),H(this,lr,setTimeout(()=>{H(this,lr,null),this.canvas.removeEventListener("contextmenu",noContextMenu)},10)),$(this,At,_E).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},mp=function(){H(this,Kr,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),y(this,Kr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=y(this,Kr))==null||e.disconnect(),H(this,Kr,null)},{once:!0})},xc=function(){if(!y(this,kl))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),$(this,At,gp).call(this)},Sy=function(e,n){const i=$(this,At,yp).call(this),o=(e-i)/y(this,wl),c=(n-i)/y(this,Rl);this.scaleFactor=Math.min(o,c)},gp=function(){const e=$(this,At,yp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},ra=new WeakSet,TE=function(e){const n=new Path2D;for(let i=0,o=e.length;i<o;i++){const[c,d,f,p]=e[i];i===0&&n.moveTo(...c),n.bezierCurveTo(d[0],d[1],f[0],f[1],p[0],p[1])}return n},_y=function(e,n,i){const[o,c,d,f]=n;switch(i){case 0:for(let p=0,g=e.length;p<g;p+=2)e[p]+=o,e[p+1]=f-e[p+1];break;case 90:for(let p=0,g=e.length;p<g;p+=2){const b=e[p];e[p]=e[p+1]+o,e[p+1]=b+c}break;case 180:for(let p=0,g=e.length;p<g;p+=2)e[p]=d-e[p],e[p+1]+=c;break;case 270:for(let p=0,g=e.length;p<g;p+=2){const b=e[p];e[p]=d-e[p+1],e[p+1]=f-b}break;default:throw new Error("Invalid rotation")}return e},CE=function(e,n,i){const[o,c,d,f]=n;switch(i){case 0:for(let p=0,g=e.length;p<g;p+=2)e[p]-=o,e[p+1]=f-e[p+1];break;case 90:for(let p=0,g=e.length;p<g;p+=2){const b=e[p];e[p]=e[p+1]-c,e[p+1]=b-o}break;case 180:for(let p=0,g=e.length;p<g;p+=2)e[p]=d-e[p],e[p+1]-=c;break;case 270:for(let p=0,g=e.length;p<g;p+=2){const b=e[p];e[p]=f-e[p+1],e[p+1]=d-b}break;default:throw new Error("Invalid rotation")}return e},kE=function(e,n,i,o){var g,b;const c=[],d=this.thickness/2,f=e*n+d,p=e*i+d;for(const x of this.paths){const A=[],_=[];for(let R=0,P=x.length;R<P;R++){const[E,T,C,M]=x[R];if(E[0]===M[0]&&E[1]===M[1]&&P===1){const ct=e*E[0]+f,nt=e*E[1]+p;A.push(ct,nt),_.push(ct,nt);break}const j=e*E[0]+f,L=e*E[1]+p,O=e*T[0]+f,V=e*T[1]+p,X=e*C[0]+f,tt=e*C[1]+p,Y=e*M[0]+f,Q=e*M[1]+p;R===0&&(A.push(j,L),_.push(j,L)),A.push(O,V,X,tt,Y,Q),_.push(O,V),R===P-1&&_.push(Y,Q)}c.push({bezier:$(g=ls,ra,_y).call(g,A,o,this.rotation),points:$(b=ls,ra,_y).call(b,_,o,this.rotation)})}return c},Ay=function(){let e=1/0,n=-1/0,i=1/0,o=-1/0;for(const c of this.paths)for(const[d,f,p,g]of c){const b=Util.bezierBoundingBox(...d,...f,...p,...g);e=Math.min(e,b[0]),i=Math.min(i,b[1]),n=Math.max(n,b[2]),o=Math.max(o,b[3])}return[e,i,n,o]},yp=function(){return y(this,ci)?Math.ceil(this.thickness*this.parentScale):0},Sh=function(e=!1){if(this.isEmpty())return;if(!y(this,ci)){$(this,At,Lo).call(this);return}const n=$(this,At,Ay).call(this),i=$(this,At,yp).call(this);H(this,wl,Math.max(AnnotationEditor.MIN_SIZE,n[2]-n[0])),H(this,Rl,Math.max(AnnotationEditor.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(i+y(this,wl)*this.scaleFactor),c=Math.ceil(i+y(this,Rl)*this.scaleFactor),[d,f]=this.parentDimensions;this.width=o/d,this.height=c/f,this.setAspectRatio(o,c);const p=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],$(this,At,xc).call(this),$(this,At,Lo).call(this),H(this,Pl,o),H(this,Ml,c),this.setDims(o,c);const b=e?i/this.scaleFactor/2:0;this.translate(p-this.translationX-b,g-this.translationY-b)},q(ls,ra),Jt(ls,"_defaultColor",null),Jt(ls,"_defaultOpacity",1),Jt(ls,"_defaultThickness",1),Jt(ls,"_type","ink"),Jt(ls,"_editorType",AnnotationEditorType.INK);let InkEditor=ls;var us,Js,eo,Zr,so,pu,cr,Qr,ur,$n,mu,ve,_h,Ah,vp,Ry,PE,xp,wy,bp,ME,jE;const Rh=class Rh extends AnnotationEditor{constructor(e){super({...e,name:"stampEditor"});q(this,ve);q(this,us,null);q(this,Js,null);q(this,eo,null);q(this,Zr,null);q(this,so,null);q(this,pu,"");q(this,cr,null);q(this,Qr,null);q(this,ur,null);q(this,$n,!1);q(this,mu,!1);H(this,Zr,e.bitmapUrl),H(this,so,e.bitmapFile)}static initialize(e,n){AnnotationEditor.initialize(e,n)}static get supportedTypes(){return shadow(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:d}=e||this.copyCanvas(null,null,!0).imageData,f=await i.guess({name:"altText",request:{data:o,width:c,height:d,channels:o.length/(c*d)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e,n;y(this,Js)&&(H(this,us,null),this._uiManager.imageManager.deleteId(y(this,Js)),(e=y(this,cr))==null||e.remove(),H(this,cr,null),(n=y(this,Qr))==null||n.disconnect(),H(this,Qr,null),y(this,ur)&&(clearTimeout(y(this,ur)),H(this,ur,null))),super.remove()}rebuild(){if(!this.parent){y(this,Js)&&$(this,ve,vp).call(this);return}super.rebuild(),this.div!==null&&(y(this,Js)&&y(this,cr)===null&&$(this,ve,vp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(y(this,eo)||y(this,us)||y(this,Zr)||y(this,so)||y(this,Js))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),y(this,us)?$(this,ve,Ry).call(this):$(this,ve,vp).call(this),this.width&&!this.annotationElementId){const[i,o]=this.parentDimensions;this.setAt(e*i,n*o,this.width*i,this.height*o)}return this.div}copyCanvas(e,n,i=!1){var A;e||(e=224);const{width:o,height:c}=y(this,us),d=new OutputScale;let f=y(this,us),p=o,g=c,b=null;if(n){if(o>n||c>n){const V=Math.min(n/o,n/c);p=Math.floor(o*V),g=Math.floor(c*V)}b=document.createElement("canvas");const _=b.width=Math.ceil(p*d.sx),R=b.height=Math.ceil(g*d.sy);y(this,$n)||(f=$(this,ve,xp).call(this,_,R));const P=b.getContext("2d");P.filter=this._uiManager.hcmFilter;let E="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",T="#42414d");const C=15,M=C*d.sx,j=C*d.sy,L=new OffscreenCanvas(M*2,j*2),O=L.getContext("2d");O.fillStyle=E,O.fillRect(0,0,M*2,j*2),O.fillStyle=T,O.fillRect(0,0,M,j),O.fillRect(M,j,M,j),P.fillStyle=P.createPattern(L,"repeat"),P.fillRect(0,0,_,R),P.drawImage(f,0,0,f.width,f.height,0,0,_,R)}let x=null;if(i){let _,R;if(d.symmetric&&f.width<e&&f.height<e)_=f.width,R=f.height;else if(f=y(this,us),o>e||c>e){const T=Math.min(e/o,e/c);_=Math.floor(o*T),R=Math.floor(c*T),y(this,$n)||(f=$(this,ve,xp).call(this,_,R))}const E=new OffscreenCanvas(_,R).getContext("2d",{willReadFrequently:!0});E.drawImage(f,0,0,f.width,f.height,0,0,_,R),x={width:_,height:R,data:E.getImageData(0,0,_,R).data}}return{canvas:b,width:p,height:g,imageData:x}}getImageForAltText(){return y(this,cr)}static async deserialize(e,n,i){var R;let o=null;if(e instanceof StampAnnotationElement){const{data:{rect:P,rotation:E,id:T,structParent:C,popupRef:M},container:j,parent:{page:{pageNumber:L}}}=e,O=j.querySelector("canvas"),V=i.imageManager.getFromCanvas(j.id,O);O.remove();const X=((R=await n._structTree.getAriaAttributes(`${AnnotationPrefix}${T}`))==null?void 0:R.get("aria-label"))||"";o=e={annotationType:AnnotationEditorType.STAMP,bitmapId:V.id,bitmap:V.bitmap,pageIndex:L-1,rect:P.slice(0),rotation:E,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:C,popupRef:M}}const c=await super.deserialize(e,n,i),{rect:d,bitmap:f,bitmapUrl:p,bitmapId:g,isSvg:b,accessibilityData:x}=e;g&&i.imageManager.isValidId(g)?(H(c,Js,g),f&&H(c,us,f)):H(c,Zr,p),H(c,$n,b);const[A,_]=c.pageDimensions;return c.width=(d[2]-d[0])/A,c.height=(d[3]-d[1])/_,c.annotationElementId=e.id||null,x&&(c.altTextData=x),c._initialData=o,H(c,mu,!!o),c}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:AnnotationEditorType.STAMP,bitmapId:y(this,Js),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:y(this,$n),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=$(this,ve,bp).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(i.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const f=$(this,ve,jE).call(this,i);if(f.isSame)return null;f.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const d=y(this,$n)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(y(this,Js)))n.stamps.set(y(this,Js),{area:d,serialized:i}),i.bitmap=$(this,ve,bp).call(this,!1);else if(y(this,$n)){const f=n.stamps.get(y(this,Js));d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=$(this,ve,bp).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};us=new WeakMap,Js=new WeakMap,eo=new WeakMap,Zr=new WeakMap,so=new WeakMap,pu=new WeakMap,cr=new WeakMap,Qr=new WeakMap,ur=new WeakMap,$n=new WeakMap,mu=new WeakMap,ve=new WeakSet,_h=function(e,n=!1){if(!e){this.remove();return}H(this,us,e.bitmap),n||(H(this,Js,e.id),H(this,$n,e.isSvg)),e.file&&H(this,pu,e.file.name),$(this,ve,Ry).call(this)},Ah=function(){if(H(this,eo,null),this._uiManager.enableWaiting(!1),!!y(this,cr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&y(this,us)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&y(this,us)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},vp=function(){if(y(this,Js)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(y(this,Js)).then(i=>$(this,ve,_h).call(this,i,!0)).finally(()=>$(this,ve,Ah).call(this));return}if(y(this,Zr)){const i=y(this,Zr);H(this,Zr,null),this._uiManager.enableWaiting(!0),H(this,eo,this._uiManager.imageManager.getFromUrl(i).then(o=>$(this,ve,_h).call(this,o)).finally(()=>$(this,ve,Ah).call(this)));return}if(y(this,so)){const i=y(this,so);H(this,so,null),this._uiManager.enableWaiting(!0),H(this,eo,this._uiManager.imageManager.getFromFile(i).then(o=>$(this,ve,_h).call(this,o)).finally(()=>$(this,ve,Ah).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Rh.supportedTypesStr;const n=this._uiManager._signal;H(this,eo,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),$(this,ve,_h).call(this,o)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>$(this,ve,Ah).call(this))),e.click()},Ry=function(){const{div:e}=this;let{width:n,height:i}=y(this,us);const[o,c]=this.pageDimensions,d=.75;if(this.width)n=this.width*o,i=this.height*c;else if(n>d*o||i>d*c){const b=Math.min(d*o/n,d*c/i);n*=b,i*=b}const[f,p]=this.parentDimensions;this.setDims(n*f/o,i*p/c),this._uiManager.enableWaiting(!1);const g=H(this,cr,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),$(this,ve,wy).call(this,n,i),$(this,ve,ME).call(this),y(this,mu)||(this.parent.addUndoableEditor(this),H(this,mu,!0)),this._reportTelemetry({action:"inserted_image"}),y(this,pu)&&g.setAttribute("aria-label",y(this,pu))},PE=function(e,n){var d;const[i,o]=this.parentDimensions;this.width=e/i,this.height=n/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,y(this,ur)!==null&&clearTimeout(y(this,ur)),H(this,ur,setTimeout(()=>{H(this,ur,null),$(this,ve,wy).call(this,e,n)},200))},xp=function(e,n){const{width:i,height:o}=y(this,us);let c=i,d=o,f=y(this,us);for(;c>2*e||d>2*n;){const p=c,g=d;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const b=new OffscreenCanvas(c,d);b.getContext("2d").drawImage(f,0,0,p,g,0,0,c,d),f=b.transferToImageBitmap()}return f},wy=function(e,n){const i=new OutputScale,o=Math.ceil(e*i.sx),c=Math.ceil(n*i.sy),d=y(this,cr);if(!d||d.width===o&&d.height===c)return;d.width=o,d.height=c;const f=y(this,$n)?y(this,us):$(this,ve,xp).call(this,o,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,o,c)},bp=function(e){if(e){if(y(this,$n)){const o=this._uiManager.imageManager.getSvgUrl(y(this,Js));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=y(this,us),n.getContext("2d").drawImage(y(this,us),0,0),n.toDataURL()}if(y(this,$n)){const[n,i]=this.pageDimensions,o=Math.round(this.width*n*PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*i*PixelsPerInch.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(o,c);return d.getContext("2d").drawImage(y(this,us),0,0,y(this,us).width,y(this,us).height,0,0,o,c),d.transferToImageBitmap()}return structuredClone(y(this,us))},ME=function(){this._uiManager._signal&&(H(this,Qr,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&$(this,ve,PE).call(this,n.width,n.height)})),y(this,Qr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=y(this,Qr))==null||e.disconnect(),H(this,Qr,null)},{once:!0}))},jE=function(e){var p;const{rect:n,pageIndex:i,accessibilityData:{altText:o}}=this._initialData,c=e.rect.every((g,b)=>Math.abs(g-n[b])<1),d=e.pageIndex===i,f=(((p=e.accessibilityData)==null?void 0:p.alt)||"")===o;return{isSame:c&&d&&f,isSameAltText:f}},Jt(Rh,"_type","stamp"),Jt(Rh,"_editorType",AnnotationEditorType.STAMP);let StampEditor=Rh;var jl,gu,hr,no,Jr,Gn,io,yu,vu,cn,ta,Ut,ro,tn,NE,Ty,Cy,ky,Ep;const bi=class bi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:c,drawLayer:d,textLayer:f,viewport:p,l10n:g}){q(this,tn);q(this,jl);q(this,gu,!1);q(this,hr,null);q(this,no,null);q(this,Jr,null);q(this,Gn,new Map);q(this,io,!1);q(this,yu,!1);q(this,vu,!1);q(this,cn,null);q(this,ta,null);q(this,Ut);const b=[...y(bi,ro).values()];if(!bi._initialized){bi._initialized=!0;for(const x of b)x.initialize(g,t)}t.registerEditorTypes(b),H(this,Ut,t),this.pageIndex=e,this.div=n,H(this,jl,o),H(this,hr,c),this.viewport=p,H(this,cn,f),this.drawLayer=d,this._structTree=i,y(this,Ut).addLayer(this)}get isEmpty(){return y(this,Gn).size===0}get isInvisible(){return this.isEmpty&&y(this,Ut).getMode()===AnnotationEditorType.NONE}updateToolbar(t){y(this,Ut).updateToolbar(t)}updateMode(t=y(this,Ut).getMode()){switch($(this,tn,Ep).call(this),t){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of y(bi,ro).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=y(this,cn))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(y(this,Ut).getMode()!==AnnotationEditorType.INK)return;if(!t){for(const n of y(this,Gn).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){y(this,Ut).setEditingState(t)}addCommands(t){y(this,Ut).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=y(this,hr))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of y(this,Gn).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(y(this,Ut).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!y(this,hr))return;const e=y(this,hr).getEditableAnnotations();for(const n of e){if(n.hide(),y(this,Ut).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){var i;H(this,vu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of y(this,Gn).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(i=this.getEditableAnnotation(o.annotationElementId))==null||i.show(),o.remove()}if(y(this,hr)){const o=y(this,hr).getEditableAnnotations();for(const c of o){const{id:d}=c.data;if(y(this,Ut).isDeletedAnnotationElement(d))continue;let f=e.get(d);if(f){f.resetAnnotationElement(c),f.show(!1),c.show();continue}f=t.get(d),f&&(y(this,Ut).addChangedExistingAnnotation(f),f.renderAnnotationElement(c)&&f.show(!1)),c.show()}}$(this,tn,Ep).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of y(bi,ro).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),H(this,vu,!1)}getEditableAnnotation(t){var e;return((e=y(this,hr))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){y(this,Ut).getActive()!==t&&y(this,Ut).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=y(this,cn))!=null&&t.div&&!y(this,ta)){H(this,ta,new AbortController);const e=y(this,Ut).combinedSignal(y(this,ta));y(this,cn).div.addEventListener("pointerdown",$(this,tn,NE).bind(this),{signal:e}),y(this,cn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=y(this,cn))!=null&&t.div&&y(this,ta)&&(y(this,ta).abort(),H(this,ta,null),y(this,cn).div.classList.remove("highlighting"))}enableClick(){if(y(this,no))return;H(this,no,new AbortController);const t=y(this,Ut).combinedSignal(y(this,no));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=y(this,no))==null||t.abort(),H(this,no,null)}attach(t){y(this,Gn).set(t.id,t);const{annotationElementId:e}=t;e&&y(this,Ut).isDeletedAnnotationElement(e)&&y(this,Ut).removeDeletedAnnotationElement(t)}detach(t){var e;y(this,Gn).delete(t.id),(e=y(this,jl))==null||e.removePointerInTextLayer(t.contentDiv),!y(this,vu)&&t.annotationElementId&&y(this,Ut).addDeletedAnnotationElement(t)}remove(t){this.detach(t),y(this,Ut).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,y(this,yu)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(y(this,Ut).addDeletedAnnotationElement(t.annotationElementId),AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),y(this,Ut).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),y(this,Ut).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!y(this,Jr)&&(t._focusEventsAllowed=!1,H(this,Jr,setTimeout(()=>{H(this,Jr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:y(this,Ut)._signal}),e.focus())},0))),t._structTreeParentId=(n=y(this,jl))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return y(this,Ut).getId()}combinedSignal(t){return y(this,Ut).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=y(this,tn,Ty))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){y(this,Ut).updateToolbar(t),y(this,Ut).updateMode(t);const{offsetX:n,offsetY:i}=$(this,tn,ky).call(this),o=this.getNextId(),c=$(this,tn,Cy).call(this,{parent:this,id:o,x:n,y:i,uiManager:y(this,Ut),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=y(bi,ro).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,y(this,Ut)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),o=$(this,tn,Cy).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:y(this,Ut),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor($(this,tn,ky).call(this),!0)}setSelected(t){y(this,Ut).setSelected(t)}toggleSelected(t){y(this,Ut).toggleSelected(t)}unselect(t){y(this,Ut).unselect(t)}pointerup(t){const{isMac:e}=util_FeatureTest.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&y(this,io)){if(H(this,io,!1),!y(this,gu)){H(this,gu,!0);return}if(y(this,Ut).getMode()===AnnotationEditorType.STAMP){y(this,Ut).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(y(this,Ut).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),y(this,io)){H(this,io,!1);return}const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;H(this,io,!0);const n=y(this,Ut).getActive();H(this,gu,!n||n.isEmpty())}findNewParent(t,e,n){const i=y(this,Ut).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}destroy(){var t,e;((t=y(this,Ut).getActive())==null?void 0:t.parent)===this&&(y(this,Ut).commitOrRemove(),y(this,Ut).setActiveEditor(null)),y(this,Jr)&&(clearTimeout(y(this,Jr)),H(this,Jr,null));for(const n of y(this,Gn).values())(e=y(this,jl))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,y(this,Gn).clear(),y(this,Ut).removeLayer(this)}render({viewport:t}){this.viewport=t,setLayerDimensions(this.div,t);for(const e of y(this,Ut).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){y(this,Ut).commitOrRemove(),$(this,tn,Ep).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,setLayerDimensions(this.div,{rotation:n}),e!==n)for(const i of y(this,Gn).values())i.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return y(this,Ut).viewParameters.realScale}};jl=new WeakMap,gu=new WeakMap,hr=new WeakMap,no=new WeakMap,Jr=new WeakMap,Gn=new WeakMap,io=new WeakMap,yu=new WeakMap,vu=new WeakMap,cn=new WeakMap,ta=new WeakMap,Ut=new WeakMap,ro=new WeakMap,tn=new WeakSet,NE=function(t){y(this,Ut).unselectAll();const{target:e}=t;if(e===y(this,cn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&y(this,cn).div.contains(e)){const{isMac:n}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&n)return;y(this,Ut).showAllEditors("highlight",!0,!0),y(this,cn).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,y(this,Ut).direction==="ltr",{target:y(this,cn).div,x:t.x,y:t.y}),y(this,cn).div.addEventListener("pointerup",()=>{y(this,cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:y(this,Ut)._signal}),t.preventDefault()}},Ty=function(){return y(bi,ro).get(y(this,Ut).getMode())},Cy=function(t){const e=y(this,tn,Ty);return e?new e.prototype.constructor(t):null},ky=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,e),d=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+i),p=(o+d)/2-t,g=(c+f)/2-e,[b,x]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:b,offsetY:x}},Ep=function(){H(this,yu,!0);for(const t of y(this,Gn).values())t.isEmpty()&&t.remove();H(this,yu,!1)},Jt(bi,"_initialized",!1),q(bi,ro,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(t=>[t._editorType,t])));let AnnotationEditorLayer=bi;var dr,Bd,As,ea,Hd,Py,Ll,My,LE;const Ks=class Ks{constructor({pageIndex:t}){q(this,Ll);q(this,dr,null);q(this,Bd,0);q(this,As,new Map);q(this,ea,new Map);this.pageIndex=t}setParent(t){if(!y(this,dr)){H(this,dr,t);return}if(y(this,dr)!==t){if(y(this,As).size>0)for(const e of y(this,As).values())e.remove(),t.append(e);H(this,dr,t)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(t,e,n,i=!1){const o=gn(this,Bd)._++,c=$(this,Ll,My).call(this,t.box);c.classList.add(...t.classNamesForDrawing);const d=Ks._svgFactory.createElement("defs");c.append(d);const f=Ks._svgFactory.createElement("path");d.append(f);const p=`path_p${this.pageIndex}_${o}`;f.setAttribute("id",p),f.setAttribute("d",t.toSVGPath()),i&&y(this,ea).set(o,f);const g=$(this,Ll,LE).call(this,d,p),b=Ks._svgFactory.createElement("use");return c.append(b),c.setAttribute("fill",e),c.setAttribute("fill-opacity",n),b.setAttribute("href",`#${p}`),y(this,As).set(o,c),{id:o,clipPathId:`url(#${g})`}}drawOutline(t){const e=gn(this,Bd)._++,n=$(this,Ll,My).call(this,t.box);n.classList.add(...t.classNamesForOutlining);const i=Ks._svgFactory.createElement("defs");n.append(i);const o=Ks._svgFactory.createElement("path");i.append(o);const c=`path_p${this.pageIndex}_${e}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t.mustRemoveSelfIntersections){const g=Ks._svgFactory.createElement("mask");i.append(g),d=`mask_p${this.pageIndex}_${e}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const b=Ks._svgFactory.createElement("rect");g.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const x=Ks._svgFactory.createElement("use");g.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const f=Ks._svgFactory.createElement("use");n.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return n.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),y(this,As).set(e,n),e}finalizeLine(t,e){const n=y(this,ea).get(t);y(this,ea).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){y(this,As).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){y(this,ea).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;$(n=Ks,Hd,Py).call(n,y(this,As).get(t),e)}show(t,e){y(this,As).get(t).classList.toggle("hidden",!e)}rotate(t,e){y(this,As).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){y(this,As).get(t).setAttribute("fill",e)}changeOpacity(t,e){y(this,As).get(t).setAttribute("fill-opacity",e)}addClass(t,e){y(this,As).get(t).classList.add(e)}removeClass(t,e){y(this,As).get(t).classList.remove(e)}getSVGRoot(t){return y(this,As).get(t)}remove(t){y(this,ea).delete(t),y(this,dr)!==null&&(y(this,As).get(t).remove(),y(this,As).delete(t))}destroy(){H(this,dr,null);for(const t of y(this,As).values())t.remove();y(this,As).clear(),y(this,ea).clear()}};dr=new WeakMap,Bd=new WeakMap,As=new WeakMap,ea=new WeakMap,Hd=new WeakSet,Py=function(t,{x:e=0,y:n=0,width:i=1,height:o=1}={}){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*i}%`,c.height=`${100*o}%`},Ll=new WeakSet,My=function(t){var n;const e=Ks._svgFactory.create(1,1,!0);return y(this,dr).append(e),e.setAttribute("aria-hidden",!0),$(n=Ks,Hd,Py).call(n,e,t),e},LE=function(t,e){const n=Ks._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Ks._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),i},q(Ks,Hd);let DrawLayer=Ks;var __webpack_exports__AbortException=__webpack_exports__.AbortException,__webpack_exports__AnnotationEditorLayer=__webpack_exports__.AnnotationEditorLayer,__webpack_exports__AnnotationEditorParamsType=__webpack_exports__.AnnotationEditorParamsType,__webpack_exports__AnnotationEditorType=__webpack_exports__.AnnotationEditorType,__webpack_exports__AnnotationEditorUIManager=__webpack_exports__.AnnotationEditorUIManager,__webpack_exports__AnnotationLayer=__webpack_exports__.AnnotationLayer,__webpack_exports__AnnotationMode=__webpack_exports__.AnnotationMode,__webpack_exports__ColorPicker=__webpack_exports__.ColorPicker,__webpack_exports__DOMSVGFactory=__webpack_exports__.DOMSVGFactory,__webpack_exports__DrawLayer=__webpack_exports__.DrawLayer,__webpack_exports__FeatureTest=__webpack_exports__.FeatureTest,__webpack_exports__GlobalWorkerOptions=__webpack_exports__.GlobalWorkerOptions,__webpack_exports__ImageKind=__webpack_exports__.ImageKind,__webpack_exports__InvalidPDFException=__webpack_exports__.InvalidPDFException,__webpack_exports__MissingPDFException=__webpack_exports__.MissingPDFException,__webpack_exports__OPS=__webpack_exports__.OPS,__webpack_exports__OutputScale=__webpack_exports__.OutputScale,__webpack_exports__PDFDataRangeTransport=__webpack_exports__.PDFDataRangeTransport,__webpack_exports__PDFDateString=__webpack_exports__.PDFDateString,__webpack_exports__PDFWorker=__webpack_exports__.PDFWorker,__webpack_exports__PasswordResponses=__webpack_exports__.PasswordResponses,__webpack_exports__PermissionFlag=__webpack_exports__.PermissionFlag,__webpack_exports__PixelsPerInch=__webpack_exports__.PixelsPerInch,__webpack_exports__RenderingCancelledException=__webpack_exports__.RenderingCancelledException,__webpack_exports__TextLayer=__webpack_exports__.TextLayer,__webpack_exports__UnexpectedResponseException=__webpack_exports__.UnexpectedResponseException,__webpack_exports__Util=__webpack_exports__.Util,__webpack_exports__VerbosityLevel=__webpack_exports__.VerbosityLevel,__webpack_exports__XfaLayer=__webpack_exports__.XfaLayer,__webpack_exports__build=__webpack_exports__.build,__webpack_exports__createValidAbsoluteUrl=__webpack_exports__.createValidAbsoluteUrl,__webpack_exports__fetchData=__webpack_exports__.fetchData,__webpack_exports__getDocument=__webpack_exports__.getDocument,__webpack_exports__getFilenameFromUrl=__webpack_exports__.getFilenameFromUrl,__webpack_exports__getPdfFilenameFromUrl=__webpack_exports__.getPdfFilenameFromUrl,__webpack_exports__getXfaPageViewport=__webpack_exports__.getXfaPageViewport,__webpack_exports__isDataScheme=__webpack_exports__.isDataScheme,__webpack_exports__isPdfFile=__webpack_exports__.isPdfFile,__webpack_exports__noContextMenu=__webpack_exports__.noContextMenu,__webpack_exports__normalizeUnicode=__webpack_exports__.normalizeUnicode,__webpack_exports__setLayerDimensions=__webpack_exports__.setLayerDimensions,__webpack_exports__shadow=__webpack_exports__.shadow,__webpack_exports__version=__webpack_exports__.version;const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException:__webpack_exports__AbortException,AnnotationEditorLayer:__webpack_exports__AnnotationEditorLayer,AnnotationEditorParamsType:__webpack_exports__AnnotationEditorParamsType,AnnotationEditorType:__webpack_exports__AnnotationEditorType,AnnotationEditorUIManager:__webpack_exports__AnnotationEditorUIManager,AnnotationLayer:__webpack_exports__AnnotationLayer,AnnotationMode:__webpack_exports__AnnotationMode,ColorPicker:__webpack_exports__ColorPicker,DOMSVGFactory:__webpack_exports__DOMSVGFactory,DrawLayer:__webpack_exports__DrawLayer,FeatureTest:__webpack_exports__FeatureTest,GlobalWorkerOptions:__webpack_exports__GlobalWorkerOptions,ImageKind:__webpack_exports__ImageKind,InvalidPDFException:__webpack_exports__InvalidPDFException,MissingPDFException:__webpack_exports__MissingPDFException,OPS:__webpack_exports__OPS,OutputScale:__webpack_exports__OutputScale,PDFDataRangeTransport:__webpack_exports__PDFDataRangeTransport,PDFDateString:__webpack_exports__PDFDateString,PDFWorker:__webpack_exports__PDFWorker,PasswordResponses:__webpack_exports__PasswordResponses,PermissionFlag:__webpack_exports__PermissionFlag,PixelsPerInch:__webpack_exports__PixelsPerInch,RenderingCancelledException:__webpack_exports__RenderingCancelledException,TextLayer:__webpack_exports__TextLayer,UnexpectedResponseException:__webpack_exports__UnexpectedResponseException,Util:__webpack_exports__Util,VerbosityLevel:__webpack_exports__VerbosityLevel,XfaLayer:__webpack_exports__XfaLayer,build:__webpack_exports__build,createValidAbsoluteUrl:__webpack_exports__createValidAbsoluteUrl,fetchData:__webpack_exports__fetchData,getDocument:__webpack_exports__getDocument,getFilenameFromUrl:__webpack_exports__getFilenameFromUrl,getPdfFilenameFromUrl:__webpack_exports__getPdfFilenameFromUrl,getXfaPageViewport:__webpack_exports__getXfaPageViewport,isDataScheme:__webpack_exports__isDataScheme,isPdfFile:__webpack_exports__isPdfFile,noContextMenu:__webpack_exports__noContextMenu,normalizeUnicode:__webpack_exports__normalizeUnicode,setLayerDimensions:__webpack_exports__setLayerDimensions,shadow:__webpack_exports__shadow,version:__webpack_exports__version},Symbol.toStringTag,{value:"Module"}));var __spreadArray=function(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(s,t){var e={};return allEvents.forEach(function(n){var i=s[n];i&&(t?e[n]=function(o){return i(o,t(n))}:e[n]=i)}),e}function makeCancellablePromise(s){var t=!1,e=new Promise(function(n,i){s.then(function(o){return!t&&n(o)}).catch(function(o){return!t&&i(o)})});return{promise:e,cancel:function(){t=!0}}}function r(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(e=r(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function clsx(){for(var s,t,e=0,n="",i=arguments.length;e<i;e++)(s=arguments[e])&&(t=r(s))&&(n&&(n+=" "),n+=t);return n}var prefix="Invariant failed";function invariant(s,t){if(!s)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var s=function(){};return warning_1=s,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports);var has=Object.prototype.hasOwnProperty;function find(s,t,e){for(e of s.keys())if(dequal(e,t))return e}function dequal(s,t){var e,n,i;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&dequal(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=find(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=find(t,i),!i)||!dequal(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(has.call(s,e)&&++n&&!has.call(t,e)||!(e in t)||!dequal(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}const documentContext=reactExports.createContext(null);function Message({children:s,type:t}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{invariant(this.pdfDocument),invariant(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{invariant(Array.isArray(e));const n=e[0];new Promise(i=>{invariant(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{i(o)}).catch(()=>{invariant(!1)}):typeof n=="number"?i(n):invariant(!1)}).then(i=>{const o=i+1;invariant(this.pdfViewer),invariant(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;invariant(this.pdfViewer),invariant(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(s){return typeof s<"u"}function isProvided(s){return isDefined(s)&&s!==null}function isString(s){return typeof s=="string"}function isArrayBuffer(s){return s instanceof ArrayBuffer}function isBlob(s){return invariant(isBrowser),s instanceof Blob}function isDataURI(s){return isString(s)&&/^data:/.test(s)}function dataURItoByteString(s){invariant(isDataURI(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(s){s!=null&&s.cancel&&s.cancel()}function makePageCallback(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function isCancelException(s){return s.name==="RenderingCancelledException"}function loadFromFile(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:o}=i.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}function reducer(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=function(s,t,e,n){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return new(e||(e=Promise))(function(o,c){function d(g){try{p(n.next(g))}catch(b){c(b)}}function f(g){try{p(n.throw(g))}catch(b){c(b)}}function p(g){g.done?o(g.value):i(g.value).then(d,f)}p((n=n.apply(s,t||[])).next())})},__rest$1=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(s,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case PasswordResponses.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function isParameterObject(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const Document=reactExports.forwardRef(function s(t,e){var{children:n,className:i,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:d,file:f,inputRef:p,imageResourcesPath:g,loading:b="Loading PDF…",noData:x="No PDF file specified.",onItemClick:A,onLoadError:_,onLoadProgress:R,onLoadSuccess:P,onPassword:E=defaultOnPassword,onSourceError:T,onSourceSuccess:C,options:M,renderMode:j,rotate:L}=t,O=__rest$1(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[V,X]=useResolver(),{value:tt,error:Y}=V,[Q,ct]=useResolver(),{value:nt,error:J}=Q,D=reactExports.useRef(new LinkService),U=reactExports.useRef([]),N=reactExports.useRef(void 0),I=reactExports.useRef(void 0);f&&f!==N.current&&isParameterObject(f)&&(warning(!dequal(f,N.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),N.current=f),M&&M!==I.current&&(warning(!dequal(M,I.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),I.current=M);const B=reactExports.useRef({scrollPageIntoView:jt=>{const{dest:bt,pageNumber:Ee,pageIndex:xe=Ee-1}=jt;if(A){A({dest:bt,pageIndex:xe,pageNumber:Ee});return}const Mt=U.current[xe];if(Mt){Mt.scrollIntoView();return}warning(!1,`An internal link leading to page ${Ee} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(e,()=>({linkService:D,pages:U,viewer:B}),[]);function z(){C&&C()}function K(){Y&&(warning(!1,Y.toString()),T&&T(Y))}function st(){X({type:"RESET"})}reactExports.useEffect(st,[f,X]);const ht=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!f)return null;if(typeof f=="string")return isDataURI(f)?{data:dataURItoByteString(f)}:(displayCORSWarning(),{url:f});if(f instanceof PDFDataRangeTransport)return{range:f};if(isArrayBuffer(f))return{data:f};if(isBrowser&&isBlob(f))return{data:yield loadFromFile(f)};if(invariant(typeof f=="object"),invariant(isParameterObject(f)),"url"in f&&typeof f.url=="string"){if(isDataURI(f.url)){const{url:jt}=f,bt=__rest$1(f,["url"]),Ee=dataURItoByteString(jt);return Object.assign({data:Ee},bt)}displayCORSWarning()}return f}),[f]);reactExports.useEffect(()=>{const jt=makeCancellablePromise(ht());return jt.promise.then(bt=>{X({type:"RESOLVE",value:bt})}).catch(bt=>{X({type:"REJECT",error:bt})}),()=>{cancelRunningTask(jt)}},[ht,X]),reactExports.useEffect(()=>{if(!(typeof tt>"u")){if(tt===!1){K();return}z()}},[tt]);function xt(){nt&&(P&&P(nt),U.current=new Array(nt.numPages),D.current.setDocument(nt))}function mt(){J&&(warning(!1,J.toString()),_&&_(J))}reactExports.useEffect(function(){ct({type:"RESET"})},[ct,tt]),reactExports.useEffect(function(){if(!tt)return;const bt=M?Object.assign(Object.assign({},tt),M):tt,Ee=__webpack_exports__getDocument(bt);R&&(Ee.onProgress=R),E&&(Ee.onPassword=E);const xe=Ee,Mt=xe.promise.then(is=>{ct({type:"RESOLVE",value:is})}).catch(is=>{xe.destroyed||ct({type:"REJECT",error:is})});return()=>{Mt.finally(()=>xe.destroy())}},[M,ct,tt]),reactExports.useEffect(()=>{if(!(typeof nt>"u")){if(nt===!1){mt();return}xt()}},[nt]),reactExports.useEffect(function(){D.current.setViewer(B.current),D.current.setExternalLinkRel(c),D.current.setExternalLinkTarget(d)},[c,d]);const Rt=reactExports.useCallback((jt,bt)=>{U.current[jt]=bt},[]),It=reactExports.useCallback(jt=>{delete U.current[jt]},[]),le=reactExports.useMemo(()=>({imageResourcesPath:g,linkService:D.current,onItemClick:A,pdf:nt,registerPage:Rt,renderMode:j,rotate:L,unregisterPage:It}),[g,A,nt,Rt,j,L,It]),Vt=reactExports.useMemo(()=>makeEventProps(O,()=>nt),[O,nt]);function ye(){return jsxRuntimeExports.jsx(documentContext.Provider,{value:le,children:n})}function Re(){return f?nt==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof b=="function"?b():b}):nt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof o=="function"?o():o}):ye():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof x=="function"?x():x})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",i),ref:p,style:{"--scale-factor":"1"}},Vt,{children:Re()}))});function useDocumentContext(){return reactExports.useContext(documentContext)}function mergeRefs(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){e.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const pageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(s){return s in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(s){return"children"in s}function isStructTreeNodeWithOnlyContentChild(s){return isStructTreeNode(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function getRoleAttributes(s){const t={};if(isStructTreeNode(s)){const{role:e}=s,n=e.match(HEADING_PATTERN);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(isPdfRole(e)){const i=PDF_ROLE_TO_HTML_ROLE[e];i&&(t.role=i)}}return t}function getBaseAttributes(s){const t={};if(isStructTreeNode(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),isStructTreeNodeWithOnlyContentChild(s)){const[e]=s.children;if(e){const n=getBaseAttributes(e);return Object.assign(Object.assign({},t),n)}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function getAttributes(s){return s?Object.assign(Object.assign({},getRoleAttributes(s)),getBaseAttributes(s)):null}function StructTreeItem({className:s,node:t}){const e=reactExports.useMemo(()=>getAttributes(t),[t]),n=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((i,o)=>jsxRuntimeExports.jsx(StructTreeItem,{node:i},o)),[t]);return jsxRuntimeExports.jsx("span",Object.assign({className:s},e,{children:n}))}function usePageContext(){return reactExports.useContext(pageContext)}function StructTree(){const s=usePageContext();invariant(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,i]=useResolver(),{value:o,error:c}=n,{customTextRenderer:d,page:f}=s;function p(){o&&e&&e(o)}function g(){c&&(warning(!1,c.toString()),t&&t(c))}return reactExports.useEffect(function(){i({type:"RESET"})},[i,f]),reactExports.useEffect(function(){if(d||!f)return;const x=makeCancellablePromise(f.getStructTree()),A=x;return x.promise.then(_=>{i({type:"RESOLVE",value:_})}).catch(_=>{i({type:"REJECT",error:_})}),()=>cancelRunningTask(A)},[d,f,i]),reactExports.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:o}):null}const ANNOTATION_MODE=__webpack_exports__AnnotationMode;function Canvas(s){const t=usePageContext();invariant(t);const e=Object.assign(Object.assign({},t),s),{_className:n,canvasBackground:i,devicePixelRatio:o=getDevicePixelRatio(),onRenderError:c,onRenderSuccess:d,page:f,renderForms:p,renderTextLayer:g,rotate:b,scale:x}=e,{canvasRef:A}=s;invariant(f);const _=reactExports.useRef(null);function R(){f&&d&&d(makePageCallback(f,x))}function P(M){isCancelException(M)||(warning(!1,M.toString()),c&&c(M))}const E=reactExports.useMemo(()=>f.getViewport({scale:x*o,rotation:b}),[o,f,b,x]),T=reactExports.useMemo(()=>f.getViewport({scale:x,rotation:b}),[f,b,x]);reactExports.useEffect(function(){if(!f)return;f.cleanup();const{current:j}=_;if(!j)return;j.width=E.width,j.height=E.height,j.style.width=`${Math.floor(T.width)}px`,j.style.height=`${Math.floor(T.height)}px`,j.style.visibility="hidden";const L={annotationMode:p?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:j.getContext("2d",{alpha:!1}),viewport:E};i&&(L.background=i);const O=f.render(L),V=O;return O.promise.then(()=>{j.style.visibility="",R()}).catch(P),()=>cancelRunningTask(V)},[i,f,p,E,T]);const C=reactExports.useCallback(()=>{const{current:M}=_;M&&(M.width=0,M.height=0)},[]);return reactExports.useEffect(()=>C,[C]),jsxRuntimeExports.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(A,_),style:{display:"block",userSelect:"none"},children:g?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(s){return"str"in s}function TextLayer(){const s=usePageContext();invariant(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:o,page:c,pageIndex:d,pageNumber:f,rotate:p,scale:g}=s;invariant(c);const[b,x]=useResolver(),{value:A,error:_}=b,R=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function P(){A&&n&&n(A)}function E(){_&&(warning(!1,_.toString()),e&&e(_))}reactExports.useEffect(function(){x({type:"RESET"})},[c,x]),reactExports.useEffect(function(){if(!c)return;const V=makeCancellablePromise(c.getTextContent()),X=V;return V.promise.then(tt=>{x({type:"RESOLVE",value:tt})}).catch(tt=>{x({type:"REJECT",error:tt})}),()=>cancelRunningTask(X)},[c,x]),reactExports.useEffect(()=>{if(A!==void 0){if(A===!1){E();return}P()}},[A]);const T=reactExports.useCallback(()=>{o&&o()},[o]),C=reactExports.useCallback(O=>{warning(!1,O.toString()),i&&i(O)},[i]);function M(){const O=R.current;O&&O.classList.add("selecting")}function j(){const O=R.current;O&&O.classList.remove("selecting")}const L=reactExports.useMemo(()=>c.getViewport({scale:g,rotation:p}),[c,p,g]);return reactExports.useLayoutEffect(function(){if(!c||!A)return;const{current:V}=R;if(!V)return;V.innerHTML="";const X=c.streamTextContent({includeMarkedContent:!0}),tt={container:V,textContentSource:X,viewport:L},Y=new __webpack_exports__TextLayer(tt),Q=Y;return Y.render().then(()=>{const ct=document.createElement("div");ct.className="endOfContent",V.append(ct);const nt=V.querySelectorAll('[role="presentation"]');if(t){let J=0;A.items.forEach((D,U)=>{if(!isTextItem(D))return;const N=nt[J];if(!N)return;const I=t(Object.assign({pageIndex:d,pageNumber:f,itemIndex:U},D));N.innerHTML=I,J+=D.str&&D.hasEOL?2:1})}T()}).catch(C),()=>cancelRunningTask(Q)},[t,C,T,c,d,f,A,L]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:M,ref:R})}function AnnotationLayer(){const s=useDocumentContext(),t=usePageContext();invariant(t);const e=Object.assign(Object.assign({},s),t),{imageResourcesPath:n,linkService:i,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:f,page:p,pdf:g,renderForms:b,rotate:x,scale:A=1}=e;invariant(g),invariant(p),invariant(i);const[_,R]=useResolver(),{value:P,error:E}=_,T=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){P&&c&&c(P)}function M(){E&&(warning(!1,E.toString()),o&&o(E))}reactExports.useEffect(function(){R({type:"RESET"})},[R,p]),reactExports.useEffect(function(){if(!p)return;const X=makeCancellablePromise(p.getAnnotations()),tt=X;return X.promise.then(Y=>{R({type:"RESOLVE",value:Y})}).catch(Y=>{R({type:"REJECT",error:Y})}),()=>{cancelRunningTask(tt)}},[R,p]),reactExports.useEffect(()=>{if(P!==void 0){if(P===!1){M();return}C()}},[P]);function j(){f&&f()}function L(V){warning(!1,`${V}`),d&&d(V)}const O=reactExports.useMemo(()=>p.getViewport({scale:A,rotation:x}),[p,x,A]);return reactExports.useEffect(function(){if(!g||!p||!i||!P)return;const{current:X}=T;if(!X)return;const tt=O.clone({dontFlip:!0}),Y={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:X,l10n:null,page:p,structTreeLayer:null,viewport:tt},Q={annotations:P,annotationStorage:g.annotationStorage,div:X,imageResourcesPath:n,linkService:i,page:p,renderForms:b,viewport:tt};X.innerHTML="";try{new __webpack_exports__AnnotationLayer(Y).render(Q),j()}catch(ct){L(ct)}return()=>{}},[P,n,i,p,g,b,O]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:T})}var __rest=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e};const defaultScale=1;function Page(s){const t=useDocumentContext(),e=Object.assign(Object.assign({},t),s),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:o,canvasRef:c,children:d,className:f,customRenderer:p,customTextRenderer:g,devicePixelRatio:b,error:x="Failed to load the page.",height:A,inputRef:_,loading:R="Loading page…",noData:P="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:M,onGetTextError:j,onGetTextSuccess:L,onLoadError:O,onLoadSuccess:V,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:tt,onRenderError:Y,onRenderSuccess:Q,onRenderTextLayerError:ct,onRenderTextLayerSuccess:nt,pageIndex:J,pageNumber:D,pdf:U,registerPage:N,renderAnnotationLayer:I=!0,renderForms:B=!1,renderMode:z="canvas",renderTextLayer:K=!0,rotate:st,scale:ht=defaultScale,unregisterPage:xt,width:mt}=e,Rt=__rest(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[It,le]=useResolver(),{value:Vt,error:ye}=It,Re=reactExports.useRef(null);invariant(U);const jt=isProvided(D)?D-1:J??null,bt=D??(isProvided(J)?J+1:null),Ee=st??(Vt?Vt.rotate:null),xe=reactExports.useMemo(()=>{if(!Vt)return null;let ae=1;const De=ht??defaultScale;if(mt||A){const we=Vt.getViewport({scale:1,rotation:Ee});mt?ae=mt/we.width:A&&(ae=A/we.height)}return De*ae},[A,Vt,Ee,ht,mt]);reactExports.useEffect(function(){return()=>{isProvided(jt)&&i&&xt&&xt(jt)}},[i,U,jt,xt]);function Mt(){if(V){if(!Vt||!xe)return;V(makePageCallback(Vt,xe))}if(i&&N){if(!isProvided(jt)||!Re.current)return;N(jt,Re.current)}}function is(){ye&&(warning(!1,ye.toString()),O&&O(ye))}reactExports.useEffect(function(){le({type:"RESET"})},[le,U,jt]),reactExports.useEffect(function(){if(!U||!bt)return;const De=makeCancellablePromise(U.getPage(bt)),we=De;return De.promise.then(ts=>{le({type:"RESOLVE",value:ts})}).catch(ts=>{le({type:"REJECT",error:ts})}),()=>cancelRunningTask(we)},[le,U,bt]),reactExports.useEffect(()=>{if(Vt!==void 0){if(Vt===!1){is();return}Mt()}},[Vt,xe]);const gs=reactExports.useMemo(()=>Vt&&isProvided(jt)&&bt&&isProvided(Ee)&&isProvided(xe)?{_className:n,canvasBackground:o,customTextRenderer:g,devicePixelRatio:b,onGetAnnotationsError:E,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:M,onGetTextError:j,onGetTextSuccess:L,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:tt,onRenderError:Y,onRenderSuccess:Q,onRenderTextLayerError:ct,onRenderTextLayerSuccess:nt,page:Vt,pageIndex:jt,pageNumber:bt,renderForms:B,renderTextLayer:K,rotate:Ee,scale:xe}:null,[n,o,g,b,E,T,C,M,j,L,X,tt,Y,Q,ct,nt,Vt,jt,bt,B,K,Ee,xe]),Ke=reactExports.useMemo(()=>makeEventProps(Rt,()=>Vt&&(xe?makePageCallback(Vt,xe):void 0)),[Rt,Vt,xe]),ee=`${jt}@${xe}/${Ee}`;function Ls(){switch(z){case"custom":return invariant(p),jsxRuntimeExports.jsx(p,{},`${ee}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:c},`${ee}_canvas`)}}function Ge(){return K?jsxRuntimeExports.jsx(TextLayer,{},`${ee}_text`):null}function Je(){return I?jsxRuntimeExports.jsx(AnnotationLayer,{},`${ee}_annotations`):null}function Ds(){return jsxRuntimeExports.jsxs(pageContext.Provider,{value:gs,children:[Ls(),Ge(),Je(),d]})}function be(){return bt?U===null||Vt===void 0||Vt===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof R=="function"?R():R}):U===!1||Vt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof x=="function"?x():x}):Ds():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof P=="function"?P():P})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(n,f),"data-page-number":bt,ref:mergeRefs(_,Re),style:{"--scale-factor":`${xe}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Ke,{children:be()}))}displayWorkerWarning();__webpack_exports__GlobalWorkerOptions.workerSrc="pdf.worker.mjs";function _objectWithoutPropertiesLoose(s,t){if(s==null)return{};var e={};for(var n in s)if({}.hasOwnProperty.call(s,n)){if(t.indexOf(n)!==-1)continue;e[n]=s[n]}return e}function _objectWithoutProperties(s,t){if(s==null)return{};var e,n,i=_objectWithoutPropertiesLoose(s,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(s,e)&&(i[e]=s[e])}return i}function _arrayLikeToArray(s,t){(t==null||t>s.length)&&(t=s.length);for(var e=0,n=Array(t);e<t;e++)n[e]=s[e];return n}function _arrayWithoutHoles(s){if(Array.isArray(s))return _arrayLikeToArray(s)}function _iterableToArray(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function _unsupportedIterableToArray(s,t){if(s){if(typeof s=="string")return _arrayLikeToArray(s,t);var e={}.toString.call(s).slice(8,-1);return e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set"?Array.from(s):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(s,t):void 0}}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_unsupportedIterableToArray(s)||_nonIterableSpread()}function _typeof(s){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(s)}function toPrimitive(s,t){if(_typeof(s)!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t);if(_typeof(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function toPropertyKey(s){var t=toPrimitive(s,"string");return _typeof(t)=="symbol"?t:t+""}function _defineProperty(s,t,e){return(t=toPropertyKey(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},_extends.apply(null,arguments)}function ownKeys$1(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,n)}return e}function _objectSpread$1(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(e),!0).forEach(function(n){_defineProperty(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys$1(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function powerSetPermutations(s){var t=s.length;if(t===0||t===1)return s;if(t===2)return[s[0],s[1],"".concat(s[0],".").concat(s[1]),"".concat(s[1],".").concat(s[0])];if(t===3)return[s[0],s[1],s[2],"".concat(s[0],".").concat(s[1]),"".concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[0]),"".concat(s[1],".").concat(s[2]),"".concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[1]),"".concat(s[0],".").concat(s[1],".").concat(s[2]),"".concat(s[0],".").concat(s[2],".").concat(s[1]),"".concat(s[1],".").concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[0],".").concat(s[1]),"".concat(s[2],".").concat(s[1],".").concat(s[0])];if(t>=4)return[s[0],s[1],s[2],s[3],"".concat(s[0],".").concat(s[1]),"".concat(s[0],".").concat(s[2]),"".concat(s[0],".").concat(s[3]),"".concat(s[1],".").concat(s[0]),"".concat(s[1],".").concat(s[2]),"".concat(s[1],".").concat(s[3]),"".concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[1]),"".concat(s[2],".").concat(s[3]),"".concat(s[3],".").concat(s[0]),"".concat(s[3],".").concat(s[1]),"".concat(s[3],".").concat(s[2]),"".concat(s[0],".").concat(s[1],".").concat(s[2]),"".concat(s[0],".").concat(s[1],".").concat(s[3]),"".concat(s[0],".").concat(s[2],".").concat(s[1]),"".concat(s[0],".").concat(s[2],".").concat(s[3]),"".concat(s[0],".").concat(s[3],".").concat(s[1]),"".concat(s[0],".").concat(s[3],".").concat(s[2]),"".concat(s[1],".").concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[0],".").concat(s[3]),"".concat(s[1],".").concat(s[2],".").concat(s[0]),"".concat(s[1],".").concat(s[2],".").concat(s[3]),"".concat(s[1],".").concat(s[3],".").concat(s[0]),"".concat(s[1],".").concat(s[3],".").concat(s[2]),"".concat(s[2],".").concat(s[0],".").concat(s[1]),"".concat(s[2],".").concat(s[0],".").concat(s[3]),"".concat(s[2],".").concat(s[1],".").concat(s[0]),"".concat(s[2],".").concat(s[1],".").concat(s[3]),"".concat(s[2],".").concat(s[3],".").concat(s[0]),"".concat(s[2],".").concat(s[3],".").concat(s[1]),"".concat(s[3],".").concat(s[0],".").concat(s[1]),"".concat(s[3],".").concat(s[0],".").concat(s[2]),"".concat(s[3],".").concat(s[1],".").concat(s[0]),"".concat(s[3],".").concat(s[1],".").concat(s[2]),"".concat(s[3],".").concat(s[2],".").concat(s[0]),"".concat(s[3],".").concat(s[2],".").concat(s[1]),"".concat(s[0],".").concat(s[1],".").concat(s[2],".").concat(s[3]),"".concat(s[0],".").concat(s[1],".").concat(s[3],".").concat(s[2]),"".concat(s[0],".").concat(s[2],".").concat(s[1],".").concat(s[3]),"".concat(s[0],".").concat(s[2],".").concat(s[3],".").concat(s[1]),"".concat(s[0],".").concat(s[3],".").concat(s[1],".").concat(s[2]),"".concat(s[0],".").concat(s[3],".").concat(s[2],".").concat(s[1]),"".concat(s[1],".").concat(s[0],".").concat(s[2],".").concat(s[3]),"".concat(s[1],".").concat(s[0],".").concat(s[3],".").concat(s[2]),"".concat(s[1],".").concat(s[2],".").concat(s[0],".").concat(s[3]),"".concat(s[1],".").concat(s[2],".").concat(s[3],".").concat(s[0]),"".concat(s[1],".").concat(s[3],".").concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[3],".").concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[0],".").concat(s[1],".").concat(s[3]),"".concat(s[2],".").concat(s[0],".").concat(s[3],".").concat(s[1]),"".concat(s[2],".").concat(s[1],".").concat(s[0],".").concat(s[3]),"".concat(s[2],".").concat(s[1],".").concat(s[3],".").concat(s[0]),"".concat(s[2],".").concat(s[3],".").concat(s[0],".").concat(s[1]),"".concat(s[2],".").concat(s[3],".").concat(s[1],".").concat(s[0]),"".concat(s[3],".").concat(s[0],".").concat(s[1],".").concat(s[2]),"".concat(s[3],".").concat(s[0],".").concat(s[2],".").concat(s[1]),"".concat(s[3],".").concat(s[1],".").concat(s[0],".").concat(s[2]),"".concat(s[3],".").concat(s[1],".").concat(s[2],".").concat(s[0]),"".concat(s[3],".").concat(s[2],".").concat(s[0],".").concat(s[1]),"".concat(s[3],".").concat(s[2],".").concat(s[1],".").concat(s[0])]}var classNameCombinations={};function getClassNameCombinations(s){if(s.length===0||s.length===1)return s;var t=s.join(".");return classNameCombinations[t]||(classNameCombinations[t]=powerSetPermutations(s)),classNameCombinations[t]}function createStyleObject(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,n=s.filter(function(o){return o!=="token"}),i=getClassNameCombinations(n);return i.reduce(function(o,c){return _objectSpread$1(_objectSpread$1({},o),e[c])},t)}function createClassNameString(s){return s.join(" ")}function createChildren(s,t){var e=0;return function(n){return e+=1,n.map(function(i,o){return createElement({node:i,stylesheet:s,useInlineStyles:t,key:"code-segment-".concat(e,"-").concat(o)})})}}function createElement(s){var t=s.node,e=s.stylesheet,n=s.style,i=n===void 0?{}:n,o=s.useInlineStyles,c=s.key,d=t.properties,f=t.type,p=t.tagName,g=t.value;if(f==="text")return g;if(p){var b=createChildren(e,o),x;if(!o)x=_objectSpread$1(_objectSpread$1({},d),{},{className:createClassNameString(d.className)});else{var A=Object.keys(e).reduce(function(E,T){return T.split(".").forEach(function(C){E.includes(C)||E.push(C)}),E},[]),_=d.className&&d.className.includes("token")?["token"]:[],R=d.className&&_.concat(d.className.filter(function(E){return!A.includes(E)}));x=_objectSpread$1(_objectSpread$1({},d),{},{className:createClassNameString(R)||void 0,style:createStyleObject(d.className,Object.assign({},d.style,i),e)})}var P=b(t.children);return React.createElement(p,_extends({key:c},x),P)}}const checkForListedLanguage=function(s,t){var e=s.listLanguages();return e.indexOf(t)!==-1};var _excluded=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function ownKeys(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,n)}return e}function _objectSpread(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(e),!0).forEach(function(n){_defineProperty(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}var newLineRegex=/\n/g;function getNewLines(s){return s.match(newLineRegex)}function getAllLineNumbers(s){var t=s.lines,e=s.startingLineNumber,n=s.style;return t.map(function(i,o){var c=o+e;return React.createElement("span",{key:"line-".concat(o),className:"react-syntax-highlighter-line-number",style:typeof n=="function"?n(c):n},"".concat(c,`
`))})}function AllLineNumbers(s){var t=s.codeString,e=s.codeStyle,n=s.containerStyle,i=n===void 0?{float:"left",paddingRight:"10px"}:n,o=s.numberStyle,c=o===void 0?{}:o,d=s.startingLineNumber;return React.createElement("code",{style:Object.assign({},e,i)},getAllLineNumbers({lines:t.replace(/\n$/,"").split(`
`),style:c,startingLineNumber:d}))}function getEmWidthOfNumber(s){return"".concat(s.toString().length,".25em")}function getInlineLineNumber(s,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(s),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:s}]}}function assembleLineNumberStyles(s,t,e){var n={display:"inline-block",minWidth:getEmWidthOfNumber(e),paddingRight:"1em",textAlign:"right",userSelect:"none"},i=typeof s=="function"?s(t):s,o=_objectSpread(_objectSpread({},n),i);return o}function createLineElement(s){var t=s.children,e=s.lineNumber,n=s.lineNumberStyle,i=s.largestLineNumber,o=s.showInlineLineNumbers,c=s.lineProps,d=c===void 0?{}:c,f=s.className,p=f===void 0?[]:f,g=s.showLineNumbers,b=s.wrapLongLines,x=s.wrapLines,A=x===void 0?!1:x,_=A?_objectSpread({},typeof d=="function"?d(e):d):{};if(_.className=_.className?[].concat(_toConsumableArray(_.className.trim().split(/\s+/)),_toConsumableArray(p)):p,e&&o){var R=assembleLineNumberStyles(n,e,i);t.unshift(getInlineLineNumber(e,R))}return b&g&&(_.style=_objectSpread({display:"flex"},_.style)),{type:"element",tagName:"span",properties:_,children:t}}function flattenCodeTree(s){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=0;n<s.length;n++){var i=s[n];if(i.type==="text")e.push(createLineElement({children:[i],className:_toConsumableArray(new Set(t))}));else if(i.children){var o=t.concat(i.properties.className);flattenCodeTree(i.children,o).forEach(function(c){return e.push(c)})}}return e}function processLines(s,t,e,n,i,o,c,d,f){var p,g=flattenCodeTree(s.value),b=[],x=-1,A=0;function _(j,L){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return createLineElement({children:j,lineNumber:L,lineNumberStyle:d,largestLineNumber:c,showInlineLineNumbers:i,lineProps:e,className:O,showLineNumbers:n,wrapLongLines:f,wrapLines:t})}function R(j,L){if(n&&L&&i){var O=assembleLineNumberStyles(d,L,c);j.unshift(getInlineLineNumber(L,O))}return j}function P(j,L){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return t||O.length>0?_(j,L,O):R(j,L)}for(var E=function(){var L=g[A],O=L.children[0].value,V=getNewLines(O);if(V){var X=O.split(`
`);X.forEach(function(tt,Y){var Q=n&&b.length+o,ct={type:"text",value:"".concat(tt,`
`)};if(Y===0){var nt=g.slice(x+1,A).concat(createLineElement({children:[ct],className:L.properties.className})),J=P(nt,Q);b.push(J)}else if(Y===X.length-1){var D=g[A+1]&&g[A+1].children&&g[A+1].children[0],U={type:"text",value:"".concat(tt)};if(D){var N=createLineElement({children:[U],className:L.properties.className});g.splice(A+1,0,N)}else{var I=[U],B=P(I,Q,L.properties.className);b.push(B)}}else{var z=[ct],K=P(z,Q,L.properties.className);b.push(K)}}),x=A}A++};A<g.length;)E();if(x!==g.length-1){var T=g.slice(x+1,g.length);if(T&&T.length){var C=n&&b.length+o,M=P(T,C);b.push(M)}}return t?b:(p=[]).concat.apply(p,b)}function defaultRenderer(s){var t=s.rows,e=s.stylesheet,n=s.useInlineStyles;return t.map(function(i,o){return createElement({node:i,stylesheet:e,useInlineStyles:n,key:"code-segement".concat(o)})})}function isHighlightJs(s){return s&&typeof s.highlightAuto<"u"}function getCodeTree(s){var t=s.astGenerator,e=s.language,n=s.code,i=s.defaultCodeValue;if(isHighlightJs(t)){var o=checkForListedLanguage(t,e);return e==="text"?{value:i,language:"text"}:o?t.highlight(e,n):t.highlightAuto(n)}try{return e&&e!=="text"?{value:t.highlight(n,e)}:{value:i}}catch{return{value:i}}}function highlight(s,t){return function(n){var i=n.language,o=n.children,c=n.style,d=c===void 0?t:c,f=n.customStyle,p=f===void 0?{}:f,g=n.codeTagProps,b=g===void 0?{className:i?"language-".concat(i):void 0,style:_objectSpread(_objectSpread({},d['code[class*="language-"]']),d['code[class*="language-'.concat(i,'"]')])}:g,x=n.useInlineStyles,A=x===void 0?!0:x,_=n.showLineNumbers,R=_===void 0?!1:_,P=n.showInlineLineNumbers,E=P===void 0?!0:P,T=n.startingLineNumber,C=T===void 0?1:T,M=n.lineNumberContainerStyle,j=n.lineNumberStyle,L=j===void 0?{}:j,O=n.wrapLines,V=n.wrapLongLines,X=V===void 0?!1:V,tt=n.lineProps,Y=tt===void 0?{}:tt,Q=n.renderer,ct=n.PreTag,nt=ct===void 0?"pre":ct,J=n.CodeTag,D=J===void 0?"code":J,U=n.code,N=U===void 0?(Array.isArray(o)?o[0]:o)||"":U,I=n.astGenerator,B=_objectWithoutProperties(n,_excluded);I=I||s;var z=R?React.createElement(AllLineNumbers,{containerStyle:M,codeStyle:b.style||{},numberStyle:L,startingLineNumber:C,codeString:N}):null,K=d.hljs||d['pre[class*="language-"]']||{backgroundColor:"#fff"},st=isHighlightJs(I)?"hljs":"prismjs",ht=A?Object.assign({},B,{style:Object.assign({},K,p)}):Object.assign({},B,{className:B.className?"".concat(st," ").concat(B.className):st,style:Object.assign({},p)});if(X?b.style=_objectSpread({whiteSpace:"pre-wrap"},b.style):b.style=_objectSpread({whiteSpace:"pre"},b.style),!I)return React.createElement(nt,ht,z,React.createElement(D,b,N));(O===void 0&&Q||X)&&(O=!0),Q=Q||defaultRenderer;var xt=[{type:"text",value:N}],mt=getCodeTree({astGenerator:I,language:i,code:N,defaultCodeValue:xt});mt.language===null&&(mt.value=xt);var Rt=mt.value.length;Rt===1&&mt.value[0].type==="text"&&(Rt=mt.value[0].value.split(`
`).length);var It=Rt+C,le=processLines(mt,O,Y,R,E,C,It,L,X);return React.createElement(nt,ht,React.createElement(D,b,!E&&z,Q({rows:le,stylesheet:d,useInlineStyles:A})))}}var core$1={},core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;function s(at){return at instanceof Map?at.clear=at.delete=at.set=function(){throw new Error("map is read-only")}:at instanceof Set&&(at.add=at.clear=at.delete=function(){throw new Error("set is read-only")}),Object.freeze(at),Object.getOwnPropertyNames(at).forEach(function(ft){var Et=at[ft];typeof Et=="object"&&!Object.isFrozen(Et)&&s(Et)}),at}var t=s,e=s;t.default=e;class n{constructor(ft){ft.data===void 0&&(ft.data={}),this.data=ft.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function i(at){return at.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function o(at,...ft){const Et=Object.create(null);for(const Bt in at)Et[Bt]=at[Bt];return ft.forEach(function(Bt){for(const se in Bt)Et[se]=Bt[se]}),Et}const c="</span>",d=at=>!!at.kind;class f{constructor(ft,Et){this.buffer="",this.classPrefix=Et.classPrefix,ft.walk(this)}addText(ft){this.buffer+=i(ft)}openNode(ft){if(!d(ft))return;let Et=ft.kind;ft.sublanguage||(Et=`${this.classPrefix}${Et}`),this.span(Et)}closeNode(ft){d(ft)&&(this.buffer+=c)}value(){return this.buffer}span(ft){this.buffer+=`<span class="${ft}">`}}class p{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ft){this.top.children.push(ft)}openNode(ft){const Et={kind:ft,children:[]};this.add(Et),this.stack.push(Et)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ft){return this.constructor._walk(ft,this.rootNode)}static _walk(ft,Et){return typeof Et=="string"?ft.addText(Et):Et.children&&(ft.openNode(Et),Et.children.forEach(Bt=>this._walk(ft,Bt)),ft.closeNode(Et)),ft}static _collapse(ft){typeof ft!="string"&&ft.children&&(ft.children.every(Et=>typeof Et=="string")?ft.children=[ft.children.join("")]:ft.children.forEach(Et=>{p._collapse(Et)}))}}class g extends p{constructor(ft){super(),this.options=ft}addKeyword(ft,Et){ft!==""&&(this.openNode(Et),this.addText(ft),this.closeNode())}addText(ft){ft!==""&&this.add(ft)}addSublanguage(ft,Et){const Bt=ft.root;Bt.kind=Et,Bt.sublanguage=!0,this.add(Bt)}toHTML(){return new f(this,this.options).value()}finalize(){return!0}}function b(at){return new RegExp(at.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function x(at){return at?typeof at=="string"?at:at.source:null}function A(...at){return at.map(Et=>x(Et)).join("")}function _(...at){return"("+at.map(Et=>x(Et)).join("|")+")"}function R(at){return new RegExp(at.toString()+"|").exec("").length-1}function P(at,ft){const Et=at&&at.exec(ft);return Et&&Et.index===0}const E=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function T(at,ft="|"){let Et=0;return at.map(Bt=>{Et+=1;const se=Et;let ue=x(Bt),Xe="";for(;ue.length>0;){const Tt=E.exec(ue);if(!Tt){Xe+=ue;break}Xe+=ue.substring(0,Tt.index),ue=ue.substring(Tt.index+Tt[0].length),Tt[0][0]==="\\"&&Tt[1]?Xe+="\\"+String(Number(Tt[1])+se):(Xe+=Tt[0],Tt[0]==="("&&Et++)}return Xe}).map(Bt=>`(${Bt})`).join(ft)}const C=/\b\B/,M="[a-zA-Z]\\w*",j="[a-zA-Z_]\\w*",L="\\b\\d+(\\.\\d+)?",O="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",V="\\b(0b[01]+)",X="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",tt=(at={})=>{const ft=/^#![ ]*\//;return at.binary&&(at.begin=A(ft,/.*\b/,at.binary,/\b.*/)),o({className:"meta",begin:ft,end:/$/,relevance:0,"on:begin":(Et,Bt)=>{Et.index!==0&&Bt.ignoreMatch()}},at)},Y={begin:"\\\\[\\s\\S]",relevance:0},Q={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[Y]},ct={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[Y]},nt={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},J=function(at,ft,Et={}){const Bt=o({className:"comment",begin:at,end:ft,contains:[]},Et);return Bt.contains.push(nt),Bt.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),Bt},D=J("//","$"),U=J("/\\*","\\*/"),N=J("#","$"),I={className:"number",begin:L,relevance:0},B={className:"number",begin:O,relevance:0},z={className:"number",begin:V,relevance:0},K={className:"number",begin:L+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},st={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Y,{begin:/\[/,end:/\]/,relevance:0,contains:[Y]}]}]},ht={className:"title",begin:M,relevance:0},xt={className:"title",begin:j,relevance:0},mt={begin:"\\.\\s*"+j,relevance:0};var It=Object.freeze({__proto__:null,MATCH_NOTHING_RE:C,IDENT_RE:M,UNDERSCORE_IDENT_RE:j,NUMBER_RE:L,C_NUMBER_RE:O,BINARY_NUMBER_RE:V,RE_STARTERS_RE:X,SHEBANG:tt,BACKSLASH_ESCAPE:Y,APOS_STRING_MODE:Q,QUOTE_STRING_MODE:ct,PHRASAL_WORDS_MODE:nt,COMMENT:J,C_LINE_COMMENT_MODE:D,C_BLOCK_COMMENT_MODE:U,HASH_COMMENT_MODE:N,NUMBER_MODE:I,C_NUMBER_MODE:B,BINARY_NUMBER_MODE:z,CSS_NUMBER_MODE:K,REGEXP_MODE:st,TITLE_MODE:ht,UNDERSCORE_TITLE_MODE:xt,METHOD_GUARD:mt,END_SAME_AS_BEGIN:function(at){return Object.assign(at,{"on:begin":(ft,Et)=>{Et.data._beginMatch=ft[1]},"on:end":(ft,Et)=>{Et.data._beginMatch!==ft[1]&&Et.ignoreMatch()}})}});function le(at,ft){at.input[at.index-1]==="."&&ft.ignoreMatch()}function Vt(at,ft){ft&&at.beginKeywords&&(at.begin="\\b("+at.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",at.__beforeBegin=le,at.keywords=at.keywords||at.beginKeywords,delete at.beginKeywords,at.relevance===void 0&&(at.relevance=0))}function ye(at,ft){Array.isArray(at.illegal)&&(at.illegal=_(...at.illegal))}function Re(at,ft){if(at.match){if(at.begin||at.end)throw new Error("begin & end are not supported with match");at.begin=at.match,delete at.match}}function jt(at,ft){at.relevance===void 0&&(at.relevance=1)}const bt=["of","and","for","in","not","or","if","then","parent","list","value"],Ee="keyword";function xe(at,ft,Et=Ee){const Bt={};return typeof at=="string"?se(Et,at.split(" ")):Array.isArray(at)?se(Et,at):Object.keys(at).forEach(function(ue){Object.assign(Bt,xe(at[ue],ft,ue))}),Bt;function se(ue,Xe){ft&&(Xe=Xe.map(Tt=>Tt.toLowerCase())),Xe.forEach(function(Tt){const Dt=Tt.split("|");Bt[Dt[0]]=[ue,Mt(Dt[0],Dt[1])]})}}function Mt(at,ft){return ft?Number(ft):is(at)?0:1}function is(at){return bt.includes(at.toLowerCase())}function gs(at,{plugins:ft}){function Et(Tt,Dt){return new RegExp(x(Tt),"m"+(at.case_insensitive?"i":"")+(Dt?"g":""))}class Bt{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Dt,Gt){Gt.position=this.position++,this.matchIndexes[this.matchAt]=Gt,this.regexes.push([Gt,Dt]),this.matchAt+=R(Dt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Dt=this.regexes.map(Gt=>Gt[1]);this.matcherRe=Et(T(Dt),!0),this.lastIndex=0}exec(Dt){this.matcherRe.lastIndex=this.lastIndex;const Gt=this.matcherRe.exec(Dt);if(!Gt)return null;const qt=Gt.findIndex((vs,Pe)=>Pe>0&&vs!==void 0),ke=this.matchIndexes[qt];return Gt.splice(0,qt),Object.assign(Gt,ke)}}class se{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Dt){if(this.multiRegexes[Dt])return this.multiRegexes[Dt];const Gt=new Bt;return this.rules.slice(Dt).forEach(([qt,ke])=>Gt.addRule(qt,ke)),Gt.compile(),this.multiRegexes[Dt]=Gt,Gt}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Dt,Gt){this.rules.push([Dt,Gt]),Gt.type==="begin"&&this.count++}exec(Dt){const Gt=this.getMatcher(this.regexIndex);Gt.lastIndex=this.lastIndex;let qt=Gt.exec(Dt);if(this.resumingScanAtSamePosition()&&!(qt&&qt.index===this.lastIndex)){const ke=this.getMatcher(0);ke.lastIndex=this.lastIndex+1,qt=ke.exec(Dt)}return qt&&(this.regexIndex+=qt.position+1,this.regexIndex===this.count&&this.considerAll()),qt}}function ue(Tt){const Dt=new se;return Tt.contains.forEach(Gt=>Dt.addRule(Gt.begin,{rule:Gt,type:"begin"})),Tt.terminatorEnd&&Dt.addRule(Tt.terminatorEnd,{type:"end"}),Tt.illegal&&Dt.addRule(Tt.illegal,{type:"illegal"}),Dt}function Xe(Tt,Dt){const Gt=Tt;if(Tt.isCompiled)return Gt;[Re].forEach(ke=>ke(Tt,Dt)),at.compilerExtensions.forEach(ke=>ke(Tt,Dt)),Tt.__beforeBegin=null,[Vt,ye,jt].forEach(ke=>ke(Tt,Dt)),Tt.isCompiled=!0;let qt=null;if(typeof Tt.keywords=="object"&&(qt=Tt.keywords.$pattern,delete Tt.keywords.$pattern),Tt.keywords&&(Tt.keywords=xe(Tt.keywords,at.case_insensitive)),Tt.lexemes&&qt)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return qt=qt||Tt.lexemes||/\w+/,Gt.keywordPatternRe=Et(qt,!0),Dt&&(Tt.begin||(Tt.begin=/\B|\b/),Gt.beginRe=Et(Tt.begin),Tt.endSameAsBegin&&(Tt.end=Tt.begin),!Tt.end&&!Tt.endsWithParent&&(Tt.end=/\B|\b/),Tt.end&&(Gt.endRe=Et(Tt.end)),Gt.terminatorEnd=x(Tt.end)||"",Tt.endsWithParent&&Dt.terminatorEnd&&(Gt.terminatorEnd+=(Tt.end?"|":"")+Dt.terminatorEnd)),Tt.illegal&&(Gt.illegalRe=Et(Tt.illegal)),Tt.contains||(Tt.contains=[]),Tt.contains=[].concat(...Tt.contains.map(function(ke){return ee(ke==="self"?Tt:ke)})),Tt.contains.forEach(function(ke){Xe(ke,Gt)}),Tt.starts&&Xe(Tt.starts,Dt),Gt.matcher=ue(Gt),Gt}if(at.compilerExtensions||(at.compilerExtensions=[]),at.contains&&at.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return at.classNameAliases=o(at.classNameAliases||{}),Xe(at)}function Ke(at){return at?at.endsWithParent||Ke(at.starts):!1}function ee(at){return at.variants&&!at.cachedVariants&&(at.cachedVariants=at.variants.map(function(ft){return o(at,{variants:null},ft)})),at.cachedVariants?at.cachedVariants:Ke(at)?o(at,{starts:at.starts?o(at.starts):null}):Object.isFrozen(at)?o(at):at}var Ls="10.7.3";function Ge(at){return!!(at||at==="")}function Je(at){const ft={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!at.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,i(this.code);let Bt={};return this.autoDetect?(Bt=at.highlightAuto(this.code),this.detectedLanguage=Bt.language):(Bt=at.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),Bt.value},autoDetect(){return!this.language||Ge(this.autodetect)},ignoreIllegals(){return!0}},render(Bt){return Bt("pre",{},[Bt("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:ft,VuePlugin:{install(Bt){Bt.component("highlightjs",ft)}}}}const Ds={"after:highlightElement":({el:at,result:ft,text:Et})=>{const Bt=ae(at);if(!Bt.length)return;const se=document.createElement("div");se.innerHTML=ft.value,ft.value=De(Bt,ae(se),Et)}};function be(at){return at.nodeName.toLowerCase()}function ae(at){const ft=[];return function Et(Bt,se){for(let ue=Bt.firstChild;ue;ue=ue.nextSibling)ue.nodeType===3?se+=ue.nodeValue.length:ue.nodeType===1&&(ft.push({event:"start",offset:se,node:ue}),se=Et(ue,se),be(ue).match(/br|hr|img|input/)||ft.push({event:"stop",offset:se,node:ue}));return se}(at,0),ft}function De(at,ft,Et){let Bt=0,se="";const ue=[];function Xe(){return!at.length||!ft.length?at.length?at:ft:at[0].offset!==ft[0].offset?at[0].offset<ft[0].offset?at:ft:ft[0].event==="start"?at:ft}function Tt(qt){function ke(vs){return" "+vs.nodeName+'="'+i(vs.value)+'"'}se+="<"+be(qt)+[].map.call(qt.attributes,ke).join("")+">"}function Dt(qt){se+="</"+be(qt)+">"}function Gt(qt){(qt.event==="start"?Tt:Dt)(qt.node)}for(;at.length||ft.length;){let qt=Xe();if(se+=i(Et.substring(Bt,qt[0].offset)),Bt=qt[0].offset,qt===at){ue.reverse().forEach(Dt);do Gt(qt.splice(0,1)[0]),qt=Xe();while(qt===at&&qt.length&&qt[0].offset===Bt);ue.reverse().forEach(Tt)}else qt[0].event==="start"?ue.push(qt[0].node):ue.pop(),Gt(qt.splice(0,1)[0])}return se+i(Et.substr(Bt))}const we={},ts=at=>{console.error(at)},ws=(at,...ft)=>{console.log(`WARN: ${at}`,...ft)},Lt=(at,ft)=>{we[`${at}/${ft}`]||(console.log(`Deprecated as of ${at}. ${ft}`),we[`${at}/${ft}`]=!0)},ys=i,un=o,hn=Symbol("nomatch");var Fs=function(at){const ft=Object.create(null),Et=Object.create(null),Bt=[];let se=!0;const ue=/(^(<[^>]+>|\t|)+|\n)/gm,Xe="Could not find the language '{}', did you forget to load/include a language module?",Tt={disableAutodetect:!0,name:"Plain text",contains:[]};let Dt={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:g};function Gt(vt){return Dt.noHighlightRe.test(vt)}function qt(vt){let _t=vt.className+" ";_t+=vt.parentNode?vt.parentNode.className:"";const wt=Dt.languageDetectRe.exec(_t);if(wt){const Ae=dn(wt[1]);return Ae||(ws(Xe.replace("{}",wt[1])),ws("Falling back to no-highlight mode for this block.",vt)),Ae?wt[1]:"no-highlight"}return _t.split(/\s+/).find(Ae=>Gt(Ae)||dn(Ae))}function ke(vt,_t,wt,Ae){let es="",Wn="";typeof _t=="object"?(es=vt,wt=_t.ignoreIllegals,Wn=_t.language,Ae=void 0):(Lt("10.7.0","highlight(lang, code, ...args) has been deprecated."),Lt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Wn=vt,es=_t);const Ze={code:es,language:Wn};Yn("before:highlight",Ze);const fn=Ze.result?Ze.result:vs(Ze.language,Ze.code,wt,Ae);return fn.code=Ze.code,Yn("after:highlight",fn),fn}function vs(vt,_t,wt,Ae){function es(Ft,zt){const te=Kn.case_insensitive?zt[0].toLowerCase():zt[0];return Object.prototype.hasOwnProperty.call(Ft.keywords,te)&&Ft.keywords[te]}function Wn(){if(!ie.keywords){Ts.addText(Qe);return}let Ft=0;ie.keywordPatternRe.lastIndex=0;let zt=ie.keywordPatternRe.exec(Qe),te="";for(;zt;){te+=Qe.substring(Ft,zt.index);const pe=es(ie,zt);if(pe){const[as,gr]=pe;if(Ts.addText(te),te="",zi+=gr,as.startsWith("_"))te+=zt[0];else{const fo=Kn.classNameAliases[as]||as;Ts.addKeyword(zt[0],fo)}}else te+=zt[0];Ft=ie.keywordPatternRe.lastIndex,zt=ie.keywordPatternRe.exec(Qe)}te+=Qe.substr(Ft),Ts.addText(te)}function Ze(){if(Qe==="")return;let Ft=null;if(typeof ie.subLanguage=="string"){if(!ft[ie.subLanguage]){Ts.addText(Qe);return}Ft=vs(ie.subLanguage,Qe,!0,pi[ie.subLanguage]),pi[ie.subLanguage]=Ft.top}else Ft=rs(Qe,ie.subLanguage.length?ie.subLanguage:null);ie.relevance>0&&(zi+=Ft.relevance),Ts.addSublanguage(Ft.emitter,Ft.language)}function fn(){ie.subLanguage!=null?Ze():Wn(),Qe=""}function en(Ft){return Ft.className&&Ts.openNode(Kn.classNameAliases[Ft.className]||Ft.className),ie=Object.create(Ft,{parent:{value:ie}}),ie}function pn(Ft,zt,te){let pe=P(Ft.endRe,te);if(pe){if(Ft["on:end"]){const as=new n(Ft);Ft["on:end"](zt,as),as.isMatchIgnored&&(pe=!1)}if(pe){for(;Ft.endsParent&&Ft.parent;)Ft=Ft.parent;return Ft}}if(Ft.endsWithParent)return pn(Ft.parent,zt,te)}function Dl(Ft){return ie.matcher.regexIndex===0?(Qe+=Ft[0],1):(mi=!0,0)}function la(Ft){const zt=Ft[0],te=Ft.rule,pe=new n(te),as=[te.__beforeBegin,te["on:begin"]];for(const gr of as)if(gr&&(gr(Ft,pe),pe.isMatchIgnored))return Dl(zt);return te&&te.endSameAsBegin&&(te.endRe=b(zt)),te.skip?Qe+=zt:(te.excludeBegin&&(Qe+=zt),fn(),!te.returnBegin&&!te.excludeBegin&&(Qe=zt)),en(te),te.returnBegin?0:zt.length}function xu(Ft){const zt=Ft[0],te=_t.substr(Ft.index),pe=pn(ie,Ft,te);if(!pe)return hn;const as=ie;as.skip?Qe+=zt:(as.returnEnd||as.excludeEnd||(Qe+=zt),fn(),as.excludeEnd&&(Qe=zt));do ie.className&&Ts.closeNode(),!ie.skip&&!ie.subLanguage&&(zi+=ie.relevance),ie=ie.parent;while(ie!==pe.parent);return pe.starts&&(pe.endSameAsBegin&&(pe.starts.endRe=pe.endRe),en(pe.starts)),as.returnEnd?0:zt.length}function sn(){const Ft=[];for(let zt=ie;zt!==Kn;zt=zt.parent)zt.className&&Ft.unshift(zt.className);Ft.forEach(zt=>Ts.openNode(zt))}let fi={};function uo(Ft,zt){const te=zt&&zt[0];if(Qe+=Ft,te==null)return fn(),0;if(fi.type==="begin"&&zt.type==="end"&&fi.index===zt.index&&te===""){if(Qe+=_t.slice(zt.index,zt.index+1),!se){const pe=new Error("0 width match regex");throw pe.languageName=vt,pe.badRule=fi.rule,pe}return 1}if(fi=zt,zt.type==="begin")return la(zt);if(zt.type==="illegal"&&!wt){const pe=new Error('Illegal lexeme "'+te+'" for mode "'+(ie.className||"<unnamed>")+'"');throw pe.mode=ie,pe}else if(zt.type==="end"){const pe=xu(zt);if(pe!==hn)return pe}if(zt.type==="illegal"&&te==="")return 1;if(ho>1e5&&ho>zt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Qe+=te,te.length}const Kn=dn(vt);if(!Kn)throw ts(Xe.replace("{}",vt)),new Error('Unknown language: "'+vt+'"');const Hi=gs(Kn,{plugins:Bt});let ca="",ie=Ae||Hi;const pi={},Ts=new Dt.__emitter(Dt);sn();let Qe="",zi=0,Zn=0,ho=0,mi=!1;try{for(ie.matcher.considerAll();;){ho++,mi?mi=!1:ie.matcher.considerAll(),ie.matcher.lastIndex=Zn;const Ft=ie.matcher.exec(_t);if(!Ft)break;const zt=_t.substring(Zn,Ft.index),te=uo(zt,Ft);Zn=Ft.index+te}return uo(_t.substr(Zn)),Ts.closeAllNodes(),Ts.finalize(),ca=Ts.toHTML(),{relevance:Math.floor(zi),value:ca,language:vt,illegal:!1,emitter:Ts,top:ie}}catch(Ft){if(Ft.message&&Ft.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:Ft.message,context:_t.slice(Zn-100,Zn+100),mode:Ft.mode},sofar:ca,relevance:0,value:ys(_t),emitter:Ts};if(se)return{illegal:!1,relevance:0,value:ys(_t),emitter:Ts,language:vt,top:ie,errorRaised:Ft};throw Ft}}function Pe(vt){const _t={relevance:0,emitter:new Dt.__emitter(Dt),value:ys(vt),illegal:!1,top:Tt};return _t.emitter.addText(vt),_t}function rs(vt,_t){_t=_t||Dt.languages||Object.keys(ft);const wt=Pe(vt),Ae=_t.filter(dn).filter(oa).map(en=>vs(en,vt,!1));Ae.unshift(wt);const es=Ae.sort((en,pn)=>{if(en.relevance!==pn.relevance)return pn.relevance-en.relevance;if(en.language&&pn.language){if(dn(en.language).supersetOf===pn.language)return 1;if(dn(pn.language).supersetOf===en.language)return-1}return 0}),[Wn,Ze]=es,fn=Wn;return fn.second_best=Ze,fn}function Gs(vt){return Dt.tabReplace||Dt.useBR?vt.replace(ue,_t=>_t===`
`?Dt.useBR?"<br>":_t:Dt.tabReplace?_t.replace(/\t/g,Dt.tabReplace):_t):vt}function pr(vt,_t,wt){const Ae=_t?Et[_t]:wt;vt.classList.add("hljs"),Ae&&vt.classList.add(Ae)}const lo={"before:highlightElement":({el:vt})=>{Dt.useBR&&(vt.innerHTML=vt.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,`
`))},"after:highlightElement":({result:vt})=>{Dt.useBR&&(vt.value=vt.value.replace(/\n/g,"<br>"))}},Fi=/^(<[^>]+>|\t)+/gm,aa={"after:highlightElement":({result:vt})=>{Dt.tabReplace&&(vt.value=vt.value.replace(Fi,_t=>_t.replace(/\t/g,Dt.tabReplace)))}};function rt(vt){let _t=null;const wt=qt(vt);if(Gt(wt))return;Yn("before:highlightElement",{el:vt,language:wt}),_t=vt;const Ae=_t.textContent,es=wt?ke(Ae,{language:wt,ignoreIllegals:!0}):rs(Ae);Yn("after:highlightElement",{el:vt,result:es,text:Ae}),vt.innerHTML=es.value,pr(vt,wt,es.language),vt.result={language:es.language,re:es.relevance,relavance:es.relevance},es.second_best&&(vt.second_best={language:es.second_best.language,re:es.second_best.relevance,relavance:es.second_best.relevance})}function kt(vt){vt.useBR&&(Lt("10.3.0","'useBR' will be removed entirely in v11.0"),Lt("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),Dt=un(Dt,vt)}const Yt=()=>{if(Yt.called)return;Yt.called=!0,Lt("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(rt)};function Zt(){Lt("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),ne=!0}let ne=!1;function hs(){if(document.readyState==="loading"){ne=!0;return}document.querySelectorAll("pre code").forEach(rt)}function fe(){ne&&hs()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",fe,!1);function Oi(vt,_t){let wt=null;try{wt=_t(at)}catch(Ae){if(ts("Language definition for '{}' could not be registered.".replace("{}",vt)),se)ts(Ae);else throw Ae;wt=Tt}wt.name||(wt.name=vt),ft[vt]=wt,wt.rawDefinition=_t.bind(null,at),wt.aliases&&co(wt.aliases,{languageName:vt})}function Ii(vt){delete ft[vt];for(const _t of Object.keys(Et))Et[_t]===vt&&delete Et[_t]}function Pt(){return Object.keys(ft)}function Bi(vt){Lt("10.4.0","requireLanguage will be removed entirely in v11."),Lt("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const _t=dn(vt);if(_t)return _t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",vt))}function dn(vt){return vt=(vt||"").toLowerCase(),ft[vt]||ft[Et[vt]]}function co(vt,{languageName:_t}){typeof vt=="string"&&(vt=[vt]),vt.forEach(wt=>{Et[wt.toLowerCase()]=_t})}function oa(vt){const _t=dn(vt);return _t&&!_t.disableAutodetect}function Pn(vt){vt["before:highlightBlock"]&&!vt["before:highlightElement"]&&(vt["before:highlightElement"]=_t=>{vt["before:highlightBlock"](Object.assign({block:_t.el},_t))}),vt["after:highlightBlock"]&&!vt["after:highlightElement"]&&(vt["after:highlightElement"]=_t=>{vt["after:highlightBlock"](Object.assign({block:_t.el},_t))})}function Se(vt){Pn(vt),Bt.push(vt)}function Yn(vt,_t){const wt=vt;Bt.forEach(function(Ae){Ae[wt]&&Ae[wt](_t)})}function En(vt){return Lt("10.2.0","fixMarkup will be removed entirely in v11.0"),Lt("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),Gs(vt)}function mr(vt){return Lt("10.7.0","highlightBlock will be removed entirely in v12.0"),Lt("10.7.0","Please use highlightElement now."),rt(vt)}Object.assign(at,{highlight:ke,highlightAuto:rs,highlightAll:hs,fixMarkup:En,highlightElement:rt,highlightBlock:mr,configure:kt,initHighlighting:Yt,initHighlightingOnLoad:Zt,registerLanguage:Oi,unregisterLanguage:Ii,listLanguages:Pt,getLanguage:dn,registerAliases:co,requireLanguage:Bi,autoDetection:oa,inherit:un,addPlugin:Se,vuePlugin:Je(at).VuePlugin}),at.debugMode=function(){se=!1},at.safeMode=function(){se=!0},at.versionString=Ls;for(const vt in It)typeof It[vt]=="object"&&t(It[vt]);return Object.assign(at,It),at.addPlugin(lo),at.addPlugin(Ds),at.addPlugin(aa),at}({});return core=Fs,core}var format={exports:{}},hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,function(s){(function(){var t;t=s.exports=i,t.format=i,t.vsprintf=n,typeof console<"u"&&typeof console.log=="function"&&(t.printf=e);function e(){console.log(i.apply(null,arguments))}function n(o,c){return i.apply(null,[o].concat(c))}function i(o){for(var c=1,d=[].slice.call(arguments),f=0,p=o.length,g="",b,x=!1,A,_,R=!1,P,E=function(){return d[c++]},T=function(){for(var C="";/\d/.test(o[f]);)C+=o[f++],b=o[f];return C.length>0?parseInt(C):null};f<p;++f)if(b=o[f],x)switch(x=!1,b=="."?(R=!1,b=o[++f]):b=="0"&&o[f+1]=="."?(R=!0,f+=2,b=o[f]):R=!0,P=T(),b){case"b":g+=parseInt(E(),10).toString(2);break;case"c":A=E(),typeof A=="string"||A instanceof String?g+=A:g+=String.fromCharCode(parseInt(A,10));break;case"d":g+=parseInt(E(),10);break;case"f":_=String(parseFloat(E()).toFixed(P||6)),g+=R?_:_.replace(/^0/,"");break;case"j":g+=JSON.stringify(E());break;case"o":g+="0"+parseInt(E(),10).toString(8);break;case"s":g+=E();break;case"x":g+="0x"+parseInt(E(),10).toString(16);break;case"X":g+="0x"+parseInt(E(),10).toString(16).toUpperCase();break;default:g+=b;break}else b==="%"?x=!0:g+=b;return g}})()}(format)),format.exports}var fault_1,hasRequiredFault;function requireFault(){if(hasRequiredFault)return fault_1;hasRequiredFault=1;var s=requireFormat(),t=e(Error);fault_1=t,t.eval=e(EvalError),t.range=e(RangeError),t.reference=e(ReferenceError),t.syntax=e(SyntaxError),t.type=e(TypeError),t.uri=e(URIError),t.create=e;function e(n){return i.displayName=n.displayName||n.name,i;function i(o){return o&&(o=s.apply(null,arguments)),new n(o)}}return fault_1}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$1;hasRequiredCore=1;var s=requireCore$1(),t=requireFault();core$1.highlight=n,core$1.highlightAuto=i,core$1.registerLanguage=o,core$1.listLanguages=c,core$1.registerAlias=d,f.prototype.addText=b,f.prototype.addKeyword=p,f.prototype.addSublanguage=g,f.prototype.openNode=x,f.prototype.closeNode=A,f.prototype.closeAllNodes=R,f.prototype.finalize=R,f.prototype.toHTML=_;var e="hljs-";function n(P,E,T){var C=s.configure({}),M=T||{},j=M.prefix,L;if(typeof P!="string")throw t("Expected `string` for name, got `%s`",P);if(!s.getLanguage(P))throw t("Unknown language: `%s` is not registered",P);if(typeof E!="string")throw t("Expected `string` for value, got `%s`",E);if(j==null&&(j=e),s.configure({__emitter:f,classPrefix:j}),L=s.highlight(E,{language:P,ignoreIllegals:!0}),s.configure(C||{}),L.errorRaised)throw L.errorRaised;return{relevance:L.relevance,language:L.language,value:L.emitter.rootNode.children}}function i(P,E){var T=E||{},C=T.subset||s.listLanguages();T.prefix;var M=C.length,j=-1,L,O,V,X;if(typeof P!="string")throw t("Expected `string` for value, got `%s`",P);for(O={relevance:0,language:null,value:[]},L={relevance:0,language:null,value:[]};++j<M;)X=C[j],s.getLanguage(X)&&(V=n(X,P,E),V.language=X,V.relevance>O.relevance&&(O=V),V.relevance>L.relevance&&(O=L,L=V));return O.language&&(L.secondBest=O),L}function o(P,E){s.registerLanguage(P,E)}function c(){return s.listLanguages()}function d(P,E){var T=P,C;E&&(T={},T[P]=E);for(C in T)s.registerAliases(T[C],{languageName:C})}function f(P){this.options=P,this.rootNode={children:[]},this.stack=[this.rootNode]}function p(P,E){this.openNode(E),this.addText(P),this.closeNode()}function g(P,E){var T=this.stack,C=T[T.length-1],M=P.rootNode.children,j=E?{type:"element",tagName:"span",properties:{className:[E]},children:M}:M;C.children=C.children.concat(j)}function b(P){var E=this.stack,T,C;P!==""&&(T=E[E.length-1],C=T.children[T.children.length-1],C&&C.type==="text"?C.value+=P:T.children.push({type:"text",value:P}))}function x(P){var E=this.stack,T=this.options.classPrefix+P,C=E[E.length-1],M={type:"element",tagName:"span",properties:{className:[T]},children:[]};C.children.push(M),E.push(M)}function A(){this.stack.pop()}function _(){return""}function R(){}return core$1}var xml_1,hasRequiredXml;function requireXml(){if(hasRequiredXml)return xml_1;hasRequiredXml=1;function s(c){return c?typeof c=="string"?c:c.source:null}function t(c){return n("(?=",c,")")}function e(c){return n("(",c,")?")}function n(...c){return c.map(f=>s(f)).join("")}function i(...c){return"("+c.map(f=>s(f)).join("|")+")"}function o(c){const d=n(/[A-Z_]/,e(/[A-Z0-9_.-]*:/),/[A-Z0-9_.-]*/),f=/[A-Za-z0-9._:-]+/,p={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},g={begin:/\s/,contains:[{className:"meta-keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},b=c.inherit(g,{begin:/\(/,end:/\)/}),x=c.inherit(c.APOS_STRING_MODE,{className:"meta-string"}),A=c.inherit(c.QUOTE_STRING_MODE,{className:"meta-string"}),_={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:f,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[p]},{begin:/'/,end:/'/,contains:[p]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[g,A,x,b,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[g,b,A,x]}]}]},c.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},p,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[_],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[_],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:n(/</,t(n(d,i(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:d,relevance:0,starts:_}]},{className:"tag",begin:n(/<\//,t(n(d,/>/))),contains:[{className:"name",begin:d,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return xml_1=o,xml_1}var bash_1,hasRequiredBash;function requireBash(){if(hasRequiredBash)return bash_1;hasRequiredBash=1;function s(n){return n?typeof n=="string"?n:n.source:null}function t(...n){return n.map(o=>s(o)).join("")}function e(n){const i={},o={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:t(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},o]});const c={className:"subst",begin:/\$\(/,end:/\)/,contains:[n.BACKSLASH_ESCAPE]},d={begin:/<<-?\s*(?=\w+)/,starts:{contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},f={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,i,c]};c.contains.push(f);const p={className:"",begin:/\\"/},g={className:"string",begin:/'/,end:/'/},b={begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},n.NUMBER_MODE,i]},x=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],A=n.SHEBANG({binary:`(${x.join("|")})`,relevance:10}),_={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[n.inherit(n.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z._-]+\b/,keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp"},contains:[A,n.SHEBANG(),_,b,n.HASH_COMMENT_MODE,d,f,p,g,i]}}return bash_1=e,bash_1}var csharp_1,hasRequiredCsharp;function requireCsharp(){if(hasRequiredCsharp)return csharp_1;hasRequiredCsharp=1;function s(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],i=["default","false","null","true"],o=["abstract","as","base","break","case","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],c=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],d={keyword:o.concat(c),built_in:e,literal:i},f=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),p={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},g={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},b=t.inherit(g,{illegal:/\n/}),x={className:"subst",begin:/\{/,end:/\}/,keywords:d},A=t.inherit(x,{illegal:/\n/}),_={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,A]},R={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},x]},P=t.inherit(R,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},A]});x.contains=[R,_,g,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,p,t.C_BLOCK_COMMENT_MODE],A.contains=[P,_,b,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,p,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const E={variants:[R,_,g,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},f]},C=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",M={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:d,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"}},E,p,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},f,T,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[f,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[f,T,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"meta-string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+C+"\\s+)+"+t.IDENT_RE+"\\s*(<.+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:d,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<.+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,T],relevance:0},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,relevance:0,contains:[E,p,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},M]}}return csharp_1=s,csharp_1}var css_1,hasRequiredCss;function requireCss(){if(hasRequiredCss)return css_1;hasRequiredCss=1;const s=g=>({IMPORTANT:{className:"meta",begin:"!important"},HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[g.APOS_STRING_MODE,g.QUOTE_STRING_MODE]}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],n=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],o=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse();function c(g){return g?typeof g=="string"?g:g.source:null}function d(g){return f("(?=",g,")")}function f(...g){return g.map(x=>c(x)).join("")}function p(g){const b=s(g),x={className:"built_in",begin:/[\w-]+(?=\()/},A={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},_="and or not only",R=/@-?\w[\w]*(-\w+)*/,P="[a-zA-Z-][a-zA-Z0-9_-]*",E=[g.APOS_STRING_MODE,g.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[g.C_BLOCK_COMMENT_MODE,A,g.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+P,relevance:0},b.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+n.join("|")+")"},{begin:"::("+i.join("|")+")"}]},{className:"attribute",begin:"\\b("+o.join("|")+")\\b"},{begin:":",end:"[;}]",contains:[b.HEXCOLOR,b.IMPORTANT,g.CSS_NUMBER_MODE,...E,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},x]},{begin:d(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:R},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:_,attribute:e.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...E,g.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+t.join("|")+")\\b"}]}}return css_1=p,css_1}var json_1,hasRequiredJson;function requireJson(){if(hasRequiredJson)return json_1;hasRequiredJson=1;function s(t){const e={literal:"true false null"},n=[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],i=[t.QUOTE_STRING_MODE,t.C_NUMBER_MODE],o={end:",",endsWithParent:!0,excludeEnd:!0,contains:i,keywords:e},c={begin:/\{/,end:/\}/,contains:[{className:"attr",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE],illegal:"\\n"},t.inherit(o,{begin:/:/})].concat(n),illegal:"\\S"},d={begin:"\\[",end:"\\]",contains:[t.inherit(o)],illegal:"\\S"};return i.push(c,d),n.forEach(function(f){i.push(f)}),{name:"JSON",contains:i,keywords:e,illegal:"\\S"}}return json_1=s,json_1}var plaintext_1,hasRequiredPlaintext;function requirePlaintext(){if(hasRequiredPlaintext)return plaintext_1;hasRequiredPlaintext=1;function s(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return plaintext_1=s,plaintext_1}var yaml_1,hasRequiredYaml;function requireYaml(){if(hasRequiredYaml)return yaml_1;hasRequiredYaml=1;function s(t){var e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},c={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},d=t.inherit(c,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),f="[0-9]{4}(-[0-9][0-9]){0,2}",p="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",g="(\\.[0-9]*)?",b="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",x={className:"number",begin:"\\b"+f+p+g+b+"\\b"},A={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},_={begin:/\{/,end:/\}/,contains:[A],illegal:"\\n",relevance:0},R={begin:"\\[",end:"\\]",contains:[A],illegal:"\\n",relevance:0},P=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},x,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},_,R,c],E=[...P];return E.pop(),E.push(d),A.contains=E,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:P}}return yaml_1=s,yaml_1}var typescript_1,hasRequiredTypescript;function requireTypescript(){if(hasRequiredTypescript)return typescript_1;hasRequiredTypescript=1;const s="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],e=["true","false","null","undefined","NaN","Infinity"],n=["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer","BigInt64Array","BigUint64Array","BigInt"],i=["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],c=["arguments","this","super","console","window","document","localStorage","module","global"],d=[].concat(o,c,n,i);function f(A){return A?typeof A=="string"?A:A.source:null}function p(A){return g("(?=",A,")")}function g(...A){return A.map(R=>f(R)).join("")}function b(A){const _=(U,{after:N})=>{const I="</"+U[0].slice(1);return U.input.indexOf(I,N)!==-1},R=s,P={begin:"<>",end:"</>"},E={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(U,N)=>{const I=U[0].length+U.index,B=U.input[I];if(B==="<"){N.ignoreMatch();return}B===">"&&(_(U,{after:I})||N.ignoreMatch())}},T={$pattern:s,keyword:t,literal:e,built_in:d},C="[0-9](_?[0-9])*",M=`\\.(${C})`,j="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",L={className:"number",variants:[{begin:`(\\b(${j})((${M})|\\.)?|(${M}))[eE][+-]?(${C})\\b`},{begin:`\\b(${j})\\b((${M})\\b|\\.)?|(${M})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},O={className:"subst",begin:"\\$\\{",end:"\\}",keywords:T,contains:[]},V={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[A.BACKSLASH_ESCAPE,O],subLanguage:"xml"}},X={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[A.BACKSLASH_ESCAPE,O],subLanguage:"css"}},tt={className:"string",begin:"`",end:"`",contains:[A.BACKSLASH_ESCAPE,O]},Q={className:"comment",variants:[A.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:R+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),A.C_BLOCK_COMMENT_MODE,A.C_LINE_COMMENT_MODE]},ct=[A.APOS_STRING_MODE,A.QUOTE_STRING_MODE,V,X,tt,L,A.REGEXP_MODE];O.contains=ct.concat({begin:/\{/,end:/\}/,keywords:T,contains:["self"].concat(ct)});const nt=[].concat(Q,O.contains),J=nt.concat([{begin:/\(/,end:/\)/,keywords:T,contains:["self"].concat(nt)}]),D={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:T,contains:J};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:T,exports:{PARAMS_CONTAINS:J},illegal:/#(?![$_A-z])/,contains:[A.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},A.APOS_STRING_MODE,A.QUOTE_STRING_MODE,V,X,tt,Q,L,{begin:g(/[{,\n]\s*/,p(g(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,R+"\\s*:"))),relevance:0,contains:[{className:"attr",begin:R+p("\\s*:"),relevance:0}]},{begin:"("+A.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[Q,A.REGEXP_MODE,{className:"function",begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+A.UNDERSCORE_IDENT_RE+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:A.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:T,contains:J}]}]},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:P.begin,end:P.end},{begin:E.begin,"on:begin":E.isTrulyOpeningTag,end:E.end}],subLanguage:"xml",contains:[{begin:E.begin,end:E.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:T,contains:["self",A.inherit(A.TITLE_MODE,{begin:R}),D],illegal:/%/},{beginKeywords:"while if switch catch for"},{className:"function",begin:A.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,contains:[D,A.inherit(A.TITLE_MODE,{begin:R})]},{variants:[{begin:"\\."+R},{begin:"\\$"+R}],relevance:0},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{beginKeywords:"extends"},A.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,end:/[{;]/,excludeEnd:!0,contains:[A.inherit(A.TITLE_MODE,{begin:R}),"self",D]},{begin:"(get|set)\\s+(?="+R+"\\()",end:/\{/,keywords:"get set",contains:[A.inherit(A.TITLE_MODE,{begin:R}),{begin:/\(\)/},D]},{begin:/\$[(.]/}]}}function x(A){const _=s,R={beginKeywords:"namespace",end:/\{/,excludeEnd:!0},P={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:"interface extends"},E={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},T=["any","void","number","boolean","string","object","never","enum"],C=["type","namespace","typedef","interface","public","private","protected","implements","declare","abstract","readonly"],M={$pattern:s,keyword:t.concat(C),literal:e,built_in:d.concat(T)},j={className:"meta",begin:"@"+_},L=(X,tt,Y)=>{const Q=X.contains.findIndex(ct=>ct.label===tt);if(Q===-1)throw new Error("can not find mode to replace");X.contains.splice(Q,1,Y)},O=b(A);Object.assign(O.keywords,M),O.exports.PARAMS_CONTAINS.push(j),O.contains=O.contains.concat([j,R,P]),L(O,"shebang",A.SHEBANG()),L(O,"use_strict",E);const V=O.contains.find(X=>X.className==="function");return V.relevance=0,Object.assign(O,{name:"TypeScript",aliases:["ts","tsx"]}),O}return typescript_1=x,typescript_1}var coreExports=requireCore();const lowlight=getDefaultExportFromCjs(coreExports);var SyntaxHighlighter=highlight(lowlight,{});SyntaxHighlighter.registerLanguage=lowlight.registerLanguage;const atomOneDark={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#abb2bf",background:"#282c34"},"hljs-comment":{color:"#5c6370",fontStyle:"italic"},"hljs-quote":{color:"#5c6370",fontStyle:"italic"},"hljs-doctag":{color:"#c678dd"},"hljs-keyword":{color:"#c678dd"},"hljs-formula":{color:"#c678dd"},"hljs-section":{color:"#e06c75"},"hljs-name":{color:"#e06c75"},"hljs-selector-tag":{color:"#e06c75"},"hljs-deletion":{color:"#e06c75"},"hljs-subst":{color:"#e06c75"},"hljs-literal":{color:"#56b6c2"},"hljs-string":{color:"#98c379"},"hljs-regexp":{color:"#98c379"},"hljs-addition":{color:"#98c379"},"hljs-attribute":{color:"#98c379"},"hljs-meta-string":{color:"#98c379"},"hljs-built_in":{color:"#e6c07b"},"hljs-class .hljs-title":{color:"#e6c07b"},"hljs-attr":{color:"#d19a66"},"hljs-variable":{color:"#d19a66"},"hljs-template-variable":{color:"#d19a66"},"hljs-type":{color:"#d19a66"},"hljs-selector-class":{color:"#d19a66"},"hljs-selector-attr":{color:"#d19a66"},"hljs-selector-pseudo":{color:"#d19a66"},"hljs-number":{color:"#d19a66"},"hljs-symbol":{color:"#61aeee"},"hljs-bullet":{color:"#61aeee"},"hljs-link":{color:"#61aeee",textDecoration:"underline"},"hljs-meta":{color:"#61aeee"},"hljs-selector-id":{color:"#61aeee"},"hljs-title":{color:"#61aeee"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}},codeTheme={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#333",background:"#f8f8f8"},"hljs-comment":{color:"#998",fontStyle:"italic"},"hljs-quote":{color:"#998",fontStyle:"italic"},"hljs-keyword":{color:"#333",fontWeight:"bold"},"hljs-selector-tag":{color:"#333",fontWeight:"bold"},"hljs-subst":{color:"#333",fontWeight:"normal"},"hljs-number":{color:"#008080"},"hljs-literal":{color:"#008080"},"hljs-variable":{color:"#008080"},"hljs-template-variable":{color:"#008080"},"hljs-tag .hljs-attr":{color:"#008080"},"hljs-string":{color:"#d14"},"hljs-doctag":{color:"#d14"},"hljs-title":{color:"#900",fontWeight:"bold"},"hljs-section":{color:"#900",fontWeight:"bold"},"hljs-selector-id":{color:"#900",fontWeight:"bold"},"hljs-type":{color:"#458",fontWeight:"bold"},"hljs-class .hljs-title":{color:"#458",fontWeight:"bold"},"hljs-tag":{color:"#000080",fontWeight:"normal"},"hljs-name":{color:"#000080",fontWeight:"normal"},"hljs-attribute":{color:"#000080",fontWeight:"normal"},"hljs-regexp":{color:"#009926"},"hljs-link":{color:"#009926"},"hljs-symbol":{color:"#990073"},"hljs-bullet":{color:"#990073"},"hljs-built_in":{color:"#0086b3"},"hljs-builtin-name":{color:"#0086b3"},"hljs-meta":{color:"#999",fontWeight:"bold"},"hljs-deletion":{background:"#fdd"},"hljs-addition":{background:"#dfd"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};var typescriptExports=requireTypescript();const typescript=getDefaultExportFromCjs(typescriptExports);var jsonExports=requireJson();const json=getDefaultExportFromCjs(jsonExports);var xmlExports=requireXml();const xml=getDefaultExportFromCjs(xmlExports);var cssExports=requireCss();const css=getDefaultExportFromCjs(cssExports);var bashExports=requireBash();const bash=getDefaultExportFromCjs(bashExports);var yamlExports=requireYaml();const yaml=getDefaultExportFromCjs(yamlExports);var plaintextExports=requirePlaintext();const plaintext=getDefaultExportFromCjs(plaintextExports);var csharpExports=requireCsharp();const csharp=getDefaultExportFromCjs(csharpExports),workerUrl="/assets/pdf.worker.min-GB3t0DcA.mjs";SyntaxHighlighter.registerLanguage("txt",plaintext);SyntaxHighlighter.registerLanguage("text",plaintext);SyntaxHighlighter.registerLanguage("md",plaintext);SyntaxHighlighter.registerLanguage("ts",typescript);SyntaxHighlighter.registerLanguage("json",json);SyntaxHighlighter.registerLanguage("xml",xml);SyntaxHighlighter.registerLanguage("html",xml);SyntaxHighlighter.registerLanguage("css",css);SyntaxHighlighter.registerLanguage("bash",bash);SyntaxHighlighter.registerLanguage("sh",bash);SyntaxHighlighter.registerLanguage("yaml",yaml);SyntaxHighlighter.registerLanguage("csharp",csharp);SyntaxHighlighter.registerLanguage("cs",csharp);__webpack_exports__GlobalWorkerOptions.workerSrc=workerUrl;const FRIENDLY=["pdf","jpg","jpeg","png","gif","txt","md","json","csv","js","ts","css","html","cs","xml"],EDITABLE=["txt","md","json","js","ts","cs","xml","html","yaml"];function DocumentPreviewModal({docId:s,show:t,onClose:e,onOk:n,theme:i,accessLevel:o,onDownload:c}){const[d,f]=reactExports.useState(null),[p,g]=reactExports.useState(null),[b,x]=reactExports.useState(!1),[A,_]=reactExports.useState(null),R=sessionStorage.getItem("userId"),[P,E]=reactExports.useState(""),[T,C]=reactExports.useState(null),M=reactExports.useMemo(()=>d?d.createdById===R||o==="Edit"||o==="Full":!1,[d,o]);reactExports.useEffect(()=>{!t||!s||(async()=>{var tt;try{x(!0),_(null);const{data:Y}=await api.get(`/documents/${s}/meta`);if(f(Y),E(Y.note||""),FRIENDLY.includes((tt=Y.extension)==null?void 0:tt.toLowerCase())){const Q=await api.get(`/documents/${s}/download`,{responseType:"blob"});g(Q.data),C(Q.data)}else g(null),C(null)}catch{_("Не удалось загрузить документ")}finally{x(!1)}})()},[t,s]),d==null||d.extension;const j=p?URL.createObjectURL(p):null,L=tt=>tt==="dark"?{background:"#1e1e1e",color:"#f8f9fa"}:{},O=tt=>tt==="dark"?"bg-dark text-light":"bg-light text-dark",V=reactExports.useMemo(()=>{var tt;return M&&EDITABLE.includes((tt=d==null?void 0:d.extension)==null?void 0:tt.toLowerCase())},[M,d]);if(!t)return null;const X=async()=>{var ct;if(!M||!d||!T)return;const tt=new FormData,Y=d.name||"document.txt",Q=new File([T],Y,{type:p==null?void 0:p.type});tt.append("file",Q),tt.append("note",P);try{if(d.roomTitle){const nt=d.roomId||((ct=d.room)==null?void 0:ct.id);await api.post(`/api/rooms/${nt}/docs/${d.id}/new-version`,tt)}else await api.post(`/documents/${d.id}/version`,tt);n==null||n(),e==null||e()}catch(nt){alert("Не удалось обновить документ"),console.error(nt)}};return jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:L(i),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${O(i)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:(d==null?void 0:d.name)||"Документ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:e})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body row g-0 ${O(i)}`,children:[jsxRuntimeExports.jsxs("div",{className:"col-md-8 pe-3",style:{minHeight:400},children:[b&&jsxRuntimeExports.jsx("p",{className:"text-muted",children:"Загрузка…"}),A&&jsxRuntimeExports.jsx("p",{className:"text-danger small",children:A}),!b&&!A&&d&&renderViewer(d.extension,p,j,d,i,M,C,c)]}),jsxRuntimeExports.jsx("div",{className:"col-md-4 border-start ps-3",children:d&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("table",{className:`table table-sm mb-3 ${i==="dark"?"table-dark table-dark-meta":""}`,children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Версия"}),jsxRuntimeExports.jsx("td",{children:`v${d.version}${d.forkPath&&d.forkPath!=="0"?`-${d.forkPath}`:""}`})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Размер"}),jsxRuntimeExports.jsxs("td",{children:[(d.size/1024).toFixed(1)," КБ"]})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Формат"}),jsxRuntimeExports.jsx("td",{children:d.extension})]}),d.roomTitle&&jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Комната"}),jsxRuntimeExports.jsx("td",{children:d.roomTitle})]}),d.createdBy&&jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Автор"}),jsxRuntimeExports.jsx("td",{children:d.createdBy})]}),d.createdAt&&jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Дата"}),jsxRuntimeExports.jsx("td",{children:new Date(d.createdAt).toLocaleString()})]})]})}),M&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Примечание:"}),jsxRuntimeExports.jsx("textarea",{className:`note-box ${i==="dark"?"dark":"light"}`,rows:3,value:P,onChange:tt=>E(tt.target.value),readOnly:!V})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${O(i)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:!V,onClick:X,children:"Сохранить"}),jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:e,children:"Закрыть"})]})]})})})}function renderViewer(s,t,e,n,i,o,c,d){if(!t||!e)return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 text-muted",children:[jsxRuntimeExports.jsx("p",{children:"Формат не поддерживается для превью."}),jsxRuntimeExports.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:d,children:"Скачать"})]});if(["jpg","jpeg","png","gif"].includes(s)){const f=new Blob([document.data],{type:document.mimeType});return URL.createObjectURL(f),jsxRuntimeExports.jsx("div",{className:"img-wrapper",children:jsxRuntimeExports.jsx("img",{className:"preview-img",src:e,alt:n.name})})}if(s==="pdf")return jsxRuntimeExports.jsx(PDFViewer,{blob:t,theme:i});if(o&&EDITABLE.includes(s))return jsxRuntimeExports.jsx(TextEditor,{blob:t,extension:s,theme:i,canEdit:o,onTextChange:f=>c(new Blob([f],{type:"text/plain"}))});if(EDITABLE.includes(s))return jsxRuntimeExports.jsx(TextViewer,{blob:t,extension:s,theme:i})}function TextViewer({blob:s,extension:t,theme:e}){const[n,i]=reactExports.useState("Загрузка…"),o=e==="dark"?atomOneDark:codeTheme,c={cs:"csharp",txt:"text"};return reactExports.useEffect(()=>{const d=new FileReader;d.onload=()=>i(d.result),d.readAsText(s,"utf-8")},[s]),jsxRuntimeExports.jsx(SyntaxHighlighter,{language:c[t]??t,style:o,customStyle:{maxHeight:600,fontSize:14,padding:"1rem",lineHeight:1.5,fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",backgroundColor:e==="dark"?"#1e1e1e":"transparent"},showLineNumbers:!0,children:n})}function PDFViewer({blob:s,theme:t}){const[e,n]=reactExports.useState(1),[i,o]=reactExports.useState(null),c=({numPages:g})=>{o(g),e>g&&n(g)},d=g=>{const b=g.target.value.trim(),x=parseInt(b,10);!isNaN(x)&&x>=1&&x<=i&&n(x)},f=()=>n(g=>Math.min(g+1,i)),p=()=>n(g=>Math.max(g-1,1));return jsxRuntimeExports.jsxs("div",{className:`preview-container ${t==="dark"?"preview-dark":""}`,children:[jsxRuntimeExports.jsx("div",{style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:jsxRuntimeExports.jsx(Document,{file:s,onLoadSuccess:c,children:jsxRuntimeExports.jsx(Page,{pageNumber:e,width:600})})}),i&&jsxRuntimeExports.jsxs("div",{className:`pdf-nav-bar ${t==="dark"?"pdf-nav-dark":""}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:p,disabled:e<=1,children:"◀"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:i,value:e,onChange:d,className:"form-control form-control-sm",style:{width:"60px",textAlign:"center"}}),jsxRuntimeExports.jsxs("span",{className:"text-muted small",children:["/ ",i]}),jsxRuntimeExports.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:f,disabled:e>=i,children:"▶"})]})]})}function TextEditor({blob:s,extension:t,theme:e,canEdit:n,onTextChange:i}){const[o,c]=reactExports.useState(""),d=n;reactExports.useEffect(()=>{const b=new FileReader;b.onload=()=>c(b.result),b.readAsText(s,"utf-8")},[s]);const f=e==="dark"?atomOneDark:codeTheme,g={txt:"text",md:"text",cs:"csharp",ts:"typescript",js:"javascript",json:"json",html:"xml",xml:"xml",yaml:"yaml",css:"css",sh:"bash",bash:"bash"}[t]??t;return reactExports.useEffect(()=>{i&&i(o)},[o]),d?jsxRuntimeExports.jsx("textarea",{value:o,onChange:b=>c(b.target.value),style:{backgroundColor:e==="dark"?"#1e1e1e":"#f8f9fa",color:e==="dark"?"#f8f9fa":"#212529",border:"none",resize:"none",width:"100%",height:"600px",padding:"1rem",fontFamily:"monospace",fontSize:"14px",lineHeight:1.5,whiteSpace:"pre-wrap",wordBreak:"break-word"}}):jsxRuntimeExports.jsx(SyntaxHighlighter,{language:g,style:f,customStyle:{maxHeight:600,fontSize:14,padding:"1rem",lineHeight:1.5,fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",backgroundColor:e==="dark"?"#1e1e1e":"transparent"},showLineNumbers:!0,children:o})}const DEFAULT_OPTS={dateStyle:"medium",timeStyle:"short"};function toUtcIso(s){return/Z$|[+-]\d{2}:\d{2}$/.test(s)?s:`${s}Z`}function LocalTime({utc:s,opts:t=DEFAULT_OPTS,className:e=""}){const n=typeof s=="string"?toUtcIso(s):s,i=new Date(n).toLocaleString(void 0,t);return jsxRuntimeExports.jsx("span",{className:e,children:i})}function DocumentsPage(){const s=useNavigate(),{push:t}=useAlert(),[e,n]=reactExports.useState(null),[i,o]=reactExports.useState(!1),[c,d]=reactExports.useState([]),[f,p]=reactExports.useState(null);sessionStorage.getItem("userId");const[g,b]=reactExports.useState({x:0,y:0}),[x,A]=reactExports.useState(!1),[_,R]=reactExports.useState(""),[P,E]=reactExports.useState(null),[T,C]=reactExports.useState("asc"),[M,j]=reactExports.useState(!1),[L,O]=reactExports.useState(null),[V,X]=reactExports.useState(null),[tt,Y]=reactExports.useState(!1),[Q,ct]=reactExports.useState(null),[nt,J]=reactExports.useState([]),[D,U]=reactExports.useState(""),[N,I]=reactExports.useState("Read"),[B,z]=reactExports.useState(null),[K,st]=reactExports.useState(null),[ht,xt]=reactExports.useState(!1),[mt,Rt]=reactExports.useState(!0),[It,le]=reactExports.useState(!1),Vt=async()=>{if(nt.length)return;const{data:rt}=await api.get("/contacts");J(Array.isArray(rt)?rt:[])},ye=async rt=>{const{data:kt}=await api.get(`/documents/${rt}/tokens`);return Array.isArray(kt)?kt:[]},[Re,jt]=reactExports.useState([]),bt=async()=>{if(c.length)return;const{data:rt}=await api.get("/rooms/my");d(rt)},Ee=()=>{Lt&&(R(Lt.name||""),A(!0),ws(!1))},xe=async()=>{if(Lt)try{await api.patch(`/documents/${Lt.id}/rename`,{name:_}),De(rt=>rt.map(kt=>kt.id===Lt.id?{...kt,name:_}:kt)),await be()}catch{t("Ошибка при переименовании","danger")}finally{t("Название изменено","success"),A(!1)}},[Mt,is]=reactExports.useState(()=>document.body.classList.contains("dark")?"dark":"light");reactExports.useEffect(()=>{document.body.classList.toggle("dark",Mt==="dark"),document.body.classList.toggle("light",Mt!=="dark")},[Mt]);const gs=rt=>rt==="dark"?"bg-dark bg-gradient text-light":"bg-white text-dark",Ke=rt=>rt==="dark"?{background:"#1e1e1e",color:"#f8f9fa"}:{},ee=rt=>rt==="dark"?"bg-dark text-light":"bg-light text-dark",Ls=[{key:"lastupdate",label:"Все актуальные"},{key:"userDoc",label:"Свои документы"},{key:"otherDoc",label:"Чужие документы"},{key:"all",label:"Все"}],[Ge,Je]=reactExports.useState("lastupdate"),Ds={Read:0,Edit:1,Full:2},be=async(rt=Ge)=>{let kt="/documents";rt==="userDoc"&&(kt+="?type=userDoc"),rt==="otherDoc"&&(kt+="?type=otherDoc"),rt==="lastupdate"&&(kt+="?type=lastupdate"),rt==="all"&&(kt+="?type=all");const{data:Yt}=await api.get(kt);De(Array.isArray(Yt)?Yt:[])},[ae,De]=reactExports.useState([]);reactExports.useEffect(()=>{let rt="/documents";Ge==="userDoc"?rt="/documents?type=userDoc":Ge==="otherDoc"?rt="/documents?type=otherDoc":Ge==="lastupdate"?rt="/documents?type=lastupdate":Ge==="all"&&(rt="/documents?type=all"),api.get(rt).then(kt=>{Array.isArray(kt.data)&&De(kt.data),le(!0),setTimeout(()=>Rt(!1),400)}).catch(kt=>{console.error("Ошибка при загрузке документов:",kt)})},[Ge]);const we=rt=>`nav-link ${Ge===rt?"active":""}`,[ts,ws]=reactExports.useState(!1),[Lt,ys]=reactExports.useState(null),un=reactExports.useRef(null),hn=(rt,kt)=>{rt.preventDefault(),ys(kt),ct(kt),b({x:rt.pageX,y:rt.pageY}),ws(!0)},Di={Full:["edit","delete","archive","copy","rename","changeAccess","toggleRoom","download","paste","tree"],Edit:["edit","copy","rename","changeAccess","toggleRoom","download","paste","tree"],Read:["copy","download","tree"]},Fs={Read:"Чтение",Edit:"Изменение",Full:"Полный",Close:"Закрыть доступ"},at=new Set(Re.map(rt=>rt.userId)),ft=nt.filter(rt=>!at.has(rt.id));reactExports.useEffect(()=>{be()},[Ge]),reactExports.useEffect(()=>{const rt=kt=>{ts&&un.current&&!un.current.contains(kt.target)&&ws(!1)};return ts?document.addEventListener("mousedown",rt):document.removeEventListener("mousedown",rt),()=>{document.removeEventListener("mousedown",rt)}},[ts]),reactExports.useEffect(()=>{const rt=sessionStorage.getItem("highlightDocId"),kt=sessionStorage.getItem("activeTab");kt&&(Je(kt),setTimeout(()=>{if(rt){z(rt);const Yt=document.getElementById(`doc-${rt}`);Yt&&Yt.scrollIntoView({behavior:"smooth",block:"center"})}sessionStorage.removeItem("highlightDocId"),sessionStorage.removeItem("activeTab")},500))},[]),reactExports.useEffect(()=>{if(!B)return;const rt=setTimeout(()=>{const kt=document.getElementById(`doc-${B}`);kt&&kt.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(rt)},[B]);const Et=()=>{Lt&&(ws(!1),s(`/documents/${Lt.id}/update`,{state:{parentDoc:Lt}}))},Bt=async rt=>{const kt=ae.find(ne=>ne.id===rt);if(!kt)return;const Yt=await ye(kt.id),Zt=se(kt,Yt,c);ys({...kt,effectiveAccessLevel:Zt}),n(rt)};function se(rt,kt,Yt){const Zt=sessionStorage.getItem("userId");if(rt.createdBy.id===Zt)return"Full";const ne=kt.find(fe=>fe.documentId===rt.id);if(ne)return ne.accessLevel;const hs=rt.room?Yt.find(fe=>fe.id===rt.room.id):null;return(hs==null?void 0:hs.accessLevel)||"Read"}const ue=async()=>{if(Lt)try{await api.delete(`/documents/${Lt.id}`),De(rt=>rt.filter(kt=>kt.id!==Lt.id))}catch{t("Не удалось удалить документ","danger")}finally{t("Документ удалён","success"),ws(!1)}},Xe=async()=>{if(Lt)try{await api.post(`/documents/${Lt.id}/archive`),t("Документ заархивирован","success"),await be()}catch{t("Ошибка при архивировании","danger")}finally{ws(!1)}},Tt=async()=>{if(Lt)try{const{data:rt}=await api.get("/rooms/my");d(rt),p(null),o(!0),ws(!1)}catch{t("Не удалось получить список комнат","danger")}},Dt=async()=>{if(Lt)try{await api.post(`/documents/${Lt.id}/copy`,{targetRoomId:f}),Je(Ge),o(!1),await be(),t("Документ скопирован","success")}catch{t("Ошибка при копировании","danger")}},Gt=async()=>{var kt,Yt;if(!Lt)return;const rt=await ye(Lt.id);jt(rt),await Vt(),U(((kt=rt[0])==null?void 0:kt.userId)??""),I(((Yt=rt[0])==null?void 0:Yt.accessLevel)??"Read"),Y(!0),ws(!1)},qt=async rt=>{if(rt.room)try{await api.post(`/documents/${rt.id}/remove-room`),await be(),t("Документ удалён из комнаты","success")}catch{t("Не удалось удалить из комнаты","danger")}},ke=async rt=>{await bt(),O(rt),X(null),j(!0)},vs=()=>{Lt&&(ws(!1),Lt.room?qt(Lt):ke(Lt))},Pe=async()=>{if(Lt)try{const rt=sessionStorage.getItem("token"),kt=await fetch(`/api/documents/${Lt.id}/download`,{method:"GET",headers:{Authorization:`Bearer ${rt}`}});if(!kt.ok){t("Ошибка при скачивании файла","danger");return}const Yt=await kt.blob(),Zt=window.URL.createObjectURL(Yt),ne=document.createElement("a");ne.href=Zt,ne.download=Lt.name||`document_${Lt.id}`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),window.URL.revokeObjectURL(Zt),ws(!1)}catch{t("Ошибка при скачивании файла","danger")}},rs=async()=>{if(Lt)try{const{data:rt}=await api.get(`/documents/${Lt.id}/versions`);st(rt),xt(!0)}catch{t("Не удалось загрузить дерево версий","danger")}finally{ws(!1)}},Gs=rt=>{P===rt?C(kt=>kt==="asc"?"desc":"asc"):(E(rt),C("asc"))},pr=rt=>{z(rt)},lo=()=>P?[...ae].sort((kt,Yt)=>{var hs,fe,Oi,Ii;let Zt=kt[P],ne=Yt[P];return P==="createdAt"&&(Zt=new Date(Zt),ne=new Date(ne)),P==="prev"?(Zt=kt.previousVersionId?1:0,ne=Yt.previousVersionId?1:0,T==="asc"?Zt-ne:ne-Zt):P==="room"?(Zt=((hs=kt.room)==null?void 0:hs.title)||"",ne=((fe=Yt.room)==null?void 0:fe.title)||"",T==="asc"?Zt.localeCompare(ne):ne.localeCompare(Zt)):Zt==null?1:ne==null?-1:typeof Zt=="string"?T==="asc"?Zt.localeCompare(ne):ne.localeCompare(Zt):P==="createdBy"?(Zt=((Oi=kt.createdBy)==null?void 0:Oi.name)||"",ne=((Ii=Yt.createdBy)==null?void 0:Ii.name)||"",T==="asc"?Zt.localeCompare(ne):ne.localeCompare(Zt)):T==="asc"?Zt-ne:ne-Zt}):ae,Fi=[{key:"edit",label:"Изменить",action:Et},{key:"delete",label:"Удалить",action:ue},{key:"archive",label:"Архивировать",action:Xe},{key:"copy",label:"Копировать",action:Tt},{key:"rename",label:"Переименовать",action:Ee},{key:"changeAccess",label:"Изменить доступ",action:Gt},{key:"toggleRoom",label:Lt!=null&&Lt.room?"Удалить из комнаты":"Добавить в комнату",action:vs},{key:"download",label:"Скачать",action:Pe},{key:"tree",label:"Дерево версий",action:rs}],aa=Di[Lt==null?void 0:Lt.accessLevel]||[];return mt?jsxRuntimeExports.jsx("div",{className:`fade-screen ${It?"fade-out":""} ${Mt==="dark"?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:200})}):jsxRuntimeExports.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[jsxRuntimeExports.jsx("nav",{className:"navbar navbar-expand-lg shadow-sm",style:{background:Mt==="dark"?"linear-gradient(90deg, #2c2c2c, #1a1a1a)":"#fff"},children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link d-flex align-items-center p-0",onClick:()=>s("/"),children:[jsxRuntimeExports.jsx(FaFolderOpen,{size:28,className:Mt==="dark"?"text-warning":"text-primary"}),jsxRuntimeExports.jsx("span",{className:`ms-2 fw-bold ${Mt==="dark"?"text-light":"text-dark"}`,children:"Менеджер документов"})]}),jsxRuntimeExports.jsxs("div",{className:"ms-auto d-flex align-items-center gap-3",children:[jsxRuntimeExports.jsxs(Link,{to:"/documents/create",className:"btn btn-success btn-sm",title:"Создать документ",children:[jsxRuntimeExports.jsx(FaPlus,{className:"me-1"})," Документ"]}),jsxRuntimeExports.jsx(Notifications,{theme:Mt}),jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>is(Mt==="dark"?"light":"dark"),style:{color:Mt==="dark"?"#ccc":"#333"},children:Mt==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})}),jsxRuntimeExports.jsxs("button",{className:"btn btn-outline-secondary btn-sm",title:"Назад",onClick:()=>s("/"),children:[jsxRuntimeExports.jsx(FaArrowLeft,{className:"me-1"}),"Выйти"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"container my-4 flex-fill",children:[jsxRuntimeExports.jsx("ul",{className:"nav nav-tabs mb-3",children:Ls.map(rt=>jsxRuntimeExports.jsx("li",{className:"nav-item",children:jsxRuntimeExports.jsx("button",{className:we(rt.key),onClick:()=>Je(rt.key),style:{cursor:"pointer"},type:"button",children:rt.label})},rt.key))}),jsxRuntimeExports.jsx("div",{className:"doc-row d-flex flex-wrap gap-4",children:jsxRuntimeExports.jsx("div",{className:"left-pane flex-grow-1",children:jsxRuntimeExports.jsxs("div",{className:`card shadow h-100 ${gs(Mt)}`,children:[jsxRuntimeExports.jsx("div",{className:"table-responsive"}),jsxRuntimeExports.jsx("div",{className:"table-responsive",children:jsxRuntimeExports.jsxs("table",{className:`table table-hover align-middle ${gs(Mt)} ${Mt==="dark"?"table-dark":""}`,children:[jsxRuntimeExports.jsx("thead",{className:Mt==="dark"?"table-dark":"table-light",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Gs("name"),children:["Название ",P==="name"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Gs("version"),children:["Версия ",P==="version"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Gs("createdAt"),children:["Дата создания ",P==="createdAt"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Gs("createdBy"),children:["Создал ",P==="createdBy"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Gs("prev"),children:["Пред. версия ",P==="prev"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Gs("room"),children:["Комната ",P==="room"?T==="asc"?"↑":"↓":""]})]})}),jsxRuntimeExports.jsx("tbody",{children:ae.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:"6",className:"text-center text-muted py-4",children:"Документы не найдены"})}):lo().map(rt=>{var kt;return jsxRuntimeExports.jsxs("tr",{id:`doc-${rt.id}`,className:[Mt==="dark"?"border-secondary":"",B===rt.id?"row-selected":""].join(" ").trim(),onClick:()=>pr(rt.id),onDoubleClick:Yt=>{Yt.stopPropagation(),Bt(rt.id)},onContextMenu:Yt=>hn(Yt,rt),style:{cursor:"pointer"},children:[jsxRuntimeExports.jsx("td",{children:rt.name}),jsxRuntimeExports.jsx("td",{children:`v${rt.version}${rt.forkPath&&rt.forkPath!=="0"?`-${rt.forkPath}`:""}`}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(LocalTime,{utc:rt.createdAt})}),jsxRuntimeExports.jsx("td",{children:((kt=rt.createdBy)==null?void 0:kt.name)||"-"}),jsxRuntimeExports.jsx("td",{children:rt.previousVersionId?jsxRuntimeExports.jsx("button",{className:"btn btn-link p-0",onClick:Yt=>{Yt.preventDefault(),Je("all"),setTimeout(()=>{z(rt.previousVersionId);const Zt=document.getElementById(`doc-${rt.previousVersionId}`);Zt&&Zt.scrollIntoView({behavior:"smooth",block:"center"})},300)},children:"Просмотр"}):"-"}),jsxRuntimeExports.jsx("td",{children:rt.room?jsxRuntimeExports.jsx(Link,{to:`/rooms/${rt.room.id}`,className:"link-secondary",children:rt.room.title}):jsxRuntimeExports.jsx("span",{className:"text-muted",children:"—"})})]},rt.id)})})]})})]})})})]}),jsxRuntimeExports.jsxs("footer",{className:`py-3 text-center ${Mt==="dark"?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO"]}),x&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Ke(Mt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Переименовать документ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>A(!1)})]}),jsxRuntimeExports.jsx("div",{className:`modal-body ${ee(Mt)}`,children:jsxRuntimeExports.jsx("input",{className:"form-control",value:_,onChange:rt=>R(rt.target.value)})}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>A(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:xe,children:"ОК"})]})]})})}),i&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Ke(Mt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Копировать документ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>o(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("label",{className:"form-label fw-bold mb-2",children:"Выберите место"}),jsxRuntimeExports.jsxs("select",{className:"form-select",value:f??"",onChange:rt=>{const kt=rt.target.value;p(kt===""?null:kt.trim())},children:[jsxRuntimeExports.jsx("option",{value:"",children:"(Вне комнаты)"}),c.map(rt=>jsxRuntimeExports.jsxs("option",{value:rt.id,disabled:rt.accessLevel==="Read",children:[rt.title," — ",rt.accessLevel==="Read"?"только чтение":"можно изменять"]},rt.id))]})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:Dt,children:"Копировать"})]})]})})}),M&&L&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Ke(Mt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${ee(Mt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Добавить «",L.name,"» в комнату"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>j(!1)})]}),jsxRuntimeExports.jsx("div",{className:`modal-body ${ee(Mt)}`,children:jsxRuntimeExports.jsxs("select",{className:"form-select",value:V??"",onChange:rt=>X(rt.target.value||null),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Выберите комнату…"}),c.map(rt=>jsxRuntimeExports.jsx("option",{value:rt.id,children:rt.title},rt.id))]})}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>j(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:!V,onClick:async()=>{try{await api.post(`/documents/${L.id}/add-to-room/${V}`),j(!1),await be()}catch(rt){console.error(rt),t("Не удалось добавить в комнату","danger")}},children:"Добавить"})]})]})})}),jsxRuntimeExports.jsx(DocumentPreviewModal,{docId:e,show:!!e,onClose:()=>n(null),onOk:()=>{n(null),be()},theme:Mt,accessLevel:Lt==null?void 0:Lt.effectiveAccessLevel,onDownload:Pe}),tt&&Q&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Ke(Mt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Изменить доступ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>Y(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${ee(Mt)}`,children:[jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"fw-bold",children:Q.name}),jsxRuntimeExports.jsxs("span",{className:"badge bg-secondary",children:["v",Q.version]})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[jsxRuntimeExports.jsxs("span",{children:["Комната: ",Q.room?jsxRuntimeExports.jsx("strong",{children:Q.room.title}):jsxRuntimeExports.jsx("em",{className:"text-muted",children:"(без комнаты)"})]}),jsxRuntimeExports.jsx("span",{className:"badge bg-info text-dark",children:Q.room?Fs[Q.accessLevel]:"—"})]}),jsxRuntimeExports.jsx("label",{className:"form-label",children:"Пользователь"}),jsxRuntimeExports.jsxs("select",{className:"form-select mb-3",value:D,onChange:rt=>{const kt=rt.target.value;U(kt);const Yt=Re.find(Zt=>Zt.userId===kt);I((Yt==null?void 0:Yt.accessLevel)??"Read")},children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"— выберите пользователя —"}),Re.map(rt=>jsxRuntimeExports.jsxs("option",{value:rt.userId,children:[rt.userName," — ",Fs[rt.accessLevel]]},rt.userId)),ft.map(rt=>jsxRuntimeExports.jsx("option",{value:rt.id,children:rt.name},rt.id))]}),jsxRuntimeExports.jsx("label",{className:"form-label",children:"Уровень доступа"}),jsxRuntimeExports.jsx("select",{className:"form-select",value:N,onChange:rt=>I(rt.target.value),children:Object.entries(Fs).map(([rt,kt])=>jsxRuntimeExports.jsx("option",{value:rt,children:kt},rt))})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${ee(Mt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>Y(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:!D,onClick:async()=>{try{const rt=Re.find(Yt=>Yt.userId===D);N==="Close"?rt?(await api.delete(`/documents/${Q.id}/token/user/${D}`),t("Доступ закрыт","success")):t("У пользователя нет доступа","warning"):(await api.post(`/documents/${Q.id}/token`,{userId:D,accessLevel:Ds[N]}),t("Доступ предоставлен","success"));const kt=await ye(Q.id);jt(kt),Y(!1)}catch(rt){console.error(rt),t("Не удалось изменить доступ","danger")}},children:"Ок"})]})]})})}),ts&&Lt&&jsxRuntimeExports.jsxs("div",{ref:un,style:{position:"absolute",top:`${g.y}px`,left:`${g.x}px`,zIndex:1e3,backgroundColor:Mt==="dark"?"#1e1e1e":"#fff",color:Mt==="dark"?"#f8f9fa":"#212529",border:Mt==="dark"?"1px solid #555":"1px solid #ccc",borderRadius:"6px",padding:"0.5rem",boxShadow:"0 0 10px rgba(0,0,0,0.2)",minWidth:"200px"},children:[jsxRuntimeExports.jsx("div",{className:"fw-bold mb-2",children:Lt.name}),jsxRuntimeExports.jsx("div",{className:"list-group list-group-flush",children:Fi.filter(rt=>aa.includes(rt.key)).map(rt=>jsxRuntimeExports.jsx("button",{className:"list-group-item list-group-item-action",onClick:rt.action,children:rt.label},rt.key))})]}),ht&&K&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:{backgroundColor:Mt==="dark"?"#1e1e1e":"#fff",color:Mt==="dark"?"#f8f9fa":"#212529"},children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Mt==="dark"?"bg-dark text-light":""}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Дерево версий"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>xt(!1)})]}),jsxRuntimeExports.jsx("div",{className:"modal-body",children:jsxRuntimeExports.jsx("ul",{className:"list-unstyled",children:K.map((rt,kt)=>{const Yt=rt.forkPath.split("."),Zt=Yt.length>1&&Yt[Yt.length-1]!=="0";return jsxRuntimeExports.jsxs("li",{className:"mb-2",children:[jsxRuntimeExports.jsxs("span",{style:{color:"#d63384",fontFamily:"monospace"},children:[Zt?"┣":"|"," ",rt.forkPath.replace(/\./g," → ")]})," | ",jsxRuntimeExports.jsx("strong",{children:rt.name})," — ",new Date(rt.createdOn).toLocaleString("ru-RU")]},rt.id)})})}),jsxRuntimeExports.jsx("div",{className:`modal-footer ${Mt==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>xt(!1),children:"Закрыть"})})]})})})]})}const AccessLevelOptions=[{value:0,label:"Только чтение"},{value:1,label:"Редактирование"},{value:2,label:"Полный доступ"}],LevelLabel=AccessLevelOptions.reduce((s,{value:t,label:e})=>({...s,[t]:e}),{});function CreateRoomPage(){const s=useNavigate(),[t,e]=reactExports.useState(()=>document.body.classList.contains("dark")?"dark":"light");reactExports.useEffect(()=>{document.body.classList.toggle("dark",t==="dark"),document.body.classList.toggle("light",t!=="dark")},[t]),setTimeout(()=>{_(!0),setTimeout(()=>x(!1),400)},100);const[n,i]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,f]=reactExports.useState(""),[p,g]=reactExports.useState(!1),[b,x]=reactExports.useState(!0),[A,_]=reactExports.useState(!1),R=async P=>{var E,T,C,M;if(P.preventDefault(),f(""),!n.trim()){f("Название комнаты не может быть пустым");return}if(!o){f("Выберите уровень доступа по умолчанию");return}g(!0);try{await api.post("/rooms",{title:n,defaultAccessLevel:Number(o)}),s(-1)}catch(j){console.error(j),f(((T=(E=j.response)==null?void 0:E.data)==null?void 0:T.error)||((M=(C=j.response)==null?void 0:C.data)==null?void 0:M.message)||"Ошибка при создании комнаты")}g(!1)};return b?jsxRuntimeExports.jsx("div",{className:`fade-screen ${A?"fade-out":""} ${t==="dark"?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:200})}):jsxRuntimeExports.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[jsxRuntimeExports.jsx("nav",{className:"navbar navbar-expand-lg shadow-sm",style:{background:t==="dark"?"linear-gradient(90deg, #2c2c2c, #1a1a1a)":"#fff"},children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link d-flex align-items-center p-0",onClick:()=>s(-1),children:[jsxRuntimeExports.jsx(FaArrowLeft,{size:24,className:t==="dark"?"text-light":"text-dark"}),jsxRuntimeExports.jsx("span",{className:`ms-2 fw-bold ${t==="dark"?"text-light":"text-dark"}`,children:"Создать комнату"})]}),jsxRuntimeExports.jsx("div",{className:"ms-auto",children:jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>e(t==="dark"?"light":"dark"),style:{color:t==="dark"?"#ccc":"#333"},children:t==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})})})]})}),jsxRuntimeExports.jsx("div",{className:"container my-4 flex-fill",children:jsxRuntimeExports.jsxs("div",{className:`card mx-auto ${t==="dark"?"bg-secondary text-light":""}`,style:{maxWidth:500},children:[jsxRuntimeExports.jsx("div",{className:`card-header ${t==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("h5",{className:"mb-0",children:"Новая комната"})}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[d&&jsxRuntimeExports.jsx("div",{className:"alert alert-danger",children:d}),jsxRuntimeExports.jsxs("form",{onSubmit:R,autoComplete:"off",children:[jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsx("input",{type:"text",id:"roomTitle",className:"form-control",placeholder:"Название комнаты",value:n,onChange:P=>i(P.target.value),required:!0}),jsxRuntimeExports.jsx("label",{htmlFor:"roomTitle",children:"Название комнаты"})]}),jsxRuntimeExports.jsxs("div",{className:"form-floating mb-3",children:[jsxRuntimeExports.jsxs("select",{id:"defaultAccess",className:"form-select",value:o,onChange:P=>c(P.target.value),required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"— Выберите уровень —"}),AccessLevelOptions.map(P=>jsxRuntimeExports.jsx("option",{value:P.value,children:P.label},P.value))]}),jsxRuntimeExports.jsx("label",{htmlFor:"defaultAccess",children:"Уровень доступа по умолчанию"})]}),jsxRuntimeExports.jsxs("button",{className:"btn btn-primary w-100",type:"submit",disabled:p,children:[p&&jsxRuntimeExports.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),p?"Создание...":"Создать"]})]})]})]})}),jsxRuntimeExports.jsxs("footer",{className:`py-3 text-center ${t==="dark"?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO"]})]})}function RoomPage(){const s=useNavigate(),{id:t}=useParams(),[e,n]=reactExports.useState(()=>localStorage.getItem("theme")||"light");reactExports.useEffect(()=>{document.body.className=e==="dark"?"bg-dark text-light":"bg-light text-dark",localStorage.setItem("theme",e)},[e]);const[i,o]=reactExports.useState([]),[c,d]=reactExports.useState("my"),[f,p]=reactExports.useState([]),[g,b]=reactExports.useState([]);reactExports.useEffect(()=>{o([{id:"room1",title:"Финансы",creatorId:"user1"},{id:"room2",title:"Разработка",creatorId:"user3"},{id:"room3",title:"Маркетинг",creatorId:"user2"},{id:"room4",title:"Дизайн",creatorId:"user1"}]),p([{id:"user1",name:"Иван Иванов",accessLevel:"Admin"},{id:"user2",name:"Петр Петров",accessLevel:"Write"},{id:"user4",name:"Мария Серова",accessLevel:"Read"}]),b([{id:"doc1",name:"Отчет Q1.pdf",version:3,createdAt:"2025-05-30T10:15:00Z",createdBy:{id:"user1",name:"Иван Иванов"},previousVersionId:"doc1_v2"},{id:"doc2",name:"ТЗ проекта.docx",version:1,createdAt:"2025-05-28T14:42:00Z",createdBy:{id:"user2",name:"Петр Петров"},previousVersionId:null},{id:"doc5",name:"Бюджет.xlsx",version:2,createdAt:"2025-06-01T12:00:00Z",createdBy:{id:"user4",name:"Мария Серова"},previousVersionId:"doc5_v1"}])},[t]);const x=sessionStorage.getItem("userId")||null,A=i.filter(E=>c==="my"?E.creatorId===x:c==="others"?E.creatorId!==x:!0),_=e==="dark"?"bg-secondary text-light":"",R=e==="dark"?"table-dark text-light":"table-light text-dark",P=e==="dark"?"bg-secondary text-light":"bg-white";return jsxRuntimeExports.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[jsxRuntimeExports.jsx("nav",{className:"navbar navbar-expand-lg shadow-sm",style:{background:e==="dark"?"linear-gradient(90deg, #2c2c2c, #1a1a1a)":"#fff"},children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link d-flex align-items-center p-0",onClick:()=>s("/"),children:[jsxRuntimeExports.jsx(FaArrowLeft,{size:24,className:e==="dark"?"text-light":"text-dark"}),jsxRuntimeExports.jsx("span",{className:`ms-2 fw-bold ${e==="dark"?"text-light":"text-dark"}`,children:"Управление комнатой"})]}),jsxRuntimeExports.jsx("div",{className:"ms-auto",children:jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>n(e==="dark"?"light":"dark"),style:{color:e==="dark"?"#ccc":"#333"},children:e==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})})})]})}),jsxRuntimeExports.jsx("div",{className:"container my-4 flex-fill",children:jsxRuntimeExports.jsxs("div",{className:"row g-4",children:[jsxRuntimeExports.jsx("div",{className:"col-md-3",children:jsxRuntimeExports.jsxs("div",{className:`card ${P} shadow-sm`,children:[jsxRuntimeExports.jsx("div",{className:`card-header ${e==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("h6",{className:"mb-0",children:"Комнаты"})}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsxs("select",{className:"form-select",value:c,onChange:E=>d(E.target.value),children:[jsxRuntimeExports.jsx("option",{value:"my",children:"Мои комнаты"}),jsxRuntimeExports.jsx("option",{value:"others",children:"Другие комнаты"}),jsxRuntimeExports.jsx("option",{value:"all",children:"Все"})]})}),jsxRuntimeExports.jsxs("ul",{className:"list-group list-group-flush",children:[A.map(E=>jsxRuntimeExports.jsx("li",{className:`list-group-item ${e==="dark"?"bg-secondary text-light":""} ${E.id===t?"fw-bold":"text-muted"}`,children:jsxRuntimeExports.jsx(Link,{to:`/rooms/${E.id}`,className:e==="dark"?"text-light":"text-dark",children:E.title})},E.id)),A.length===0&&jsxRuntimeExports.jsx("li",{className:"list-group-item text-muted",children:"Нет комнат"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"col-md-3",children:jsxRuntimeExports.jsxs("div",{className:`card ${P} shadow-sm`,children:[jsxRuntimeExports.jsx("div",{className:`card-header ${e==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("h6",{className:"mb-0",children:"Пользователи"})}),jsxRuntimeExports.jsxs("ul",{className:"list-group list-group-flush",children:[f.map(E=>jsxRuntimeExports.jsx("li",{className:`list-group-item ${e==="dark"?"bg-secondary text-light":""}`,children:jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:E.name}),jsxRuntimeExports.jsx("span",{className:"badge bg-primary",children:E.accessLevel})]})},E.id)),f.length===0&&jsxRuntimeExports.jsx("li",{className:"list-group-item text-muted",children:"Нет пользователей"})]})]})}),jsxRuntimeExports.jsx("div",{className:"col-md-6",children:jsxRuntimeExports.jsxs("div",{className:`card ${_} shadow-sm`,children:[jsxRuntimeExports.jsx("div",{className:`card-header ${e==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("h6",{className:"mb-0",children:"Документы комнаты"})}),jsxRuntimeExports.jsx("div",{className:"card-body p-0",children:jsxRuntimeExports.jsx("div",{className:"table-responsive",children:jsxRuntimeExports.jsxs("table",{className:"table table-hover align-middle mb-0",children:[jsxRuntimeExports.jsx("thead",{className:R,children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Название"}),jsxRuntimeExports.jsx("th",{children:"Версия"}),jsxRuntimeExports.jsx("th",{children:"Дата создания"}),jsxRuntimeExports.jsx("th",{children:"Создал"}),jsxRuntimeExports.jsx("th",{children:"Пред. версия"})]})}),jsxRuntimeExports.jsx("tbody",{children:g.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:"5",className:"text-center text-muted py-4",children:"Нет документов"})}):g.map(E=>{var T;return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:E.name}),jsxRuntimeExports.jsx("td",{children:E.version}),jsxRuntimeExports.jsx("td",{children:new Date(E.createdAt).toLocaleString("ru-RU",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),jsxRuntimeExports.jsx("td",{children:((T=E.createdBy)==null?void 0:T.name)||"-"}),jsxRuntimeExports.jsx("td",{children:E.previousVersionId?jsxRuntimeExports.jsx(Link,{to:`/documents/${E.previousVersionId}`,className:"link-primary",children:"Просмотр"}):"—"})]},E.id)})})]})})})]})})]})}),jsxRuntimeExports.jsxs("footer",{className:`py-3 text-center ${e==="dark"?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO"]})]})}function CreateDocumentPage(){const[s,t]=reactExports.useState([]),[e,n]=reactExports.useState([]),[i,o]=reactExports.useState(""),[c,d]=reactExports.useState(""),[f,p]=reactExports.useState(""),[g,b]=reactExports.useState(""),[x,A]=reactExports.useState(null),[_,R]=reactExports.useState(!1),P=reactExports.useRef(),E=useNavigate(),[T,C]=reactExports.useState(""),{push:M}=useAlert(),[j,L]=reactExports.useState(()=>document.body.classList.contains("dark")),[O,V]=reactExports.useState(!1),[X,tt]=reactExports.useState(!0),[Y,Q]=reactExports.useState(!1);reactExports.useEffect(()=>{api.get("/rooms/my").then(nt=>{console.log("Rooms response:",nt),Array.isArray(nt.data)&&t(nt.data),Q(!0),setTimeout(()=>tt(!1),400)}).catch(nt=>{var J,D;console.error("Ошибка при загрузке комнат:",(J=nt.response)==null?void 0:J.status,(D=nt.response)==null?void 0:D.data)}),api.get("/documents?type=own").then(nt=>{Array.isArray(nt.data)&&n(nt.data)}),j?(document.body.classList.add("dark"),document.body.classList.remove("light"),localStorage.setItem("theme","dark")):(document.body.classList.add("light"),document.body.classList.remove("dark"),localStorage.setItem("theme","light"))},[j]);const ct=async()=>{if(x){R(!0);try{const nt=await x.arrayBuffer(),J=new Uint8Array(nt),D=await crypto.subtle.digest("SHA-256",J),N=Array.from(new Uint8Array(D)).map(z=>z.toString(16).padStart(2,"0")).join("");C(N);const I=new FormData;I.append("file",x),I.append("name",g),f&&I.append("note",f),c&&I.append("parentDocId",c),T&&I.append("prevHash",T);let B="/documents";i&&(I.append("roomId",i),B=`/rooms/${i}/docs/create`),await api.post(B,I),M("Документ успешно загружен","success"),E("/documents")}catch(nt){console.error(nt),M("Ошибка при загрузке документа","danger")}finally{R(!1)}}};return X?jsxRuntimeExports.jsx("div",{className:`fade-screen ${Y?"fade-out":""} ${j?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:200})}):jsxRuntimeExports.jsx("div",{className:"container mt-4",children:jsxRuntimeExports.jsxs("div",{className:"card shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>E(-1),children:[jsxRuntimeExports.jsx(FaArrowLeft,{className:"me-1"})," Назад"]}),jsxRuntimeExports.jsx("button",{className:"btn theme-toggle-btn",onClick:()=>L(!j),children:j?jsxRuntimeExports.jsx(FaSun,{}):jsxRuntimeExports.jsx(FaMoon,{})})]}),jsxRuntimeExports.jsx("div",{className:"card-header fw-bold",children:"Создание документа"}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Комната"}),jsxRuntimeExports.jsxs("div",{className:"d-flex align-items-center gap-2",children:[jsxRuntimeExports.jsxs("select",{className:"form-select",value:i,onChange:nt=>o(nt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"— Без комнаты —"}),s.map(nt=>jsxRuntimeExports.jsx("option",{value:nt.id,children:nt.title},nt.id))]}),jsxRuntimeExports.jsx(Link,{to:"/rooms/create",className:"btn btn-success btn-sm",children:jsxRuntimeExports.jsx(FaPlus,{className:"me-1"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Название документа"}),jsxRuntimeExports.jsx("input",{type:"text",className:"form-control",value:g,onChange:nt=>b(nt.target.value),placeholder:"Введите название"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Примечание"}),jsxRuntimeExports.jsx("textarea",{className:"form-control",rows:"3",value:f,onChange:nt=>p(nt.target.value),placeholder:"Краткое описание или комментарий"})]}),jsxRuntimeExports.jsxs("div",{className:`mb-3 p-4 border rounded text-center drop-zone ${O?"active":""}`,onClick:()=>{var nt;return(nt=P.current)==null?void 0:nt.click()},onDragOver:nt=>{nt.preventDefault(),V(!0)},onDragLeave:nt=>{nt.preventDefault(),V(!1)},onDrop:nt=>{nt.preventDefault(),V(!1);const J=nt.dataTransfer.files[0];J&&(A(J),b(J.name))},style:{cursor:"pointer"},children:[x?jsxRuntimeExports.jsx("div",{className:"text-success fw-bold",children:x.name}):jsxRuntimeExports.jsx("div",{className:"drop-zone",children:"Кликните или перетащите файл сюда"}),jsxRuntimeExports.jsx("input",{ref:P,type:"file",onChange:nt=>{const J=nt.target.files[0];J&&(A(J),b(J.name))},hidden:!0})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-success w-100",disabled:!x||_,onClick:ct,children:_?"Загрузка...":"Загрузить"})]})]})})}function UpdateDocumentPage(){const{id:s}=useParams(),{state:t}=useLocation(),e=t==null?void 0:t.parentDoc,n=e==null?void 0:e.room;n==null||n.id;const i=(e==null?void 0:e.id)||s||"",[o,c]=reactExports.useState([]),[d,f]=reactExports.useState(e?[e]:[]),[p,g]=reactExports.useState(""),[b,x]=reactExports.useState(i),[A,_]=reactExports.useState(null),[R,P]=reactExports.useState([]),[E,T]=reactExports.useState(""),[C,M]=reactExports.useState(""),[j,L]=reactExports.useState(null),[O,V]=reactExports.useState(!1),X=reactExports.useRef(),tt=useNavigate(),[Y,Q]=reactExports.useState(()=>localStorage.getItem("theme")==="dark"||window.matchMedia("(prefers-color-scheme: dark)").matches&&!localStorage.getItem("theme")),[ct,nt]=reactExports.useState(!1),{push:J}=useAlert(),[D,U]=reactExports.useState(!0),[N,I]=reactExports.useState(!1);reactExports.useEffect(()=>{R.forEach(z=>J(z,"warning"))},[R]),reactExports.useEffect(()=>{api.get("/rooms/my").then(z=>{Array.isArray(z.data)&&c(z.data),I(!0),setTimeout(()=>U(!1),400)}).catch(z=>{var K,st;console.error("Ошибка при загрузке комнат:",(K=z.response)==null?void 0:K.status,(st=z.response)==null?void 0:st.data)}),e?(_(z=>({name:e.name,ext:e.name.split(".").pop().toLowerCase(),version:e.version,size:z==null?void 0:z.size,forkPath:e.forkPath})),api.get(`/documents/${i}/meta`).then(z=>_(K=>({...K,size:z.data.size}))).catch(console.error)):i&&api.get(`/documents/${i}/meta`).then(z=>_({name:z.data.name,size:z.data.size,ext:z.data.extension,version:z.data.version,forkPath:z.data.forkPath})).catch(console.error),Y?(document.body.classList.add("dark"),document.body.classList.remove("light"),localStorage.setItem("theme","dark")):(document.body.classList.add("light"),document.body.classList.remove("dark"),localStorage.setItem("theme","light"))},[Y]),reactExports.useEffect(()=>{if(!j||!A){P([]);return}const z=j.name.split(".").pop().toLowerCase(),K=Math.abs(j.size-A.size)/A.size*100,st=[];j.name!==A.name&&st.push(`Название отличается: «${A.name}» → «${j.name}»`),z!==A.ext&&st.push(`Формат изменился: .${A.ext} → .${z}`),K>20&&st.push("Размер отличается более чем на 20 %"),P(st)},[j,A]);const B=async()=>{if(j){V(!0);try{const z=new FormData;z.append("file",j),E&&z.append("note",E);let K;b?K=e!=null&&e.room?`/rooms/${e.room.id}/docs/${b}/version`:`/documents/${b}/version`:p?(K=`/rooms/${p}/docs`,z.append("name",C)):(K="/documents",z.append("name",C)),await api.post(K,z),J("Документ обновлён","success"),tt("/documents")}catch(z){console.error(z),J("Ошибка при обновлении документа","danger")}finally{V(!1)}}};return D?jsxRuntimeExports.jsx("div",{className:`fade-screen ${N?"fade-out":""} ${Y?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:200})}):jsxRuntimeExports.jsx("div",{className:"container mt-4",children:jsxRuntimeExports.jsxs("div",{className:"card shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>tt(-1),children:[jsxRuntimeExports.jsx(FaArrowLeft,{className:"me-1"})," Назад"]}),jsxRuntimeExports.jsx("button",{className:"btn theme-toggle-btn",onClick:()=>Q(!Y),children:Y?jsxRuntimeExports.jsx(FaSun,{}):jsxRuntimeExports.jsx(FaMoon,{})})]}),jsxRuntimeExports.jsx("div",{className:"card-header fw-bold",children:"Обновление документа"}),jsxRuntimeExports.jsxs("div",{className:"card-body",children:[R.length>0&&jsxRuntimeExports.jsx("div",{className:"alert alert-warning",children:jsxRuntimeExports.jsx("ul",{className:"mb-0 ps-3",children:R.map((z,K)=>jsxRuntimeExports.jsx("li",{children:z},K))})}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Комната"}),jsxRuntimeExports.jsx("input",{className:"form-control",value:(n==null?void 0:n.title)??"— Без комнаты —",disabled:!0})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Родительский документ"}),jsxRuntimeExports.jsx("select",{className:"form-select",value:b,disabled:!0,children:A&&jsxRuntimeExports.jsxs("option",{value:b,children:[A.name," (v",A.version,A.forkPath&&A.forkPath!=="0"?`-${A.forkPath}`:"",")"]})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Название документа"}),jsxRuntimeExports.jsx("input",{type:"text",className:"form-control",value:C,onChange:z=>M(z.target.value),placeholder:"Введите название"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Примечание"}),jsxRuntimeExports.jsx("textarea",{className:"form-control",rows:"3",value:E,onChange:z=>T(z.target.value),placeholder:"Краткое описание или комментарий"})]}),jsxRuntimeExports.jsxs("div",{className:`mb-3 p-4 border rounded text-center drop-zone ${ct?"active":""}`,onClick:()=>{var z;return(z=X.current)==null?void 0:z.click()},onDragOver:z=>{z.preventDefault(),nt(!0)},onDragLeave:z=>{z.preventDefault(),nt(!1)},onDrop:z=>{z.preventDefault(),nt(!1);const K=z.dataTransfer.files[0];K&&(L(K),M(K.name))},style:{cursor:"pointer"},children:[j?jsxRuntimeExports.jsx("div",{className:"text-success fw-bold",children:j.name}):jsxRuntimeExports.jsx("div",{className:"drop-zone",children:"Кликните или перетащите файл сюда"}),jsxRuntimeExports.jsx("input",{ref:X,type:"file",onChange:z=>{const K=z.target.files[0];K&&(L(K),M(K.name))},hidden:!0})]}),jsxRuntimeExports.jsx("button",{className:"btn btn-success w-100",disabled:!j||O,onClick:B,children:O?"Загрузка...":"Загрузить"})]})]})})}function RoomManagerPage(){var mo;const s=useNavigate(),{push:t}=useAlert(),[e,n]=reactExports.useState(null),[i,o]=reactExports.useState(!1),[c,d]=reactExports.useState([]),[f,p]=reactExports.useState(null);sessionStorage.getItem("userId");const[g,b]=reactExports.useState({x:0,y:0}),[x,A]=reactExports.useState(!1),[_,R]=reactExports.useState(""),[P,E]=reactExports.useState(null),[T,C]=reactExports.useState("asc"),[M,j]=reactExports.useState(!1),[L,O]=reactExports.useState(null),[V,X]=reactExports.useState(null),[tt,Y]=reactExports.useState(!1),[Q,ct]=reactExports.useState(null),[nt,J]=reactExports.useState([]),[D,U]=reactExports.useState(""),[N,I]=reactExports.useState("Read"),[B,z]=reactExports.useState(null),[K,st]=reactExports.useState(null),[ht,xt]=reactExports.useState(!1),[mt,Rt]=reactExports.useState(!1),[It,le]=reactExports.useState({x:0,y:0}),[Vt,ye]=reactExports.useState(null),[Re,jt]=reactExports.useState(!1),[bt,Ee]=reactExports.useState(null),[xe,Mt]=reactExports.useState([]),[is,gs]=reactExports.useState(""),[Ke,ee]=reactExports.useState("Read"),[Ls,Ge]=reactExports.useState(!0),[Je,Ds]=reactExports.useState(!1),[be,ae]=reactExports.useState({show:!1,room:null}),De=async()=>{if(nt.length)return;const{data:Z}=await api.get("/contacts");J(Array.isArray(Z)?Z:[])},we=async Z=>{const{data:St}=await api.get(`/documents/${Z}/tokens`);return Array.isArray(St)?St:[]},[ts,ws]=reactExports.useState([]),Lt={mine:{key:"mine",label:"Мои"},other:{key:"other",label:"Другие"},archive:{key:"archive",label:"Архив"}},[ys,un]=reactExports.useState(Lt.mine.key),[hn,Di]=reactExports.useState([]),[Fs,at]=reactExports.useState([]),[ft,Et]=reactExports.useState([]),[Bt,se]=reactExports.useState(!1),[ue,Xe]=reactExports.useState([]),[Tt,Dt]=reactExports.useState(""),[Gt,qt]=reactExports.useState(!1),[ke,vs]=reactExports.useState(null),[Pe,rs]=reactExports.useState(""),[Gs,pr]=reactExports.useState("Read"),[lo,Fi]=reactExports.useState(!1),[aa,rt]=reactExports.useState([]),[kt,Yt]=reactExports.useState("");reactExports.useMemo(()=>[...Fs,...ft],[Fs,ft]);const Zt=async()=>{const{data:Z}=await api.get("/rooms/grouped");Z&&Z.mine&&Z.other&&(at(Z.mine),Et(Z.other),d([...Z.mine,...Z.other]))};reactExports.useEffect(()=>{Zt(),Ds(!0),setTimeout(()=>Ge(!1),400)},[]);const[ne,hs]=reactExports.useState({show:!1,type:null,item:null,value:""}),fe=async()=>{if(ys===Lt.archive.key){const{data:Wt}=await api.get("/documents?type=archived");Di(Wt),mr(Wt);return}const{data:Z}=await api.get("/documents?type=all"),St=Z.filter(Wt=>{var Te;return((Te=Wt.room)==null?void 0:Te.id)===f});Di(St),mr(St)};reactExports.useEffect(()=>{Zt()},[]),reactExports.useEffect(()=>{fe()},[ys,f]);const Oi=(Z,St)=>{hs({show:!0,type:Z,item:St,value:St.name||St.title||""}),_t(!1),Rt(!1)},Ii=async()=>{const{type:Z,item:St,value:Wt}=ne,Te=Wt.trim();try{Z==="doc"?(await api.patch(`/documents/${wt.id}/rename`,{name:Te}),await fe()):(await api.patch(`/rooms/${St.id}/rename`,{name:Te}),await Zt()),t("Название изменено","success")}catch{t("Ошибка при переименовании","danger")}finally{hs(Qt=>({...Qt,show:!1}))}},[Pt,Bi]=reactExports.useState(()=>document.body.classList.contains("dark")?"dark":"light");reactExports.useEffect(()=>{document.body.classList.toggle("dark",Pt==="dark"),document.body.classList.toggle("light",Pt!=="dark")},[Pt]);const dn=reactExports.useRef(null);reactExports.useEffect(()=>{if(!mt)return;const Z=St=>{dn.current&&!dn.current.contains(St.target)&&Rt(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[mt]);const co=(Z,St)=>{if(Z.preventDefault(),!Fs.some(Te=>Te.id===St.id)){t("Вы не можете управлять чужими комнатами","warning");return}ye(St),le({x:Z.pageX,y:Z.pageY}),Rt(!0)},oa=Z=>Z==="dark"?"bg-dark bg-gradient text-light":"bg-white text-dark",Pn=Z=>Z==="dark"?{background:"#1e1e1e",color:"#f8f9fa"}:{},Se=Z=>Z==="dark"?"bg-dark text-light":"bg-light text-dark",Yn={Read:0,Edit:1,Full:2},[En,mr]=reactExports.useState([]),[vt,_t]=reactExports.useState(!1),[wt,Ae]=reactExports.useState(null),es=reactExports.useRef(null),Wn=(Z,St)=>{Z.preventDefault(),Ae(St),ct(St),b({x:Z.pageX,y:Z.pageY}),_t(!0)},Ze=async Z=>{try{const{data:St}=await api.get(`/documents/${Z}/meta`);if(St.roomId){const Wt=Fs.some(Te=>Te.id===St.roomId);un(Wt?Lt.mine.key:Lt.other.key),p(St.roomId)}else un(Lt.mine.key),p(null);setTimeout(()=>z(Z),400)}catch{t("У вас нет прав на просмотр документа","warning")}},fn={Full:["edit","delete","archive","copy","rename","changeAccess","toggleRoom","download","paste","tree"],Edit:["edit","copy","rename","changeAccess","toggleRoom","download","paste","tree"],Read:["copy","download","tree"]},en={Read:"Чтение",Edit:"Изменение",Full:"Полный",Close:"Закрыть доступ"},pn=new Set(ts.map(Z=>Z.userId)),Dl=nt.filter(Z=>!pn.has(Z.id));reactExports.useEffect(()=>{const Z=St=>{vt&&es.current&&!es.current.contains(St.target)&&_t(!1)};return vt?document.addEventListener("mousedown",Z):document.removeEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[vt]),reactExports.useEffect(()=>{if(!B)return;const Z=setTimeout(()=>{const St=document.getElementById(`doc-${B}`);St&&St.scrollIntoView({behavior:"smooth",block:"center"})},100);return()=>clearTimeout(Z)},[B]);const la=()=>{wt&&(_t(!1),s(`/documents/${wt.id}/update`,{state:{parentDoc:wt}}))},xu=async Z=>{const St=En.find(Qt=>Qt.id===Z);if(!St)return;const Wt=await we(St.id),Te=sn(St,Wt,c);Ae({...St,effectiveAccessLevel:Te}),n(Z)};function sn(Z,St,Wt){const Te=sessionStorage.getItem("userId");if(Z.createdBy.id===Te)return"Full";const Qt=St.find(qs=>qs.documentId===Z.id);if(Qt)return Qt.accessLevel;const Me=Z.room?Wt.find(qs=>qs.id===Z.room.id):null;return(Me==null?void 0:Me.accessLevel)||"Read"}const fi=async()=>{if(wt)try{await api.delete(`/documents/${wt.id}`),mr(Z=>Z.filter(St=>St.id!==wt.id))}catch{t("Не удалось удалить документ","danger")}finally{t("Документ удалён","success"),_t(!1)}},uo=async()=>{if(wt)try{await api.post(`/documents/${wt.id}/archive`),t("Документ заархивирован","success"),await fe()}catch{t("Ошибка при архивировании","danger")}finally{_t(!1)}},Kn=async()=>{if(wt)try{const{data:Z}=await api.get("/rooms/my");d(Z),p(null),o(!0),_t(!1)}catch{t("Не удалось получить список комнат","danger")}},Hi=async()=>{if(wt)try{await api.post(`/documents/${wt.id}/copy`,{targetRoomId:f}),o(!1),await fe(),t("Документ скопирован","success")}catch{t("Ошибка при копировании","danger")}},ca=async()=>{const{data:Z}=await api.get(`/documents/${wt.id}/versions`);rt(Z),Yt(""),Fi(!0),_t(!1)},ie=async()=>{var St,Wt;if(!wt)return;const Z=await we(wt.id);ws(Z),await De(),U(((St=Z[0])==null?void 0:St.userId)??""),I(((Wt=Z[0])==null?void 0:Wt.accessLevel)??"Read"),Y(!0),_t(!1)},pi=async Z=>{if(Z.room)try{await api.post(`/documents/${Z.id}/remove-room`),await fe(),t("Документ удалён из комнаты","success")}catch{t("Не удалось удалить из комнаты","danger")}};reactExports.useEffect(()=>{fe()},[ys,f]);const Ts=async Z=>{await Zt(),O(Z),X(null),j(!0)},Qe=()=>{wt&&(_t(!1),wt.room?pi(wt):Ts(wt))},zi=async()=>{if(wt)try{const Z=sessionStorage.getItem("token"),St=await fetch(`/api/documents/${wt.id}/download`,{method:"GET",headers:{Authorization:`Bearer ${Z}`}});if(!St.ok){t("Ошибка при скачивании файла","danger");return}const Wt=await St.blob(),Te=window.URL.createObjectURL(Wt),Qt=document.createElement("a");Qt.href=Te,Qt.download=wt.name||`document_${wt.id}`,document.body.appendChild(Qt),Qt.click(),document.body.removeChild(Qt),window.URL.revokeObjectURL(Te),_t(!1)}catch{t("Ошибка при скачивании файла","danger")}},Zn=async()=>{if(window.confirm("Вы уверены, что хотите полностью очистить архив?"))try{await api.delete("/documents/archived"),await fe(),t("Архив очищен","success")}catch{t("Не удалось очистить архив","danger")}},ho=async()=>{if(wt)try{const{data:Z}=await api.get(`/documents/${wt.id}/versions`);st(Z),xt(!0)}catch{t("Не удалось загрузить дерево версий","danger")}finally{_t(!1)}},mi=Z=>{P===Z?C(St=>St==="asc"?"desc":"asc"):(E(Z),C("asc"))},Ft=Z=>{z(Z)},zt=(Z=En)=>P?[...Z].sort((Wt,Te)=>{var qs,Vi,Ud,Ol;let Qt=Wt[P],Me=Te[P];return P==="createdAt"&&(Qt=new Date(Qt),Me=new Date(Me)),P==="prev"?(Qt=Wt.previousVersionId?1:0,Me=Te.previousVersionId?1:0,T==="asc"?Qt-Me:Me-Qt):P==="room"?(Qt=((qs=Wt.room)==null?void 0:qs.title)||"",Me=((Vi=Te.room)==null?void 0:Vi.title)||"",T==="asc"?Qt.localeCompare(Me):Me.localeCompare(Qt)):Qt==null?1:Me==null?-1:typeof Qt=="string"?T==="asc"?Qt.localeCompare(Me):Me.localeCompare(Qt):P==="createdBy"?(Qt=((Ud=Wt.createdBy)==null?void 0:Ud.name)||"",Me=((Ol=Te.createdBy)==null?void 0:Ol.name)||"",T==="asc"?Qt.localeCompare(Me):Me.localeCompare(Qt)):T==="asc"?Qt-Me:Me-Qt}):Z,te=[{key:"edit",label:"Изменить",action:la},{key:"delete",label:"Удалить",action:fi},{key:"archive",label:"Архивировать",action:uo},{key:"copy",label:"Копировать",action:Kn},{key:"rename",label:"Переименовать",action:()=>Oi("doc",wt)},{key:"changeAccess",label:"Изменить доступ",action:ie},{key:"toggleRoom",label:wt!=null&&wt.room?"Удалить из комнаты":"Добавить в комнату",action:Qe},{key:"download",label:"Скачать",action:zi},{key:"tree",label:"Дерево версий",action:ho}],pe=async()=>{const Z=be.room;try{await api.delete(`/rooms/${Z.id}`),Z.id===f&&p(null),await Zt(),t(`Комната «${Z.title}» удалена`,"success")}catch{t("Не удалось удалить комнату","danger")}finally{ae({show:!1,room:null})}},as=async Z=>{try{const{data:St}=await api.get(`/rooms/${Z.id}/docs`),Wt=St.map(Vi=>Vi.id);if(Wt.length===0){t("В комнате нет документов для скачивания","info");return}const Qt=(await api.post(`/rooms/${Z.id}/docs/archive`,{documentIds:Wt},{responseType:"blob"})).data,Me=URL.createObjectURL(Qt),qs=document.createElement("a");qs.href=Me,qs.download=`${Z.title||"room"}.zip`,document.body.appendChild(qs),qs.click(),qs.remove(),URL.revokeObjectURL(Me),t("Архив комнаты загружен","success")}catch(St){console.error(St),t("Не удалось скачать архив комнаты","danger")}},gr=async Z=>{await De(),vs(Z),rs(""),pr("Read"),qt(!0),Rt(!1)},fo=async Z=>{try{const{data:St}=await api.get(`/rooms/${Z.id}/users`);Xe(St),Dt(Z.title),se(!0),Rt(!1)}catch{t("Не удалось получить список пользователей","danger")}},zd=[{key:"unarchive",label:"Разархивировать",action:ca},{key:"delete",label:"Удалить",action:fi}],gi=[{key:"add",label:"Добавить пользователя",action:gr},{key:"list",label:"Пользователи комнаты",action:fo},{key:"access",label:"Изменить доступ",action:async Z=>{var Wt,Te;const{data:St}=await api.get(`/rooms/${Z.id}/users`);await De(),Ee(Z),Mt(St),gs(((Wt=St[0])==null?void 0:Wt.userId)??""),ee(((Te=St[0])==null?void 0:Te.accessLevel)??0),jt(!0),Rt(!1)}},{key:"dl",label:"Скачать",action:as},{key:"ren",label:"Переименовать",action:Z=>Oi("room",Z)},{key:"del",label:"Удалить",action:Z=>ae({show:!0,room:Z})}],bu=ys===Lt.archive.key?zd:te,po=async()=>{if(Pe)try{await api.post(`/rooms/${ke.id}/users`,{userId:Pe,accessLevel:Yn[Gs]}),t("Пользователь добавлен","success"),qt(!1)}catch{t("Не удалось добавить пользователя","danger")}},Ui=async()=>{if(Pe)try{await api.delete(`/rooms/${ke.id}/users/${Pe}`),t("Пользователь удалён из комнаты","success"),qt(!1)}catch{t("Не удалось удалить пользователя","danger")}},Eu=ys===Lt.archive.key?["unarchive","delete"]:fn[wt==null?void 0:wt.accessLevel]||[];return Ls?jsxRuntimeExports.jsx("div",{className:`fade-screen ${Je?"fade-out":""} ${Pt==="dark"?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:200})}):jsxRuntimeExports.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[jsxRuntimeExports.jsx("nav",{className:"navbar navbar-expand-lg shadow-sm",style:{background:Pt==="dark"?"linear-gradient(90deg, #2c2c2c, #1a1a1a)":"#fff"},children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link d-flex align-items-center p-0",onClick:()=>s("/"),children:[jsxRuntimeExports.jsx(FaFolderOpen,{size:28,className:Pt==="dark"?"text-warning":"text-primary"}),jsxRuntimeExports.jsx("span",{className:`ms-2 fw-bold ${Pt==="dark"?"text-light":"text-dark"}`,children:"Менеджер комнат"})]}),jsxRuntimeExports.jsxs("div",{className:"ms-auto d-flex align-items-center gap-3",children:[jsxRuntimeExports.jsxs(Link,{to:"/documents/create",className:"btn btn-success btn-sm",title:"Создать документ",children:[jsxRuntimeExports.jsx(FaPlus,{className:"me-1"})," Документ"]}),jsxRuntimeExports.jsx(Notifications,{theme:Pt}),jsxRuntimeExports.jsx("button",{className:"btn btn-link",title:"Переключить тему",onClick:()=>Bi(Pt==="dark"?"light":"dark"),style:{color:Pt==="dark"?"#ccc":"#333"},children:Pt==="dark"?jsxRuntimeExports.jsx(FaSun,{size:20}):jsxRuntimeExports.jsx(FaMoon,{size:20})}),jsxRuntimeExports.jsxs("button",{className:"btn btn-outline-secondary btn-sm",title:"Назад",onClick:()=>s("/"),children:[jsxRuntimeExports.jsx(FaArrowLeft,{className:"me-1"}),"Выйти"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"container my-4 flex-fill",children:jsxRuntimeExports.jsxs("div",{className:"room-row d-flex flex-wrap gap-4",children:[jsxRuntimeExports.jsx("div",{className:"left-pane flex-grow-1",children:jsxRuntimeExports.jsx("div",{className:`card shadow h-100 ${oa(Pt)}`,children:jsxRuntimeExports.jsx("div",{className:"table-responsive",children:jsxRuntimeExports.jsxs("table",{className:`table table-hover align-middle ${Pt==="dark"?"table-dark":""}`,children:[jsxRuntimeExports.jsx("thead",{className:Pt==="dark"?"table-dark":"table-light",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsxs("th",{onClick:()=>mi("name"),style:{cursor:"pointer"},children:["Название ",P==="name"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{onClick:()=>mi("version"),style:{cursor:"pointer"},children:["Версия ",P==="version"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{onClick:()=>mi("createdAt"),style:{cursor:"pointer"},children:["Дата создания ",P==="createdAt"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{onClick:()=>mi("createdBy"),style:{cursor:"pointer"},children:["Создал ",P==="createdBy"?T==="asc"?"↑":"↓":""]}),jsxRuntimeExports.jsxs("th",{onClick:()=>mi("prev"),style:{cursor:"pointer"},children:["Пред. версия ",P==="prev"?T==="asc"?"↑":"↓":""]})]})}),jsxRuntimeExports.jsx("tbody",{children:hn.length===0?jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:"6",className:"text-center text-muted py-4",children:"Документы не найдены"})}):zt(hn).map(Z=>{var St;return jsxRuntimeExports.jsxs("tr",{id:`doc-${Z.id}`,className:[Pt==="dark"?"border-secondary":"",B===Z.id?"row-selected":""].join(" ").trim(),style:{cursor:"pointer"},onClick:()=>Ft(Z.id),onDoubleClick:Wt=>{Wt.stopPropagation(),xu(Z.id)},onContextMenu:Wt=>Wn(Wt,Z),children:[jsxRuntimeExports.jsx("td",{children:Z.name}),jsxRuntimeExports.jsx("td",{children:`v${Z.version}${Z.forkPath&&Z.forkPath!=="0"?`-${Z.forkPath}`:""}`}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsx(LocalTime,{utc:Z.createdAt})}),jsxRuntimeExports.jsx("td",{children:((St=Z.createdBy)==null?void 0:St.name)||"-"}),jsxRuntimeExports.jsx("td",{children:Z.previousVersionId?jsxRuntimeExports.jsx("button",{className:"btn btn-link p-0",onClick:()=>Ze(Z.previousVersionId),children:"Просмотр"}):"-"})]},Z.id)})})]})})})}),jsxRuntimeExports.jsx("div",{className:"right-pane",children:jsxRuntimeExports.jsxs("div",{className:`card shadow h-100 ${oa(Pt)}`,children:[jsxRuntimeExports.jsx("ul",{className:"nav nav-tabs nav-fill flex-nowrap",children:Object.values(Lt).map(Z=>jsxRuntimeExports.jsx("li",{className:"nav-item",children:jsxRuntimeExports.jsx("button",{type:"button",className:`nav-link ${ys===Z.key?"active":""}`,onClick:()=>{Z.key!==ys&&un(Z.key)},children:Z.label})},Z.key))}),jsxRuntimeExports.jsx("div",{className:"list-group list-group-flush",children:ys===Lt.archive.key?jsxRuntimeExports.jsxs("div",{className:"p-3 d-flex flex-column align-items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-muted small",children:"Полностью очистить архив."}),jsxRuntimeExports.jsx("button",{className:"btn btn-outline-danger",style:{opacity:.8},onClick:Zn,children:"Очистить"})]}):(ys===Lt.mine.key?Fs:ft).map(Z=>jsxRuntimeExports.jsx("button",{className:`list-group-item list-group-item-action text-center
														${f===Z.id?"active":""}`,onClick:()=>p(Z.id),onContextMenu:St=>co(St,Z),children:Z.title},Z.id))})]})})]})}),jsxRuntimeExports.jsxs("footer",{className:`py-3 text-center ${Pt==="dark"?"bg-dark text-secondary":"bg-light text-muted"}`,children:["© ",new Date().getFullYear()," VlaDO"]}),x&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Переименовать документ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>A(!1)})]}),jsxRuntimeExports.jsx("div",{className:`modal-body ${Se(Pt)}`,children:jsxRuntimeExports.jsx("input",{className:"form-control",value:_,onChange:Z=>R(Z.target.value)})}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>A(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:Ii,children:"ОК"})]})]})})}),i&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Копировать документ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>o(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("label",{className:"form-label fw-bold mb-2",children:"Выберите место"}),jsxRuntimeExports.jsxs("select",{className:"form-select",value:f??"",onChange:Z=>{const St=Z.target.value;p(St===""?null:St.trim())},children:[jsxRuntimeExports.jsx("option",{value:"",children:"(Вне комнаты)"}),c.map(Z=>jsxRuntimeExports.jsxs("option",{value:Z.id,disabled:Z.accessLevel==="Read",children:[Z.title," — ",Z.accessLevel==="Read"?"только чтение":"можно изменять"]},Z.id))]})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:Hi,children:"Копировать"})]})]})})}),M&&L&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Добавить «",L.name,"» в комнату"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>j(!1)})]}),jsxRuntimeExports.jsx("div",{className:`modal-body ${Se(Pt)}`,children:jsxRuntimeExports.jsxs("select",{className:"form-select",value:V??"",onChange:Z=>X(Z.target.value||null),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Выберите комнату…"}),c.map(Z=>jsxRuntimeExports.jsx("option",{value:Z.id,children:Z.title},Z.id))]})}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>j(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:!V,onClick:async()=>{try{await api.post(`/documents/${L.id}/add-to-room/${V}`),j(!1),await fe()}catch(Z){console.error(Z),t("Не удалось добавить в комнату","danger")}},children:"Добавить"})]})]})})}),jsxRuntimeExports.jsx(DocumentPreviewModal,{docId:e,show:!!e,onClose:()=>n(null),onOk:()=>{n(null),loadDocs()},theme:Pt,accessLevel:wt==null?void 0:wt.effectiveAccessLevel,onDownload:zi}),tt&&Q&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Изменить доступ"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>Y(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"fw-bold",children:Q.name}),jsxRuntimeExports.jsxs("span",{className:"badge bg-secondary",children:["v",Q.version]})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[jsxRuntimeExports.jsxs("span",{children:["Комната: ",Q.room?jsxRuntimeExports.jsx("strong",{children:Q.room.title}):jsxRuntimeExports.jsx("em",{className:"text-muted",children:"(без комнаты)"})]}),jsxRuntimeExports.jsx("span",{className:"badge bg-info text-dark",children:Q.room?en[Q.accessLevel]:"—"})]}),jsxRuntimeExports.jsx("label",{className:"form-label",children:"Пользователь"}),jsxRuntimeExports.jsxs("select",{className:"form-select mb-3",value:D,onChange:Z=>{const St=Z.target.value;U(St);const Wt=ts.find(Te=>Te.userId===St);I((Wt==null?void 0:Wt.accessLevel)??"Read")},children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"— выберите пользователя —"}),ts.map(Z=>jsxRuntimeExports.jsxs("option",{value:Z.userId,children:[Z.userName," — ",en[Z.accessLevel]]},Z.userId)),Dl.map(Z=>jsxRuntimeExports.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),jsxRuntimeExports.jsx("label",{className:"form-label",children:"Уровень доступа"}),jsxRuntimeExports.jsx("select",{className:"form-select",value:N,onChange:Z=>I(Z.target.value),children:Object.entries(en).map(([Z,St])=>jsxRuntimeExports.jsx("option",{value:Z,children:St},Z))})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>Y(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:!D,onClick:async()=>{try{const Z=ts.find(Wt=>Wt.userId===D);N==="Close"?Z?(await api.delete(`/documents/${Q.id}/token/user/${D}`),t("Доступ закрыт","success")):t("У пользователя нет доступа","warning"):(await api.post(`/documents/${Q.id}/token`,{userId:D,accessLevel:Yn[N]}),t("Доступ предоставлен","success"));const St=await we(Q.id);ws(St),Y(!1)}catch(Z){console.error(Z),t("Не удалось изменить доступ","danger")}},children:"Ок"})]})]})})}),vt&&wt&&jsxRuntimeExports.jsxs("div",{ref:es,style:{position:"absolute",top:`${g.y}px`,left:`${g.x}px`,zIndex:1e3,backgroundColor:Pt==="dark"?"#1e1e1e":"#fff",color:Pt==="dark"?"#f8f9fa":"#212529",border:Pt==="dark"?"1px solid #555":"1px solid #ccc",borderRadius:"6px",padding:"0.5rem",boxShadow:"0 0 10px rgba(0,0,0,0.2)",minWidth:"200px"},children:[jsxRuntimeExports.jsx("div",{className:"fw-bold mb-2",children:wt.name}),jsxRuntimeExports.jsx("div",{className:"list-group list-group-flush",children:bu.filter(Z=>Eu.includes(Z.key)).map(Z=>jsxRuntimeExports.jsx("button",{className:"list-group-item list-group-item-action",onClick:Z.action,children:Z.label},Z.key))})]}),ht&&K&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:{backgroundColor:Pt==="dark"?"#1e1e1e":"#fff",color:Pt==="dark"?"#f8f9fa":"#212529"},children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Pt==="dark"?"bg-dark text-light":""}`,children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Дерево версий"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>xt(!1)})]}),jsxRuntimeExports.jsx("div",{className:"modal-body",children:jsxRuntimeExports.jsx("ul",{className:"list-unstyled",children:K.map((Z,St)=>{const Wt=Z.forkPath.split("."),Te=Wt.length>1&&Wt[Wt.length-1]!=="0";return jsxRuntimeExports.jsxs("li",{className:"mb-2",children:[jsxRuntimeExports.jsxs("span",{style:{color:"#d63384",fontFamily:"monospace"},children:[Te?"┣":"|"," ",Z.forkPath.replace(/\./g," → ")]})," | ",jsxRuntimeExports.jsx("strong",{children:Z.name})," — ",new Date(Z.createdOn).toLocaleString("ru-RU")]},Z.id)})})}),jsxRuntimeExports.jsx("div",{className:`modal-footer ${Pt==="dark"?"bg-dark text-light":""}`,children:jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>xt(!1),children:"Закрыть"})})]})})}),mt&&Vt&&jsxRuntimeExports.jsxs("div",{ref:dn,style:{position:"absolute",top:It.y,left:It.x,zIndex:1e3,background:Pt==="dark"?"#1e1e1e":"#fff",color:Pt==="dark"?"#f8f9fa":"#212529",border:Pt==="dark"?"1px solid #555":"1px solid #ccc",borderRadius:6,padding:6,minWidth:220,boxShadow:"0 0 10px rgba(0,0,0,.2)"},children:[jsxRuntimeExports.jsx("div",{className:"fw-bold mb-2",children:Vt.title}),jsxRuntimeExports.jsx("div",{className:"list-group list-group-flush",children:gi.map(Z=>jsxRuntimeExports.jsx("button",{className:"list-group-item list-group-item-action",onClick:()=>Z.action(Vt),children:Z.label},Z.key))})]}),ne.show&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Переименовать ",ne.type==="doc"?"документ":"комнату"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>hs(Z=>({...Z,show:!1}))})]}),jsxRuntimeExports.jsx("div",{className:`modal-body ${Se(Pt)}`,children:jsxRuntimeExports.jsx("input",{className:"form-control",value:ne.value,onChange:Z=>hs(St=>({...St,value:Z.target.value}))})}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>hs(Z=>({...Z,show:!1})),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:Ii,children:"ОК"})]})]})})}),be.show&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:`modal-content ${Pt==="dark"?"bg-dark text-light":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"modal-header",children:[jsxRuntimeExports.jsx("h5",{className:"modal-title",children:"Удалить комнату"}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>ae({show:!1,room:null})})]}),jsxRuntimeExports.jsx("div",{className:"modal-body",children:jsxRuntimeExports.jsxs("p",{className:"mb-0",children:["Вы уверены, что хотите удалить комнату ",jsxRuntimeExports.jsxs("strong",{children:["«",be.room.title,"»"]})," и все документы в ней?"]})}),jsxRuntimeExports.jsxs("div",{className:"modal-footer",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>ae({show:!1,room:null}),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-danger",onClick:pe,children:"Ок"})]})]})})}),Re&&bt&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Доступ к комнате «",bt.title,"»"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>jt(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[jsxRuntimeExports.jsx("span",{children:"Текущий уровень по-умолчанию"}),jsxRuntimeExports.jsx("span",{className:"badge bg-info text-dark",children:LevelLabel[bt.defaultAccessLevel]})]}),jsxRuntimeExports.jsx("label",{className:"form-label",children:"Новый уровень"}),jsxRuntimeExports.jsx("select",{className:"form-select",value:Ke,onChange:Z=>ee(Number(Z.target.value)),children:Object.entries(LevelLabel).map(([Z,St])=>jsxRuntimeExports.jsx("option",{value:Z,children:St},Z))}),jsxRuntimeExports.jsx("button",{className:"btn btn-outline-danger btn-sm mt-3",onClick:async()=>{window.confirm("Удалить всех участников?")&&(await api.delete(`/rooms/${bt.id}/users`),t("Доступ закрыт для всех","success"),jt(!1))},children:"Закрыть доступ для всех"})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>jt(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:async()=>{await api.patch(`/rooms/${bt.id}/access-level`,{accessLevel:Ke}),t("Уровень доступа обновлён","success"),await Zt(),jt(!1)},children:"ОК"})]})]})})}),Bt&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Пользователи комнаты «",Tt,"»"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>se(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("p",{className:"mb-2",children:[jsxRuntimeExports.jsx("strong",{children:"Доступ по-умолчанию: "}),jsxRuntimeExports.jsx("span",{className:"badge bg-info text-dark",children:LevelLabel[((mo=c.find(Z=>Z.title===Tt))==null?void 0:mo.defaultAccessLevel)??0]})]}),ue.length===0?jsxRuntimeExports.jsx("p",{className:"text-muted",children:"В комнате нет участников."}):jsxRuntimeExports.jsx("ul",{className:"list-group",children:ue.map(Z=>jsxRuntimeExports.jsxs("li",{className:"list-group-item d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:Z.name}),jsxRuntimeExports.jsx("span",{className:"badge bg-secondary",children:LevelLabel[Z.accessLevel]})]},Z.userId))})]}),jsxRuntimeExports.jsx("div",{className:`modal-footer ${Se(Pt)}`,children:jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:()=>se(!1),children:"Закрыть"})})]})})}),Gt&&ke&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Добавить пользователя в «",ke.title,"»"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>qt(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("label",{className:"form-label",children:"Пользователь"}),jsxRuntimeExports.jsxs("select",{className:"form-select mb-3",value:Pe,onChange:Z=>rs(Z.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"— выберите пользователя —"}),nt.map(Z=>jsxRuntimeExports.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("button",{className:"btn btn-link text-danger me-auto",style:{opacity:.8},disabled:!Pe,onClick:Ui,title:"Удалить пользователя из комнаты",children:[jsxRuntimeExports.jsx(FaTimes,{className:"me-1"}),"Удалить"]}),jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>qt(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",disabled:!Pe,onClick:po,children:"ОК"})]})]})})}),lo&&jsxRuntimeExports.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,.5)"},children:jsxRuntimeExports.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:jsxRuntimeExports.jsxs("div",{className:"modal-content",style:Pn(Pt),children:[jsxRuntimeExports.jsxs("div",{className:`modal-header ${Se(Pt)}`,children:[jsxRuntimeExports.jsxs("h5",{className:"modal-title",children:["Разархивировать «",wt.name,"»"]}),jsxRuntimeExports.jsx("button",{className:"btn-close",onClick:()=>Fi(!1)})]}),jsxRuntimeExports.jsxs("div",{className:`modal-body ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("p",{className:"mb-2 small text-muted",children:"Будут восстановлены все версии ветки:"}),jsxRuntimeExports.jsx("ul",{className:"list-group mb-3",children:aa.map(Z=>jsxRuntimeExports.jsxs("li",{className:"list-group-item d-flex justify-content-between",children:[jsxRuntimeExports.jsx("span",{children:Z.name}),jsxRuntimeExports.jsxs("span",{className:"badge bg-secondary",children:["v",Z.version]})]},Z.id))}),jsxRuntimeExports.jsx("label",{className:"form-label",children:"Куда:"}),jsxRuntimeExports.jsxs("select",{className:"form-select",value:kt,onChange:Z=>Yt(Z.target.value),children:[jsxRuntimeExports.jsx("option",{value:"",children:"(Вне комнаты)"}),Fs.map(Z=>jsxRuntimeExports.jsx("option",{value:Z.id,children:Z.title},Z.id))]})]}),jsxRuntimeExports.jsxs("div",{className:`modal-footer ${Se(Pt)}`,children:[jsxRuntimeExports.jsx("button",{className:"btn btn-secondary",onClick:()=>Fi(!1),children:"Отмена"}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{await api.patch(`/documents/${wt.id}/unarchive`,kt?{targetRoomId:kt}:{targetRoomId:null}),t("Документы восстановлены","success"),await fe()}catch{t("Не удалось разархивировать","danger")}finally{Fi(!1)}},children:"ОК"})]})]})})})]})}function formatActivity(s){const{type:t,meta:e}=s;switch(t){case"CreatedDocument":return`📄 Добавлен документ «${(e==null?void 0:e.Name)??"(без названия)"}».`;case"UpdatedDocument":return`✏️ Обновлён документ «${(e==null?void 0:e.Name)??"(без названия)"}» v${e==null?void 0:e.Version}-${(e==null?void 0:e.ForkPath)||"0"}.`;case"DeletedDocument":return`🗑️ Удалён документ «${(e==null?void 0:e.Name)??"(без названия)"}».`;case"ArchivedDocument":return`📦 Архивирован документ ${e==null?void 0:e.Name} v${e==null?void 0:e.Version}-${(e==null?void 0:e.ForkPath)||"0"}.`;case"RenamedDocument":return`🔖 Переименован документ: «${e==null?void 0:e.OldName}» → «${e==null?void 0:e.NewName}».`;case"IssuedToken":return`🔑 Выдан доступ к документу «${e==null?void 0:e.Name}».`;case"UpdatedToken":return`🔐 Обновлён доступ к документу «${e==null?void 0:e.Name}».`;case"RevokedToken":return`🚫 Отозван доступ к документу «${e==null?void 0:e.Name}».`;case"CreatedRoom":return`🆕 Создана комната «${(e==null?void 0:e.RoomTitle)??"(без названия)"}».`;case"InvitedToRoom":return`✉️ Приглашение в комнату «${(e==null?void 0:e.RoomTitle)??"(без названия)"}» от ${e==null?void 0:e.UserName}.`;case"AcceptedRoom":return`✅ Приглашение для ${e==null?void 0:e.UserName} в комнату принято.`;case"DeclinedRoom":return`🚫 Приглашение для ${e==null?void 0:e.UserName} в комнату отклонено.`;case"RevokedRoom":return`🚫 Отозван доступ к комнате «${e==null?void 0:e.RoomTitle}».`;case"UpdatedRoomAccess":return`🔧 Изменён уровень доступа в комнате «${(e==null?void 0:e.RoomTitle)??"(без названия)"}».`;case"DeletedRoom":return`❌ Удалена комната «${(e==null?void 0:e.RoomTitle)??"(без названия)"}» с ${(e==null?void 0:e.Count)??"0"} документами.`;case"InvitedToContacts":return`👤 Запрос на добавление в контакты от ${e==null?void 0:e.UserName}.`;case"AcceptedContact":return`✅ Ваш запрос принял ${e==null?void 0:e.UserName}.`;case"DeclinedContact":return`🚫 Ваш запрос отклонил ${e==null?void 0:e.UserName}.`;default:return"ℹ️ Неизвестная активность"}}function ActivitiesPage(){const s=useNavigate(),{push:t}=useAlert(),[e,n]=reactExports.useState(!0),[i,o]=reactExports.useState(!1);setTimeout(()=>{o(!0),setTimeout(()=>n(!1),400)},100);const[c,d]=reactExports.useState(()=>document.body.classList.contains("dark")?"dark":"light");reactExports.useEffect(()=>{document.body.classList.toggle("dark",c==="dark"),document.body.classList.toggle("light",c!=="dark")},[c]);const[f,p]=reactExports.useState(1),[g,b]=reactExports.useState(1),[x,A]=reactExports.useState(null);reactExports.useEffect(()=>{let T=!1;return(async()=>{try{const{data:C}=await api.get(`/activity/my?page=${f}&pageSize=10`);if(T)return;A(C.items),b(C.totalPages)}catch{T||t("Не удалось получить активности","danger")}})(),()=>{T=!0}},[f]);const _=async(T,C)=>{var j;const M=(j=T.meta)==null?void 0:j.ContactId;if(M)try{C?await api.post(`/contacts/${M}/accept`):await api.post(`/contacts/${M}/block`),t("Действие выполнено","success")}catch{t("Ошибка при обновлении контакта","danger")}},R=async(T,C)=>{const M=T.roomId;if(!M)return;const j=C?`/rooms/${M}/accept`:`/rooms/${M}/decline`;try{await api.post(j),t("Действие выполнено","success")}catch{t("Ошибка при обработке приглашения","danger")}},P=T=>{var j,L,O,V,X;const C=jsxRuntimeExports.jsx(LocalTime,{utc:T.createdAt,className:"small"}),M=({children:tt,extra:Y})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[C,jsxRuntimeExports.jsx("div",{children:tt}),Y&&jsxRuntimeExports.jsx("div",{className:"mt-1",children:Y})]});switch(T.type){case"InvitedToRoom":return jsxRuntimeExports.jsxs(M,{extra:!T.isRead&&jsxRuntimeExports.jsxs("div",{className:"d-flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>R(T,!0),children:"Принять"}),jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>R(T,!1),children:"Отклонить"})]}),children:["✉️ Приглашение в комнату «",jsxRuntimeExports.jsx("strong",{children:(j=T.meta)==null?void 0:j.RoomTitle}),"» от ",(L=T.meta)==null?void 0:L.UserName,"."]});case"InvitedToContacts":return jsxRuntimeExports.jsxs(M,{extra:!T.isRead&&jsxRuntimeExports.jsxs("div",{className:"d-flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>_(T,!0),children:"Принять"}),jsxRuntimeExports.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>_(T,!1),children:"Отклонить"})]}),children:["👤 Запрос в контакты от ",jsxRuntimeExports.jsx("strong",{children:(O=T.meta)==null?void 0:O.UserName}),"."]});case"AcceptedContact":return jsxRuntimeExports.jsxs(M,{children:["✅ Ваш запрос принял ",jsxRuntimeExports.jsx("strong",{children:(V=T.meta)==null?void 0:V.UserName}),"."]});case"DeclinedContact":return jsxRuntimeExports.jsxs(M,{children:["🚫 Ваш запрос отклонил ",jsxRuntimeExports.jsx("strong",{children:(X=T.meta)==null?void 0:X.UserName}),"."]});default:return jsxRuntimeExports.jsx(M,{children:formatActivity(T)})}};if(e)return jsxRuntimeExports.jsx("div",{className:`fade-screen ${i?"fade-out":""} ${c==="dark"?"bg-dark":"bg-light"}`,children:jsxRuntimeExports.jsx(LoadingSpinner,{size:200})});const E=c==="dark"?"bg-dark text-white border-secondary":"bg-white border-light";return jsxRuntimeExports.jsxs("div",{className:"container py-4 min-vh-100 d-flex flex-column",children:[jsxRuntimeExports.jsx("div",{className:`card p-3 mb-4 shadow-sm ${c==="dark"?"bg-dark text-white border-secondary":"bg-white border-light"}`,style:{borderRadius:"1rem",maxWidth:"800px",margin:"0 auto"},children:jsxRuntimeExports.jsxs("div",{className:"d-flex align-items-center",children:[jsxRuntimeExports.jsx(FaHistory,{size:10,className:"me-2"}),jsxRuntimeExports.jsx("h3",{className:"mb-0",children:"Мои активности"}),jsxRuntimeExports.jsx("button",{className:"btn btn-link ms-auto",title:"Закрыть",onClick:()=>s(-1),children:jsxRuntimeExports.jsx(FaTimes,{size:18})})]})}),jsxRuntimeExports.jsx("div",{className:`card shadow-sm mb-4 flex-fill overflow-auto ${c==="dark"?"bg-dark border-secondary":"bg-white border-light"}`,style:{borderRadius:"1rem",maxWidth:"800px",margin:"0 auto",width:"100%"},children:jsxRuntimeExports.jsx("ul",{className:"list-group list-group-flush",children:(x||[]).map(T=>jsxRuntimeExports.jsx("li",{className:`list-group-item d-flex flex-column gap-1 ${E} ${T.isRead?"":"fw-bold border-start border-4 border-primary-subtle"}`,style:{transition:"background 0.3s",borderRadius:"0.5rem"},children:P({...T.activity,isRead:T.isRead})},T.activity.id))})}),g>1&&jsxRuntimeExports.jsx("nav",{className:"d-flex justify-content-center mb-5 mt-3",children:jsxRuntimeExports.jsxs("ul",{className:"pagination mb-0",children:[jsxRuntimeExports.jsx("li",{className:`page-item ${f===1?"disabled":""}`,children:jsxRuntimeExports.jsx("button",{className:"page-link",onClick:()=>p(T=>T-1),children:jsxRuntimeExports.jsx(FaChevronLeft,{})})}),Array.from({length:g},(T,C)=>C+1).map(T=>jsxRuntimeExports.jsx("li",{className:`page-item ${T===f?"active":""}`,children:jsxRuntimeExports.jsx("button",{className:"page-link",onClick:()=>p(T),children:T})},T)),jsxRuntimeExports.jsx("li",{className:`page-item ${f===g?"disabled":""}`,children:jsxRuntimeExports.jsx("button",{className:"page-link",onClick:()=>p(T=>T+1),children:jsxRuntimeExports.jsx(FaChevronRight,{})})})]})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>s(-1),children:"Закрыть"})})]})}function App(){const[s,t]=reactExports.useState(()=>sessionStorage.getItem("token")),e=i=>{t(i),sessionStorage.setItem("token",i)},n=()=>{t(null),sessionStorage.removeItem("token")};return jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:s?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):jsxRuntimeExports.jsx(AuthPage,{onLogin:e})}),jsxRuntimeExports.jsx(Route,{path:"/",element:s?jsxRuntimeExports.jsx(Dashboard,{onLogout:n}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/documents",element:s?jsxRuntimeExports.jsx(DocumentsPage,{onBackToDashboard:()=>window.location.href="/"}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/rooms/create",element:s?jsxRuntimeExports.jsx(CreateRoomPage,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/documents/:parentId/update",element:jsxRuntimeExports.jsx(UpdateDocumentPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/rooms/:id",element:s?jsxRuntimeExports.jsx(RoomPage,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/room-manager",element:jsxRuntimeExports.jsx(RoomManagerPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/activities",element:jsxRuntimeExports.jsx(ActivitiesPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:s?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):jsxRuntimeExports.jsx(ForgotPasswordPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/documents/create",element:s?jsxRuntimeExports.jsx(CreateDocumentPage,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/403",element:jsxRuntimeExports.jsx(Forbidden,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(AlertProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(App,{})})})})}));
